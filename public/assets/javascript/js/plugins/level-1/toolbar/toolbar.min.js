if(typeof Object.create!=="function"){Object.create=function(b){function a(){}a.prototype=b;return new a()}}(function(d,c,b,e){var a={init:function(g,h){var f=this;f.elem=h;f.$elem=d(h);f.options=d.extend({},d.fn.toolbar.options,g);f.metadata=f.$elem.data();f.overrideOptions();f.toolbar=d('<div class="tool-container" />').addClass("tool-"+f.options.position).addClass("toolbar-"+f.options.style).append('<div class="tool-items" />').append('<div class="arrow" />').appendTo("body").css("opacity",0).hide();f.toolbar_arrow=f.toolbar.find(".arrow");f.initializeToolbar()},overrideOptions:function(){var f=this;d.each(f.options,function(g){if(typeof(f.$elem.data("toolbar-"+g))!="undefined"){f.options[g]=f.$elem.data("toolbar-"+g)}})},initializeToolbar:function(){var f=this;f.populateContent();f.setTrigger();f.toolbarWidth=f.toolbar.width()},setTrigger:function(){var f=this;if(f.options.event!="click"){var h;function g(){if(f.$elem.hasClass("pressed")){h=setTimeout(function(){f.hide()},150)}else{clearTimeout(h)}}f.$elem.on({mouseenter:function(i){if(f.$elem.hasClass("pressed")){clearTimeout(h)}else{f.show()}}});f.$elem.parent().on({mouseleave:function(i){g()}});d(".tool-container").on({mouseenter:function(i){clearTimeout(h)},mouseleave:function(i){g()}})}if(f.options.event=="click"){f.$elem.on("click",function(i){i.preventDefault();if(f.$elem.hasClass("pressed")){f.hide()}else{f.show()}});if(f.options.hideOnClick){d("html").on("click.toolbar",function(i){if(i.target!=f.elem&&f.$elem.has(i.target).length===0&&f.toolbar.has(i.target).length===0&&f.toolbar.is(":visible")){f.hide()}})}}if(f.options.hover){var h;function g(){if(f.$elem.hasClass("pressed")){h=setTimeout(function(){f.hide()},150)}else{clearTimeout(h)}}f.$elem.on({mouseenter:function(i){if(f.$elem.hasClass("pressed")){clearTimeout(h)}else{f.show()}}});f.$elem.parent().on({mouseleave:function(i){g()}});d(".tool-container").on({mouseenter:function(i){clearTimeout(h)},mouseleave:function(i){g()}})}d(c).resize(function(i){i.stopPropagation();if(f.toolbar.is(":visible")){f.toolbarCss=f.getCoordinates(f.options.position,20);f.collisionDetection();f.toolbar.css(f.toolbarCss);f.toolbar_arrow.css(f.arrowCss)}})},populateContent:function(){var g=this;var f=g.toolbar.find(".tool-items");var h=d(g.options.content).clone(true).find("a").addClass("tool-item");f.html(h);f.find(".tool-item").on("click",function(i){i.preventDefault();g.$elem.trigger("toolbarItemClick",this)})},calculatePosition:function(){var f=this;f.arrowCss={};f.toolbarCss=f.getCoordinates(f.options.position,f.options.adjustment);f.toolbarCss.position="absolute";f.toolbarCss.zIndex=f.options.zIndex;f.collisionDetection();f.toolbar.css(f.toolbarCss);f.toolbar_arrow.css(f.arrowCss)},getCoordinates:function(f,h){var g=this;g.coordinates=g.$elem.offset();if(g.options.adjustment&&g.options.adjustment[g.options.position]){h=g.options.adjustment[g.options.position]+h}switch(g.options.position){case"top":return{left:g.coordinates.left-(g.toolbar.width()/2)+(g.$elem.outerWidth()/2),top:g.coordinates.top-g.$elem.outerHeight()-h,right:"auto"};case"left":return{left:g.coordinates.left-(g.toolbar.width()/2)-(g.$elem.outerWidth()/2)-h,top:g.coordinates.top-(g.toolbar.height()/2)+(g.$elem.outerHeight()/2),right:"auto"};case"right":return{left:g.coordinates.left+(g.toolbar.width()/2)+(g.$elem.outerWidth()/2)+h,top:g.coordinates.top-(g.toolbar.height()/2)+(g.$elem.outerHeight()/2),right:"auto"};case"bottom":return{left:g.coordinates.left-(g.toolbar.width()/2)+(g.$elem.outerWidth()/2),top:g.coordinates.top+g.$elem.outerHeight()+h,right:"auto"}}},collisionDetection:function(){var f=this;var g=20;if(f.options.position=="top"||f.options.position=="bottom"){f.arrowCss={left:"50%",right:"50%"};if(f.toolbarCss.left<g){f.toolbarCss.left=g;f.arrowCss.left=f.$elem.offset().left+f.$elem.width()/2-(g)}else{if((d(c).width()-(f.toolbarCss.left+f.toolbarWidth))<g){f.toolbarCss.right=g;f.toolbarCss.left="auto";f.arrowCss.left="auto";f.arrowCss.right=(d(c).width()-f.$elem.offset().left)-(f.$elem.width()/2)-(g)-5}}}},show:function(){var f=this;f.$elem.addClass("pressed");f.calculatePosition();f.toolbar.show().css({opacity:1}).addClass("animate-"+f.options.animation);f.$elem.trigger("toolbarShown")},hide:function(){var f=this;var g={opacity:0};f.$elem.removeClass("pressed");switch(f.options.position){case"top":g.top="+=20";break;case"left":g.left="+=20";break;case"right":g.left="-=20";break;case"bottom":g.top="-=20";break}f.toolbar.animate(g,200,function(){f.toolbar.hide()});f.$elem.trigger("toolbarHidden")},getToolbarElement:function(){return this.toolbar.find(".tool-items")}};d.fn.toolbar=function(g){if(d.isPlainObject(g)){return this.each(function(){var i=Object.create(a);i.init(g,this);d(this).data("toolbarObj",i)})}else{if(typeof g==="string"&&g.indexOf("_")!==0){var f=d(this).data("toolbarObj");var h=f[g];return h.apply(f,d.makeArray(arguments).slice(1))}}};d.fn.toolbar.options={content:"#myContent",position:"top",hideOnClick:false,zIndex:120,hover:false,style:"default",animation:"standard",adjustment:10}})(jQuery,window,document);