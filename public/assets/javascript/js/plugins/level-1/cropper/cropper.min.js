/*!
 * Cropper v4.0.0
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2018 Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2018-04-01T06:27:27.267Z
 */
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?a(require("jquery")):typeof define==="function"&&define.amd?define(["jquery"],a):(a(b.jQuery))}(this,(function(by){by=by&&by.hasOwnProperty("default")?by["default"]:by;var Z=typeof window!=="undefined";var aq=Z?window:{};var H="cropper";var aa="all";var a6="crop";var bx="move";var B="zoom";var at="e";var Q="w";var c="s";var bL="n";var aT="ne";var aw="nw";var f="se";var bz="sw";var bo=H+"-crop";var g=H+"-disabled";var h=H+"-hidden";var ag=H+"-hide";var af=H+"-invisible";var bd=H+"-modal";var bO=H+"-move";var be="action";var aU="preview";var am="crop";var aI="move";var ao="none";var bB="crop";var aS="cropend";var bI="cropmove";var z="cropstart";var bD="dblclick";var aB="load";var bl=aq.PointerEvent?"pointerdown":"touchstart mousedown";var bt=aq.PointerEvent?"pointermove":"touchmove mousemove";var bE=aq.PointerEvent?"pointerup pointercancel":"touchend touchcancel mouseup";var ah="ready";var au="resize";var aD="wheel mousewheel DOMMouseScroll";var al="zoom";var M=/^(?:e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/;var a1=/^data:/;var bs=/^data:image\/jpeg;base64,/;var a2=/^(?:img|canvas)$/i;var O={viewMode:0,dragMode:am,aspectRatio:NaN,data:null,preview:"",responsive:true,restore:true,checkCrossOrigin:true,checkOrientation:true,modal:true,guides:true,center:true,highlight:true,background:true,autoCrop:true,autoCropArea:0.8,movable:true,rotatable:true,scalable:true,zoomable:true,zoomOnTouch:true,zoomOnWheel:true,wheelZoomRatio:0.1,cropBoxMovable:true,cropBoxResizable:true,toggleDragModeOnDblclick:true,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null};var ai='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>';var C=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(bR){return typeof bR}:function(bR){return bR&&typeof Symbol==="function"&&bR.constructor===Symbol&&bR!==Symbol.prototype?"symbol":typeof bR};var aE=function(bR,bS){if(!(bR instanceof bS)){throw new TypeError("Cannot call a class as a function")}};var a=function(){function bR(bV,bT){for(var bS=0;bS<bT.length;bS++){var bU=bT[bS];bU.enumerable=bU.enumerable||false;bU.configurable=true;if("value" in bU){bU.writable=true}Object.defineProperty(bV,bU.key,bU)}}return function(bU,bS,bT){if(bS){bR(bU.prototype,bS)}if(bT){bR(bU,bT)}return bU}}();var bH=function(bR){if(Array.isArray(bR)){for(var bT=0,bS=Array(bR.length);bT<bR.length;bT++){bS[bT]=bR[bT]}return bS}else{return Array.from(bR)}};var aA=Number.isNaN||aq.isNaN;function ab(bR){return typeof bR==="number"&&!aA(bR)}function aJ(bR){return typeof bR==="undefined"}function bN(bR){return(typeof bR==="undefined"?"undefined":C(bR))==="object"&&bR!==null}var E=Object.prototype.hasOwnProperty;function v(bS){if(!bN(bS)){return false}try{var bU=bS.constructor;var bR=bU.prototype;return bU&&bR&&E.call(bR,"isPrototypeOf")}catch(bT){return false}}function o(bR){return typeof bR==="function"}function an(bT,bU){if(bT&&o(bU)){if(Array.isArray(bT)||ab(bT.length)){var bS=bT.length;var bR=void 0;for(bR=0;bR<bS;bR+=1){if(bU.call(bT,bT[bR],bR,bT)===false){break}}}else{if(bN(bT)){Object.keys(bT).forEach(function(bV){bU.call(bT,bT[bV],bV,bT)})}}}return bT}var ac=Object.assign||function ac(bU){for(var bR=arguments.length,bS=Array(bR>1?bR-1:0),bT=1;bT<bR;bT++){bS[bT-1]=arguments[bT]}if(bN(bU)&&bS.length>0){bS.forEach(function(bV){if(bN(bV)){Object.keys(bV).forEach(function(bW){bU[bW]=bV[bW]})}})}return bU};var bb=/\.\d*(?:0|9){12}\d*$/i;function bf(bR){var bS=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100000000000;return bb.test(bR)?Math.round(bR*bS)/bS:bR}var i=/^(?:width|height|left|top|marginLeft|marginTop)$/;function N(bR,bT){var bS=bR.style;an(bT,function(bV,bU){if(i.test(bU)&&ab(bV)){bV+="px"}bS[bU]=bV})}function x(bR,bS){return bR.classList?bR.classList.contains(bS):bR.className.indexOf(bS)>-1}function w(bR,bT){if(!bT){return}if(ab(bR.length)){an(bR,function(bU){w(bU,bT)});return}if(bR.classList){bR.classList.add(bT);return}var bS=bR.className.trim();if(!bS){bR.className=bT}else{if(bS.indexOf(bT)<0){bR.className=bS+" "+bT}}}function aY(bR,bS){if(!bS){return}if(ab(bR.length)){an(bR,function(bT){aY(bT,bS)});return}if(bR.classList){bR.classList.remove(bS);return}if(bR.className.indexOf(bS)>=0){bR.className=bR.className.replace(bS,"")}}function aW(bR,bT,bS){if(!bT){return}if(ab(bR.length)){an(bR,function(bU){aW(bU,bT,bS)});return}if(bS){w(bR,bT)}else{aY(bR,bT)}}var a3=/([a-z\d])([A-Z])/g;function bu(bR){return bR.replace(a3,"$1-$2").toLowerCase()}function a8(bS,bR){if(bN(bS[bR])){return bS[bR]}else{if(bS.dataset){return bS.dataset[bR]}}return bS.getAttribute("data-"+bu(bR))}function ap(bS,bR,bT){if(bN(bT)){bS[bR]=bT}else{if(bS.dataset){bS.dataset[bR]=bT}else{bS.setAttribute("data-"+bu(bR),bT)}}}function q(bS,bR){if(bN(bS[bR])){try{delete bS[bR]}catch(bT){bS[bR]=undefined}}else{if(bS.dataset){try{delete bS.dataset[bR]}catch(bT){bS.dataset[bR]=undefined}}else{bS.removeAttribute("data-"+bu(bR))}}}var D=/\s\s*/;var aC=function(){var bR=false;if(Z){var bV=false;var bW=function bW(){};var bU=Object.defineProperty({},"once",{get:function bT(){bR=true;return bV},set:function bS(bX){bV=bX}});aq.addEventListener("test",bW,bU);aq.removeEventListener("test",bW,bU)}return bR}();function k(bS,bU,bV){var bR=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var bT=bV;bU.trim().split(D).forEach(function(bX){if(!aC){var bW=bS.listeners;if(bW&&bW[bX]&&bW[bX][bV]){bT=bW[bX][bV];delete bW[bX][bV];if(Object.keys(bW[bX]).length===0){delete bW[bX]}if(Object.keys(bW).length===0){delete bS.listeners}}}bS.removeEventListener(bX,bT,bR)})}function bk(bT,bU,bV){var bS=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var bR=bV;bU.trim().split(D).forEach(function(bZ){if(bS.once&&!aC){var bW=bT.listeners,bY=bW===undefined?{}:bW;bR=function bX(){for(var b0=arguments.length,b2=Array(b0),b1=0;b1<b0;b1++){b2[b1]=arguments[b1]}delete bY[bZ][bV];bT.removeEventListener(bZ,bR,bS);bV.apply(bT,b2)};if(!bY[bZ]){bY[bZ]={}}if(bY[bZ][bV]){bT.removeEventListener(bZ,bY[bZ][bV],bS)}bY[bZ][bV]=bR;bT.listeners=bY}bT.addEventListener(bZ,bR,bS)})}function aN(bR,bS,bU){var bT=void 0;if(o(Event)&&o(CustomEvent)){bT=new CustomEvent(bS,{detail:bU,bubbles:true,cancelable:true})}else{bT=document.createEvent("CustomEvent");bT.initCustomEvent(bS,true,true,bU)}return bR.dispatchEvent(bT)}function bM(bR){var bS=bR.getBoundingClientRect();return{left:bS.left+(window.pageXOffset-document.documentElement.clientLeft),top:bS.top+(window.pageYOffset-document.documentElement.clientTop)}}var aG=aq.location;var aK=/^(https?:)\/\/([^:/?#]+):?(\d*)/i;function ba(bR){var bS=bR.match(aK);return bS&&(bS[1]!==aG.protocol||bS[2]!==aG.hostname||bS[3]!==aG.port)}function bF(bR){var bS="timestamp="+new Date().getTime();return bR+(bR.indexOf("?")===-1?"?":"&")+bS}function F(bW){var bV=bW.rotate,bU=bW.scaleX,bS=bW.scaleY,bY=bW.translateX,bX=bW.translateY;var bR=[];if(ab(bY)&&bY!==0){bR.push("translateX("+bY+"px)")}if(ab(bX)&&bX!==0){bR.push("translateY("+bX+"px)")}if(ab(bV)&&bV!==0){bR.push("rotate("+bV+"deg)")}if(ab(bU)&&bU!==1){bR.push("scaleX("+bU+")")}if(ab(bS)&&bS!==1){bR.push("scaleY("+bS+")")}var bT=bR.length?bR.join(" "):"none";return{WebkitTransform:bT,msTransform:bT,transform:bT}}function a7(bR){var bT=ac({},bR);var bS=[];an(bR,function(bV,bU){delete bT[bU];an(bT,function(bW){var bY=Math.abs(bV.startX-bW.startX);var b1=Math.abs(bV.startY-bW.startY);var bX=Math.abs(bV.endX-bW.endX);var bZ=Math.abs(bV.endY-bW.endY);var b3=Math.sqrt(bY*bY+b1*b1);var b2=Math.sqrt(bX*bX+bZ*bZ);var b0=(b2-b3)/b3;bS.push(b0)})});bS.sort(function(bV,bU){return Math.abs(bV)<Math.abs(bU)});return bS[0]}function av(bV,bU){var bT=bV.pageX,bS=bV.pageY;var bR={endX:bT,endY:bS};return bU?bR:ac({startX:bT,startY:bS},bR)}function bj(bR){var bT=0;var bS=0;var bU=0;an(bR,function(bX){var bW=bX.startX,bV=bX.startY;bT+=bW;bS+=bV;bU+=1});bT/=bU;bS/=bU;return{pageX:bT,pageY:bS}}var u=Number.isFinite||aq.isFinite;function bm(bX){var bW=bX.aspectRatio,bR=bX.height,bV=bX.width;var bU=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"contain";var bS=function bS(bY){return u(bY)&&bY>0};if(bS(bV)&&bS(bR)){var bT=bR*bW;if(bU==="contain"&&bT>bV||bU==="cover"&&bT<bV){bR=bV/bW}else{bV=bR*bW}}else{if(bS(bV)){bR=bV/bW}else{if(bS(bR)){bV=bR*bW}}}return{width:bV,height:bR}}function bh(bU){var bS=bU.width,bZ=bU.height,bV=bU.degree;bV=Math.abs(bV)%180;if(bV===90){return{width:bZ,height:bS}}var bT=bV%90*Math.PI/180;var bX=Math.sin(bT);var bY=Math.cos(bT);var bW=bS*bY+bZ*bX;var bR=bS*bX+bZ*bY;return bV>90?{width:bR,height:bW}:{width:bW,height:bR}}function aZ(bU,bZ,bY,bW){var cb=bZ.aspectRatio,co=bZ.naturalWidth,cj=bZ.naturalHeight,ci=bZ.rotate,cs=ci===undefined?0:ci,b6=bZ.scaleX,cm=b6===undefined?1:b6,b4=bZ.scaleY,cl=b4===undefined?1:b4;var cd=bY.aspectRatio,bX=bY.naturalWidth,b0=bY.naturalHeight;var ct=bW.fillColor,cv=ct===undefined?"transparent":ct,cn=bW.imageSmoothingEnabled,b3=cn===undefined?true:cn,ce=bW.imageSmoothingQuality,b1=ce===undefined?"low":ce,cg=bW.maxWidth,cc=cg===undefined?Infinity:cg,cp=bW.maxHeight,cr=cp===undefined?Infinity:cp,b9=bW.minWidth,b2=b9===undefined?0:b9,b5=bW.minHeight,ca=b5===undefined?0:b5;var bV=document.createElement("canvas");var cu=bV.getContext("2d");var cq=bm({aspectRatio:cd,width:cc,height:cr});var ck=bm({aspectRatio:cd,width:b2,height:ca},"cover");var bR=Math.min(cq.width,Math.max(ck.width,bX));var bT=Math.min(cq.height,Math.max(ck.height,b0));var cf=bm({aspectRatio:cb,width:cc,height:cr});var b8=bm({aspectRatio:cb,width:b2,height:ca},"cover");var b7=Math.min(cf.width,Math.max(b8.width,co));var ch=Math.min(cf.height,Math.max(b8.height,cj));var bS=[-b7/2,-ch/2,b7,ch];bV.width=bf(bR);bV.height=bf(bT);cu.fillStyle=cv;cu.fillRect(0,0,bR,bT);cu.save();cu.translate(bR/2,bT/2);cu.rotate(cs*Math.PI/180);cu.scale(cm,cl);cu.imageSmoothingEnabled=b3;cu.imageSmoothingQuality=b1;cu.drawImage.apply(cu,[bU].concat(bH(bS.map(function(cw){return Math.floor(bf(cw))}))));cu.restore();return bV}var r=String.fromCharCode;function J(bU,bV,bS){var bT="";var bR=void 0;bS+=bV;for(bR=bV;bR<bS;bR+=1){bT+=r(bU.getUint8(bR))}return bT}var V=/^data:.*,/;function az(bU){var bS=bU.replace(V,"");var bV=atob(bS);var bT=new ArrayBuffer(bV.length);var bR=new Uint8Array(bT);an(bR,function(bX,bW){bR[bW]=bV.charCodeAt(bW)});return bT}function U(bS,bU){var bR=new Uint8Array(bS);var bT="";an(bR,function(bV){bT+=r(bV)});return"data:"+bU+";base64,"+btoa(bT)}function ax(bY){var b2=new DataView(bY);var bT=void 0;var bS=void 0;var bX=void 0;var b5=void 0;if(b2.getUint8(0)===255&&b2.getUint8(1)===216){var bU=b2.byteLength;var bV=2;while(bV<bU){if(b2.getUint8(bV)===255&&b2.getUint8(bV+1)===225){bX=bV;break}bV+=1}}if(bX){var b4=bX+4;var b1=bX+10;if(J(b2,b4,4)==="Exif"){var b0=b2.getUint16(b1);bS=b0===18761;if(bS||b0===19789){if(b2.getUint16(b1+2,bS)===42){var bR=b2.getUint32(b1+4,bS);if(bR>=8){b5=b1+bR}}}}}if(b5){var bZ=b2.getUint16(b5,bS);var b3=void 0;var bW=void 0;for(bW=0;bW<bZ;bW+=1){b3=b5+bW*12+2;if(b2.getUint16(b3,bS)===274){b3+=8;bT=b2.getUint16(b3,bS);b2.setUint16(b3,1,bS);break}}}return bT}function l(bS){var bU=0;var bT=1;var bR=1;switch(bS){case 2:bT=-1;break;case 3:bU=-180;break;case 4:bR=-1;break;case 5:bU=90;bR=-1;break;case 6:bU=90;break;case 7:bU=90;bT=-1;break;case 8:bU=-90;break;default:}return{rotate:bU,scaleX:bT,scaleY:bR}}var S={render:function S(){this.initContainer();this.initCanvas();this.initCropBox();this.renderCanvas();if(this.cropped){this.renderCropBox()}},initContainer:function bg(){var bU=this.element,bT=this.options,bS=this.container,bV=this.cropper;w(bV,h);aY(bU,h);var bR={width:Math.max(bS.offsetWidth,Number(bT.minContainerWidth)||200),height:Math.max(bS.offsetHeight,Number(bT.minContainerHeight)||100)};this.containerData=bR;N(bV,{width:bR.width,height:bR.height});w(bU,h);aY(bV,h)},initCanvas:function bi(){var bY=this.containerData,bR=this.imageData;var bT=this.options.viewMode;var bS=Math.abs(bR.rotate)%180===90;var bX=bS?bR.naturalHeight:bR.naturalWidth;var bZ=bS?bR.naturalWidth:bR.naturalHeight;var b0=bX/bZ;var bU=bY.width;var bW=bY.height;if(bY.height*b0>bY.width){if(bT===3){bU=bY.height*b0}else{bW=bY.width/b0}}else{if(bT===3){bW=bY.width/b0}else{bU=bY.height*b0}}var bV={aspectRatio:b0,naturalWidth:bX,naturalHeight:bZ,width:bU,height:bW};bV.left=(bY.width-bU)/2;bV.top=(bY.height-bW)/2;bV.oldLeft=bV.left;bV.oldTop=bV.top;this.canvasData=bV;this.limited=bT===1||bT===2;this.limitCanvas(true,true);this.initialImageData=ac({},bR);this.initialCanvasData=ac({},bV)},limitCanvas:function bc(bR,bW){var b4=this.options,bY=this.containerData,bX=this.canvasData,bU=this.cropBoxData;var bV=b4.viewMode;var b2=bX.aspectRatio;var b1=this.cropped&&bU;if(bR){var b3=Number(b4.minCanvasWidth)||0;var bZ=Number(b4.minCanvasHeight)||0;if(bV>1){b3=Math.max(b3,bY.width);bZ=Math.max(bZ,bY.height);if(bV===3){if(bZ*b2>b3){b3=bZ*b2}else{bZ=b3/b2}}}else{if(bV>0){if(b3){b3=Math.max(b3,b1?bU.width:0)}else{if(bZ){bZ=Math.max(bZ,b1?bU.height:0)}else{if(b1){b3=bU.width;bZ=bU.height;if(bZ*b2>b3){b3=bZ*b2}else{bZ=b3/b2}}}}}}var bS=bm({aspectRatio:b2,width:b3,height:bZ});b3=bS.width;bZ=bS.height;bX.minWidth=b3;bX.minHeight=bZ;bX.maxWidth=Infinity;bX.maxHeight=Infinity}if(bW){if(bV){var bT=bY.width-bX.width;var b0=bY.height-bX.height;bX.minLeft=Math.min(0,bT);bX.minTop=Math.min(0,b0);bX.maxLeft=Math.max(0,bT);bX.maxTop=Math.max(0,b0);if(b1&&this.limited){bX.minLeft=Math.min(bU.left,bU.left+(bU.width-bX.width));bX.minTop=Math.min(bU.top,bU.top+(bU.height-bX.height));bX.maxLeft=bU.left;bX.maxTop=bU.top;if(bV===2){if(bX.width>=bY.width){bX.minLeft=Math.min(0,bT);bX.maxLeft=Math.max(0,bT)}if(bX.height>=bY.height){bX.minTop=Math.min(0,b0);bX.maxTop=Math.max(0,b0)}}}}else{bX.minLeft=-bX.width;bX.minTop=-bX.height;bX.maxLeft=bY.width;bX.maxTop=bY.height}}},renderCanvas:function bv(bW,bU){var bV=this.canvasData,bR=this.imageData;if(bU){var bT=bh({width:bR.naturalWidth*Math.abs(bR.scaleX||1),height:bR.naturalHeight*Math.abs(bR.scaleY||1),degree:bR.rotate||0}),bX=bT.width,bY=bT.height;var bS=bV.width*(bX/bV.naturalWidth);var bZ=bV.height*(bY/bV.naturalHeight);bV.left-=(bS-bV.width)/2;bV.top-=(bZ-bV.height)/2;bV.width=bS;bV.height=bZ;bV.aspectRatio=bX/bY;bV.naturalWidth=bX;bV.naturalHeight=bY;this.limitCanvas(true,false)}if(bV.width>bV.maxWidth||bV.width<bV.minWidth){bV.left=bV.oldLeft}if(bV.height>bV.maxHeight||bV.height<bV.minHeight){bV.top=bV.oldTop}bV.width=Math.min(Math.max(bV.width,bV.minWidth),bV.maxWidth);bV.height=Math.min(Math.max(bV.height,bV.minHeight),bV.maxHeight);this.limitCanvas(false,true);bV.left=Math.min(Math.max(bV.left,bV.minLeft),bV.maxLeft);bV.top=Math.min(Math.max(bV.top,bV.minTop),bV.maxTop);bV.oldLeft=bV.left;bV.oldTop=bV.top;N(this.canvas,ac({width:bV.width,height:bV.height},F({translateX:bV.left,translateY:bV.top})));this.renderImage(bW);if(this.cropped&&this.limited){this.limitCropBox(true,true)}},renderImage:function bw(bU){var bS=this.canvasData,bV=this.imageData;var bT=bV.naturalWidth*(bS.width/bS.naturalWidth);var bR=bV.naturalHeight*(bS.height/bS.naturalHeight);ac(bV,{width:bT,height:bR,left:(bS.width-bT)/2,top:(bS.height-bR)/2});N(this.image,ac({width:bV.width,height:bV.height},F(ac({translateX:bV.left,translateY:bV.top},bV))));if(bU){this.output()}},initCropBox:function e(){var bS=this.options,bR=this.canvasData;var bT=bS.aspectRatio;var bV=Number(bS.autoCropArea)||0.8;var bU={width:bR.width,height:bR.height};if(bT){if(bR.height*bT>bR.width){bU.height=bU.width/bT}else{bU.width=bU.height*bT}}this.cropBoxData=bU;this.limitCropBox(true,true);bU.width=Math.min(Math.max(bU.width,bU.minWidth),bU.maxWidth);bU.height=Math.min(Math.max(bU.height,bU.minHeight),bU.maxHeight);bU.width=Math.max(bU.minWidth,bU.width*bV);bU.height=Math.max(bU.minHeight,bU.height*bV);bU.left=bR.left+(bR.width-bU.width)/2;bU.top=bR.top+(bR.height-bU.height)/2;bU.oldLeft=bU.left;bU.oldTop=bU.top;this.initialCropBoxData=ac({},bU)},limitCropBox:function br(bR,bU){var b2=this.options,bW=this.containerData,bV=this.canvasData,bT=this.cropBoxData,bZ=this.limited;var b1=b2.aspectRatio;if(bR){var bS=Number(b2.minCropBoxWidth)||0;var bX=Number(b2.minCropBoxHeight)||0;var bY=Math.min(bW.width,bZ?bV.width:bW.width);var b0=Math.min(bW.height,bZ?bV.height:bW.height);bS=Math.min(bS,bW.width);bX=Math.min(bX,bW.height);if(b1){if(bS&&bX){if(bX*b1>bS){bX=bS/b1}else{bS=bX*b1}}else{if(bS){bX=bS/b1}else{if(bX){bS=bX*b1}}}if(b0*b1>bY){b0=bY/b1}else{bY=b0*b1}}bT.minWidth=Math.min(bS,bY);bT.minHeight=Math.min(bX,b0);bT.maxWidth=bY;bT.maxHeight=b0}if(bU){if(bZ){bT.minLeft=Math.max(0,bV.left);bT.minTop=Math.max(0,bV.top);bT.maxLeft=Math.min(bW.width,bV.left+bV.width)-bT.width;bT.maxTop=Math.min(bW.height,bV.top+bV.height)-bT.height}else{bT.minLeft=0;bT.minTop=0;bT.maxLeft=bW.width-bT.width;bT.maxTop=bW.height-bT.height}}},renderCropBox:function I(){var bS=this.options,bR=this.containerData,bT=this.cropBoxData;if(bT.width>bT.maxWidth||bT.width<bT.minWidth){bT.left=bT.oldLeft}if(bT.height>bT.maxHeight||bT.height<bT.minHeight){bT.top=bT.oldTop}bT.width=Math.min(Math.max(bT.width,bT.minWidth),bT.maxWidth);bT.height=Math.min(Math.max(bT.height,bT.minHeight),bT.maxHeight);this.limitCropBox(false,true);bT.left=Math.min(Math.max(bT.left,bT.minLeft),bT.maxLeft);bT.top=Math.min(Math.max(bT.top,bT.minTop),bT.maxTop);bT.oldLeft=bT.left;bT.oldTop=bT.top;if(bS.movable&&bS.cropBoxMovable){ap(this.face,be,bT.width>=bR.width&&bT.height>=bR.height?bx:aa)}N(this.cropBox,ac({width:bT.width,height:bT.height},F({translateX:bT.left,translateY:bT.top})));if(this.cropped&&this.limited){this.limitCanvas(true,true)}if(!this.disabled){this.output()}},output:function bJ(){this.preview();aN(this.element,bB,this.getData())}};var b={initPreview:function bq(){var bR=this.crossOrigin;var bV=this.options.preview;var bS=bR?this.crossOriginUrl:this.url;var bU=document.createElement("img");if(bR){bU.crossOrigin=bR}bU.src=bS;this.viewBox.appendChild(bU);this.viewBoxImage=bU;if(!bV){return}var bT=bV;if(typeof bV==="string"){bT=this.element.ownerDocument.querySelectorAll(bV)}else{if(bV.querySelector){bT=[bV]}}this.previews=bT;an(bT,function(bX){var bW=document.createElement("img");ap(bX,aU,{width:bX.offsetWidth,height:bX.offsetHeight,html:bX.innerHTML});if(bR){bW.crossOrigin=bR}bW.src=bS;bW.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"';bX.innerHTML="";bX.appendChild(bW)})},resetPreview:function bQ(){an(this.previews,function(bR){var bS=a8(bR,aU);N(bR,{width:bS.width,height:bS.height});bR.innerHTML=bS.html;q(bR,aU)})},preview:function b(){var bR=this.imageData,bW=this.canvasData,bU=this.cropBoxData;var bS=bU.width,bX=bU.height;var bT=bR.width,bZ=bR.height;var bV=bU.left-bW.left-bR.left;var bY=bU.top-bW.top-bR.top;if(!this.cropped||this.disabled){return}N(this.viewBoxImage,ac({width:bT,height:bZ},F(ac({translateX:-bV,translateY:-bY},bR))));an(this.previews,function(b1){var b5=a8(b1,aU);var b6=b5.width;var b4=b5.height;var b3=b6;var b0=b4;var b2=1;if(bS){b2=b6/bS;b0=bX*b2}if(bX&&b0>b4){b2=b4/bX;b3=bS*b2;b0=b4}N(b1,{width:b3,height:b0});N(b1.getElementsByTagName("img")[0],ac({width:bT*b2,height:bZ*b2},F(ac({translateX:-bV*b2,translateY:-bY*b2},bR))))})}};var bG={bind:function aM(){var bS=this.element,bR=this.options,bT=this.cropper;if(o(bR.cropstart)){bk(bS,z,bR.cropstart)}if(o(bR.cropmove)){bk(bS,bI,bR.cropmove)}if(o(bR.cropend)){bk(bS,aS,bR.cropend)}if(o(bR.crop)){bk(bS,bB,bR.crop)}if(o(bR.zoom)){bk(bS,al,bR.zoom)}bk(bT,bl,this.onCropStart=this.cropStart.bind(this));if(bR.zoomable&&bR.zoomOnWheel){bk(bT,aD,this.onWheel=this.wheel.bind(this))}if(bR.toggleDragModeOnDblclick){bk(bT,bD,this.onDblclick=this.dblclick.bind(this))}bk(bS.ownerDocument,bt,this.onCropMove=this.cropMove.bind(this));bk(bS.ownerDocument,bE,this.onCropEnd=this.cropEnd.bind(this));if(bR.responsive){bk(window,au,this.onResize=this.resize.bind(this))}},unbind:function a9(){var bS=this.element,bR=this.options,bT=this.cropper;if(o(bR.cropstart)){k(bS,z,bR.cropstart)}if(o(bR.cropmove)){k(bS,bI,bR.cropmove)}if(o(bR.cropend)){k(bS,aS,bR.cropend)}if(o(bR.crop)){k(bS,bB,bR.crop)}if(o(bR.zoom)){k(bS,al,bR.zoom)}k(bT,bl,this.onCropStart);if(bR.zoomable&&bR.zoomOnWheel){k(bT,aD,this.onWheel)}if(bR.toggleDragModeOnDblclick){k(bT,bD,this.onDblclick)}k(bS.ownerDocument,bt,this.onCropMove);k(bS.ownerDocument,bE,this.onCropEnd);if(bR.responsive){k(window,au,this.onResize)}}};var aX={resize:function y(){var bV=this.options,bS=this.container,bR=this.containerData;var bY=Number(bV.minContainerWidth)||200;var bT=Number(bV.minContainerHeight)||100;if(this.disabled||bR.width<=bY||bR.height<=bT){return}var bW=bS.offsetWidth/bR.width;if(bW!==1||bS.offsetHeight!==bR.height){var bU=void 0;var bX=void 0;if(bV.restore){bU=this.getCanvasData();bX=this.getCropBoxData()}this.render();if(bV.restore){this.setCanvasData(an(bU,function(b0,bZ){bU[bZ]=b0*bW}));this.setCropBoxData(an(bX,function(b0,bZ){bX[bZ]=b0*bW}))}}},dblclick:function ae(){if(this.disabled||this.options.dragMode===ao){return}this.setDragMode(x(this.dragBox,bo)?aI:am)},wheel:function m(bS){var bU=this;var bR=Number(this.options.wheelZoomRatio)||0.1;var bT=1;if(this.disabled){return}bS.preventDefault();if(this.wheeling){return}this.wheeling=true;setTimeout(function(){bU.wheeling=false},50);if(bS.deltaY){bT=bS.deltaY>0?1:-1}else{if(bS.wheelDelta){bT=-bS.wheelDelta/120}else{if(bS.detail){bT=bS.detail>0?1:-1}}}this.zoom(-bT*bR,bS)},cropStart:function a5(bU){if(this.disabled){return}var bS=this.options,bR=this.pointers;var bT=void 0;if(bU.changedTouches){an(bU.changedTouches,function(bV){bR[bV.identifier]=av(bV)})}else{bR[bU.pointerId||0]=av(bU)}if(Object.keys(bR).length>1&&bS.zoomable&&bS.zoomOnTouch){bT=B}else{bT=a8(bU.target,be)}if(!M.test(bT)){return}if(aN(this.element,z,{originalEvent:bU,action:bT})===false){return}bU.preventDefault();this.action=bT;this.cropping=false;if(bT===a6){this.cropping=true;w(this.dragBox,bd)}},cropMove:function aQ(bT){var bS=this.action;if(this.disabled||!bS){return}var bR=this.pointers;bT.preventDefault();if(aN(this.element,bI,{originalEvent:bT,action:bS})===false){return}if(bT.changedTouches){an(bT.changedTouches,function(bU){ac(bR[bU.identifier],av(bU,true))})}else{ac(bR[bT.pointerId||0],av(bT,true))}this.change(bT)},cropEnd:function bn(bT){if(this.disabled){return}var bS=this.action,bR=this.pointers;if(bT.changedTouches){an(bT.changedTouches,function(bU){delete bR[bU.identifier]})}else{delete bR[bT.pointerId||0]}if(!bS){return}bT.preventDefault();if(!Object.keys(bR).length){this.action=""}if(this.cropping){this.cropping=false;aW(this.dragBox,bd,this.cropped&&this.options.modal)}aN(this.element,aS,{originalEvent:bT,action:bS})}};var aH={change:function aH(cb){var bT=this.options,bZ=this.canvasData,bS=this.containerData,b4=this.cropBoxData,bY=this.pointers;var b9=this.action;var bR=bT.aspectRatio;var bU=b4.left,b1=b4.top,b7=b4.width,b2=b4.height;var cd=bU+b7;var bW=b1+b2;var b3=0;var bX=0;var ca=bS.width;var b6=bS.height;var b5=true;var bV=void 0;if(!bR&&cb.shiftKey){bR=b7&&b2?b7/b2:1}if(this.limited){b3=b4.minLeft;bX=b4.minTop;ca=b3+Math.min(bS.width,bZ.width,bZ.left+bZ.width);b6=bX+Math.min(bS.height,bZ.height,bZ.top+bZ.height)}var b8=bY[Object.keys(bY)[0]];var b0={x:b8.endX-b8.startX,y:b8.endY-b8.startY};var cc=function cc(ce){switch(ce){case at:if(cd+b0.x>ca){b0.x=ca-cd}break;case Q:if(bU+b0.x<b3){b0.x=b3-bU}break;case bL:if(b1+b0.y<bX){b0.y=bX-b1}break;case c:if(bW+b0.y>b6){b0.y=b6-bW}break;default:}};switch(b9){case aa:bU+=b0.x;b1+=b0.y;break;case at:if(b0.x>=0&&(cd>=ca||bR&&(b1<=bX||bW>=b6))){b5=false;break}cc(at);b7+=b0.x;if(bR){b2=b7/bR;b1-=b0.x/bR/2}if(b7<0){b9=Q;b7=0}break;case bL:if(b0.y<=0&&(b1<=bX||bR&&(bU<=b3||cd>=ca))){b5=false;break}cc(bL);b2-=b0.y;b1+=b0.y;if(bR){b7=b2*bR;bU+=b0.y*bR/2}if(b2<0){b9=c;b2=0}break;case Q:if(b0.x<=0&&(bU<=b3||bR&&(b1<=bX||bW>=b6))){b5=false;break}cc(Q);b7-=b0.x;bU+=b0.x;if(bR){b2=b7/bR;b1+=b0.x/bR/2}if(b7<0){b9=at;b7=0}break;case c:if(b0.y>=0&&(bW>=b6||bR&&(bU<=b3||cd>=ca))){b5=false;break}cc(c);b2+=b0.y;if(bR){b7=b2*bR;bU-=b0.y*bR/2}if(b2<0){b9=bL;b2=0}break;case aT:if(bR){if(b0.y<=0&&(b1<=bX||cd>=ca)){b5=false;break}cc(bL);b2-=b0.y;b1+=b0.y;b7=b2*bR}else{cc(bL);cc(at);if(b0.x>=0){if(cd<ca){b7+=b0.x}else{if(b0.y<=0&&b1<=bX){b5=false}}}else{b7+=b0.x}if(b0.y<=0){if(b1>bX){b2-=b0.y;b1+=b0.y}}else{b2-=b0.y;b1+=b0.y}}if(b7<0&&b2<0){b9=bz;b2=0;b7=0}else{if(b7<0){b9=aw;b7=0}else{if(b2<0){b9=f;b2=0}}}break;case aw:if(bR){if(b0.y<=0&&(b1<=bX||bU<=b3)){b5=false;break}cc(bL);b2-=b0.y;b1+=b0.y;b7=b2*bR;bU+=b0.y*bR}else{cc(bL);cc(Q);if(b0.x<=0){if(bU>b3){b7-=b0.x;bU+=b0.x}else{if(b0.y<=0&&b1<=bX){b5=false}}}else{b7-=b0.x;bU+=b0.x}if(b0.y<=0){if(b1>bX){b2-=b0.y;b1+=b0.y}}else{b2-=b0.y;b1+=b0.y}}if(b7<0&&b2<0){b9=f;b2=0;b7=0}else{if(b7<0){b9=aT;b7=0}else{if(b2<0){b9=bz;b2=0}}}break;case bz:if(bR){if(b0.x<=0&&(bU<=b3||bW>=b6)){b5=false;break}cc(Q);b7-=b0.x;bU+=b0.x;b2=b7/bR}else{cc(c);cc(Q);if(b0.x<=0){if(bU>b3){b7-=b0.x;bU+=b0.x}else{if(b0.y>=0&&bW>=b6){b5=false}}}else{b7-=b0.x;bU+=b0.x}if(b0.y>=0){if(bW<b6){b2+=b0.y}}else{b2+=b0.y}}if(b7<0&&b2<0){b9=aT;b2=0;b7=0}else{if(b7<0){b9=f;b7=0}else{if(b2<0){b9=aw;b2=0}}}break;case f:if(bR){if(b0.x>=0&&(cd>=ca||bW>=b6)){b5=false;break}cc(at);b7+=b0.x;b2=b7/bR}else{cc(c);cc(at);if(b0.x>=0){if(cd<ca){b7+=b0.x}else{if(b0.y>=0&&bW>=b6){b5=false}}}else{b7+=b0.x}if(b0.y>=0){if(bW<b6){b2+=b0.y}}else{b2+=b0.y}}if(b7<0&&b2<0){b9=aw;b2=0;b7=0}else{if(b7<0){b9=bz;b7=0}else{if(b2<0){b9=aT;b2=0}}}break;case bx:this.move(b0.x,b0.y);b5=false;break;case B:this.zoom(a7(bY),cb);b5=false;break;case a6:if(!b0.x||!b0.y){b5=false;break}bV=bM(this.cropper);bU=b8.startX-bV.left;b1=b8.startY-bV.top;b7=b4.minWidth;b2=b4.minHeight;if(b0.x>0){b9=b0.y>0?f:aT}else{if(b0.x<0){bU-=b7;b9=b0.y>0?bz:aw}}if(b0.y<0){b1-=b2}if(!this.cropped){aY(this.cropBox,h);this.cropped=true;if(this.limited){this.limitCropBox(true,true)}}break;default:}if(b5){b4.width=b7;b4.height=b2;b4.left=bU;b4.top=b1;this.action=b9;this.renderCropBox()}an(bY,function(ce){ce.startX=ce.endX;ce.startY=ce.endY})}};var ar={crop:function p(){if(this.ready&&!this.cropped&&!this.disabled){this.cropped=true;this.limitCropBox(true,true);if(this.options.modal){w(this.dragBox,bd)}aY(this.cropBox,h);this.setCropBoxData(this.initialCropBoxData)}return this},reset:function a4(){if(this.ready&&!this.disabled){this.imageData=ac({},this.initialImageData);this.canvasData=ac({},this.initialCanvasData);this.cropBoxData=ac({},this.initialCropBoxData);this.renderCanvas();if(this.cropped){this.renderCropBox()}}return this},clear:function bA(){if(this.cropped&&!this.disabled){ac(this.cropBoxData,{left:0,top:0,width:0,height:0});this.cropped=false;this.renderCropBox();this.limitCanvas(true,true);this.renderCanvas();aY(this.dragBox,bd);w(this.cropBox,h)}return this},replace:function aO(bS){var bR=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!this.disabled&&bS){if(this.isImg){this.element.src=bS}if(bR){this.url=bS;this.image.src=bS;if(this.ready){this.viewBoxImage.src=bS;an(this.previews,function(bT){bT.getElementsByTagName("img")[0].src=bS})}}else{if(this.isImg){this.replaced=true}this.options.data=null;this.uncreate();this.load(bS)}}return this},enable:function n(){if(this.ready&&this.disabled){this.disabled=false;aY(this.cropper,g)}return this},disable:function ay(){if(this.ready&&!this.disabled){this.disabled=true;w(this.cropper,g)}return this},destroy:function s(){var bR=this.element;if(!a8(bR,H)){return this}if(this.isImg&&this.replaced){bR.src=this.originalUrl}this.uncreate();q(bR,H);return this},move:function G(bR){var bV=arguments.length>1&&arguments[1]!==undefined?arguments[1]:bR;var bS=this.canvasData,bU=bS.left,bT=bS.top;return this.moveTo(aJ(bR)?bR:bU+Number(bR),aJ(bV)?bV:bT+Number(bV))},moveTo:function bp(bR){var bU=arguments.length>1&&arguments[1]!==undefined?arguments[1]:bR;var bS=this.canvasData;var bT=false;bR=Number(bR);bU=Number(bU);if(this.ready&&!this.disabled&&this.options.movable){if(ab(bR)){bS.left=bR;bT=true}if(ab(bU)){bS.top=bU;bT=true}if(bT){this.renderCanvas(true)}}return this},zoom:function aV(bT,bR){var bS=this.canvasData;bT=Number(bT);if(bT<0){bT=1/(1-bT)}else{bT=1+bT}return this.zoomTo(bS.width*bT/bS.naturalWidth,null,bR)},zoomTo:function aP(bY,b2,bZ){var b4=this.options,bV=this.canvasData;var bT=bV.width,b3=bV.height,bX=bV.naturalWidth,b0=bV.naturalHeight;bY=Number(bY);if(bY>=0&&this.ready&&!this.disabled&&b4.zoomable){var bW=bX*bY;var bS=b0*bY;if(aN(this.element,al,{originalEvent:bZ,oldRatio:bT/bX,ratio:bW/bX})===false){return this}if(bZ){var b1=this.pointers;var bU=bM(this.cropper);var bR=b1&&Object.keys(b1).length?bj(b1):{pageX:bZ.pageX,pageY:bZ.pageY};bV.left-=(bW-bT)*((bR.pageX-bU.left-bV.left)/bT);bV.top-=(bS-b3)*((bR.pageY-bU.top-bV.top)/b3)}else{if(v(b2)&&ab(b2.x)&&ab(b2.y)){bV.left-=(bW-bT)*((b2.x-bV.left)/bT);bV.top-=(bS-b3)*((b2.y-bV.top)/b3)}else{bV.left-=(bW-bT)/2;bV.top-=(bS-b3)/2}}bV.width=bW;bV.height=bS;this.renderCanvas(true)}return this},rotate:function t(bR){return this.rotateTo((this.imageData.rotate||0)+Number(bR))},rotateTo:function bP(bR){bR=Number(bR);if(ab(bR)&&this.ready&&!this.disabled&&this.options.rotatable){this.imageData.rotate=bR%360;this.renderCanvas(true,true)}return this},scaleX:function R(bS){var bR=this.imageData.scaleY;return this.scale(bS,ab(bR)?bR:1)},scaleY:function P(bS){var bR=this.imageData.scaleX;return this.scale(ab(bR)?bR:1,bS)},scale:function aR(bT){var bR=arguments.length>1&&arguments[1]!==undefined?arguments[1]:bT;var bU=this.imageData;var bS=false;bT=Number(bT);bR=Number(bR);if(this.ready&&!this.disabled&&this.options.scalable){if(ab(bT)){bU.scaleX=bT;bS=true}if(ab(bR)){bU.scaleY=bR;bS=true}if(bS){this.renderCanvas(true,true)}}return this},getData:function ad(){var bR=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var bT=this.options,bX=this.imageData,bS=this.canvasData,bW=this.cropBoxData;var bV=void 0;if(this.ready&&this.cropped){bV={x:bW.left-bS.left,y:bW.top-bS.top,width:bW.width,height:bW.height};var bU=bX.width/bX.naturalWidth;an(bV,function(bZ,bY){bZ/=bU;bV[bY]=bR?Math.round(bZ):bZ})}else{bV={x:0,y:0,width:0,height:0}}if(bT.rotatable){bV.rotate=bX.rotate||0}if(bT.scalable){bV.scaleX=bX.scaleX||1;bV.scaleY=bX.scaleY||1}return bV},setData:function aF(bW){var bT=this.options,bX=this.imageData,bS=this.canvasData;var bV={};if(this.ready&&!this.disabled&&v(bW)){var bR=false;if(bT.rotatable){if(ab(bW.rotate)&&bW.rotate!==bX.rotate){bX.rotate=bW.rotate;bR=true}}if(bT.scalable){if(ab(bW.scaleX)&&bW.scaleX!==bX.scaleX){bX.scaleX=bW.scaleX;bR=true}if(ab(bW.scaleY)&&bW.scaleY!==bX.scaleY){bX.scaleY=bW.scaleY;bR=true}}if(bR){this.renderCanvas(true,true)}var bU=bX.width/bX.naturalWidth;if(ab(bW.x)){bV.left=bW.x*bU+bS.left}if(ab(bW.y)){bV.top=bW.y*bU+bS.top}if(ab(bW.width)){bV.width=bW.width*bU}if(ab(bW.height)){bV.height=bW.height*bU}this.setCropBoxData(bV)}return this},getContainerData:function a0(){return this.ready?ac({},this.containerData):{}},getImageData:function Y(){return this.sized?ac({},this.imageData):{}},getCanvasData:function T(){var bR=this.canvasData;var bS={};if(this.ready){an(["left","top","width","height","naturalWidth","naturalHeight"],function(bT){bS[bT]=bR[bT]})}return bS},setCanvasData:function d(bT){var bR=this.canvasData;var bS=bR.aspectRatio;if(this.ready&&!this.disabled&&v(bT)){if(ab(bT.left)){bR.left=bT.left}if(ab(bT.top)){bR.top=bT.top}if(ab(bT.width)){bR.width=bT.width;bR.height=bT.width/bS}else{if(ab(bT.height)){bR.height=bT.height;bR.width=bT.height*bS}}this.renderCanvas(true)}return this},getCropBoxData:function aj(){var bS=this.cropBoxData;var bR=void 0;if(this.ready&&this.cropped){bR={left:bS.left,top:bS.top,width:bS.width,height:bS.height}}return bR||{}},setCropBoxData:function aL(bV){var bU=this.cropBoxData;var bS=this.options.aspectRatio;var bT=void 0;var bR=void 0;if(this.ready&&this.cropped&&!this.disabled&&v(bV)){if(ab(bV.left)){bU.left=bV.left}if(ab(bV.top)){bU.top=bV.top}if(ab(bV.width)&&bV.width!==bU.width){bT=true;bU.width=bV.width}if(ab(bV.height)&&bV.height!==bU.height){bR=true;bU.height=bV.height}if(bS){if(bT){bU.height=bU.width/bS}else{if(bR){bU.width=bU.height*bS}}}this.renderCropBox()}return this},getCroppedCanvas:function ak(){var b1=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement){return null}var b7=this.canvasData;var cd=aZ(this.image,this.imageData,b7,b1);if(!this.cropped){return cd}var b6=this.getData(),ck=b6.x,cj=b6.y,b3=b6.width,cf=b6.height;var b5=cd.width/Math.floor(b7.naturalWidth);if(b5!==1){ck*=b5;cj*=b5;b3*=b5;cf*=b5}var bT=b3/cf;var b2=bm({aspectRatio:bT,width:b1.maxWidth||Infinity,height:b1.maxHeight||Infinity});var ci=bm({aspectRatio:bT,width:b1.minWidth||0,height:b1.minHeight||0},"cover");var b4=bm({aspectRatio:bT,width:b1.width||(b5!==1?cd.width:b3),height:b1.height||(b5!==1?cd.height:cf)}),cc=b4.width,cb=b4.height;cc=Math.min(b2.width,Math.max(ci.width,cc));cb=Math.min(b2.height,Math.max(ci.height,cb));var b0=document.createElement("canvas");var bW=b0.getContext("2d");b0.width=bf(cc);b0.height=bf(cb);bW.fillStyle=b1.fillColor||"transparent";bW.fillRect(0,0,cc,cb);var ce=b1.imageSmoothingEnabled,bS=ce===undefined?true:ce,bY=b1.imageSmoothingQuality;bW.imageSmoothingEnabled=bS;if(bY){bW.imageSmoothingQuality=bY}var b8=cd.width;var bX=cd.height;var bR=ck;var cm=cj;var ca=void 0;var ch=void 0;var bV=void 0;var bU=void 0;var bZ=void 0;var b9=void 0;if(bR<=-b3||bR>b8){bR=0;ca=0;bV=0;bZ=0}else{if(bR<=0){bV=-bR;bR=0;ca=Math.min(b8,b3+bR);bZ=ca}else{if(bR<=b8){bV=0;ca=Math.min(b3,b8-bR);bZ=ca}}}if(ca<=0||cm<=-cf||cm>bX){cm=0;ch=0;bU=0;b9=0}else{if(cm<=0){bU=-cm;cm=0;ch=Math.min(bX,cf+cm);b9=ch}else{if(cm<=bX){bU=0;ch=Math.min(cf,bX-cm);b9=ch}}}var cg=[bR,cm,ca,ch];if(bZ>0&&b9>0){var cl=cc/b3;cg.push(bV*cl,bU*cl,bZ*cl,b9*cl)}bW.drawImage.apply(bW,[cd].concat(bH(cg.map(function(cn){return Math.floor(bf(cn))}))));return b0},setAspectRatio:function A(bS){var bR=this.options;if(!this.disabled&&!aJ(bS)){bR.aspectRatio=Math.max(0,bS)||NaN;if(this.ready){this.initCropBox();if(this.cropped){this.renderCropBox()}}}return this},setDragMode:function X(bW){var bR=this.options,bS=this.dragBox,bT=this.face;if(this.ready&&!this.disabled){var bV=bW===am;var bU=bR.movable&&bW===aI;bW=bV||bU?bW:ao;bR.dragMode=bW;ap(bS,be,bW);aW(bS,bo,bV);aW(bS,bO,bU);if(!bR.cropBoxMovable){ap(bT,be,bW);aW(bT,bo,bV);aW(bT,bO,bU)}}return this}};var K=aq.Cropper;var L=function(){function bY(b4){var b3=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};aE(this,bY);if(!b4||!a2.test(b4.tagName)){throw new Error("The first argument is required and must be an <img> or <canvas> element.")}this.element=b4;this.options=ac({},O,v(b3)&&b3);this.cropped=false;this.disabled=false;this.pointers={};this.ready=false;this.reloading=false;this.replaced=false;this.sized=false;this.sizing=false;this.init()}a(bY,[{key:"init",value:function b1(){var b5=this.element;var b4=b5.tagName.toLowerCase();var b3=void 0;if(a8(b5,H)){return}ap(b5,H,this);if(b4==="img"){this.isImg=true;b3=b5.getAttribute("src")||"";this.originalUrl=b3;if(!b3){return}b3=b5.src}else{if(b4==="canvas"&&window.HTMLCanvasElement){b3=b5.toDataURL()}}this.load(b3)}},{key:"load",value:function b0(b5){var b8=this;if(!b5){return}this.url=b5;this.imageData={};var b6=this.element,b4=this.options;if(!b4.checkOrientation||!window.ArrayBuffer){this.clone();return}if(a1.test(b5)){if(bs.test(b5)){this.read(az(b5))}else{this.clone()}return}var b7=new XMLHttpRequest();this.reloading=true;this.xhr=b7;var b3=function b3(){b8.reloading=false;b8.xhr=null};b7.ontimeout=b3;b7.onabort=b3;b7.onerror=function(){b3();b8.clone()};b7.onload=function(){b3();b8.read(b7.response)};if(b4.checkCrossOrigin&&ba(b5)&&b6.crossOrigin){b5=bF(b5)}b7.open("get",b5);b7.responseType="arraybuffer";b7.withCredentials=b6.crossOrigin==="use-credentials";b7.send()}},{key:"read",value:function bT(b8){var b7=this.options,ca=this.imageData;var b4=ax(b8);var b6=0;var b5=1;var b3=1;if(b4>1){this.url=U(b8,"image/jpeg");var b9=l(b4);b6=b9.rotate;b5=b9.scaleX;b3=b9.scaleY}if(b7.rotatable){ca.rotate=b6}if(b7.scalable){ca.scaleX=b5;ca.scaleY=b3}this.clone()}},{key:"clone",value:function bW(){var b6=this.element,b4=this.url;var b3=void 0;var b7=void 0;if(this.options.checkCrossOrigin&&ba(b4)){b3=b6.crossOrigin;if(b3){b7=b4}else{b3="anonymous";b7=bF(b4)}}this.crossOrigin=b3;this.crossOriginUrl=b7;var b8=document.createElement("img");if(b3){b8.crossOrigin=b3}b8.src=b7||b4;var b9=this.start.bind(this);var b5=this.stop.bind(this);this.image=b8;this.onStart=b9;this.onStop=b5;if(this.isImg){if(b6.complete){this.timeout=setTimeout(b9,0)}else{bk(b6,aB,b9,{once:true})}}else{b8.onload=b9;b8.onerror=b5;w(b8,ag);b6.parentNode.insertBefore(b8,b6.nextSibling)}}},{key:"start",value:function bS(b7){var b6=this;var b9=this.isImg?this.element:this.image;if(b7){b9.onload=null;b9.onerror=null}this.sizing=true;var b5=aq.navigator&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(aq.navigator.userAgent);var b4=function b4(ca,cb){ac(b6.imageData,{naturalWidth:ca,naturalHeight:cb,aspectRatio:ca/cb});b6.sizing=false;b6.sized=true;b6.build()};if(b9.naturalWidth&&!b5){b4(b9.naturalWidth,b9.naturalHeight);return}var b8=document.createElement("img");var b3=document.body||document.documentElement;this.sizingImage=b8;b8.onload=function(){b4(b8.width,b8.height);if(!b5){b3.removeChild(b8)}};b8.src=b9.src;if(!b5){b8.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;";b3.appendChild(b8)}}},{key:"stop",value:function bX(){var b3=this.image;b3.onload=null;b3.onerror=null;b3.parentNode.removeChild(b3);this.image=null}},{key:"build",value:function bZ(){if(!this.sized||this.ready){return}var b9=this.element,cc=this.options,b6=this.image;var b4=b9.parentNode;var cb=document.createElement("div");cb.innerHTML=ai;var b3=cb.querySelector("."+H+"-container");var b5=b3.querySelector("."+H+"-canvas");var b8=b3.querySelector("."+H+"-drag-box");var b7=b3.querySelector("."+H+"-crop-box");var ca=b7.querySelector("."+H+"-face");this.container=b4;this.cropper=b3;this.canvas=b5;this.dragBox=b8;this.cropBox=b7;this.viewBox=b3.querySelector("."+H+"-view-box");this.face=ca;b5.appendChild(b6);w(b9,h);b4.insertBefore(b3,b9.nextSibling);if(!this.isImg){aY(b6,ag)}this.initPreview();this.bind();cc.aspectRatio=Math.max(0,cc.aspectRatio)||NaN;cc.viewMode=Math.max(0,Math.min(3,Math.round(cc.viewMode)))||0;w(b7,h);if(!cc.guides){w(b7.getElementsByClassName(H+"-dashed"),h)}if(!cc.center){w(b7.getElementsByClassName(H+"-center"),h)}if(cc.background){w(b3,H+"-bg")}if(!cc.highlight){w(ca,af)}if(cc.cropBoxMovable){w(ca,bO);ap(ca,be,aa)}if(!cc.cropBoxResizable){w(b7.getElementsByClassName(H+"-line"),h);w(b7.getElementsByClassName(H+"-point"),h)}this.render();this.ready=true;this.setDragMode(cc.dragMode);if(cc.autoCrop){this.crop()}this.setData(cc.data);if(o(cc.ready)){bk(b9,ah,cc.ready,{once:true})}aN(b9,ah)}},{key:"unbuild",value:function b2(){if(!this.ready){return}this.ready=false;this.unbind();this.resetPreview();this.cropper.parentNode.removeChild(this.cropper);aY(this.element,h)}},{key:"uncreate",value:function bR(){var b3=this.element;if(this.ready){this.unbuild();this.ready=false;this.cropped=false}else{if(this.sizing){this.sizingImage.onload=null;this.sizing=false;this.sized=false}else{if(this.reloading){this.xhr.abort()}else{if(this.isImg){if(b3.complete){clearTimeout(this.timeout)}else{k(b3,aB,this.onStart)}}else{if(this.image){this.stop()}}}}}}}],[{key:"noConflict",value:function bU(){window.Cropper=K;return bY}},{key:"setDefaults",value:function bV(b3){ac(O,v(b3)&&b3)}}]);return bY}();ac(L.prototype,S,b,bG,aX,aH,ar);if(by.fn){var bK=by.fn.cropper;var j="cropper";by.fn.cropper=function W(bV){for(var bS=arguments.length,bT=Array(bS>1?bS-1:0),bU=1;bU<bS;bU++){bT[bU-1]=arguments[bU]}var bR=void 0;this.each(function(bZ,bY){var bW=by(bY);var b2=bV==="destroy";var b1=bW.data(j);if(!b1){if(b2){return}var bX=by.extend({},bW.data(),by.isPlainObject(bV)&&bV);b1=new L(bY,bX);bW.data(j,b1)}if(typeof bV==="string"){var b0=b1[bV];if(by.isFunction(b0)){bR=b0.apply(b1,bT);if(bR===b1){bR=undefined}if(b2){bW.removeData(j)}}}});return bR!==undefined?bR:this};by.fn.cropper.Constructor=L;by.fn.cropper.setDefaults=L.setDefaults;by.fn.cropper.noConflict=function bC(){by.fn.cropper=bK;return this}}})));