/*!
 * webTicker 2.2.0
 * Examples and documentation at:
 * http://jonmifsud.com/open-source/jquery/jquery-webticker/
 * 2011 Jonathan Mifsud
 * Version: 2.2.0 (15-FEB-2016)
 * Dual licensed under the Creative Commons and DonationWare licenses:
 * http://creativecommons.org/licenses/by-nc/3.0/
 * https://github.com/jonmifsud/Web-Ticker/blob/master/licence.md
 * Requires:
 * jQuery v1.4.2 or later
 *
 */
(function(g){var h=(function(){var m=document.createElement("p").style,l=["ms","O","Moz","Webkit"];if(m.transition===""){return true}while(l.length){if(l.pop()+"Transition" in m){return true}}return false})();function j(l){var m=0;l.children("li").each(function(){m+=g(this).outerWidth(true)});return m}function b(l){return Math.max.apply(Math,l.children().map(function(){return g(this).width()}).get())}function i(l){var o=l.data("settings")||{direction:"left",speed:50};var p=l.children().first();var q=Math.abs(-l.css(o.direction).replace("px","").replace("auto","0")-p.outerWidth(true));var m=q*1000/o.speed;var n={};n[o.direction]=l.css(o.direction).replace("px","").replace("auto","0")-q;return{css:n,time:m}}function a(l){var m=l.data("settings")||{direction:"left"};l.css("transition-duration","0s").css(m.direction,"0");var n=l.children().first();if(n.hasClass("webticker-init")){n.remove()}else{l.children().last().after(n)}}function c(m,l){var o=m.data("settings")||{direction:"left"};if(typeof l==="undefined"){l=false}if(l){a(m)}var n=i(m);m.animate(n.css,n.time,"linear",function(){m.css(o.direction,"0");c(m,true)})}function e(m,l){if(typeof l==="undefined"){l=false}if(l){a(m)}var n=i(m);var o=n.time/1000;o+="s";m.css(n.css).css("transition-duration",o)}function k(n,m,l){var o=[];g.get(n,function(q){var p=g(q);p.find("item").each(function(){var t=g(this),s={title:t.find("title").text(),link:t.find("link").text()};var r='<li><a href="'+s.link+'"">'+s.title+"</a></li>";o+=r});l.webTicker("update",o,m)})}function f(l,u){if(l.children("li").length<1){if(window.console){}return false}var p=l.data("settings");p.duplicateLoops=p.duplicateLoops||0;l.width("auto");var m=0;l.children("li").each(function(){m+=g(this).outerWidth(true)});var t=l.find("li:first").height();var r;if(p.duplicate){r=b(l);var s=0;while(m-r<l.parent().width()||l.children().length===1||s<p.duplicateLoops){var o=l.children().clone();l.append(o);m=0;m=j(l);r=b(l);s++}p.duplicateLoops=s}else{var q=l.parent().width()-m;q+=l.find("li:first").width();if(l.find(".ticker-spacer").length>0){l.find(".ticker-spacer").width(q)}else{l.append('<li class="ticker-spacer" style="float: '+p.direction+";width:"+q+"px;height:"+t+'px;"></li>')}}if(p.startEmpty&&u){l.prepend('<li class="webticker-init" style="float: '+p.direction+";width:"+l.parent().width()+"px;height:"+t+'px;"></li>')}m=0;m=j(l);l.width(m+200);var n=0;n=j(l);while(n>=l.width()){l.width(l.width()+200);n=0;n=j(l)}return true}var d={init:function(l){l=jQuery.extend({speed:50,direction:"left",moving:true,startEmpty:true,duplicate:false,rssurl:false,hoverpause:true,rssfrequency:0,updatetype:"reset",transition:"linear",height:"30px",maskleft:"",maskright:"",maskwidth:0},l);return this.each(function(){jQuery(this).data("settings",l);var o=jQuery(this);var r=o.wrap('<div class="mask"></div>');r.after('<span class="tickeroverlay-left">&nbsp;</span><span class="tickeroverlay-right">&nbsp;</span>');var q=o.parent().wrap('<div class="tickercontainer"></div>');var p;g(window).resize(function(){clearTimeout(p);p=setTimeout(function(){console.log("window was resized");f(o,false)},500)});o.children("li").css("white-space","nowrap");o.children("li").css("float",l.direction);o.children("li").css("padding","0 7px");o.children("li").css("line-height",l.height);r.css("position","relative");r.css("overflow","hidden");o.closest(".tickercontainer").css("height",l.height);o.closest(".tickercontainer").css("overflow","hidden");o.css("float",l.direction);o.css("position","relative");o.css("font","bold 10px Verdana");o.css("list-style-type","none");o.css("margin","0");o.css("padding","0");if((l.maskleft!=="")&&(l.maskright!=="")){var n='url("'+l.maskleft+'")';q.find(".tickeroverlay-left").css("background-image",n);q.find(".tickeroverlay-left").css("display","block");q.find(".tickeroverlay-left").css("pointer-events","none");q.find(".tickeroverlay-left").css("position","absolute");q.find(".tickeroverlay-left").css("z-index","30");q.find(".tickeroverlay-left").css("height",l.height);q.find(".tickeroverlay-left").css("width",l.maskwidth);q.find(".tickeroverlay-left").css("top","0");q.find(".tickeroverlay-left").css("left","-2px");n='url("'+l.maskright+'")';q.find(".tickeroverlay-right").css("background-image",n);q.find(".tickeroverlay-right").css("display","block");q.find(".tickeroverlay-right").css("pointer-events","none");q.find(".tickeroverlay-right").css("position","absolute");q.find(".tickeroverlay-right").css("z-index","30");q.find(".tickeroverlay-right").css("height",l.height);q.find(".tickeroverlay-right").css("width",l.maskwidth);q.find(".tickeroverlay-right").css("top","0");q.find(".tickeroverlay-right").css("right","-2px")}else{q.find(".tickeroverlay-left").css("display","none");q.find(".tickeroverlay-right").css("display","none")}o.children("li").last().addClass("last");var m=f(o,true);if(l.rssurl){k(l.rssurl,l.type,o);if(l.rssfrequency>0){window.setInterval(function(){k(l.rssurl,l.type,o)},l.rssfrequency*1000*60)}}if(h){o.css("transition-timing-function",l.transition);o.css("transition-duration","0s").css(l.direction,"0");if(m){e(o,false)}o.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend",function(s){if(!o.is(s.target)){return false}e(g(this),true)})}else{if(m){c(g(this))}}if(l.hoverpause){o.hover(function(){if(h){var s=g(this).css(l.direction);g(this).css("transition-duration","0s").css(l.direction,s)}else{jQuery(this).stop()}},function(){if(jQuery(this).data("settings").moving){if(h){e(g(this),false)}else{c(o)}}})}})},stop:function(){var l=g(this).data("settings");if(l.moving){l.moving=false;return this.each(function(){if(h){var m=g(this).css(l.direction);g(this).css("transition-duration","0s").css(l.direction,m)}else{g(this).stop()}})}},cont:function(){var l=g(this).data("settings");if(!l.moving){l.moving=true;return this.each(function(){if(h){e(g(this),false)}else{c(g(this))}})}},transition:function(m){var l=g(this);if(h){l.css("transition-timing-function",m)}},update:function(s,u,w,q){u=u||"reset";if(typeof w==="undefined"){w=true}if(typeof q==="undefined"){q=false}if(typeof s==="string"){s=g(s)}var l=g(this);l.webTicker("stop");var o=g(this).data("settings");if(u==="reset"){l.html(s);f(l,true)}else{if(u==="swap"){var m;var r;var t;var n;if(window.console){}if(l.children("li").length<1){l.html(s);l.css(o.direction,"0");f(l,true)}else{if(o.duplicate===true){l.children("li").addClass("old");for(var p=s.length-1;p>=0;p--){m=g(s[p]).data("update");r=l.find('[data-update="'+m+'"]');if(r.length<1){if(w){if(l.find(".ticker-spacer:first-child").length===0&&l.find(".ticker-spacer").length>0){l.children("li.ticker-spacer").before(s[p])}else{t=g(s[p]);if(p===s.length-1){t.addClass("last")}l.find("last").after(t);l.find("last").removeClass("last")}}}else{l.find('[data-update="'+m+'"]').replaceWith(s[p])}}l.children("li.webticker-init, li.ticker-spacer").removeClass("old");if(q){l.children("li").remove(".old")}n=0;n=j(l);l.width(n+200);if(l.find("li.webticker-init").length<1){o.startEmpty=false}l.html(s);l.children("li").css("white-space","nowrap");l.children("li").css("float",o.direction);l.children("li").css("padding","0 7px");l.children("li").css("line-height",o.height);f(l,true)}else{l.children("li").addClass("old");for(var v=0;v<s.length;v++){m=g(s[v]).data("update");r=l.find('[data-update="'+m+'"]');if(r.length<1){if(w){if(l.find(".ticker-spacer:first-child").length===0&&l.find(".ticker-spacer").length>0){l.children("li.ticker-spacer").before(s[v])}else{t=g(s[v]);if(v===s.length-1){t.addClass("last")}l.find(".old.last").after(t);l.find(".old.last").removeClass("last")}}}else{l.find('[data-update="'+m+'"]').replaceWith(s[v])}}l.children("li.webticker-init, li.ticker-spacer").removeClass("old");l.children("li").css("white-space","nowrap");l.children("li").css("float",o.direction);l.children("li").css("padding","0 7px");l.children("li").css("line-height",o.height);if(q){l.children("li").remove(".old")}n=0;n=j(l);l.width(n+200)}}}}l.webTicker("cont")}};g.fn.webTicker=function(l){if(d[l]){return d[l].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof l==="object"||!l){return d.init.apply(this,arguments)}else{g.error("Method "+l+" does not exist on jQuery.webTicker")}}}})(jQuery);