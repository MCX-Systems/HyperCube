(function(e){var f={tooltip:{show:false,cssClass:"flotTip",content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,monthNames:null,dayNames:null,shifts:{x:10,y:20},defaultTheme:true,snap:true,lines:false,clickTips:false,onHover:function(a,b){},$compat:false}};f.tooltipOpts=f.tooltip;var h=function(a){this.tipPosition={x:0,y:0};this.init(a)};h.prototype.init=function(b){var l=this;var d=e.plot.plugins.length;this.plotPlugins=[];if(d){for(var c=0;c<d;c++){this.plotPlugins.push(e.plot.plugins[c].name)}}b.hooks.bindEvents.push(function(i,j){l.plotOptions=i.getOptions();if(typeof(l.plotOptions.tooltip)==="boolean"){l.plotOptions.tooltipOpts.show=l.plotOptions.tooltip;l.plotOptions.tooltip=l.plotOptions.tooltipOpts;delete l.plotOptions.tooltipOpts}if(l.plotOptions.tooltip.show===false||typeof l.plotOptions.tooltip.show==="undefined"){return}l.tooltipOptions=l.plotOptions.tooltip;if(l.tooltipOptions.$compat){l.wfunc="width";l.hfunc="height"}else{l.wfunc="innerWidth";l.hfunc="innerHeight"}var k=l.getDomElement();e(i.getPlaceholder()).bind("plothover",a);if(l.tooltipOptions.clickTips){e(i.getPlaceholder()).bind("plotclick",n)}l.clickmode=false;e(j).bind("mousemove",m)});b.hooks.shutdown.push(function(i,j){e(i.getPlaceholder()).unbind("plothover",a);e(i.getPlaceholder()).unbind("plotclick",n);i.removeTooltip();e(j).unbind("mousemove",m)});function m(j){var i={};i.x=j.pageX;i.y=j.pageY;b.setTooltipPosition(i)}function n(i,k,j){if(!l.clickmode){a(i,k,j);if(l.getDomElement().is(":visible")){e(b.getPlaceholder()).unbind("plothover",a);l.clickmode=true}}else{e(b.getPlaceholder()).bind("plothover",a);b.hideTooltip();l.clickmode=false}}function a(v,k,w){var j=function(q,r,o,p){return Math.sqrt((o-q)*(o-q)+(p-r)*(p-r))};var x=function(K,p,H,I,L,M,J){if(J&&!(J=function(D,E,B,z,C,A){if(typeof B!=="undefined"){return{x:B,y:E}}else{if(typeof z!=="undefined"){return{x:D,y:z}}}var F,G=-1/((A-z)/(C-B));return{x:F=(C*(D*G-E+z)+B*(D*-G+E-A))/(G*(C-B)+z-A),y:G*F-G*D+E}}(K,p,H,I,L,M),J.x>=Math.min(H,L)&&J.x<=Math.max(H,L)&&J.y>=Math.min(I,M)&&J.y<=Math.max(I,M))){var s=j(K,p,H,I),y=j(K,p,L,M);return s>y?y:s}else{var o=I-M,q=L-H,r=H*M-I*L;return Math.abs(o*K+q*p+r)/Math.sqrt(o*o+q*q)}};if(w){b.showTooltip(w,l.tooltipOptions.snap?w:k)}else{if(l.plotOptions.series.lines.show&&l.tooltipOptions.lines===true){var t=l.plotOptions.grid.mouseActiveRadius;var u={distance:t+1};var i=k;e.each(b.getData(),function(H,G){var r=0,s=-1;for(var J=1;J<G.data.length;J++){if(G.data[J-1][0]<=k.x&&G.data[J][0]>=k.x){r=J-1;s=J}}if(s===-1){b.hideTooltip();return}var F={x:G.data[r][0],y:G.data[r][1]},p={x:G.data[s][0],y:G.data[s][1]};var K=x(G.xaxis.p2c(k.x),G.yaxis.p2c(k.y),G.xaxis.p2c(F.x),G.yaxis.p2c(F.y),G.xaxis.p2c(p.x),G.yaxis.p2c(p.y),false);if(K<u.distance){var q=j(F.x,F.y,k.x,k.y)<j(k.x,k.y,p.x,p.y)?r:s;var I=G.datapoints.pointsize;var L=[k.x,F.y+((p.y-F.y)*((k.x-F.x)/(p.x-F.x)))];var o={datapoint:L,dataIndex:q,series:G,seriesIndex:H};u={distance:K,item:o};if(l.tooltipOptions.snap){i={pageX:G.xaxis.p2c(L[0]),pageY:G.yaxis.p2c(L[1])}}}});if(u.distance<t+1){b.showTooltip(u.item,i)}else{b.hideTooltip()}}else{b.hideTooltip()}}}b.setTooltipPosition=function(k){var p=l.getDomElement();var j=p.outerWidth()+l.tooltipOptions.shifts.x;var i=p.outerHeight()+l.tooltipOptions.shifts.y;if((k.x-e(window).scrollLeft())>(e(window)[l.wfunc]()-j)){k.x-=j;k.x=Math.max(k.x,0)}if((k.y-e(window).scrollTop())>(e(window)[l.hfunc]()-i)){k.y-=i}if(isNaN(k.x)){l.tipPosition.x=l.tipPosition.xPrev}else{l.tipPosition.x=k.x;l.tipPosition.xPrev=k.x}if(isNaN(k.y)){l.tipPosition.y=l.tipPosition.yPrev}else{l.tipPosition.y=k.y;l.tipPosition.yPrev=k.y}};b.showTooltip=function(q,j,r){var k=l.getDomElement();var i=l.stringFormat(l.tooltipOptions.content,q);if(i===""){return}k.html(i);b.setTooltipPosition({x:l.tipPosition.x,y:l.tipPosition.y});k.css({left:l.tipPosition.x+l.tooltipOptions.shifts.x,top:l.tipPosition.y+l.tooltipOptions.shifts.y}).show();if(typeof l.tooltipOptions.onHover==="function"){l.tooltipOptions.onHover(q,k)}};b.hideTooltip=function(){l.getDomElement().hide().html("")};b.removeTooltip=function(){l.getDomElement().remove()}};h.prototype.getDomElement=function(){var a=e("<div>");if(this.tooltipOptions&&this.tooltipOptions.cssClass){a=e("."+this.tooltipOptions.cssClass);if(a.length===0){a=e("<div />").addClass(this.tooltipOptions.cssClass);a.appendTo("body").hide().css({position:"absolute"});if(this.tooltipOptions.defaultTheme){a.css({background:"#fff","z-index":"1040",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})}}}return a};h.prototype.stringFormat=function(a,I){var R=/%p\.{0,1}(\d{0,})/;var M=/%s/;var b=/%c/;var T=/%lx/;var G=/%ly/;var L=/%x\.{0,1}(\d{0,})/;var S=/%y\.{0,1}(\d{0,})/;var O="%x";var n="%y";var J="%ct";var U="%n";var K,N,P,y,d;if(typeof I.series.threshold!=="undefined"){K=I.datapoint[0];N=I.datapoint[1];P=I.datapoint[2]}else{if(typeof I.series.curvedLines!=="undefined"){K=I.datapoint[0];N=I.datapoint[1]}else{if(typeof I.series.lines!=="undefined"&&I.series.lines.steps){K=I.series.datapoints.points[I.dataIndex*2];N=I.series.datapoints.points[I.dataIndex*2+1];P=""}else{K=I.series.data[I.dataIndex][0];N=I.series.data[I.dataIndex][1];P=I.series.data[I.dataIndex][2]}}}if(I.series.label===null&&I.series.originSeries){I.series.label=I.series.originSeries.label}if(typeof(a)==="function"){a=a(I.series.label,K,N,I)}if(typeof(a)==="boolean"&&!a){return""}if(P){a=a.replace(J,P)}if(typeof(I.series.percent)!=="undefined"){y=I.series.percent}else{if(typeof(I.series.percents)!=="undefined"){y=I.series.percents[I.dataIndex]}}if(typeof y==="number"){a=this.adjustValPrecision(R,a,y)}if(I.series.hasOwnProperty("pie")){if(typeof I.series.data[0][1]!=="undefined"){d=I.series.data[0][1]}}if(typeof d==="number"){a=a.replace(U,d)}if(typeof(I.series.label)!=="undefined"){a=a.replace(M,I.series.label)}else{a=a.replace(M,"")}if(typeof(I.series.color)!=="undefined"){a=a.replace(b,I.series.color)}else{a=a.replace(b,"")}if(this.hasAxisLabel("xaxis",I)){a=a.replace(T,I.series.xaxis.options.axisLabel)}else{a=a.replace(T,"")}if(this.hasAxisLabel("yaxis",I)){a=a.replace(G,I.series.yaxis.options.axisLabel)}else{a=a.replace(G,"")}if(this.isTimeMode("xaxis",I)&&this.isXDateFormat(I)){a=a.replace(L,this.timestampToDate(K,this.tooltipOptions.xDateFormat,I.series.xaxis.options))}if(this.isTimeMode("yaxis",I)&&this.isYDateFormat(I)){a=a.replace(S,this.timestampToDate(N,this.tooltipOptions.yDateFormat,I.series.yaxis.options))}if(typeof K==="number"){a=this.adjustValPrecision(L,a,K)}if(typeof N==="number"){a=this.adjustValPrecision(S,a,N)}if(typeof I.series.xaxis.ticks!=="undefined"){var x;if(this.hasRotatedXAxisTicks(I)){x="rotatedTicks"}else{x="ticks"}var V=I.dataIndex+I.seriesIndex;for(var Q in I.series.xaxis[x]){if(I.series.xaxis[x].hasOwnProperty(V)&&!this.isTimeMode("xaxis",I)){var c=(this.isCategoriesMode("xaxis",I))?I.series.xaxis[x][V].label:I.series.xaxis[x][V].v;if(c===K){a=a.replace(L,I.series.xaxis[x][V].label.replace(/\$/g,"$$$$"))}}}}if(typeof I.series.yaxis.ticks!=="undefined"){for(var H in I.series.yaxis.ticks){if(I.series.yaxis.ticks.hasOwnProperty(H)){var p=(this.isCategoriesMode("yaxis",I))?I.series.yaxis.ticks[H].label:I.series.yaxis.ticks[H].v;if(p===N){a=a.replace(S,I.series.yaxis.ticks[H].label.replace(/\$/g,"$$$$"))}}}}if(typeof I.series.xaxis.tickFormatter!=="undefined"){a=a.replace(O,I.series.xaxis.tickFormatter(K,I.series.xaxis).replace(/\$/g,"$$"))}if(typeof I.series.yaxis.tickFormatter!=="undefined"){a=a.replace(n,I.series.yaxis.tickFormatter(N,I.series.yaxis).replace(/\$/g,"$$"))}return a};h.prototype.isTimeMode=function(a,b){return(typeof b.series[a].options.mode!=="undefined"&&b.series[a].options.mode==="time")};h.prototype.isXDateFormat=function(a){return(typeof this.tooltipOptions.xDateFormat!=="undefined"&&this.tooltipOptions.xDateFormat!==null)};h.prototype.isYDateFormat=function(a){return(typeof this.tooltipOptions.yDateFormat!=="undefined"&&this.tooltipOptions.yDateFormat!==null)};h.prototype.isCategoriesMode=function(a,b){return(typeof b.series[a].options.mode!=="undefined"&&b.series[a].options.mode==="categories")};h.prototype.timestampToDate=function(c,d,b){var a=e.plot.dateGenerator(c,b);return e.plot.formatDate(a,d,this.tooltipOptions.monthNames,this.tooltipOptions.dayNames)};h.prototype.adjustValPrecision=function(a,c,b){var d;var j=c.match(a);if(j!==null){if(RegExp.$1!==""){d=RegExp.$1;b=b.toFixed(d);c=c.replace(a,b)}}return c};h.prototype.hasAxisLabel=function(a,b){return(e.inArray("axisLabels",this.plotPlugins)!==-1&&typeof b.series[a].options.axisLabel!=="undefined"&&b.series[a].options.axisLabel.length>0)};h.prototype.hasRotatedXAxisTicks=function(a){return(e.inArray("tickRotor",this.plotPlugins)!==-1&&typeof a.series.xaxis.rotatedTicks!=="undefined")};var g=function(a){new h(a)};e.plot.plugins.push({init:g,options:f,name:"tooltip",version:"0.8.5"})})(jQuery);