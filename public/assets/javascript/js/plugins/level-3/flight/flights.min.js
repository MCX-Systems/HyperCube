(function(b){function a(o,m,s){var f=this;var h=b.extend({size:180,roll:0,pitch:0,turn:0,heading:0,vario:0,airspeed:0,altitude:0,pressure:1000,showBox:true,img_directory:global_base_url+"assets/javascript/js/plugins/level-3/flight/images/"},s);var r={pitch_bound:30,vario_bound:1.95,airspeed_bound_l:0,airspeed_bound_h:160};o.each(function(){switch(m){case"heading":b(this).html('<div class="instrument heading"><img src="'+h.img_directory+'fi_box.svg" class="background box" alt="" /><div class="heading box"><img src="'+h.img_directory+'heading_yaw.svg" class="box" alt="" /></div><div class="mechanics box"><img src="'+h.img_directory+'heading_mechanics.svg" class="box" alt="" /><img src="'+h.img_directory+'fi_circle.svg" class="box" alt="" /></div></div>');q(h.heading);break;case"variometer":b(this).html('<div class="instrument vario"><img src="'+h.img_directory+'fi_box.svg" class="background box" alt="" /><img src="'+h.img_directory+'vertical_mechanics.svg" class="box" alt="" /><div class="vario box"><img src="'+h.img_directory+'fi_needle.svg" class="box" alt="" /></div><div class="mechanics box"><img src="'+h.img_directory+'fi_circle.svg" class="box" alt="" /></div></div>');i(h.vario);break;case"turn_coordinator":b(this).html('<div class="instrument turn_coordinator"><img src="'+h.img_directory+'fi_box.svg" class="background box" alt="" /><img src="'+h.img_directory+'turn_coordinator.svg" class="box" alt="" /><div class="turn box"><img src="'+h.img_directory+'fi_tc_airplane.svg" class="box" alt="" /></div><div class="mechanics box"><img src="'+h.img_directory+'fi_circle.svg" class="box" alt="" /></div></div>');j(h.turn);break;case"airspeed":b(this).html('<div class="instrument airspeed"><img src="'+h.img_directory+'fi_box.svg" class="background box" alt="" /><img src="'+h.img_directory+'speed_mechanics.svg" class="box" alt="" /><div class="speed box"><img src="'+h.img_directory+'fi_needle.svg" class="box" alt="" /></div><div class="mechanics box"><img src="'+h.img_directory+'fi_circle.svg" class="box" alt="" /></div></div>');e(h.airspeed);break;case"altimeter":b(this).html('<div class="instrument altimeter"><img src="'+h.img_directory+'fi_box.svg" class="background box" alt="" /><div class="pressure box"><img src="'+h.img_directory+'altitude_pressure.svg" class="box" alt="" /></div><img src="'+h.img_directory+'altitude_ticks.svg" class="box" alt="" /><div class="needleSmall box"><img src="'+h.img_directory+'fi_needle_small.svg" class="box" alt="" /></div><div class="needle box"><img src="'+h.img_directory+'fi_needle.svg" class="box" alt="" /></div><div class="mechanics box"><img src="'+h.img_directory+'fi_circle.svg" class="box" alt="" /></div></div>');d(h.altitude);l(h.pressure);break;default:b(this).html('<div class="instrument attitude"><img src="'+h.img_directory+'fi_box.svg" class="background box" alt="" /><div class="roll box"><img src="'+h.img_directory+'horizon_back.svg" class="box" alt="" /><div class="pitch box"><img src="'+h.img_directory+'horizon_ball.svg" class="box" alt="" /></div><img src="'+h.img_directory+'horizon_circle.svg" class="box" alt="" /></div><div class="mechanics box"><img src="'+h.img_directory+'horizon_mechanics.svg" class="box" alt="" /><img src="'+h.img_directory+'fi_circle.svg" class="box" alt="" /></div></div>');p(h.roll);n(h.pitch)}b(this).find("div.instrument").css({height:h.size,width:h.size});b(this).find("div.instrument img.box.background").toggle(h.showBox)});function p(t){o.each(function(){b(this).find("div.instrument.attitude div.roll").css("transform","rotate("+t+"deg)")})}function n(t){if(t>r.pitch_bound){t=r.pitch_bound}else{if(t<-r.pitch_bound){t=-r.pitch_bound}}o.each(function(){b(this).find("div.instrument.attitude div.roll div.pitch").css("top",t*0.7+"%")})}function q(t){o.each(function(){b(this).find("div.instrument.heading div.heading").css("transform","rotate("+-t+"deg)")})}function j(t){o.each(function(){b(this).find("div.instrument.turn_coordinator div.turn").css("transform","rotate("+t+"deg)")})}function i(t){if(t>r.vario_bound){t=r.vario_bound}else{if(t<-r.vario_bound){t=-r.vario_bound}}t=t*90;o.each(function(){b(this).find("div.instrument.vario div.vario").css("transform","rotate("+t+"deg)")})}function e(t){if(t>r.airspeed_bound_h){t=r.airspeed_bound_h}else{if(t<r.airspeed_bound_l){t=r.airspeed_bound_l}}t=90+t*2;o.each(function(){b(this).find("div.instrument.airspeed div.speed").css("transform","rotate("+t+"deg)")})}function d(t){var v=90+t%1000*360/1000;var u=t/10000*360;o.each(function(){b(this).find("div.instrument.altimeter div.needle").css("transform","rotate("+v+"deg)");b(this).find("div.instrument.altimeter div.needleSmall").css("transform","rotate("+u+"deg)")})}function l(t){t=2*t-1980;o.each(function(){b(this).find("div.instrument.altimeter div.pressure").css("transform","rotate("+t+"deg)")})}function k(t){o.each(function(){b(this).find("div.instrument").css({height:t,width:t})})}function g(){o.each(function(){b(this).find("img.box.background").show()})}function c(){o.each(function(){b(this).find("img.box.background").hide()})}this.setRoll=function(t){p(t)};this.setPitch=function(t){n(t)};this.setHeading=function(t){q(t)};this.setTurn=function(t){j(t)};this.setVario=function(t){i(t)};this.setAirSpeed=function(t){e(t)};this.setAltitude=function(t){d(t)};this.setPressure=function(t){l(t)};this.resize=function(t){k(t)};this.showBox=function(){g()};this.hideBox=function(){c()};return f}b.flightIndicator=function(e,d,c){var f=new a(b(e),d,c);return f};b.fn.flightIndicator=function(e,d,c){return this.each(function(){b.flightIndicator(this,d,c)})}}(jQuery));