(function(b){function a(p,l,m){var c=this;var e=b.extend({size:200,roll:0,pitch:0,turn:0,heading:0,vario:0,airspeed:0,altitude:0,pressure:1000,showBox:true,img_directory:"/assets/javascript/core/plugins/indicators/Flight/images/"},m);var k={pitch_bound:30,vario_bound:1.95,airspeed_bound_l:0,airspeed_bound_h:160};p.each(function(){switch(l){case"heading":b(this).html('<div class="instrument heading"><img src="'+e.img_directory+'fi_box.svg" class="background box" alt="" /><div class="heading box"><img src="'+e.img_directory+'heading_yaw.svg" class="box" alt="" /></div><div class="mechanics box"><img src="'+e.img_directory+'heading_mechanics.svg" class="box" alt="" /><img src="'+e.img_directory+'fi_circle.svg" class="box" alt="" /></div></div>');i(e.heading);break;case"variometer":b(this).html('<div class="instrument vario"><img src="'+e.img_directory+'fi_box.svg" class="background box" alt="" /><img src="'+e.img_directory+'vertical_mechanics.svg" class="box" alt="" /><div class="vario box"><img src="'+e.img_directory+'fi_needle.svg" class="box" alt="" /></div><div class="mechanics box"><img src="'+e.img_directory+'fi_circle.svg" class="box" alt="" /></div></div>');f(e.vario);break;case"turn_coordinator":b(this).html('<div class="instrument turn_coordinator"><img src="'+e.img_directory+'fi_box.svg" class="background box" alt="" /><img src="'+e.img_directory+'turn_coordinator.svg" class="box" alt="" /><div class="turn box"><img src="'+e.img_directory+'fi_tc_airplane.svg" class="box" alt="" /></div><div class="mechanics box"><img src="'+e.img_directory+'fi_circle.svg" class="box" alt="" /></div></div>');g(e.turn);break;case"airspeed":b(this).html('<div class="instrument airspeed"><img src="'+e.img_directory+'fi_box.svg" class="background box" alt="" /><img src="'+e.img_directory+'speed_mechanics.svg" class="box" alt="" /><div class="speed box"><img src="'+e.img_directory+'fi_needle.svg" class="box" alt="" /></div><div class="mechanics box"><img src="'+e.img_directory+'fi_circle.svg" class="box" alt="" /></div></div>');s(e.airspeed);break;case"altimeter":b(this).html('<div class="instrument altimeter"><img src="'+e.img_directory+'fi_box.svg" class="background box" alt="" /><div class="pressure box"><img src="'+e.img_directory+'altitude_pressure.svg" class="box" alt="" /></div><img src="'+e.img_directory+'altitude_ticks.svg" class="box" alt="" /><div class="needleSmall box"><img src="'+e.img_directory+'fi_needle_small.svg" class="box" alt="" /></div><div class="needle box"><img src="'+e.img_directory+'fi_needle.svg" class="box" alt="" /></div><div class="mechanics box"><img src="'+e.img_directory+'fi_circle.svg" class="box" alt="" /></div></div>');q(e.altitude);j(e.pressure);break;default:b(this).html('<div class="instrument attitude"><img src="'+e.img_directory+'fi_box.svg" class="background box" alt="" /><div class="roll box"><img src="'+e.img_directory+'horizon_back.svg" class="box" alt="" /><div class="pitch box"><img src="'+e.img_directory+'horizon_ball.svg" class="box" alt="" /></div><img src="'+e.img_directory+'horizon_circle.svg" class="box" alt="" /></div><div class="mechanics box"><img src="'+e.img_directory+'horizon_mechanics.svg" class="box" alt="" /><img src="'+e.img_directory+'fi_circle.svg" class="box" alt="" /></div></div>');r(e.roll);n(e.pitch)}b(this).find("div.instrument").css({height:e.size,width:e.size});b(this).find("div.instrument img.box.background").toggle(e.showBox)});function r(t){p.each(function(){b(this).find("div.instrument.attitude div.roll").css("transform","rotate("+t+"deg)")})}function n(t){if(t>k.pitch_bound){t=k.pitch_bound}else{if(t<-k.pitch_bound){t=-k.pitch_bound}}p.each(function(){b(this).find("div.instrument.attitude div.roll div.pitch").css("top",t*0.7+"%")})}function i(t){p.each(function(){b(this).find("div.instrument.heading div.heading").css("transform","rotate("+-t+"deg)")})}function g(t){p.each(function(){b(this).find("div.instrument.turn_coordinator div.turn").css("transform","rotate("+t+"deg)")})}function f(t){if(t>k.vario_bound){t=k.vario_bound}else{if(t<-k.vario_bound){t=-k.vario_bound}}t=t*90;p.each(function(){b(this).find("div.instrument.vario div.vario").css("transform","rotate("+t+"deg)")})}function s(t){if(t>k.airspeed_bound_h){t=k.airspeed_bound_h}else{if(t<k.airspeed_bound_l){t=k.airspeed_bound_l}}t=90+t*2;p.each(function(){b(this).find("div.instrument.airspeed div.speed").css("transform","rotate("+t+"deg)")})}function q(t){var v=90+t%1000*360/1000;var u=t/10000*360;p.each(function(){b(this).find("div.instrument.altimeter div.needle").css("transform","rotate("+v+"deg)");b(this).find("div.instrument.altimeter div.needleSmall").css("transform","rotate("+u+"deg)")})}function j(t){t=2*t-1980;p.each(function(){b(this).find("div.instrument.altimeter div.pressure").css("transform","rotate("+t+"deg)")})}function h(t){p.each(function(){b(this).find("div.instrument").css({height:t,width:t})})}function d(){p.each(function(){b(this).find("img.box.background").show()})}function o(){p.each(function(){b(this).find("img.box.background").hide()})}this.setRoll=function(t){r(t)};this.setPitch=function(t){n(t)};this.setHeading=function(t){i(t)};this.setTurn=function(t){g(t)};this.setVario=function(t){f(t)};this.setAirSpeed=function(t){s(t)};this.setAltitude=function(t){q(t)};this.setPressure=function(t){j(t)};this.resize=function(t){h(t)};this.showBox=function(){d()};this.hideBox=function(){o()};return c}b.flightIndicator=function(c,f,e){var d=new a(b(c),f,e);return d};b.fn.flightIndicator=function(d,c,e){return this.each(function(){b.flightIndicator(this,c,e)})}}(jQuery));