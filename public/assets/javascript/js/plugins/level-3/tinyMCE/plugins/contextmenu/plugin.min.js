(function(){var a=(function(){var h=function(C){var D=C;var B=function(){return D};var F=function(G){D=G};var E=function(){return h(B())};return{get:B,set:F,clone:E}};var r=tinymce.util.Tools.resolve("tinymce.PluginManager");var w=function(B){var C=function(){return B.get()};return{isContextMenuVisible:C}};var m={get:w};var u=function(B){return B.settings.contextmenu_never_use_native};var g=function(B){return B.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")};var c={shouldNeverUseNative:u,getContextMenu:g};var k=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var p=function(B){return k.DOM.select(B.settings.ui_container)[0]};var z=function(B,C){return{x:B,y:C}};var l=function(D,C,B){return z(D.x+C,D.y+B)};var s=function(B){return z(B.pageX,B.pageY)};var A=function(B){return z(B.clientX,B.clientY)};var b=function(D,F){if(D&&k.DOM.getStyle(D,"position",true)!=="static"){var E=k.DOM.getPos(D);var C=E.x-D.scrollLeft;var B=E.y-D.scrollTop;return l(F,-C,-B)}else{return l(F,0,0)}};var e=function(B,D){var C=k.DOM.getPos(B);return l(D,C.x,C.y)};var t=function(C,D){if(C.inline){return b(p(C),s(D))}else{var B=e(C.getContentAreaContainer(),A(D));return b(p(C),B)}};var n={getPos:t};var j=tinymce.util.Tools.resolve("tinymce.ui.Factory");var i=tinymce.util.Tools.resolve("tinymce.util.Tools");var q=function(E,D){var G,F;var B=[];F=c.getContextMenu(E);i.each(F.split(/[ ,]/),function(H){var I=E.menuItems[H];if(H==="|"){I={text:H}}if(I){I.shortcut="";B.push(I)}});for(var C=0;C<B.length;C++){if(B[C].text==="|"){if(C===0||C===B.length-1){B.splice(C,1)}}}G=j.create("menu",{items:B,context:"contextmenu",classes:"contextmenu"});G.uiContainer=p(E);G.renderTo(p(E));G.on("hide",function(H){if(H.control===this){D.set(false)}});E.on("remove",function(){G.remove();G=null});return G};var y=function(C,E,B,D){if(D.get()===null){D.set(q(C,B))}else{D.get().show()}D.get().moveTo(E.x,E.y);B.set(true)};var v={show:y};var x=function(B,C){return C.ctrlKey&&!c.shouldNeverUseNative(B)};var o=function(C,B,D){C.on("contextmenu",function(E){if(x(C,E)){return}E.preventDefault();v.show(C,n.getPos(C,E),B,D)})};var d={setup:o};r.add("contextmenu",function(C){var D=h(null),B=h(false);d.setup(C,B,D);return m.get(B)});function f(){}return f}())})();