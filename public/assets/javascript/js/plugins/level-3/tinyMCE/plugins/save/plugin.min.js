(function(){var a=(function(){var f=tinymce.util.Tools.resolve("tinymce.PluginManager");var d=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var b=tinymce.util.Tools.resolve("tinymce.util.Tools");var l=function(s){return s.getParam("save_enablewhendirty",true)};var r=function(s){return !!s.getParam("save_onsavecallback")};var p=function(s){return !!s.getParam("save_oncancelcallback")};var g={enableWhenDirty:l,hasOnSaveCallback:r,hasOnCancelCallback:p};var j=function(s,t){s.notificationManager.open({text:s.translate(t),type:"error"})};var k=function(t){var s;s=d.DOM.getParent(t.id,"form");if(g.enableWhenDirty(t)&&!t.isDirty()){return}t.save();if(g.hasOnSaveCallback(t)){t.execCallback("save_onsavecallback",t);t.nodeChanged();return}if(s){t.setDirty(false);if(!s.onsubmit||s.onsubmit()){if(typeof s.submit==="function"){s.submit()}else{j(t,"Error: Form submit field collision.")}}t.nodeChanged()}else{j(t,"Error: No form element found.")}};var q=function(t){var s=b.trim(t.startContent);if(g.hasOnCancelCallback(t)){t.execCallback("save_oncancelcallback",t);return}t.setContent(s);t.undoManager.clear();t.nodeChanged()};var h={save:k,cancel:q};var o=function(s){s.addCommand("mceSave",function(){h.save(s)});s.addCommand("mceCancel",function(){h.cancel(s)})};var n={register:o};var e=function(s){return function(u){var t=u.control;s.on("nodeChange dirty",function(){t.disabled(g.enableWhenDirty(s)&&!s.isDirty())})}};var c=function(s){s.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:true,onPostRender:e(s)});s.addButton("cancel",{text:"Cancel",icon:false,cmd:"mceCancel",disabled:true,onPostRender:e(s)});s.addShortcut("Meta+S","","mceSave")};var i={register:c};f.add("save",function(s){i.register(s);n.register(s)});function m(){}return m}())})();