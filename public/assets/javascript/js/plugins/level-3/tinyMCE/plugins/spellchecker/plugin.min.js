(function(){var a=(function(){var w=function(X){var Y=X;var W=function(){return Y};var aa=function(ab){Y=ab};var Z=function(){return w(W())};return{get:W,set:aa,clone:Z}};var b=tinymce.util.Tools.resolve("tinymce.PluginManager");var U=function(W){if(/(^|[ ,])tinymcespellchecker([, ]|$)/.test(W.settings.plugins)&&b.get("tinymcespellchecker")){if(typeof window.console!=="undefined"&&window.console.log){window.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option.")}return true}else{return false}};var y={hasProPlugin:U};var F=function(X){var W="English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv";return X.getParam("spellchecker_languages",W)};var l=function(W){var X=W.getParam("language","en");return W.getParam("spellchecker_language",X)};var h=function(W){return W.getParam("spellchecker_rpc_url")};var I=function(W){return W.getParam("spellchecker_callback")};var O=function(X){var W=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`\xA7\xA9\xAB\xAE\xB1\xB6\xB7\xB8\xBB\xBC\xBD\xBE\xBF\xD7\xF7\xA4\u201D\u201C\u201E\xA0\u2002\u2003\u2009]+',"g");return X.getParam("spellchecker_wordchar_pattern",W)};var n={getLanguages:F,getLanguage:l,getRpcUrl:h,getSpellcheckerCallback:I,getSpellcheckerWordcharPattern:O};var N=tinymce.util.Tools.resolve("tinymce.util.Tools");var M=tinymce.util.Tools.resolve("tinymce.util.URI");var L=tinymce.util.Tools.resolve("tinymce.util.XHR");var P=function(W){return W.fire("SpellcheckStart")};var H=function(W){return W.fire("SpellcheckEnd")};var d={fireSpellcheckStart:P,fireSpellcheckEnd:H};function t(W){return W&&W.nodeType===1&&W.contentEditable==="false"}var T=function(aq,ab){var ap,Z=[],ag;var av=ab.dom;var am,ah,at;am=ab.schema.getBlockElements();ah=ab.schema.getWhiteSpaceElements();at=ab.schema.getShortEndedElements();function au(az,aA){if(!az[0]){throw new Error("findAndReplaceDOMText cannot handle zero-length matches")}return{start:az.index,end:az.index+az[0].length,text:az[0],data:aA}}function W(aA){var az;if(aA.nodeType===3){return aA.data}if(ah[aA.nodeName]&&!am[aA.nodeName]){return""}if(t(aA)){return"\n"}az="";if(am[aA.nodeName]||at[aA.nodeName]){az+="\n"}if(aA=aA.firstChild){do{az+=W(aA)}while(aA=aA.nextSibling)}return az}function aw(aC,aE,aI){var aA,aH,aF,aB,aJ=[],aG=0,aD=aC,az,aK=0;aE=aE.slice(0);aE.sort(function(aM,aL){return aM.start-aL.start});az=aE.shift();out:while(true){if(am[aD.nodeName]||at[aD.nodeName]||t(aD)){aG++}if(aD.nodeType===3){if(!aH&&aD.length+aG>=az.end){aH=aD;aB=az.end-aG}else{if(aA){aJ.push(aD)}}if(!aA&&aD.length+aG>az.start){aA=aD;aF=az.start-aG}aG+=aD.length}if(aA&&aH){aD=aI({startNode:aA,startNodeIndex:aF,endNode:aH,endNodeIndex:aB,innerNodes:aJ,match:az.text,matchIndex:aK});aG-=aH.length-aB;aA=null;aH=null;aJ=[];az=aE.shift();aK++;if(!az){break}}else{if((!ah[aD.nodeName]||am[aD.nodeName])&&aD.firstChild){if(!t(aD)){aD=aD.firstChild;continue}}else{if(aD.nextSibling){aD=aD.nextSibling;continue}}}while(true){if(aD.nextSibling){aD=aD.nextSibling;break}else{if(aD.parentNode!==aC){aD=aD.parentNode}else{break out}}}}}function aj(aA){function az(aD,aB){var aC=Z[aB];if(!aC.stencil){aC.stencil=aA(aC)}var aE=aC.stencil.cloneNode(false);aE.setAttribute("data-mce-index",aB);if(aD){aE.appendChild(av.doc.createTextNode(aD))}return aE}return function(aG){var aO;var aB;var aH;var aD=aG.startNode;var aJ=aG.endNode;var aP=aG.matchIndex;var aQ=av.doc;if(aD===aJ){var aN=aD;aH=aN.parentNode;if(aG.startNodeIndex>0){aO=aQ.createTextNode(aN.data.substring(0,aG.startNodeIndex));aH.insertBefore(aO,aN)}var aC=az(aG.match,aP);aH.insertBefore(aC,aN);if(aG.endNodeIndex<aN.length){aB=aQ.createTextNode(aN.data.substring(aG.endNodeIndex));aH.insertBefore(aB,aN)}aN.parentNode.removeChild(aN);return aC}aO=aQ.createTextNode(aD.data.substring(0,aG.startNodeIndex));aB=aQ.createTextNode(aJ.data.substring(aG.endNodeIndex));var aL=az(aD.data.substring(aG.startNodeIndex),aP);var aK=[];for(var aF=0,aE=aG.innerNodes.length;aF<aE;++aF){var aR=aG.innerNodes[aF];var aM=az(aR.data,aP);aR.parentNode.replaceChild(aM,aR);aK.push(aM)}var aI=az(aJ.data.substring(0,aG.endNodeIndex),aP);aH=aD.parentNode;aH.insertBefore(aO,aD);aH.insertBefore(aL,aD);aH.removeChild(aD);aH=aJ.parentNode;aH.insertBefore(aI,aJ);aH.insertBefore(aB,aJ);aH.removeChild(aJ);return aI}}function ac(aA){var az=aA.parentNode;az.insertBefore(aA.firstChild,aA);aA.parentNode.removeChild(aA)}function X(az){return az.className.indexOf("mce-spellchecker-word")!==-1}function ar(az){var aE=aq.getElementsByTagName("*"),aD=[];az=typeof az==="number"?""+az:null;for(var aC=0;aC<aE.length;aC++){var aB=aE[aC],aA=aB.getAttribute("data-mce-index");if(aA!==null&&aA.length&&X(aB)){if(aA===az||az===null){aD.push(aB)}}}return aD}function Y(az){var aA=Z.length;while(aA--){if(Z[aA]===az){return aA}}return -1}function af(aA){var az=[];aa(function(aB,aC){if(aA(aB,aC)){az.push(aB)}});Z=az;return this}function aa(aB){for(var aA=0,az=Z.length;aA<az;aA++){if(aB(Z[aA],aA)===false){break}}return this}function ae(az){if(Z.length){aw(aq,Z,aj(az))}return this}function al(az,aA){if(ag&&az.global){while(ap=az.exec(ag)){Z.push(au(ap,aA))}}return this}function ao(az){var aA;var aB=ar(az?Y(az):null);aA=aB.length;while(aA--){ac(aB[aA])}return this}function an(az){return Z[az.getAttribute("data-mce-index")]}function ai(az){return ar(Y(az))[0]}function ak(aB,az,aA){Z.push({start:aB,end:aB+az,text:ag.substr(aB,az),data:aA});return this}function ad(aA){var aB=ar(Y(aA));var az=ab.dom.createRng();az.setStartBefore(aB[0]);az.setEndAfter(aB[aB.length-1]);return az}function ax(aA,aB){var az=ad(aA);az.deleteContents();if(aB.length>0){az.insertNode(ab.dom.doc.createTextNode(aB))}return az}function ay(){Z.splice(0,Z.length);ao();return this}ag=W(aq);return{text:ag,matches:Z,each:aa,filter:af,reset:ay,matchFromElement:an,elementFromMatch:ai,find:al,add:ak,wrap:ae,unwrap:ao,replace:ax,rangeFromMatch:ad,indexOf:Y}};var j=function(X,W){if(!W.get()){var Y=T(X.getBody(),X);W.set(Y)}return W.get()};var q=function(X){for(var W in X){return false}return true};var B=function(Y,X,W){return function(ae,ad,aa,ab){var ac={method:ae,lang:W.get()};var Z="";ac[ae==="addToDictionary"?"word":"text"]=ad;N.each(ac,function(ag,af){if(Z){Z+="&"}Z+=af+"="+encodeURIComponent(ag)});L.send({url:new M(X).toAbsolute(n.getRpcUrl(Y)),type:"post",content_type:"application/x-www-form-urlencoded",data:Z,success:function(af){af=JSON.parse(af);if(!af){var ag=Y.translate("Server response wasn't proper JSON.");ab(ag)}else{if(af.error){ab(af.error)}else{aa(af)}}},error:function(){var af=Y.translate("The spelling service was not found: (")+n.getRpcUrl(Y)+Y.translate(")");ab(af)}})}};var D=function(ab,aa,ac,W,Y,X,Z){var ae=n.getSpellcheckerCallback(ab);var ad=ae?ae:B(ab,aa,ac);ad.call(ab.plugins.spellchecker,W,Y,X,Z)};var V=function(ac,ab,ad,aa,X,Z){if(m(ac,ad,aa)){return}var Y=function(ae){ac.notificationManager.open({text:ae,type:"error"});ac.setProgressState(false);m(ac,ad,aa)};var W=function(ae){c(ac,ad,aa,X,ae)};ac.setProgressState(true);D(ac,ab,Z,"spellcheck",j(ac,aa).text,W,Y);ac.focus()};var K=function(X,Y,W){if(!X.dom.select("span.mce-spellchecker-word").length){m(X,Y,W)}};var k=function(aa,Z,ab,X,W,ac,Y){aa.setProgressState(true);D(aa,Z,W,"addToDictionary",ac,function(){aa.setProgressState(false);aa.dom.remove(Y,true);K(aa,ab,X)},function(ad){aa.notificationManager.open({text:ad,type:"error"});aa.setProgressState(false)})};var r=function(Z,aa,W,ab,X,Y){Z.selection.collapse();if(Y){N.each(Z.dom.select("span.mce-spellchecker-word"),function(ac){if(ac.getAttribute("data-mce-word")===ab){Z.dom.remove(ac,true)}})}else{Z.dom.remove(X,true)}K(Z,aa,W)};var m=function(X,Y,W){j(X,W).reset();W.set(null);if(Y.get()){Y.set(false);d.fireSpellcheckEnd(X);return true}};var E=function(X){var W=X.getAttribute("data-mce-index");if(typeof W==="number"){return""+W}return W};var f=function(aa,X){var W;var Z=[];W=N.toArray(aa.getBody().getElementsByTagName("span"));if(W.length){for(var Y=0;Y<W.length;Y++){var ab=E(W[Y]);if(ab===null||!ab.length){continue}if(ab===X.toString()){Z.push(W[Y])}}}return Z};var c=function(Z,ab,Y,X,ac){var W,ad;if(typeof ac!=="string"&&ac.words){ad=!!ac.dictionary;W=ac.words}else{W=ac}Z.setProgressState(false);if(q(W)){var aa=Z.translate("No misspellings found.");Z.notificationManager.open({text:aa,type:"info"});ab.set(false);return}X.set({suggestions:W,hasDictionarySupport:ad});j(Z,Y).find(n.getSpellcheckerWordcharPattern(Z)).filter(function(ae){return !!W[ae.text]}).wrap(function(ae){return Z.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":ae.text})});ab.set(true);d.fireSpellcheckStart(Z)};var C={spellcheck:V,checkIfFinished:K,addToDictionary:k,ignoreWord:r,findSpansByIndex:f,getElmIndex:E,markErrors:c};var S=function(ac,Y,af,X,ad,W){var ae=function(){return ad.get()};var ab=function(){return n.getSpellcheckerWordcharPattern(ac)};var aa=function(ag){C.markErrors(ac,Y,X,af,ag)};var Z=function(){return X.get()};return{getTextMatcher:Z,getWordCharPattern:ab,markErrors:aa,getLanguage:ae}};var Q={get:S};var i=function(aa,Z,ab,Y,W,X){aa.addCommand("mceSpellCheck",function(){C.spellcheck(aa,Z,ab,Y,W,X)})};var e={register:i};var x=function(Y,W){var X=[];N.each(W,function(Z){X.push({selectable:true,text:Z.name,data:Z.value})});return X};var R=function(X,W){return function(Z){var Y=W.get();Z.control.items().each(function(aa){aa.active(aa.settings.data===Y)})}};var o=function(W){return N.map(n.getLanguages(W).split(","),function(X){X=X.split("=");return{name:X[0],value:X[1]}})};var A=function(aa,Y,X,W,ac,ae){var ab=x("Language",o(aa));var ad=function(){C.spellcheck(aa,Y,X,W,ae,ac)};var Z={tooltip:"Spellcheck",onclick:ad,onPostRender:function(ag){var af=ag.control;aa.on("SpellcheckStart SpellcheckEnd",function(){af.active(X.get())})}};if(ab.length>1){Z.type="splitbutton";Z.menu=ab;Z.onshow=R(aa,ac);Z.onselect=function(af){ac.set(af.control.settings.data)}}aa.addButton("spellchecker",Z);aa.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:ad,selectable:true,onPostRender:function(){var af=this;af.active(X.get());aa.on("SpellcheckStart SpellcheckEnd",function(){af.active(X.get())})}})};var v={register:A};var J=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var G=tinymce.util.Tools.resolve("tinymce.ui.Factory");var p;var z=function(ac,aa,aj,Y,X,ah,W,ad){var ae=[],ab=aj.get().suggestions[W];N.each(ab,function(ak){ae.push({text:ak,onclick:function(){ac.insertContent(ac.dom.encode(ak));ac.dom.remove(ad);C.checkIfFinished(ac,Y,X)}})});ae.push({text:"-"});var Z=aj.get().hasDictionarySupport;if(Z){ae.push({text:"Add to Dictionary",onclick:function(){C.addToDictionary(ac,aa,Y,X,ah,W,ad)}})}ae.push.apply(ae,[{text:"Ignore",onclick:function(){C.ignoreWord(ac,Y,X,W,ad)}},{text:"Ignore all",onclick:function(){C.ignoreWord(ac,Y,X,W,ad,true)}}]);p=G.create("menu",{items:ae,context:"contextmenu",onautohide:function(ak){if(ak.target.className.indexOf("spellchecker")!==-1){ak.preventDefault()}},onhide:function(){p.remove();p=null}});p.renderTo(document.body);var ag=J.DOM.getPos(ac.getContentAreaContainer());var ai=ac.dom.getPos(ad[0]);var af=ac.dom.getRoot();if(af.nodeName==="BODY"){ai.x-=af.ownerDocument.documentElement.scrollLeft||af.scrollLeft;ai.y-=af.ownerDocument.documentElement.scrollTop||af.scrollTop}else{ai.x-=af.scrollLeft;ai.y-=af.scrollTop}ag.x+=ai.x;ag.y+=ai.y;p.moveTo(ag.x,ag.y+ad[0].offsetHeight)};var g=function(aa,Z,W,ab,Y,X){aa.on("click",function(af){var ae=af.target;if(ae.className==="mce-spellchecker-word"){af.preventDefault();var ad=C.findSpansByIndex(aa,C.getElmIndex(ae));if(ad.length>0){var ac=aa.dom.createRng();ac.setStartBefore(ad[0]);ac.setEndAfter(ad[ad.length-1]);aa.selection.setRng(ac);z(aa,Z,W,ab,Y,X,ae.getAttribute("data-mce-word"),ad)}}})};var u={setup:g};b.add("spellchecker",function(aa,Z){if(y.hasProPlugin(aa)===false){var ab=w(false);var Y=w(n.getLanguage(aa));var X=w(null);var W=w(null);v.register(aa,Z,ab,X,Y,W);u.setup(aa,Z,W,ab,X,Y);e.register(aa,Z,ab,X,W,Y);return Q.get(aa,ab,W,X,Y,Z)}});function s(){}return s}())})();