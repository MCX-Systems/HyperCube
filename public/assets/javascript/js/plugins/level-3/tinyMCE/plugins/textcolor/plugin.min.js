(function(){var a=(function(){var B=tinymce.util.Tools.resolve("tinymce.PluginManager");var q=function(J,K){var I;J.dom.getParents(J.selection.getStart(),function(M){var L;if(L=M.style[K==="forecolor"?"color":"background-color"]){I=L}});return I};var u=function(J){var K;var I=[];for(K=0;K<J.length;K+=2){I.push({text:J[K+1],color:"#"+J[K]})}return I};var m=function(I,K,J){I.undoManager.transact(function(){I.focus();I.formatter.apply(K,{value:J});I.nodeChanged()})};var y=function(I,J){I.undoManager.transact(function(){I.focus();I.formatter.remove(J,{value:null},null,true);I.nodeChanged()})};var f={getCurrentColor:q,mapColors:u,applyFormat:m,removeFormat:y};var d=function(I){I.addCommand("mceApplyTextcolor",function(K,J){f.applyFormat(I,K,J)});I.addCommand("mceRemoveTextcolor",function(J){f.removeFormat(I,J)})};var A={register:d};var t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var s=tinymce.util.Tools.resolve("tinymce.util.Tools");var F=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"];var E=function(I){return I.getParam("textcolor_map",F)};var j=function(I){return I.getParam("forecolor_map",E(I))};var C=function(I){return I.getParam("backcolor_map",E(I))};var x=function(I){return I.getParam("textcolor_rows",5)};var z=function(I){return I.getParam("textcolor_cols",8)};var b=function(I){return I.getParam("forecolor_rows",x(I))};var h=function(I){return I.getParam("backcolor_rows",x(I))};var c=function(I){return I.getParam("forecolor_cols",z(I))};var i=function(I){return I.getParam("backcolor_cols",z(I))};var v=function(I){return I.getParam("color_picker_callback",null)};var g=function(I){return typeof v(I)==="function"};var n={getForeColorMap:j,getBackColorMap:C,getForeColorRows:b,getBackColorRows:h,getForeColorCols:c,getBackColorCols:i,getColorPickerCallback:v,hasColorPicker:g};var r=tinymce.util.Tools.resolve("tinymce.util.I18n");var H=function(S,V,L,K){var I,M,O,U,T,R,N,P=0;var J=t.DOM.uniqueId("mcearia");var Q=function(W,Y){var X=W==="transparent";return'<td class="mce-grid-cell'+(X?" mce-colorbtn-trans":"")+'"><div id="'+J+"-"+P+++'" data-mce-color="'+(W?W:"")+'" role="option" tabIndex="-1" style="'+(W?"background-color: "+W:"")+'" title="'+r.translate(Y)+'">'+(X?"&#215;":"")+"</div></td>"};I=f.mapColors(L);I.push({text:r.translate("No color"),color:"transparent"});O='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>';U=I.length-1;for(R=0;R<V;R++){O+="<tr>";for(T=0;T<S;T++){N=R*S+T;if(N>U){O+="<td></td>"}else{M=I[N];O+=Q(M.color,M.text)}}O+="</tr>"}if(K){O+='<tr><td colspan="'+S+'" class="mce-custom-color-btn"><div id="'+J+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+J+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+r.translate("Custom...")+"</button></div></td></tr>";O+="<tr>";for(T=0;T<S;T++){O+=Q("","Custom color")}O+="</tr>"}O+="</tbody></table>";return O};var k={getHtml:H};var l=function l(J,I){J.style.background=I;J.setAttribute("data-mce-color",I)};var G=function(I){return function(K){var J=K.control;if(J._color){I.execCommand("mceApplyTextcolor",J.settings.format,J._color)}else{I.execCommand("mceRemoveTextcolor",J.settings.format)}}};var w=function(I,J){return function(Q){var N=this.parent();var P;var L=f.getCurrentColor(I,N.settings.format);var K=function(R){I.execCommand("mceApplyTextcolor",N.settings.format,R);N.hidePanel();N.color(R)};var O=function(){I.execCommand("mceRemoveTextcolor",N.settings.format);N.hidePanel();N.resetColor()};if(t.DOM.getParent(Q.target,".mce-custom-color-btn")){N.hidePanel();var M=n.getColorPickerCallback(I);M.call(I,function(U){var R=N.panel.getEl().getElementsByTagName("table")[0];var T,V,S;T=s.map(R.rows[R.rows.length-1].childNodes,function(W){return W.firstChild});for(S=0;S<T.length;S++){V=T[S];if(!V.getAttribute("data-mce-color")){break}}if(S===J){for(S=0;S<J-1;S++){l(T[S],T[S+1].getAttribute("data-mce-color"))}}l(V,U);K(U)},L)}P=Q.target.getAttribute("data-mce-color");if(P){if(this.lastId){t.DOM.get(this.lastId).setAttribute("aria-selected","false")}Q.target.setAttribute("aria-selected",true);this.lastId=Q.target.id;if(P==="transparent"){O()}else{K(P)}}else{if(P!==null){N.hidePanel()}}}};var p=function(I,J){return function(){var N=J?n.getForeColorCols(I):n.getBackColorCols(I);var M=J?n.getForeColorRows(I):n.getBackColorRows(I);var K=J?n.getForeColorMap(I):n.getBackColorMap(I);var L=n.hasColorPicker(I);return k.getHtml(N,M,K,L)}};var D=function(I){I.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:true,html:p(I,true),onclick:w(I,n.getForeColorCols(I))},onclick:G(I)});I.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:true,html:p(I,false),onclick:w(I,n.getBackColorCols(I))},onclick:G(I)})};var o={register:D};B.add("textcolor",function(I){A.register(I);o.register(I)});function e(){}return e}())})();