(function(){var b=(function(){var N=function(c){var g=c;var f=function(){return g};var d=function(h){g=h};var e=function(){return N(f())};return{get:f,set:d,clone:e}};var E=tinymce.util.Tools.resolve("tinymce.PluginManager");var J=function(c){return c.getParam("insertdatetime_dateformat",c.translate("%Y-%m-%d"))};var M=function(c){return c.getParam("insertdatetime_timeformat",c.translate("%H:%M:%S"))};var a=function(c){return c.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])};var z=function(c){var d=a(c);return d.length>0?d[0]:M(c)};var D=function(c){return c.getParam("insertdatetime_element",false)};var K={getDateFormat:J,getTimeFormat:M,getFormats:a,getDefaultDateTime:z,shouldInsertTimeElement:D};var P="Sun Mon Tue Wed Thu Fri Sat Sun".split(" ");var V="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" ");var U="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");var I="January February March April May June July August September October November December".split(" ");var F=function(e,d){e=""+e;if(e.length<d){for(var c=0;c<d-e.length;c++){e="0"+e}}return e};var O=function(e,d,c){c=c||new Date();d=d.replace("%D","%m/%d/%Y");d=d.replace("%r","%I:%M:%S %p");d=d.replace("%Y",""+c.getFullYear());d=d.replace("%y",""+c.getYear());d=d.replace("%m",F(c.getMonth()+1,2));d=d.replace("%d",F(c.getDate(),2));d=d.replace("%H",""+F(c.getHours(),2));d=d.replace("%M",""+F(c.getMinutes(),2));d=d.replace("%S",""+F(c.getSeconds(),2));d=d.replace("%I",""+((c.getHours()+11)%12+1));d=d.replace("%p",""+(c.getHours()<12?"AM":"PM"));d=d.replace("%B",""+e.translate(I[c.getMonth()]));d=d.replace("%b",""+e.translate(U[c.getMonth()]));d=d.replace("%A",""+e.translate(V[c.getDay()]));d=d.replace("%a",""+e.translate(P[c.getDay()]));d=d.replace("%%","%");return d};var B=function(f,d,c,e){var g=f.dom.create("time",{datetime:c},e);d.parentNode.insertBefore(g,d);f.dom.remove(d);f.selection.select(g,true);f.selection.collapse(false)};var G=function(g,f){if(K.shouldInsertTimeElement(g)){var e=O(g,f);var c=void 0;if(/%[HMSIp]/.test(f)){c=O(g,"%Y-%m-%dT%H:%M")}else{c=O(g,"%Y-%m-%d")}var d=g.dom.getParent(g.selection.getStart(),"time");if(d){B(g,d,c,e)}else{g.insertContent('<time datetime="'+c+'">'+e+"</time>")}}else{g.insertContent(O(g,f))}};var C={insertDateTime:G,getDateTime:O};var T=function(c){c.addCommand("mceInsertDate",function(){C.insertDateTime(c,K.getDateFormat(c))});c.addCommand("mceInsertTime",function(){C.insertDateTime(c,K.getTimeFormat(c))})};var Q={register:T};var L=tinymce.util.Tools.resolve("tinymce.util.Tools");var R=function(c,e){var d=K.getFormats(c);return L.map(d,function(f){return{text:C.getDateTime(c,f),onclick:function(){e.set(f);C.insertDateTime(c,f)}}})};var A=function(c,e){var d=R(c,e);c.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",menu:d,onclick:function(){var f=e.get();C.insertDateTime(c,f?f:K.getDefaultDateTime(c))}});c.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:d,context:"insert"})};var H={register:A};E.add("insertdatetime",function(d){var c=N(null);Q.register(d);H.register(d,c)});function S(){}return S}())})();