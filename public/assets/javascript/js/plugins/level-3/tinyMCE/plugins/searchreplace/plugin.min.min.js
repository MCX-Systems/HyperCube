(function(){var b=(function(){var af=function(f){var e=f;var g=function(){return e};var c=function(h){e=h};var d=function(){return af(g())};return{get:g,set:c,clone:d}};var a=tinymce.util.Tools.resolve("tinymce.PluginManager");var Z=tinymce.util.Tools.resolve("tinymce.util.Tools");function H(c){return c&&c.nodeType===1&&c.contentEditable==="false"}function R(i,p,s,c,n){var o;var m=[];var d,j=0,h;var e,r,k;h=p.ownerDocument;e=n.getBlockElements();r=n.getWhiteSpaceElements();k=n.getShortEndedElements();function g(w,v){v=v||0;if(!w[0]){throw new Error("findAndReplaceDOMText cannot handle zero-length matches")}var u=w.index;if(v>0){var t=w[v];if(!t){throw new Error("Invalid capture group")}u+=w[0].indexOf(t);w[0]=t}return[u,u+w[0].length,[w[0]]]}function f(t){var u;if(t.nodeType===3){return t.data}if(r[t.nodeName]&&!e[t.nodeName]){return""}u="";if(H(t)){return"\n"}if(e[t.nodeName]||k[t.nodeName]){u+="\n"}if(t=t.firstChild){do{u+=f(t)}while(t=t.nextSibling)}return u}function l(t,D,z){var v,A,C,u,y=[],B=0,E=t,w=D.shift(),x=0;out:while(true){if(e[E.nodeName]||k[E.nodeName]||H(E)){B++}if(E.nodeType===3){if(!A&&E.length+B>=w[1]){A=E;u=w[1]-B}else{if(v){y.push(E)}}if(!v&&E.length+B>w[0]){v=E;C=w[0]-B}B+=E.length}if(v&&A){E=z({startNode:v,startNodeIndex:C,endNode:A,endNodeIndex:u,innerNodes:y,match:w[2],matchIndex:x});B-=A.length-u;v=null;A=null;y=[];w=D.shift();x++;if(!w){break}}else{if((!r[E.nodeName]||e[E.nodeName])&&E.firstChild){if(!H(E)){E=E.firstChild;continue}}else{if(E.nextSibling){E=E.nextSibling;continue}}}while(true){if(E.nextSibling){E=E.nextSibling;break}else{if(E.parentNode!==t){E=E.parentNode}else{break out}}}}}function q(t){var v;if(typeof t!=="function"){var u=t.nodeType?t:h.createElement(t);v=function(x,y){var w=u.cloneNode(false);w.setAttribute("data-mce-index",y);if(x){w.appendChild(h.createTextNode(x))}return w}}else{v=t}return function(al){var A;var w;var ak;var ao=al.startNode;var E=al.endNode;var y=al.matchIndex;if(ao===E){var z=ao;ak=z.parentNode;if(al.startNodeIndex>0){A=h.createTextNode(z.data.substring(0,al.startNodeIndex));ak.insertBefore(A,z)}var ap=v(al.match[0],y);ak.insertBefore(ap,z);if(al.endNodeIndex<z.length){w=h.createTextNode(z.data.substring(al.endNodeIndex));ak.insertBefore(w,z)}z.parentNode.removeChild(z);return ap}A=h.createTextNode(ao.data.substring(0,al.startNodeIndex));w=h.createTextNode(E.data.substring(al.endNodeIndex));var C=v(ao.data.substring(al.startNodeIndex),y);var D=[];for(var am=0,an=al.innerNodes.length;am<an;++am){var x=al.innerNodes[am];var B=v(x.data,y);x.parentNode.replaceChild(B,x);D.push(B)}var F=v(E.data.substring(0,al.endNodeIndex),y);ak=ao.parentNode;ak.insertBefore(A,ao);ak.insertBefore(C,ao);ak.removeChild(ao);ak=E.parentNode;ak.insertBefore(F,E);ak.insertBefore(w,E);ak.removeChild(E);return F}}d=f(p);if(!d){return}if(i.global){while(o=i.exec(d)){m.push(g(o,c))}}else{o=d.match(i);m.push(g(o,c))}if(m.length){j=m.length;l(p,m,q(s))}return j}var X={findAndReplaceDOMText:R};var ae=function(c){var d=c.getAttribute("data-mce-index");if(typeof d==="number"){return""+d}return d};var J=function(e,f,c){var d,g;g=e.dom.create("span",{"data-mce-bogus":1});g.className="mce-match-marker";d=e.getBody();P(e,f,false);return X.findAndReplaceDOMText(c,d,g,false,e.schema)};var G=function(c){var d=c.parentNode;if(c.firstChild){d.insertBefore(c.firstChild,c)}c.parentNode.removeChild(c)};var ad=function(d,g){var h;var e=[];h=Z.toArray(d.getBody().getElementsByTagName("span"));if(h.length){for(var f=0;f<h.length;f++){var c=ae(h[f]);if(c===null||!c.length){continue}if(c===g.toString()){e.push(h[f])}}}return e};var ab=function(d,h,g){var e=h.get();var c=d.dom;g=g!==false;if(g){e++}else{e--}c.removeClass(ad(d,h.get()),"mce-match-marker-selected");var f=ad(d,e);if(f.length){c.addClass(ad(d,e),"mce-match-marker-selected");d.selection.scrollIntoView(f[0]);return e}return -1};var V=function(c,d){var e=d.parentNode;c.remove(d);if(c.isEmpty(e)){c.remove(e)}};var N=function(f,h,c,d,g){c=c.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");c=c.replace(/\s/g,"\\s");c=g?"\\b"+c+"\\b":c;var e=J(f,h,new RegExp(c,d?"g":"gi"));if(e){h.set(-1);h.set(ab(f,h,true))}return e};var I=function(c,e){var d=ab(c,e,true);if(d!==-1){e.set(d)}};var L=function(c,e){var d=ab(c,e,false);if(d!==-1){e.set(d)}};var W=function(c){var d=ae(c);return d!==null&&d.length>0};var K=function(g,f,c,h,d){var j,o,m,e,k,i=f.get(),n;h=h!==false;m=g.getBody();o=Z.grep(Z.toArray(m.getElementsByTagName("span")),W);for(j=0;j<o.length;j++){var l=ae(o[j]);e=k=parseInt(l,10);if(d||e===f.get()){if(c.length){o[j].firstChild.nodeValue=c;G(o[j])}else{V(g.dom,o[j])}while(o[++j]){e=parseInt(ae(o[j]),10);if(e===k){V(g.dom,o[j])}else{j--;break}}if(h){i--}}else{if(k>f.get()){o[j].setAttribute("data-mce-index",k-1)}}}f.set(i);if(h){n=aa(g,f);I(g,f)}else{n=ac(g,f);L(g,f)}return !d&&n};var P=function(f,e,d){var g,j,i,c;j=Z.toArray(f.getBody().getElementsByTagName("span"));for(g=0;g<j.length;g++){var h=ae(j[g]);if(h!==null&&h.length){if(h===e.get().toString()){if(!i){i=j[g].firstChild}c=j[g].firstChild}G(j[g])}}if(i&&c){var k=f.dom.createRng();k.setStart(i,0);k.setEnd(c,c.data.length);if(d!==false){f.selection.setRng(k)}return k}};var aa=function(c,d){return ad(c,d.get()+1).length>0};var ac=function(c,d){return ad(c,d.get()-1).length>0};var T={done:P,find:N,next:I,prev:L,replace:K,hasNext:aa,hasPrev:ac};var M=function(d,g){var h=function(j){return T.done(d,g,j)};var i=function(j,k,l){return T.find(d,g,j,k,l)};var e=function(){return T.next(d,g)};var c=function(){return T.prev(d,g)};var f=function(j,l,k){return T.replace(d,g,j,l,k)};return{done:h,find:i,next:e,prev:c,replace:f}};var ah={get:M};var S=function(f,h){var e={},i;f.undoManager.add();i=Z.trim(f.selection.getContent({format:"text"}));function g(){d.statusbar.find("#next").disabled(T.hasNext(f,h)===false);d.statusbar.find("#prev").disabled(T.hasPrev(f,h)===false)}function c(){f.windowManager.alert("Could not find the specified string.",function(){d.find("#find")[0].focus()})}var d=f.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){f.focus();T.done(f,h);f.undoManager.add()},onSubmit:function(k){var l,n,j,m;k.preventDefault();n=d.find("#case").checked();m=d.find("#words").checked();j=d.find("#find").value();if(!j.length){T.done(f,h,false);d.statusbar.items().slice(1).disabled(true);return}if(e.text===j&&e.caseState===n&&e.wholeWord===m){if(!T.hasNext(f,h)){c();return}T.next(f,h);g();return}l=T.find(f,h,j,n,m);if(!l){c()}d.statusbar.items().slice(1).disabled(l===0);g();e={text:j,caseState:n,wholeWord:m}},buttons:[{text:"Find",subtype:"primary",onclick:function(){d.submit()}},{text:"Replace",disabled:true,onclick:function(){if(!T.replace(f,h,d.find("#replace").value())){d.statusbar.items().slice(1).disabled(true);h.set(-1);e={}}}},{text:"Replace all",disabled:true,onclick:function(){T.replace(f,h,d.find("#replace").value(),true,true);d.statusbar.items().slice(1).disabled(true);e={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:true,onclick:function(){T.prev(f,h);g()}},{text:"Next",name:"next",disabled:true,onclick:function(){T.next(f,h);g()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:i},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})};var Y={open:S};var aj=function(c,d){c.addCommand("SearchReplace",function(){Y.open(c,d)})};var Q={register:aj};var U=function(c,d){return function(){Y.open(c,d)}};var O=function(c,d){c.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:U(c,d),separator:"before",context:"edit"});c.addButton("searchreplace",{tooltip:"Find and replace",onclick:U(c,d)});c.shortcuts.add("Meta+F","",U(c,d))};var ag={register:O};a.add("searchreplace",function(c){var d=af(-1);Q.register(c,d);ag.register(c,d);return ah.get(c,d)});function ai(){}return ai}())})();