(function(){var b=(function(){var A=tinymce.util.Tools.resolve("tinymce.PluginManager");var B=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var D=tinymce.util.Tools.resolve("tinymce.EditorManager");var a=tinymce.util.Tools.resolve("tinymce.Env");var r=tinymce.util.Tools.resolve("tinymce.util.Delay");var t=tinymce.util.Tools.resolve("tinymce.util.Tools");var u=tinymce.util.Tools.resolve("tinymce.util.VK");var w=function(c){return c.getParam("tabfocus_elements",":prev,:next")};var C=function(c){return c.getParam("tab_focus",w(c))};var z={getTabFocus:C};var s=B.DOM;var q=function(c){if(c.keyCode===u.TAB&&!c.ctrlKey&&!c.altKey&&!c.metaKey){c.preventDefault()}};var x=function(c){function d(j){var i,f,h,g;if(j.keyCode!==u.TAB||j.ctrlKey||j.altKey||j.metaKey||j.isDefaultPrevented()){return}function e(n){f=s.select(":input:enabled,*[tabindex]:not(iframe)");function l(o){return o.nodeName==="BODY"||o.type!=="hidden"&&o.style.display!=="none"&&o.style.visibility!=="hidden"&&l(o.parentNode)}function m(o){return/INPUT|TEXTAREA|BUTTON/.test(o.tagName)&&D.get(j.id)&&o.tabIndex!==-1&&l(o)}t.each(f,function(o,p){if(o.id===c.id){i=p;return false}});if(n>0){for(g=i+1;g<f.length;g++){if(m(f[g])){return f[g]}}}else{for(g=i-1;g>=0;g--){if(m(f[g])){return f[g]}}}return null}h=t.explode(z.getTabFocus(c));if(h.length===1){h[1]=h[0];h[0]=":prev"}if(j.shiftKey){if(h[0]===":prev"){f=e(-1)}else{f=s.get(h[0])}}else{if(h[1]===":next"){f=e(1)}else{f=s.get(h[1])}}if(f){var k=D.get(f.id||f.name);if(f.id&&k){k.focus()}else{r.setTimeout(function(){if(!a.webkit){window.focus()}f.focus()},10)}j.preventDefault()}}c.on("init",function(){if(c.inline){s.setAttrib(c.getBody(),"tabIndex",null)}c.on("keyup",q);if(a.gecko){c.on("keypress keydown",d)}else{c.on("keydown",d)}})};var y={setup:x};A.add("tabfocus",function(c){y.setup(c)});function v(){}return v}())})();