(function(){var a=(function(){var f=tinymce.util.Tools.resolve("tinymce.PluginManager");var e=tinymce.util.Tools.resolve("tinymce.Env");var i=function(r){return r.getParam("pagebreak_separator","<!-- pagebreak -->")};var g=function(r){return r.getParam("pagebreak_split_block",false)};var h={getSeparatorHtml:i,shouldSplitBlock:g};var q=function(){return"mce-pagebreak"};var j=function(){return'<img src="'+e.transparentSrc+'" class="'+q()+'" data-mce-resize="false" data-mce-placeholder />'};var k=function(s){var r=h.getSeparatorHtml(s);var t=new RegExp(r.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(u){return"\\"+u}),"gi");s.on("BeforeSetContent",function(u){u.content=u.content.replace(t,j())});s.on("PreInit",function(){s.serializer.addNodeFilter("img",function(v){var w=v.length,y,x;while(w--){y=v[w];x=y.attr("class");if(x&&x.indexOf("mce-pagebreak")!==-1){var u=y.parent;if(s.schema.getBlockElements()[u.name]&&h.shouldSplitBlock(s)){u.type=3;u.value=r;u.raw=true;y.remove();continue}y.type=3;y.value=r;y.raw=true}}})})};var c={setup:k,getPlaceholderHtml:j,getPageBreakClass:q};var p=function(r){r.addCommand("mcePageBreak",function(){if(r.settings.pagebreak_split_block){r.insertContent("<p>"+c.getPlaceholderHtml()+"</p>")}else{r.insertContent(c.getPlaceholderHtml())}})};var b={register:p};var l=function(r){r.on("ResolveName",function(s){if(s.target.nodeName==="IMG"&&r.dom.hasClass(s.target,c.getPageBreakClass())){s.name="pagebreak"}})};var n={setup:l};var d=function(r){r.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"});r.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})};var m={register:d};f.add("pagebreak",function(r){b.register(r);m.register(r);c.setup(r);n.setup(r)});function o(){}return o}())})();