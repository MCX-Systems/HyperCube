(function(){var a=(function(){var f=tinymce.util.Tools.resolve("tinymce.PluginManager");var b=tinymce.util.Tools.resolve("tinymce.util.Tools");var g=function(h){h=b.trim(h);var i=function(j,k){h=h.replace(j,k)};i(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]");i(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]");i(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]");i(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]");i(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]");i(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]");i(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]");i(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]");i(/<font>(.*?)<\/font>/gi,"$1");i(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]");i(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]");i(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]");i(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]");i(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]");i(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]");i(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]");i(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]");i(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]");i(/<\/(strong|b)>/gi,"[/b]");i(/<(strong|b)>/gi,"[b]");i(/<\/(em|i)>/gi,"[/i]");i(/<(em|i)>/gi,"[i]");i(/<\/u>/gi,"[/u]");i(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]");i(/<u>/gi,"[u]");i(/<blockquote[^>]*>/gi,"[quote]");i(/<\/blockquote>/gi,"[/quote]");i(/<br \/>/gi,"\n");i(/<br\/>/gi,"\n");i(/<br>/gi,"\n");i(/<p>/gi,"");i(/<\/p>/gi,"\n");i(/&nbsp;|\u00a0/gi," ");i(/&quot;/gi,'"');i(/&lt;/gi,"<");i(/&gt;/gi,">");i(/&amp;/gi,"&");return h};var d=function(h){h=b.trim(h);var i=function(j,k){h=h.replace(j,k)};i(/\n/gi,"<br />");i(/\[b\]/gi,"<strong>");i(/\[\/b\]/gi,"</strong>");i(/\[i\]/gi,"<em>");i(/\[\/i\]/gi,"</em>");i(/\[u\]/gi,"<u>");i(/\[\/u\]/gi,"</u>");i(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>');i(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>');i(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />');i(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>');i(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;');i(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;');return h};var c={html2bbcode:g,bbcode2html:d};f.add("bbcode",function(){return{init:function(h){h.on("beforeSetContent",function(i){i.content=c.bbcode2html(i.content)});h.on("postProcess",function(i){if(i.set){i.content=c.bbcode2html(i.content)}if(i.get){i.content=c.html2bbcode(i.content)}})}}});function e(){}return e}())})();