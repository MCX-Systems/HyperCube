(function(){var b=(function(){var W=tinymce.util.Tools.resolve("tinymce.PluginManager");var X=function(d,c){var e;d.dom.getParents(d.selection.getStart(),function(g){var f;if(f=g.style[c==="forecolor"?"color":"background-color"]){e=f}});return e};var P=function(d){var c;var e=[];for(c=0;c<d.length;c+=2){e.push({text:d[c+1],color:"#"+d[c]})}return e};var ac=function(e,c,d){e.undoManager.transact(function(){e.focus();e.formatter.apply(c,{value:d});e.nodeChanged()})};var I=function(d,c){d.undoManager.transact(function(){d.focus();d.formatter.remove(c,{value:null},null,true);d.nodeChanged()})};var aj={getCurrentColor:X,mapColors:P,applyFormat:ac,removeFormat:I};var al=function(c){c.addCommand("mceApplyTextcolor",function(d,e){aj.applyFormat(c,d,e)});c.addCommand("mceRemoveTextcolor",function(d){aj.removeFormat(c,d)})};var Z={register:al};var R=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var T=tinymce.util.Tools.resolve("tinymce.util.Tools");var O=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"];var Q=function(c){return c.getParam("textcolor_map",O)};var af=function(c){return c.getParam("forecolor_map",Q(c))};var V=function(c){return c.getParam("backcolor_map",Q(c))};var J=function(c){return c.getParam("textcolor_rows",5)};var a=function(c){return c.getParam("textcolor_cols",8)};var an=function(c){return c.getParam("forecolor_rows",J(c))};var ah=function(c){return c.getParam("backcolor_rows",J(c))};var am=function(c){return c.getParam("forecolor_cols",a(c))};var ag=function(c){return c.getParam("backcolor_cols",a(c))};var N=function(c){return c.getParam("color_picker_callback",null)};var ai=function(c){return typeof N(c)==="function"};var ab={getForeColorMap:af,getBackColorMap:V,getForeColorRows:an,getBackColorRows:ah,getForeColorCols:am,getBackColorCols:ag,getColorPickerCallback:N,hasColorPicker:ai};var U=tinymce.util.Tools.resolve("tinymce.util.I18n");var L=function(f,c,m,n){var p,l,j,d,e,g,k,i=0;var o=R.DOM.uniqueId("mcearia");var h=function(q,r){var s=q==="transparent";return'<td class="mce-grid-cell'+(s?" mce-colorbtn-trans":"")+'"><div id="'+o+"-"+i+++'" data-mce-color="'+(q?q:"")+'" role="option" tabIndex="-1" style="'+(q?"background-color: "+q:"")+'" title="'+U.translate(r)+'">'+(s?"&#215;":"")+"</div></td>"};p=aj.mapColors(m);p.push({text:U.translate("No color"),color:"transparent"});j='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>';d=p.length-1;for(g=0;g<c;g++){j+="<tr>";for(e=0;e<f;e++){k=g*f+e;if(k>d){j+="<td></td>"}else{l=p[k];j+=h(l.color,l.text)}}j+="</tr>"}if(n){j+='<tr><td colspan="'+f+'" class="mce-custom-color-btn"><div id="'+o+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+o+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+U.translate("Custom...")+"</button></div></td></tr>";j+="<tr>";for(e=0;e<f;e++){j+=h("","Custom color")}j+="</tr>"}j+="</tbody></table>";return j};var ae={getHtml:L};var ad=function ad(c,d){c.style.background=d;c.setAttribute("data-mce-color",d)};var M=function(c){return function(d){var e=d.control;if(e._color){c.execCommand("mceApplyTextcolor",e.settings.format,e._color)}else{c.execCommand("mceRemoveTextcolor",e.settings.format)}}};var K=function(d,c){return function(g){var j=this.parent();var h;var e=aj.getCurrentColor(d,j.settings.format);var f=function(l){d.execCommand("mceApplyTextcolor",j.settings.format,l);j.hidePanel();j.color(l)};var i=function(){d.execCommand("mceRemoveTextcolor",j.settings.format);j.hidePanel();j.resetColor()};if(R.DOM.getParent(g.target,".mce-custom-color-btn")){j.hidePanel();var k=ab.getColorPickerCallback(d);k.call(d,function(m){var p=j.panel.getEl().getElementsByTagName("table")[0];var n,l,o;n=T.map(p.rows[p.rows.length-1].childNodes,function(q){return q.firstChild});for(o=0;o<n.length;o++){l=n[o];if(!l.getAttribute("data-mce-color")){break}}if(o===c){for(o=0;o<c-1;o++){ad(n[o],n[o+1].getAttribute("data-mce-color"))}}ad(l,m);f(m)},e)}h=g.target.getAttribute("data-mce-color");if(h){if(this.lastId){R.DOM.get(this.lastId).setAttribute("aria-selected","false")}g.target.setAttribute("aria-selected",true);this.lastId=g.target.id;if(h==="transparent"){i()}else{f(h)}}else{if(h!==null){j.hidePanel()}}}};var Y=function(d,c){return function(){var g=c?ab.getForeColorCols(d):ab.getBackColorCols(d);var h=c?ab.getForeColorRows(d):ab.getBackColorRows(d);var f=c?ab.getForeColorMap(d):ab.getBackColorMap(d);var e=ab.hasColorPicker(d);return ae.getHtml(g,h,f,e)}};var S=function(c){c.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:true,html:Y(c,true),onclick:K(c,ab.getForeColorCols(c))},onclick:M(c)});c.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:true,html:Y(c,false),onclick:K(c,ab.getBackColorCols(c))},onclick:M(c)})};var aa={register:S};W.add("textcolor",function(c){Z.register(c);aa.register(c)});function ak(){}return ak}())})();