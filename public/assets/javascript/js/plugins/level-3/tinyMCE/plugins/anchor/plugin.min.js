(function(){var a=(function(){var d=tinymce.util.Tools.resolve("tinymce.PluginManager");var h=function(s){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(s)};var e=function(t){var u=t.selection.getNode();var s=u.tagName==="A"&&t.dom.getAttrib(u,"href")==="";return s?u.id||u.name:""};var r=function(t,v){var u=t.selection.getNode();var s=u.tagName==="A"&&t.dom.getAttrib(u,"href")==="";if(s){u.removeAttribute("name");u.id=v;t.undoManager.add()}else{t.focus();t.selection.collapse(true);t.execCommand("mceInsertContent",false,t.dom.createHTML("a",{id:v}))}};var n={isValidId:h,getId:e,insert:r};var f=function(t,s){if(!n.isValidId(s)){t.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.");return true}else{n.insert(t,s);return false}};var i=function(t){var s=n.getId(t);t.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:s},onsubmit:function(v){var u=v.data.id;if(f(t,u)){v.preventDefault()}}})};var j={open:i};var q=function(s){s.addCommand("mceAnchor",function(){j.open(s)})};var b={register:q};var l=function(s){return !s.attr("href")&&(s.attr("id")||s.attr("name"))&&!s.firstChild};var m=function(s){return function(t){for(var u=0;u<t.length;u++){if(l(t[u])){t[u].attr("contenteditable",s)}}}};var g=function(s){s.on("PreInit",function(){s.parser.addNodeFilter("a",m("false"));s.serializer.addNodeFilter("a",m(null))})};var o={setup:g};var c=function(s){s.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"});s.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})};var k={register:c};d.add("anchor",function(s){o.setup(s);b.register(s);k.register(s)});function p(){}return p}())})();