(function(){var b=(function(){var i=tinymce.util.Tools.resolve("tinymce.PluginManager");var a=tinymce.util.Tools.resolve("tinymce.util.Tools");var h=function(d){d=a.trim(d);var c=function(f,e){d=d.replace(f,e)};c(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]");c(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]");c(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]");c(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]");c(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]");c(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]");c(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]");c(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]");c(/<font>(.*?)<\/font>/gi,"$1");c(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]");c(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]");c(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]");c(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]");c(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]");c(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]");c(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]");c(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]");c(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]");c(/<\/(strong|b)>/gi,"[/b]");c(/<(strong|b)>/gi,"[b]");c(/<\/(em|i)>/gi,"[/i]");c(/<(em|i)>/gi,"[i]");c(/<\/u>/gi,"[/u]");c(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]");c(/<u>/gi,"[u]");c(/<blockquote[^>]*>/gi,"[quote]");c(/<\/blockquote>/gi,"[/quote]");c(/<br \/>/gi,"\n");c(/<br\/>/gi,"\n");c(/<br>/gi,"\n");c(/<p>/gi,"");c(/<\/p>/gi,"\n");c(/&nbsp;|\u00a0/gi," ");c(/&quot;/gi,'"');c(/&lt;/gi,"<");c(/&gt;/gi,">");c(/&amp;/gi,"&");return d};var k=function(d){d=a.trim(d);var c=function(f,e){d=d.replace(f,e)};c(/\n/gi,"<br />");c(/\[b\]/gi,"<strong>");c(/\[\/b\]/gi,"</strong>");c(/\[i\]/gi,"<em>");c(/\[\/i\]/gi,"</em>");c(/\[u\]/gi,"<u>");c(/\[\/u\]/gi,"</u>");c(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>');c(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>');c(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />');c(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>');c(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;');c(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;');return d};var l={html2bbcode:h,bbcode2html:k};i.add("bbcode",function(){return{init:function(c){c.on("beforeSetContent",function(d){d.content=l.bbcode2html(d.content)});c.on("postProcess",function(d){if(d.set){d.content=l.bbcode2html(d.content)}if(d.get){d.content=l.html2bbcode(d.content)}})}}});function j(){}return j}())})();