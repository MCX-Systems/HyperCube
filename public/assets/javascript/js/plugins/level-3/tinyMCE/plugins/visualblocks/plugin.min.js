(function(){var a=(function(){var h=function(y){var z=y;var x=function(){return z};var B=function(C){z=C};var A=function(){return h(x())};return{get:x,set:B,clone:A}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");var e=function(x,y){x.fire("VisualBlocks",{state:y})};var u={fireVisualBlocks:e};var s=function(x){return x.getParam("visualblocks_default_state",false)};var i=function(x){return x.settings.visualblocks_content_css};var o={isEnabledByDefault:s,getContentCss:i};var m=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var l=tinymce.util.Tools.resolve("tinymce.util.Tools");var n=m.DOM.uniqueId();var j=function(z,x){var y=l.toArray(z.getElementsByTagName("link"));var B=l.grep(y,function(C){return C.id===n});if(B.length===0){var A=m.DOM.create("link",{id:n,rel:"stylesheet",href:x});z.getElementsByTagName("head")[0].appendChild(A)}};var f={load:j};var c=function(y,x,z){var A=y.dom;var B=o.getContentCss(y);f.load(y.getDoc(),B?B:x+"/css/visualblocks.css");A.toggleClass(y.getBody(),"mce-visualblocks");z.set(!z.get());u.fireVisualBlocks(y,z.get())};var k={toggleVisualBlocks:c};var b=function(y,x,z){y.addCommand("mceVisualBlocks",function(){k.toggleVisualBlocks(y,x,z)})};var p={register:b};var q=function(y,x,z){y.on("PreviewFormats AfterPreviewFormats",function(A){if(z.get()){y.dom.toggleClass(y.getBody(),"mce-visualblocks",A.type==="afterpreviewformats")}});y.on("init",function(){if(o.isEnabledByDefault(y)){k.toggleVisualBlocks(y,x,z)}});y.on("remove",function(){y.dom.removeClass(y.getBody(),"mce-visualblocks")})};var g={setup:q};var r=function(x,y){return function(A){var z=A.control;z.active(y.get());x.on("VisualBlocks",function(B){z.active(B.state)})}};var w=function(x,y){x.addButton("visualblocks",{active:false,title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:r(x,y)});x.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:r(x,y),selectable:true,context:"view",prependToContext:true})};var v={register:w};t.add("visualblocks",function(y,x){var z=h(false);p.register(y,x,z);v.register(y,z);g.setup(y,x,z)});function d(){}return d}())})();