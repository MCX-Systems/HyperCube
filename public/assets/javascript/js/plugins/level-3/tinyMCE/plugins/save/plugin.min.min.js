(function(){var b=(function(){var D=tinymce.util.Tools.resolve("tinymce.PluginManager");var F=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var H=tinymce.util.Tools.resolve("tinymce.util.Tools");var x=function(c){return c.getParam("save_enablewhendirty",true)};var a=function(c){return !!c.getParam("save_onsavecallback")};var t=function(c){return !!c.getParam("save_oncancelcallback")};var C={enableWhenDirty:x,hasOnSaveCallback:a,hasOnCancelCallback:t};var z=function(d,c){d.notificationManager.open({text:d.translate(c),type:"error"})};var y=function(c){var d;d=F.DOM.getParent(c.id,"form");if(C.enableWhenDirty(c)&&!c.isDirty()){return}c.save();if(C.hasOnSaveCallback(c)){c.execCallback("save_onsavecallback",c);c.nodeChanged();return}if(d){c.setDirty(false);if(!d.onsubmit||d.onsubmit()){if(typeof d.submit==="function"){d.submit()}else{z(c,"Error: Form submit field collision.")}}c.nodeChanged()}else{z(c,"Error: No form element found.")}};var s=function(c){var d=H.trim(c.startContent);if(C.hasOnCancelCallback(c)){c.execCallback("save_oncancelcallback",c);return}c.setContent(d);c.undoManager.clear();c.nodeChanged()};var B={save:y,cancel:s};var u=function(c){c.addCommand("mceSave",function(){B.save(c)});c.addCommand("mceCancel",function(){B.cancel(c)})};var v={register:u};var E=function(c){return function(d){var e=d.control;c.on("nodeChange dirty",function(){e.disabled(C.enableWhenDirty(c)&&!c.isDirty())})}};var G=function(c){c.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:true,onPostRender:E(c)});c.addButton("cancel",{text:"Cancel",icon:false,cmd:"mceCancel",disabled:true,onPostRender:E(c)});c.addShortcut("Meta+S","","mceSave")};var A={register:G};D.add("save",function(c){A.register(c);v.register(c)});function w(){}return w}())})();