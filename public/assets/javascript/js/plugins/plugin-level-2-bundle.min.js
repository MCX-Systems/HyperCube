(function(n,t){typeof exports=="object"&&typeof module!="undefined"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):t(n.echarts={})})(this,function(n){"use strict";function ahr(n){var t={},i=n.match(/Firefox\/([\d.]+)/),r=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),u=n.match(/Edge\/([\d.]+)/),f=/micromessenger/i.test(n);return i&&(t.firefox=!0,t.version=i[1]),r&&(t.ie=!0,t.version=r[1]),u&&(t.edge=!0,t.version=u[1]),f&&(t.weChat=!0),{browser:t,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:typeof SVGRect!="undefined",touchEventsSupported:"ontouchstart"in window&&!t.ie&&!t.edge,pointerEventsSupported:"onpointerdown"in window&&(t.edge||t.ie&&t.version>=11),domSupported:typeof document!="undefined"}}function uii(n,t){n==="createCanvas"&&(ld=null);nst[n]=t}function c(n){var i,r,e,t,u,f;if(n==null||typeof n!="object")return n;if(i=n,r=op.call(n),r==="[object Array]"){if(!aa(n))for(i=[],t=0,u=n.length;t<u;t++)i[t]=c(n[t])}else if(rii[r]){if(!aa(n))if(e=n.constructor,n.constructor.from)i=e.from(n);else for(i=new e(n.length),t=0,u=n.length;t<u;t++)i[t]=c(n[t])}else if(!iii[r]&&!aa(n)&&!la(n)){i={};for(f in n)n.hasOwnProperty(f)&&(i[f]=c(n[f]))}return i}function v(n,t,r){var u,f,e;if(!a(t)||!a(n))return r?c(t):n;for(u in t)t.hasOwnProperty(u)&&(f=n[u],e=t[u],!a(e)||!a(f)||i(e)||i(f)||la(e)||la(f)||tst(e)||tst(f)||aa(e)||aa(f)?!r&&u in n||(n[u]=c(t[u],!0)):v(f,e,r));return n}function cp(n,t){for(var i=n[0],r=1,u=n.length;r<u;r++)i=v(i,n[r],t);return i}function o(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function s(n,t,i){for(var r in t)t.hasOwnProperty(r)&&(i?t[r]!=null:n[r]==null)&&(n[r]=t[r]);return n}function fii(){return ld||(ld=rc().getContext("2d")),ld}function tt(n,t){if(n){if(n.indexOf)return n.indexOf(t);for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i}return-1}function ct(n,t){function u(){}var r=n.prototype,i;u.prototype=t.prototype;n.prototype=new u;for(i in r)n.prototype[i]=r[i];n.prototype.constructor=n;n.superClass=t}function st(n,t,i){n="prototype"in n?n.prototype:n;t="prototype"in t?t.prototype:t;s(n,t,i)}function ge(n){if(n)return typeof n=="string"?!1:typeof n.length=="number"}function t(n,t,i){var r,f,u;if(n&&t)if(n.forEach&&n.forEach===vhr)n.forEach(t,i);else if(n.length===+n.length)for(r=0,f=n.length;r<f;r++)t.call(i,n[r],r,n);else for(u in n)n.hasOwnProperty(u)&&t.call(i,n[u],u,n)}function r(n,t,i){var u,r,f;if(n&&t){if(n.map&&n.map===phr)return n.map(t,i);for(u=[],r=0,f=n.length;r<f;r++)u.push(t.call(i,n[r],r,n));return u}}function ca(n,t,i,r){if(n&&t){if(n.reduce&&n.reduce===whr)return n.reduce(t,i,r);for(var u=0,f=n.length;u<f;u++)i=t.call(r,i,n[u],u,n);return i}}function hi(n,t,i){var u,r,f;if(n&&t){if(n.filter&&n.filter===yhr)return n.filter(t,i);for(u=[],r=0,f=n.length;r<f;r++)t.call(i,n[r],r,n)&&u.push(n[r]);return u}}function bhr(n,t,i){if(n&&t)for(var r=0,u=n.length;r<u;r++)if(t.call(i,n[r],r,n))return n[r]}function l(n,t){var i=hp.call(arguments,2);return function(){return n.apply(t,i.concat(hp.call(arguments)))}}function y(n){var t=hp.call(arguments,1);return function(){return n.apply(this,t.concat(hp.call(arguments)))}}function i(n){return op.call(n)==="[object Array]"}function ar(n){return typeof n=="function"}function at(n){return op.call(n)==="[object String]"}function a(n){var t=typeof n;return t==="function"||!!n&&t=="object"}function tst(n){return!!iii[op.call(n)]}function of(n){return!!rii[op.call(n)]}function la(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function lp(n){return n!==n}function kt(){for(var n=0,t=arguments.length;n<t;n++)if(arguments[n]!=null)return arguments[n]}function vi(n,t){return n!=null?n:t}function uc(n,t,i){return n!=null?n:t!=null?t:i}function ist(){return Function.call.apply(hp,arguments)}function rst(n){if(typeof n=="number")return[n,n,n,n];var t=n.length;return t===2?[n[0],n[1],n[0],n[1]]:t===3?[n[0],n[1],n[2],n[1]]:n}function g(n,t){if(!n)throw new Error(t);}function vu(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function fst(n){n[ust]=!0}function aa(n){return n[ust]}function ad(n){function u(n,t){f?r.set(n,t):r.set(t,n)}var f=i(n),r;this.data={};r=this;n instanceof ad?n.each(u):n&&t(n,u)}function p(n){return new ad(n)}function est(n,t){for(var u,r=new n.constructor(n.length+t.length),i=0;i<n.length;i++)r[i]=n[i];for(u=n.length,i=0;i<t.length;i++)r[i+u]=t[i];return r}function di(){}function ss(n,t){var i=new ost(2);return n==null&&(n=0),t==null&&(t=0),i[0]=n,i[1]=t,i}function gi(n,t){return n[0]=t[0],n[1]=t[1],n}function sf(n){var t=new ost(2);return t[0]=n[0],t[1]=n[1],t}function oii(n,t,i){return n[0]=t,n[1]=i,n}function sst(n,t,i){return n[0]=t[0]+i[0],n[1]=t[1]+i[1],n}function ap(n,t,i,r){return n[0]=t[0]+i[0]*r,n[1]=t[1]+i[1]*r,n}function no(n,t,i){return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n}function vp(n){return Math.sqrt(hst(n))}function hst(n){return n[0]*n[0]+n[1]*n[1]}function khr(n,t,i){return n[0]=t[0]*i[0],n[1]=t[1]*i[1],n}function dhr(n,t,i){return n[0]=t[0]/i[0],n[1]=t[1]/i[1],n}function ghr(n,t){return n[0]*t[0]+n[1]*t[1]}function vd(n,t,i){return n[0]=t[0]*i,n[1]=t[1]*i,n}function va(n,t){var i=vp(t);return i===0?(n[0]=0,n[1]=0):(n[0]=t[0]/i,n[1]=t[1]/i),n}function yp(n,t){return Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1]))}function cii(n,t){return(n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])}function ncr(n,t){return n[0]=-t[0],n[1]=-t[1],n}function lii(n,t,i,r){return n[0]=t[0]+r*(i[0]-t[0]),n[1]=t[1]+r*(i[1]-t[1]),n}function vt(n,t,i){var r=t[0],u=t[1];return n[0]=i[0]*r+i[2]*u+i[4],n[1]=i[1]*r+i[3]*u+i[5],n}function io(n,t,i){return n[0]=Math.min(t[0],i[0]),n[1]=Math.min(t[1],i[1]),n}function ro(n,t,i){return n[0]=Math.max(t[0],i[0]),n[1]=Math.max(t[1],i[1]),n}function yd(){this.on("mousedown",this._dragStart,this);this.on("mousemove",this._drag,this);this.on("mouseup",this._dragEnd,this);this.on("globalout",this._dragEnd,this)}function ya(n,t){return{target:n,topTarget:t&&t.topTarget}}function vii(n,t){var i=n._$eventProcessor;return t!=null&&i&&i.normalizeQuery&&(t=i.normalizeQuery(t)),t}function tcr(n){return n.getBoundingClientRect?n.getBoundingClientRect():{left:0,top:0}}function lst(n,t,i,r){return i=i||{},r||!d.canvasSupported?pii(n,t,i):d.browser.firefox&&t.layerX!=null&&t.layerX!==t.offsetX?(i.zrX=t.layerX,i.zrY=t.layerY):t.offsetX!=null?(i.zrX=t.offsetX,i.zrY=t.offsetY):pii(n,t,i),i}function pii(n,t,i){var r=tcr(n);i.zrX=t.clientX-r.left;i.zrY=t.clientY-r.top}function fc(n,t,i){var u,e,f,r;return(t=t||window.event,t.zrX!=null)?t:(u=t.type,e=u&&u.indexOf("touch")>=0,e?(f=u!="touchend"?t.targetTouches[0]:t.changedTouches[0],f&&lst(n,f,t,i)):(lst(n,t,t,i),t.zrDelta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3),r=t.button,t.which==null&&r!==undefined&&yii.test(t.type)&&(t.which=r&1?1:r&2?3:r&4?2:0),t)}function wd(n,t,i){pd?n.addEventListener(t,i):n.attachEvent("on"+t,i)}function icr(n,t,i){pd?n.removeEventListener(t,i):n.detachEvent("on"+t,i)}function ast(n){return n.which>1}function rcr(n,t,i){return{type:n,event:i,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:i.zrX,offsetY:i.zrY,gestureEvent:i.gestureEvent,pinchX:i.pinchX,pinchY:i.pinchY,pinchScale:i.pinchScale,wheelDelta:i.zrDelta,zrByTouch:i.zrByTouch,which:i.which,stop:ucr}}function ucr(){te(this.event)}function wii(){}function fcr(n,t,i){if(n[n.rectHover?"rectContain":"contain"](t,i)){for(var r=n,u;r;){if(r.clipPath&&!r.clipPath.contain(t,i))return!1;r.silent&&(u=!0);r=r.parent}return u?vst:!0}return!1}function cr(){var n=new kii(6);return pa(n),n}function pa(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function bd(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function cs(n,t,i){var r=t[0]*i[0]+t[2]*i[1],u=t[1]*i[0]+t[3]*i[1],f=t[0]*i[2]+t[2]*i[3],e=t[1]*i[2]+t[3]*i[3],o=t[0]*i[4]+t[2]*i[5]+t[4],s=t[1]*i[4]+t[3]*i[5]+t[5];return n[0]=r,n[1]=u,n[2]=f,n[3]=e,n[4]=o,n[5]=s,n}function yu(n,t,i){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4]+i[0],n[5]=t[5]+i[1],n}function uo(n,t,i){var f=t[0],e=t[2],o=t[4],s=t[1],h=t[3],c=t[5],r=Math.sin(i),u=Math.cos(i);return n[0]=f*u+s*r,n[1]=-f*r+s*u,n[2]=e*u+h*r,n[3]=-e*r+u*h,n[4]=u*o+r*c,n[5]=u*c-r*o,n}function pp(n,t,i){var r=i[0],u=i[1];return n[0]=t[0]*r,n[1]=t[1]*u,n[2]=t[2]*r,n[3]=t[3]*u,n[4]=t[4]*r,n[5]=t[5]*u,n}function kd(n,t){var r=t[0],u=t[2],o=t[4],f=t[1],e=t[3],s=t[5],i=r*e-f*u;return i?(i=1/i,n[0]=e*i,n[1]=-f*i,n[2]=-u*i,n[3]=r*i,n[4]=(u*s-e*o)*i,n[5]=(f*o-r*s)*i,n):null}function dii(n){var t=cr();return bd(t,n),t}function oc(n){return n>gii||n<-gii}function pst(n){this._target=n.target;this._life=n.life||1e3;this._delay=n.delay||0;this._initialized=!1;this.loop=n.loop==null?!1:n.loop;this.gap=n.gap||0;this.easing=n.easing||"Linear";this.onframe=n.onframe;this.ondestroy=n.ondestroy;this.onrestart=n.onrestart;this._pausedTime=0;this._paused=!1}function cf(n){return n=Math.round(n),n<0?0:n>255?255:n}function ocr(n){return n=Math.round(n),n<0?0:n>360?360:n}function bp(n){return n<0?0:n>1?1:n}function gst(n){return n.length&&n.charAt(n.length-1)==="%"?cf(parseFloat(n)/100*255):cf(parseInt(n,10))}function ba(n){return n.length&&n.charAt(n.length-1)==="%"?bp(parseFloat(n)/100):bp(parseFloat(n))}function nht(n,t,i){return(i<0?i+=1:i>1&&(i-=1),i*6<1)?n+(t-n)*i*6:i*2<1?t:i*3<2?n+(t-n)*(2/3-i)*6:n}function as(n,t,i){return n+(t-n)*i}function lf(n,t,i,r,u){return n[0]=t,n[1]=i,n[2]=r,n[3]=u,n}function tht(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function ka(n,t){kp&&tht(kp,t);kp=iht.put(n,kp||t.slice())}function wu(n,t){var e,r,i,f,o;if(n){if(t=t||[],e=iht.get(n),e)return tht(t,e);if(n=n+"",r=n.replace(/ /g,"").toLowerCase(),r in dst)return tht(t,dst[r]),ka(n,t),t;if(r.charAt(0)==="#"){if(r.length===4){if(i=parseInt(r.substr(1),16),!(i>=0&&i<=4095)){lf(t,0,0,0,1);return}return lf(t,(i&3840)>>4|(i&3840)>>8,i&240|(i&240)>>4,i&15|(i&15)<<4,1),ka(n,t),t}if(r.length===7){if(i=parseInt(r.substr(1),16),!(i>=0&&i<=16777215)){lf(t,0,0,0,1);return}return lf(t,(i&16711680)>>16,(i&65280)>>8,i&255,1),ka(n,t),t}return}if(f=r.indexOf("("),o=r.indexOf(")"),f!==-1&&o+1===r.length){var h=r.substr(0,f),u=r.substr(f+1,o-(f+1)).split(","),s=1;switch(h){case"rgba":if(u.length!==4){lf(t,0,0,0,1);return}s=ba(u.pop());case"rgb":if(u.length!==3){lf(t,0,0,0,1);return}return lf(t,gst(u[0]),gst(u[1]),gst(u[2]),s),ka(n,t),t;case"hsla":if(u.length!==4){lf(t,0,0,0,1);return}return u[3]=ba(u[3]),rht(u,t),ka(n,t),t;case"hsl":if(u.length!==3){lf(t,0,0,0,1);return}return rht(u,t),ka(n,t),t;default:return}}lf(t,0,0,0,1);return}}function rht(n,t){var u=(parseFloat(n[0])%360+360)%360/360,f=ba(n[1]),i=ba(n[2]),r=i<=.5?i*(f+1):i+f-i*f,e=i*2-r;return t=t||[],lf(t,cf(nht(e,r,u+1/3)*255),cf(nht(e,r,u)*255),cf(nht(e,r,u-1/3)*255),1),n.length===4&&(t[3]=n[3]),t}function scr(n){var h;if(n){var u=n[0]/255,f=n[1]/255,e=n[2]/255,o=Math.min(u,f,e),t=Math.max(u,f,e),i=t-o,c=(t+o)/2,r,s;if(i===0)r=0,s=0;else{s=c<.5?i/(t+o):i/(2-t-o);var l=((t-u)/6+i/2)/i,a=((t-f)/6+i/2)/i,v=((t-e)/6+i/2)/i;u===t?r=v-a:f===t?r=1/3+l-v:e===t&&(r=2/3+a-l);r<0&&(r+=1);r>1&&(r-=1)}return h=[r*360,s,c],n[3]!=null&&h.push(n[3]),h}}function tri(n,t){var r=wu(n),i;if(r){for(i=0;i<3;i++)r[i]=t<0?r[i]*(1-t)|0:(255-r[i])*t+r[i]|0,r[i]>255?r[i]=255:n[i]<0&&(r[i]=0);return fo(r,r.length===4?"rgba":"rgb")}}function iri(n){var t=wu(n);if(t)return(16777216+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)}function dp(n,t,i){if(t&&t.length&&n>=0&&n<=1){i=i||[];var e=n*(t.length-1),o=Math.floor(e),s=Math.ceil(e),r=t[o],u=t[s],f=e-o;return i[0]=cf(as(r[0],u[0],f)),i[1]=cf(as(r[1],u[1],f)),i[2]=cf(as(r[2],u[2],f)),i[3]=bp(as(r[3],u[3],f)),i}}function uri(n,t,i){if(t&&t.length&&n>=0&&n<=1){var r=n*(t.length-1),o=Math.floor(r),s=Math.ceil(r),u=wu(t[o]),f=wu(t[s]),e=r-o,h=fo([cf(as(u[0],f[0],e)),cf(as(u[1],f[1],e)),cf(as(u[2],f[2],e)),bp(as(u[3],f[3],e))],"rgba");return i?{color:h,leftIndex:o,rightIndex:s,value:r}:h}}function da(n,t,i,r){return n=wu(n),n?(n=scr(n),t!=null&&(n[0]=ocr(t)),i!=null&&(n[1]=ba(i)),r!=null&&(n[2]=ba(r)),fo(rht(n),"rgba")):void 0}function gd(n,t){return n=wu(n),n&&t!=null?(n[3]=bp(t),fo(n,"rgba")):void 0}function fo(n,t){if(n&&n.length){var i=n[0]+","+n[1]+","+n[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(i+=","+n[3]),t+"("+i+")"}}function hcr(n,t){return n[t]}function ccr(n,t,i){n[t]=i}function uht(n,t,i){return(t-n)*i+n}function ori(n,t,i){return i>.5?t:n}function sri(n,t,i,r,u){var o=n.length,s,f,e;if(u==1)for(f=0;f<o;f++)r[f]=uht(n[f],t[f],i);else for(s=o&&n[0].length,f=0;f<o;f++)for(e=0;e<s;e++)r[f][e]=uht(n[f][e],t[f][e],i)}function hri(n,t,i){var e=n.length,f=t.length,o,s,r,u;if(e!==f)if(o=e>f,o)n.length=f;else for(r=e;r<f;r++)n.push(i===1?t[r]:ng.call(t[r]));for(s=n[0]&&n[0].length,r=0;r<n.length;r++)if(i===1)isNaN(n[r])&&(n[r]=t[r]);else for(u=0;u<s;u++)isNaN(n[r][u])&&(n[r][u]=t[r][u])}function lcr(n,t,i){var f,e,r,u;if(n===t)return!0;if(f=n.length,f!==t.length)return!1;if(i===1){for(r=0;r<f;r++)if(n[r]!==t[r])return!1}else for(e=n[0].length,r=0;r<f;r++)for(u=0;u<e;u++)if(n[r][u]!==t[r][u])return!1;return!0}function cri(n,t,i,r,u,f,e,o,s){var l=n.length,a,h,c;if(s==1)for(h=0;h<l;h++)o[h]=fht(n[h],t[h],i[h],r[h],u,f,e);else for(a=n[0].length,h=0;h<l;h++)for(c=0;c<a;c++)o[h][c]=fht(n[h][c],t[h][c],i[h][c],r[h][c],u,f,e)}function fht(n,t,i,r,u,f,e){var o=(i-n)*.5,s=(r-t)*.5;return(2*(t-i)+o+s)*e+(-3*(t-i)-2*o-s)*f+o*u+t}function acr(n){var r,i,t;if(ge(n)){if(r=n.length,ge(n[0])){for(i=[],t=0;t<r;t++)i.push(ng.call(n[t]));return i}return ng.call(n)}return n}function lri(n){return n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n[2]=Math.floor(n[2]),"rgba("+n.join(",")+")"}function vcr(n){var t=n[n.length-1].value;return ge(t&&t[0])?2:1}function ycr(n,t,i,r,u,f){var it=n._getter,st=n._setter,at=t==="spline",s=r.length,c,ft,p,h,g,et,ct,e,nt,w,b,tt,k,lt,ot;if(s){var vt=r[0].value,l=ge(vt),v=!1,d=!1,y=l?vcr(r):0,rt;r.sort(function(n,t){return n.time-t.time});rt=r[s-1].time;var a=[],o=[],ut=r[0].value,ht=!0;for(h=0;h<s;h++)a.push(r[h].time/rt),c=r[h].value,l&&lcr(c,ut,y)||!l&&c===ut||(ht=!1),ut=c,typeof c=="string"&&(ft=wu(c),ft?(c=ft,v=!0):d=!0),o.push(c);if(f||!ht){for(p=o[s-1],h=0;h<s-1;h++)l?hri(o[h],p,y):!isNaN(o[h])||isNaN(p)||d||v||(o[h]=p);return l&&hri(it(n._target,u),p,y),g=0,et=0,v&&(k=[0,0,0,0]),lt=function(n,t){var i,f,r;if(t<0)i=0;else if(t<et){for(ct=Math.min(g+1,s-1),i=ct;i>=0;i--)if(a[i]<=t)break;i=Math.min(i,s-2)}else{for(i=g;i<s;i++)if(a[i]>t)break;i=Math.min(i-1,s-2)}if(g=i,et=t,f=a[i+1]-a[i],f!==0)if(e=(t-a[i])/f,at)if(w=o[i],nt=o[i===0?i:i-1],b=o[i>s-2?s-1:i+1],tt=o[i>s-3?s-1:i+2],l)cri(nt,w,b,tt,e,e*e,e*e*e,it(n,u),y);else{if(v)r=cri(nt,w,b,tt,e,e*e,e*e*e,k,1),r=lri(k);else{if(d)return ori(w,b,e);r=fht(nt,w,b,tt,e,e*e,e*e*e)}st(n,u,r)}else if(l)sri(o[i],o[i+1],e,it(n,u),y);else{if(v)sri(o[i],o[i+1],e,k,1),r=lri(k);else{if(d)return ori(o[i],o[i+1],e);r=uht(o[i],o[i+1],e)}st(n,u,r)}},ot=new pst({target:n._target,life:rt,loop:n._loop,delay:n._delay,onframe:lt,ondestroy:i}),t&&t!=="spline"&&(ot.easing=t),ot}}}function vri(n,t,i,r,u,f,e,o){function l(){h--;h||f&&f()}var s,h,c;for(at(r)?(f=u,u=r,r=0):ar(u)?(f=u,u="linear",r=0):ar(r)?(f=r,r=0):ar(i)?(f=i,i=500):i||(i=500),n.stopAnimation(),yri(n,"",n,t,i,r,o),s=n.animators.slice(),h=s.length,h||f&&f(),c=0;c<s.length;c++)s[c].done(l).start(u,e)}function yri(n,t,i,r,u,f,e){var s={},h=0;for(var o in r)r.hasOwnProperty(o)&&(i[o]!=null?a(r[o])&&!ge(r[o])?yri(n,t?t+"."+o:o,i[o],r[o],u,f,e):(e?(s[o]=i[o],pri(n,t,o,r[o])):s[o]=r[o],h++):r[o]==null||e||pri(n,t,o,r[o]));h>0&&n.animate(t,!1).when(u==null?500:u,s).delay(f||0)}function pri(n,t,i,r){if(t){var u={};u[t]={};u[t][i]=r;n.attr(u)}else n.attr(i,r)}function b(n,t,i,r){i<0&&(n=n+i,i=-i);r<0&&(t=t+r,r=-r);this.x=n;this.y=t;this.width=i;this.height=r}function pcr(n){for(var t=0;n>=sht;)t|=n&1,n>>=1;return n+t}function wri(n,t,i,r){var u=t+1;if(u===i)return 1;if(r(n[u++],n[t])<0){while(u<i&&r(n[u],n[u-1])<0)u++;wcr(n,t,u)}else while(u<i&&r(n[u],n[u-1])>=0)u++;return u-t}function wcr(n,t,i){for(i--;t<i;){var r=n[t];n[t++]=n[i];n[i--]=r}}function bri(n,t,i,r,u){var e;for(r===t&&r++;r<i;r++){for(var h=n[r],f=t,s=r,o;f<s;)o=f+s>>>1,u(h,n[o])<0?s=o:f=o+1;e=r-f;switch(e){case 3:n[f+3]=n[f+2];case 2:n[f+2]=n[f+1];case 1:n[f+1]=n[f];break;default:while(e>0)n[f+e]=n[f+e-1],e--}n[f]=h}}function hht(n,t,i,r,u,f){var o=0,s=0,e=1,c,h;if(f(n,t[i+u])>0){for(s=r-u;e<s&&f(n,t[i+u+e])>0;)o=e,e=(e<<1)+1,e<=0&&(e=s);e>s&&(e=s);o+=u;e+=u}else{for(s=u+1;e<s&&f(n,t[i+u-e])<=0;)o=e,e=(e<<1)+1,e<=0&&(e=s);e>s&&(e=s);c=o;o=u-e;e=u-c}for(o++;o<e;)h=o+(e-o>>>1),f(n,t[i+h])>0?o=h+1:e=h;return e}function cht(n,t,i,r,u,f){var o=0,s=0,e=1,c,h;if(f(n,t[i+u])<0){for(s=u+1;e<s&&f(n,t[i+u-e])<0;)o=e,e=(e<<1)+1,e<=0&&(e=s);e>s&&(e=s);c=o;o=u-e;e=u-c}else{for(s=r-u;e<s&&f(n,t[i+u+e])>=0;)o=e,e=(e<<1)+1,e<=0&&(e=s);e>s&&(e=s);o+=u;e+=u}for(o++;o<e;)h=o+(e-o>>>1),f(n,t[i+h])<0?e=h:o=h+1;return e}function bcr(n,t){function s(n,t){e[u]=n;r[u]=t;u+=1}function h(){while(u>1){var n=u-2;if(n>=1&&r[n-1]<=r[n]+r[n+1]||n>=2&&r[n-2]<=r[n]+r[n-1])r[n-1]<r[n+1]&&n--;else if(r[n]>r[n+1])break;o(n)}}function c(){while(u>1){var n=u-2;n>0&&r[n-1]<r[n+1]&&n--;o(n)}}function o(i){var s=e[i],f=r[i],h=e[i+1],o=r[i+1],c;(r[i]=f+o,i===u-3&&(e[i+1]=e[i+2],r[i+1]=r[i+2]),u--,c=cht(n[h],n,s,f,0,t),s+=c,f-=c,f!==0)&&(o=hht(n[s+f-1],n,h,o,o-1,t),o!==0)&&(f<=o?l(s,f,h,o):a(s,f,h,o))}function l(r,u,e,o){for(var s=0,p,l,a,y,s=0;s<u;s++)i[s]=n[r+s];var c=0,v=e,h=r;if(n[h++]=n[v++],--o==0){for(s=0;s<u;s++)n[h+s]=i[c+s];return}if(u===1){for(s=0;s<o;s++)n[h+s]=n[v+s];n[h+o]=i[c];return}for(p=f;;){l=0;a=0;y=!1;do if(t(n[v],i[c])<0){if(n[h++]=n[v++],a++,l=0,--o==0){y=!0;break}}else if(n[h++]=i[c++],l++,a=0,--u==1){y=!0;break}while((l|a)<p);if(y)break;do{if(l=cht(n[v],i,c,u,0,t),l!==0){for(s=0;s<l;s++)n[h+s]=i[c+s];if(h+=l,c+=l,u-=l,u<=1){y=!0;break}}if(n[h++]=n[v++],--o==0){y=!0;break}if(a=hht(i[c],n,v,o,0,t),a!==0){for(s=0;s<a;s++)n[h+s]=n[v+s];if(h+=a,v+=a,o-=a,o===0){y=!0;break}}if(n[h++]=i[c++],--u==1){y=!0;break}p--}while(l>=ga||a>=ga);if(y)break;p<0&&(p=0);p+=2}if(f=p,f<1&&(f=1),u===1){for(s=0;s<o;s++)n[h+s]=n[v+s];n[h+o]=i[c]}else if(u===0)throw new Error;else for(s=0;s<u;s++)n[h+s]=i[c+s]}function a(r,u,e,o){for(var s=0,b,s=0;s<o;s++)i[s]=n[e+s];var l=r+u-1,y=o-1,h=e+o-1,c=0,p=0;if(n[h--]=n[l--],--u==0){for(c=h-(o-1),s=0;s<o;s++)n[c+s]=i[s];return}if(o===1){for(h-=u,l-=u,p=h+1,c=l+1,s=u-1;s>=0;s--)n[p+s]=n[c+s];n[h]=i[y];return}for(b=f;;){var a=0,v=0,w=!1;do if(t(i[y],n[l])<0){if(n[h--]=n[l--],a++,v=0,--u==0){w=!0;break}}else if(n[h--]=i[y--],v++,a=0,--o==1){w=!0;break}while((a|v)<b);if(w)break;do{if(a=u-cht(i[y],n,r,u,u-1,t),a!==0){for(h-=a,l-=a,u-=a,p=h+1,c=l+1,s=a-1;s>=0;s--)n[p+s]=n[c+s];if(u===0){w=!0;break}}if(n[h--]=i[y--],--o==1){w=!0;break}if(v=o-hht(n[l],i,0,o,o-1,t),v!==0){for(h-=v,y-=v,o-=v,p=h+1,c=y+1,s=0;s<v;s++)n[p+s]=i[c+s];if(o<=1){w=!0;break}}if(n[h--]=n[l--],--u==0){w=!0;break}b--}while(a>=ga||v>=ga);if(w)break;b<0&&(b=0);b+=2}if(f=b,f<1&&(f=1),o===1){for(h-=u,l-=u,p=h+1,c=l+1,s=u-1;s>=0;s--)n[p+s]=n[c+s];n[h]=i[y]}else if(o===0)throw new Error;else for(c=h-(o-1),s=0;s<o;s++)n[c+s]=i[s]}var f=ga,e,r,u=0,i=[];e=[];r=[];this.mergeRuns=h;this.forceMergeRuns=c;this.pushRun=s}function eg(n,t,i,r){var f,u,o,s,e;if(i||(i=0),r||(r=n.length),f=r-i,!(f<2)){if(u=0,f<sht){u=wri(n,i,r,t);bri(n,i,r,i+u,t);return}o=new bcr(n,t);s=pcr(f);do u=wri(n,i,r,t),u<s&&(e=f,e>s&&(e=s),bri(n,i,i+e,i+u,t),u=e),o.pushRun(i,u),o.mergeRuns(),f-=u,i+=u;while(f!==0);o.forceMergeRuns()}}function kri(n,t){return n.zlevel===t.zlevel?n.z===t.z?n.z2-t.z2:n.z-t.z:n.zlevel-t.zlevel}function dcr(n,t,i){var r=t.x==null?0:t.x,u=t.x2==null?1:t.x2,f=t.y==null?0:t.y,e=t.y2==null?0:t.y2;return t.global||(r=r*i.width+i.x,u=u*i.width+i.x,f=f*i.height+i.y,e=e*i.height+i.y),r=isNaN(r)?0:r,u=isNaN(u)?1:u,f=isNaN(f)?0:f,e=isNaN(e)?0:e,n.createLinearGradient(r,f,u,e)}function gcr(n,t,i){var e=i.width,o=i.height,s=Math.min(e,o),r=t.x==null?.5:t.x,u=t.y==null?.5:t.y,f=t.r==null?.5:t.r;return t.global||(r=r*e+i.x,u=u*o+i.y,f=f*s),n.createRadialGradient(r,u,0,r,u,f)}function nlr(){return!1}function dri(n,t,i){var u=rc(),f=t.getWidth(),e=t.getHeight(),r=u.style;return r&&(r.position="absolute",r.left=0,r.top=0,r.width=f+"px",r.height=e+"px",u.setAttribute("data-zr-dom-id",n)),u.width=f*i,u.height=e*i,u}function tlr(n){if(typeof n=="string"){var t=yg.get(n);return t&&t.image}return n}function gri(n,t,i,r,u){if(n){if(typeof n=="string"){if(t&&t.__zrImageSrc===n||!i)return t;var f=yg.get(n),e={hostEl:i,cb:r,cbPayload:u};return f?(t=f.image,pg(t)||f.pending.push(e)):(t||(t=new Image),t.onload=t.onerror=ilr,yg.put(n,t.__cachedImgObj={image:t,pending:[e]}),t.src=t.__zrImageSrc=n),t}return n}return t}function ilr(){var i=this.__cachedImgObj,n,t,r;for(this.onload=this.onerror=this.__cachedImgObj=null,n=0;n<i.pending.length;n++)t=i.pending[n],r=t.cb,r&&r(this,t.cbPayload),t.hostEl.dirty();i.pending.length=0}function pg(n){return n&&n.width&&n.height}function ulr(n,t){yht[n]=t}function re(n,t){var r,f,i,u,e;if(t=t||tv,r=n+":"+t,wg[r])return wg[r];for(f=(n+"").split("\n"),i=0,u=0,e=f.length;u<e;u++)i=Math.max(slr(f[u],t).width,i);return aht>rlr&&(aht=0,wg={}),aht++,wg[r]=i,i}function ue(n,t,i,r,u,f,e){return f?elr(n,t,i,r,u,f,e):flr(n,t,i,r,u,e)}function flr(n,t,i,r,u,f){var o=uui(n,t,u,f),e=re(n,t);u&&(e+=u[1]+u[3]);var s=o.outerHeight,c=nw(0,e,i),l=tw(0,s,r),h=new b(c,l,e,s);return h.lineHeight=o.lineHeight,h}function elr(n,t,i,r,u,f,e){var o=wht(n,{rich:f,truncate:e,font:t,textAlign:i,textPadding:u}),s=o.outerWidth,h=o.outerHeight,c=nw(0,s,i),l=tw(0,h,r);return new b(c,l,s,h)}function nw(n,t,i){return i==="right"?n-=t:i==="center"&&(n-=t/2),n}function tw(n,t,i){return i==="middle"?n-=t/2:i==="bottom"&&(n-=t),n}function pht(n,t,i){var r=t.x,u=t.y,s=t.height,o=t.width,h=s/2,f="left",e="top";switch(n){case"left":r-=i;u+=h;f="right";e="middle";break;case"right":r+=i+o;u+=h;e="middle";break;case"top":r+=o/2;u-=i;f="center";e="bottom";break;case"bottom":r+=o/2;u+=s+i;f="center";break;case"inside":r+=o/2;u+=h;f="center";e="middle";break;case"insideLeft":r+=i;u+=h;e="middle";break;case"insideRight":r+=o-i;u+=h;f="right";e="middle";break;case"insideTop":r+=o/2;u+=i;f="center";break;case"insideBottom":r+=o/2;u+=s-i;f="center";e="bottom";break;case"insideTopLeft":r+=i;u+=i;break;case"insideTopRight":r+=o-i;u+=i;f="right";break;case"insideBottomLeft":r+=i;u+=s-i;e="bottom";break;case"insideBottomRight":r+=o-i;u+=s-i;f="right";e="bottom"}return{x:r,y:u,textAlign:f,textVerticalAlign:e}}function nui(n,t,i,r,u){var f,e,o;if(!t)return"";for(f=(n+"").split("\n"),u=tui(t,i,r,u),e=0,o=f.length;e<o;e++)f[e]=iui(f[e],u);return f.join("\n")}function tui(n,t,i,r){var i,h,e,u,s,f;for(r=o({},r),r.font=t,i=vi(i,"..."),r.maxIterations=vi(r.maxIterations,2),h=r.minChar=vi(r.minChar,0),r.cnCharWidth=re("国",t),e=r.ascCharWidth=re("a",t),r.placeholder=vi(r.placeholder,""),u=n=Math.max(0,n-1),s=0;s<h&&u>=e;s++)u-=e;return f=re(i),f>u&&(i="",f=0),u=n-f,r.ellipsis=i,r.ellipsisWidth=f,r.contentWidth=u,r.containerWidth=n,r}function iui(n,t){var f=t.containerWidth,e=t.font,u=t.contentWidth,i,r,o;if(!f)return"";if(i=re(n,e),i<=f)return n;for(r=0;;r++){if(i<=u||r>=t.maxIterations){n+=t.ellipsis;break}o=r===0?olr(n,u,t.ascCharWidth,t.cnCharWidth):i>0?Math.floor(n.length*u/i):0;n=n.substr(0,o);i=re(n,e)}return n===""&&(n=t.placeholder),n}function olr(n,t,i,r){for(var f,e=0,u=0,o=n.length;u<o&&e<t;u++)f=n.charCodeAt(u),e+=0<=f&&f<=127?i:r;return u}function rui(n){return re("国",n)}function slr(n,t){return yht.measureText(n,t)}function uui(n,t,i,r){var o,s,l,f,a;n!=null&&(n+="");var h=rui(t),u=n?n.split("\n"):[],c=u.length*h,e=c;if(i&&(e+=i[0]+i[2]),n&&r)if(o=r.outerHeight,s=r.outerWidth,o!=null&&e>o)n="",u=[];else if(s!=null)for(l=tui(s-(i?i[1]+i[3]:0),t,r.ellipsis,{minChar:r.minChar,placeholder:r.placeholder}),f=0,a=u.length;f<a;f++)u[f]=iui(u[f],l);return{lines:u,height:c,outerHeight:e,lineHeight:h}}function wht(n,t){var u={lines:[],width:0,height:0},h,y,rt,nt,r,et,ot,s,a,v,o,i,ht;if(n!=null&&(n+=""),!n)return u;for(h=vht.lastIndex=0;(y=vht.exec(n))!=null;)rt=y.index,rt>h&&bht(u,n.substring(h,rt)),bht(u,y[2],y[1]),h=vht.lastIndex;h<n.length&&bht(u,n.substring(h,n.length));var st=u.lines,ut=0,p=0,ft=[],e=t.textPadding,c=t.truncate,w=c&&c.outerWidth,b=c&&c.outerHeight;for(e&&(w!=null&&(w-=e[1]+e[3]),b!=null&&(b-=e[0]+e[2])),o=0;o<st.length;o++){var k=st[o],d=0,g=0;for(nt=0;nt<k.tokens.length;nt++){var i=k.tokens[nt],f=i.styleName&&t.rich[i.styleName]||{},l=i.textPadding=f.textPadding,tt=i.font=f.font||t.font,it=i.textHeight=vi(f.textHeight,rui(tt));if(l&&(it+=l[0]+l[2]),i.height=it,i.lineHeight=uc(f.textLineHeight,t.textLineHeight,it),i.textAlign=f&&f.textAlign||t.textAlign,i.textVerticalAlign=f&&f.textVerticalAlign||"middle",b!=null&&ut+i.lineHeight>b)return{lines:[],width:0,height:0};i.textWidth=re(i.text,tt);r=f.textWidth;et=r==null||r==="auto";typeof r=="string"&&r.charAt(r.length-1)==="%"?(i.percentWidth=r,ft.push(i),r=0):(et&&(r=i.textWidth,ot=f.textBackgroundColor,s=ot&&ot.image,s&&(s=tlr(s),pg(s)&&(r=Math.max(r,s.width*it/s.height)))),a=l?l[1]+l[3]:0,r+=a,v=w!=null?w-g:null,v!=null&&v<r&&(!et||v<a?(i.text="",i.textWidth=r=0):(i.text=nui(i.text,v-a,tt,c.ellipsis,{minChar:c.minChar}),i.textWidth=re(i.text,tt),r=i.textWidth+a)));g+=i.width=r;f&&(d=Math.max(d,i.lineHeight))}k.width=g;k.lineHeight=d;ut+=d;p=Math.max(p,g)}for(u.outerWidth=u.width=vi(t.textWidth,p),u.outerHeight=u.height=vi(t.textHeight,ut),e&&(u.outerWidth+=e[1]+e[3],u.outerHeight+=e[0]+e[2]),o=0;o<ft.length;o++)i=ft[o],ht=i.percentWidth,i.width=parseInt(ht,10)/100*p;return u}function bht(n,t,i){for(var e,o,r,s,h=t==="",c=t.split("\n"),u=n.lines,f=0;f<c.length;f++)e=c[f],o={styleName:i,text:e,isLineHolder:!e&&!h},f?u.push({tokens:[o]}):(r=(u[u.length-1]||(u[0]={tokens:[]})).tokens,s=r.length,s===1&&r[0].isLineHolder?r[0]=o:(e||!s||h)&&r.push(o))}function fui(n){var t=(n.fontSize||n.fontFamily)&&[n.fontStyle,n.fontWeight,(n.fontSize||12)+"px",n.fontFamily||"sans-serif"].join(" ");return t&&vu(t)||n.textFont||n.font}function eui(n,t){var c=t.x,l=t.y,o=t.width,s=t.height,e=t.r,i,r,u,f,h;o<0&&(c=c+o,o=-o);s<0&&(l=l+s,s=-s);typeof e=="number"?i=r=u=f=e:e instanceof Array?e.length===1?i=r=u=f=e[0]:e.length===2?(i=u=e[0],r=f=e[1]):e.length===3?(i=e[0],r=f=e[1],u=e[2]):(i=e[0],r=e[1],u=e[2],f=e[3]):i=r=u=f=0;i+r>o&&(h=i+r,i*=o/h,r*=o/h);u+f>o&&(h=u+f,u*=o/h,f*=o/h);r+u>s&&(h=r+u,r*=s/h,u*=s/h);i+f>s&&(h=i+f,i*=s/h,f*=s/h);n.moveTo(c+i,l);n.lineTo(c+o-r,l);r!==0&&n.arc(c+o-r,l+r,r,-Math.PI/2,0);n.lineTo(c+o,l+s-u);u!==0&&n.arc(c+o-u,l+s-u,u,0,Math.PI/2);n.lineTo(c+f,l+s);f!==0&&n.arc(c+f,l+s-f,f,Math.PI/2,Math.PI);n.lineTo(c,l+i);i!==0&&n.arc(c+i,l+i,i,Math.PI,Math.PI*1.5)}function iw(n){return sui(n),t(n.rich,sui),n}function sui(n){var t,i,r;n&&(n.font=fui(n),t=n.textAlign,t==="middle"&&(t="center"),n.textAlign=t==null||hlr[t]?t:"left",i=n.textVerticalAlign||n.textBaseline,i==="center"&&(i="middle"),n.textVerticalAlign=i==null||clr[i]?i:"top",r=n.textPadding,r&&(n.textPadding=rst(n.textPadding)))}function hui(n,t,i,r,u,f){r.rich?alr(n,t,i,r,u):llr(n,t,i,r,u,f)}function llr(n,t,i,r,u,f){var s=f&&f.style,c=s&&f.type==="text",y=r.font||tv,p,e,l,st,k,ht,o;c&&y===(s.font||tv)||(t.font=y);p=n.__computedFont;n.__styleFont!==y&&(n.__styleFont=y,p=n.__computedFont=t.font);e=r.textPadding;l=n.__textCotentBlock;(!l||n.__dirtyText)&&(l=n.__textCotentBlock=uui(i,p,e,r.truncate));var nt=l.outerHeight,a=l.lines,ut=l.lineHeight,w=lui(nt,r,u),b=w.baseX,ft=w.baseY,tt=w.textAlign||"left",yt=w.textVerticalAlign;cui(t,r,u,b,ft);var et=tw(ft,nt,yt),v=b,h=et,ot=dht(r);for((ot||e)&&(st=re(i,p),k=st,e&&(k+=e[1]+e[3]),ht=nw(b,k,tt),ot&&ght(n,t,r,ht,et,k,nt),e&&(v=yui(b,tt,e),h+=e[0])),t.textAlign=tt,t.textBaseline="middle",o=0;o<oui.length;o++){var it=oui[o],ct=it[0],lt=it[1],at=r[ct];c&&at===s[ct]||(t[lt]=lht(t,lt,at||it[2]))}h+=ut/2;var rt=r.textStrokeWidth,pt=c?s.textStrokeWidth:null,vt=!c||rt!==pt,wt=!c||vt||r.textStroke!==s.textStroke,d=nct(r.textStroke,rt),g=aui(r.textFill);if(d&&(vt&&(t.lineWidth=rt),wt&&(t.strokeStyle=d)),g&&(!c||r.textFill!==s.textFill||s.textBackgroundColor)&&(t.fillStyle=g),a.length===1)d&&t.strokeText(a[0],v,h),g&&t.fillText(a[0],v,h);else for(o=0;o<a.length;o++)d&&t.strokeText(a[o],v,h),g&&t.fillText(a[o],v,h),h+=ut}function alr(n,t,i,r,u){var f=n.__textCotentBlock;(!f||n.__dirtyText)&&(f=n.__textCotentBlock=wht(i,r));vlr(n,t,f,r,u)}function vlr(n,t,i,r,u){var nt=i.width,tt=i.outerWidth,p=i.outerHeight,w=r.textPadding,h=lui(p,r,u),it=h.baseX,rt=h.baseY,ot=h.textAlign,st=h.textVerticalAlign,b,l;cui(t,r,u,it,rt);var ut=nw(it,tt,ot),ft=tw(rt,p,st),c=ut,s=ft;for(w&&(c+=w[3],s+=w[0]),b=c+nt,dht(r)&&ght(n,t,r,ut,ft,tt,p),l=0;l<i.lines.length;l++){for(var k=i.lines[l],a=k.tokens,et=a.length,v=k.lineHeight,d=k.width,e=0,o=c,g=b,y=et-1,f;e<et&&(f=a[e],!f.textAlign||f.textAlign==="left");)kht(n,t,f,r,v,s,o,"left"),d-=f.width,o+=f.width,e++;while(y>=0&&(f=a[y],f.textAlign==="right"))kht(n,t,f,r,v,s,g,"right"),d-=f.width,g-=f.width,y--;for(o+=(nt-(o-c)-(b-g)-d)/2;e<=y;)f=a[e],kht(n,t,f,r,v,s,o+f.width/2,"center"),o+=f.width,e++;s+=v}}function cui(n,t,i,r,u){if(i&&t.textRotation){var f=t.textOrigin;f==="center"?(r=i.width/2+i.x,u=i.height/2+i.y):f&&(r=f[0]+i.x,u=f[1]+i.y);n.translate(r,u);n.rotate(-t.textRotation);n.translate(-r,-u)}}function kht(n,t,i,r,u,f,e,o){var s=r.rich[i.styleName]||{},l,h,c;s.text=i.text;l=i.textVerticalAlign;h=f+u/2;l==="top"?h=f+i.height/2:l==="bottom"&&(h=f+u-i.height/2);!i.isLineHolder&&dht(s)&&ght(n,t,s,o==="right"?e-i.width:o==="center"?e-i.width/2:e,h-i.height/2,i.width,i.height);c=i.textPadding;c&&(e=yui(e,o,c),h-=i.height/2-c[2]-i.textHeight/2);bi(t,"shadowBlur",uc(s.textShadowBlur,r.textShadowBlur,0));bi(t,"shadowColor",s.textShadowColor||r.textShadowColor||"transparent");bi(t,"shadowOffsetX",uc(s.textShadowOffsetX,r.textShadowOffsetX,0));bi(t,"shadowOffsetY",uc(s.textShadowOffsetY,r.textShadowOffsetY,0));bi(t,"textAlign",o);bi(t,"textBaseline","middle");bi(t,"font",i.font||tv);var a=nct(s.textStroke||r.textStroke,y),v=aui(s.textFill||r.textFill),y=vi(s.textStrokeWidth,r.textStrokeWidth);a&&(bi(t,"lineWidth",y),bi(t,"strokeStyle",a),t.strokeText(i.text,e,h));v&&(bi(t,"fillStyle",v),t.fillText(i.text,e,h))}function dht(n){return n.textBackgroundColor||n.textBorderWidth&&n.textBorderColor}function ght(n,t,i,r,u,f,e){var o=i.textBackgroundColor,c=i.textBorderWidth,l=i.textBorderColor,y=at(o),v,s,h;bi(t,"shadowBlur",i.textBoxShadowBlur||0);bi(t,"shadowColor",i.textBoxShadowColor||"transparent");bi(t,"shadowOffsetX",i.textBoxShadowOffsetX||0);bi(t,"shadowOffsetY",i.textBoxShadowOffsetY||0);(y||c&&l)&&(t.beginPath(),v=i.textBorderRadius,v?eui(t,{x:r,y:u,width:f,height:e,r:v}):t.rect(r,u,f,e),t.closePath());y?(bi(t,"fillStyle",o),i.fillOpacity!=null?(h=t.globalAlpha,t.globalAlpha=i.fillOpacity*i.opacity,t.fill(),t.globalAlpha=h):t.fill()):ar(o)?(bi(t,"fillStyle",o(i)),t.fill()):a(o)&&(s=o.image,s=gri(s,null,n,ylr,o),s&&pg(s)&&t.drawImage(s,r,u,f,e));c&&l&&(bi(t,"lineWidth",c),bi(t,"strokeStyle",l),i.strokeOpacity!=null?(h=t.globalAlpha,t.globalAlpha=i.strokeOpacity*i.opacity,t.stroke(),t.globalAlpha=h):t.stroke())}function ylr(n,t){t.image=n}function lui(n,t,i){var f=t.x||0,e=t.y||0,s=t.textAlign,h=t.textVerticalAlign,r,u,o;return i&&(r=t.textPosition,r instanceof Array?(f=i.x+vui(r[0],i.width),e=i.y+vui(r[1],i.height)):(u=pht(r,i,t.textDistance),f=u.x,e=u.y,s=s||u.textAlign,h=h||u.textVerticalAlign),o=t.textOffset,o&&(f+=o[0],e+=o[1])),{baseX:f,baseY:e,textAlign:s,textVerticalAlign:h}}function bi(n,t,i){return n[t]=lht(n,t,i),n[t]}function nct(n,t){return n==null||t<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function aui(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function vui(n,t){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*t:parseFloat(n):n}function yui(n,t,i){return t==="right"?n-i[1]:t==="center"?n+i[3]/2-i[1]/2:n+i[3]}function pui(n,t){return n!=null&&(n||t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor||t.textPadding)}function vr(n){n=n||{};ie.call(this,n);for(var t in n)n.hasOwnProperty(t)&&t!=="style"&&(this[t]=n[t]);this.style=new vs(n.style,this);this._rect=null;this.__clipPaths=[]}function nr(n){vr.call(this,n)}function kg(n){return parseInt(n,10)}function wlr(n){return n?n.__builtin__?!0:typeof n.resize!="function"||typeof n.refresh!="function"?!1:!0:!1}function blr(n,t,i){return dg.copy(n.getBoundingRect()),n.transform&&dg.applyTransform(n.transform),gg.width=t,gg.height=i,!dg.intersect(gg)}function klr(n,t){if(n==t)return!1;if(!n||!t||n.length!==t.length)return!0;for(var i=0;i<n.length;i++)if(n[i]!==t[i])return!0}function dlr(n,t){for(var i,r=0;r<n.length;r++)i=n[r],i.setTransform(t),t.beginPath(),i.buildPath(t,i.shape),t.clip(),i.restoreTransform(t)}function glr(n,t){var i=document.createElement("div");return i.style.cssText=["position:relative","overflow:hidden","width:"+n+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",i}function kui(n){var t=n[1][0]-n[0][0],i=n[1][1]-n[0][1];return Math.sqrt(t*t+i*i)}function nar(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}function gui(n){return n==="mousewheel"&&d.browser.firefox?"DOMMouseScroll":n}function rct(n,t,i){var u=n._gestureMgr,r,f;i==="start"&&u.clear();r=u.recognize(t,n.handler.findHover(t.zrX,t.zrY,null).target,n.dom);i==="end"&&u.clear();r&&(f=r.type,t.gestureEvent=f,n.handler.dispatchToElement({target:r.target},f,r.event))}function uct(n){n._touching=!0;clearTimeout(n._touchTimer);n._touchTimer=setTimeout(function(){n._touching=!1},700)}function nfi(n){var t=n.pointerType;return t==="pen"||t==="touch"}function rar(n){function i(n,t){return function(){if(!t._touching)return n.apply(t,arguments)}}t(ict,function(t){n._handlers[t]=l(yr[t],n)});t(dui,function(t){n._handlers[t]=l(yr[t],n)});t(rn,function(t){n._handlers[t]=i(yr[t],n)})}function fct(n){function i(i,r){t(i,function(t){wd(n,gui(t),r._handlers[t])},r)}ci.call(this);this.dom=n;this._touching=!1;this._touchTimer;this._gestureMgr=new tn;this._handlers={};rar(this);d.pointerEventsSupported?i(dui,this):(d.touchEventsSupported&&i(ict,this),i(rn,this))}function sct(n,t){var i=new fn(nii(),n,t);return cc[i.id]=i,i}function far(n){if(n)n.dispose();else{for(var t in cc)cc.hasOwnProperty(t)&&cc[t].dispose();cc={}}return this}function ear(n){return cc[n]}function hct(n,t){un[n]=t}function oar(n){delete cc[n]}function tr(n){return n instanceof Array?n:n==null?[]:[n]}function lc(n,t,i){var u,f,r;if(n)for(n[t]=n[t]||{},n.emphasis=n.emphasis||{},n.emphasis[t]=n.emphasis[t]||{},u=0,f=i.length;u<f;u++)r=i[u],!n.emphasis[t].hasOwnProperty(r)&&n[t].hasOwnProperty(r)&&(n.emphasis[t][r]=n[t][r])}function fw(n){return rv(n)&&!har(n)&&!(n instanceof Date)?n.value:n}function car(n){return rv(n)&&!(n instanceof Array)}function lct(n,t){t=(t||[]).slice();var i=r(n||[],function(n){return{exist:n}});return iv(t,function(n,r){var u,f;if(rv(n)){for(u=0;u<i.length;u++)if(!i[u].option&&n.id!=null&&i[u].exist.id===n.id+""){i[u].option=n;t[r]=null;return}for(u=0;u<i.length;u++)if(f=i[u].exist,!i[u].option&&(f.id==null||n.id==null)&&n.name!=null&&!en(n)&&!en(f)&&f.name===n.name+""){i[u].option=n;t[r]=null;return}}}),iv(t,function(n){var t,r;if(rv(n)){for(t=0;t<i.length;t++)if(r=i[t].exist,!i[t].option&&!en(r)&&n.id==null){i[t].option=n;break}t>=i.length&&i.push({option:n})}}),i}function ifi(n){var t=p();iv(n,function(n){var i=n.exist;i&&t.set(i.id,n)});iv(n,function(n){var i=n.option;g(!i||i.id==null||!t.get(i.id)||t.get(i.id)===n,"id duplicates: "+(i&&i.id));i&&i.id!=null&&t.set(i.id,n);n.keyInfo||(n.keyInfo={})});iv(n,function(n,i){var f=n.exist,u=n.option,r=n.keyInfo,e;if(rv(u)){if(r.name=u.name!=null?u.name+"":f?f.name:tfi+i,f)r.id=f.id;else if(u.id!=null)r.id=u.id+"";else{e=0;do r.id='\0'+r.name+'\0'+e++;while(t.get(r.id))}t.set(r.id,n)}})}function act(n){var t=n.name;return!!(t&&t.indexOf(tfi))}function en(n){return rv(n)&&n.id&&(n.id+"").indexOf('\0_ec_\0')===0}function lar(n,t){function f(n,t,i){for(var u,c,f,r=0,s=n.length;r<s;r++){var e=n[r].seriesId,h=tr(n[r].dataIndex),o=i&&i[e];for(u=0,c=h.length;u<c;u++)f=h[u],o&&o[f]?o[f]=null:(t[e]||(t[e]={}))[f]=1}}function r(n,t){var u=[],i,f;for(i in n)n.hasOwnProperty(i)&&n[i]!=null&&(t?u.push(+i):(f=r(n[i],!0),f.length&&u.push({seriesId:i,dataIndex:f})));return u}var i={},u={};return f(n||[],i),f(t||[],u,i),[r(i),r(u)]}function on(n,t){return t.dataIndexInside!=null?t.dataIndexInside:t.dataIndex!=null?i(t.dataIndex)?r(t.dataIndex,function(t){return n.indexOfRawIndex(t)}):n.indexOfRawIndex(t.dataIndex):t.name!=null?i(t.name)?r(t.name,function(t){return n.indexOfName(t)}):n.indexOfName(t.name):void 0}function pr(){var n='__\0ec_inner_'+rfi+++"_"+Math.random().toFixed(5);return function(t){return t[n]||(t[n]={})}}function sn(n,t,i){var f,r,u;return at(t)&&(f={},f[t+"Index"]=0,t=f),r=i&&i.defaultMainType,!r||vct(t,r+"Index")||vct(t,r+"Id")||vct(t,r+"Name")||(t[r+"Index"]=0),u={},iv(t,function(r,f){var r=t[f],s,h;if(f==="dataIndex"||f==="dataIndexInside"){u[f]=r;return}var c=f.match(/^(\w+)(Index|Id|Name)$/)||[],e=c[1],o=(c[2]||"").toLowerCase();!e||!o||r==null||o==="index"&&r==="none"||i&&i.includeMainTypes&&tt(i.includeMainTypes,e)<0||(s={mainType:e},(o!=="index"||r!=="all")&&(s[o]=r),h=n.queryComponents(s),u[e+"Models"]=h,u[e+"Model"]=h[0])}),u}function vct(n,t){return n&&n.hasOwnProperty(t)}function ufi(n,t,i){n.setAttribute?n.setAttribute(t,i):n[t]=i}function aar(n,t){return n.getAttribute?n.getAttribute(t):n[t]}function ffi(n){return n==="auto"?d.domSupported?"html":"richText":n||"html"}function ps(n){var t={main:"",sub:""};return n&&(n=n.split(efi),t.main=n[0]||"",t.sub=n[1]||""),t}function yar(n){g(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function ew(n,i){n.$constructor=n;n.extend=function(n){u&&t(i,function(t){n[t]||console.warn("Method `"+t+"` should be implemented"+(n.type?" in "+n.type:"")+".")});var f=this,r=function(){n.$constructor?n.$constructor.apply(this,arguments):f.apply(this,arguments)};return o(r.prototype,n),r.extend=this.extend,r.superCall=par,r.superApply=war,ct(r,this),r.superClass=f,r}}function hn(n){var t=['__\0is_clz',ofi++,Math.random().toFixed(3)].join("_");n.prototype[t]=!0;u&&g(!n.isInstance,'The method "is" can not be defined.');n.isInstance=function(n){return!!(n&&n[t])}}function par(n,t){var i=ist(arguments,2);return this.superClass.prototype[t].apply(n,i)}function war(n,t,i){return this.superClass.prototype[t].apply(n,i)}function cn(n,i){function e(n){var t=r[n.main];return t&&t[ys]||(t=r[n.main]={},t[ys]=!0),t}var r,f;return i=i||{},r={},n.registerClass=function(n,t){if(t)if(yar(t),t=ps(t),t.sub){if(t.sub!==ys){var i=e(t);i[t.sub]=n}}else u&&r[t.main]&&console.warn(t.main+" exists."),r[t.main]=n;return n},n.getClass=function(n,t,i){var u=r[n];if(u&&u[ys]&&(u=t?u[t]:null),i&&!u)throw new Error(t?"Component "+n+"."+(t||"")+" not exists. Load it first.":n+".type should be specified.");return u},n.getClassesByMainType=function(n){n=ps(n);var u=[],i=r[n.main];return i&&i[ys]?t(i,function(n,t){t!==ys&&u.push(n)}):u.push(i),u},n.hasClass=function(n){return n=ps(n),!!r[n.main]},n.getAllClassMainTypes=function(){var n=[];return t(r,function(t,i){n.push(i)}),n},n.hasSubTypes=function(n){n=ps(n);var t=r[n.main];return t&&t[ys]},n.parseClassType=ps,i.registerWhenExtend&&(f=n.extend,f&&(n.extend=function(t){var i=f.call(this,t);return n.registerClass(i,t.type)})),n}function bs(n){return n>-an&&n<an}function cfi(n){return n>an||n<-an}function lr(n,t,i,r,u){var f=1-u;return f*f*(f*n+3*u*t)+u*u*(u*r+3*f*i)}function lfi(n,t,i,r,u){var f=1-u;return 3*(((t-n)*f+2*(i-t)*u)*f+(r-i)*u*u)}function nvr(n,t,i,r,u,f){var s=r+3*(t-i)-n,e=3*(i-t*2+n),v=3*(t-n),nt=n-u,h=e*e-3*s*v,l=e*v-9*s*nt,rt=v*v-3*e*nt,c=0,w,o;if(bs(h)&&bs(l))bs(e)?f[0]=0:(o=-v/e,o>=0&&o<=1&&(f[c++]=o));else if(w=l*l-4*h*rt,bs(w)){var tt=l/h,o=-e/s+tt,a=-tt/2;o>=0&&o<=1&&(f[c++]=o);a>=0&&a<=1&&(f[c++]=a)}else if(w>0){var it=ws(w),y=h*e+1.5*s*(-l+it),p=h*e+1.5*s*(-l-it);y=y<0?-ln(-y,vn):ln(y,vn);p=p<0?-ln(-p,vn):ln(p,vn);o=(-e-(y+p))/(3*s);o>=0&&o<=1&&(f[c++]=o)}else{var ut=(2*h*e-3*s*l)/(2*ws(h*h*h)),b=Math.acos(ut)/3,k=ws(h),d=Math.cos(b),o=(-e-2*k*d)/(3*s),a=(-e+k*(d+hfi*Math.sin(b)))/(3*s),g=(-e+k*(d-hfi*Math.sin(b)))/(3*s);o>=0&&o<=1&&(f[c++]=o);a>=0&&a<=1&&(f[c++]=a);g>=0&&g<=1&&(f[c++]=g)}return c}function afi(n,t,i,r,u){var f=6*i-12*t+6*n,o=9*t+3*r-3*n-9*i,l=3*t-3*n,s=0,e,h;if(bs(o))cfi(f)&&(e=-l/f,e>=0&&e<=1&&(u[s++]=e));else if(h=f*f-4*o*l,bs(h))u[0]=-f/(2*o);else if(h>0){var a=ws(h),e=(-f+a)/(2*o),c=(-f-a)/(2*o);e>=0&&e<=1&&(u[s++]=e);c>=0&&c<=1&&(u[s++]=c)}return s}function vfi(n,t,i,r,u,f){var e=(t-n)*u+n,o=(i-t)*u+t,h=(r-i)*u+i,s=(o-e)*u+e,c=(h-o)*u+o,l=(c-s)*u+s;f[0]=n;f[1]=e;f[2]=s;f[3]=l;f[4]=l;f[5]=c;f[6]=h;f[7]=r}function tvr(n,t,i,r,u,f,e,o,s,h,c){var a,b=.005,l=Infinity,p,w,v,k,y,d;for(fe[0]=s,fe[1]=h,y=0;y<1;y+=.05)bu[0]=lr(n,i,u,e,y),bu[1]=lr(t,r,f,o,y),v=to(fe,bu),v<l&&(a=y,l=v);for(l=Infinity,d=0;d<32;d++){if(b<sfi)break;p=a-b;w=a+b;bu[0]=lr(n,i,u,e,p);bu[1]=lr(t,r,f,o,p);v=to(bu,fe);p>=0&&v<l?(a=p,l=v):(fv[0]=lr(n,i,u,e,w),fv[1]=lr(t,r,f,o,w),k=to(fv,fe),w<=1&&k<l?(a=w,l=k):b*=.5)}return c&&(c[0]=lr(n,i,u,e,a),c[1]=lr(t,r,f,o,a)),ws(l)}function er(n,t,i,r){var u=1-r;return u*(u*n+2*r*t)+r*r*i}function yct(n,t,i,r){return 2*((1-r)*(t-n)+r*(i-t))}function ivr(n,t,i,r,u){var o=n-2*t+i,e=2*(t-n),l=n-r,s=0,h,f;if(bs(o))cfi(e)&&(f=-l/e,f>=0&&f<=1&&(u[s++]=f));else if(h=e*e-4*o*l,bs(h))f=-e/(2*o),f>=0&&f<=1&&(u[s++]=f);else if(h>0){var a=ws(h),f=(-e+a)/(2*o),c=(-e-a)/(2*o);f>=0&&f<=1&&(u[s++]=f);c>=0&&c<=1&&(u[s++]=c)}return s}function yfi(n,t,i){var r=n+i-2*t;return r===0?.5:(n-t)/r}function pct(n,t,i,r,u){var f=(t-n)*r+n,e=(i-t)*r+t,o=(e-f)*r+f;u[0]=n;u[1]=f;u[2]=o;u[3]=o;u[4]=e;u[5]=i}function rvr(n,t,i,r,u,f,e,o,s){var c,p=.005,h=Infinity,l,w,v,y,a,b;for(fe[0]=e,fe[1]=o,l=0;l<1;l+=.05)bu[0]=er(n,i,u,l),bu[1]=er(t,r,f,l),a=to(fe,bu),a<h&&(c=l,h=a);for(h=Infinity,w=0;w<32;w++){if(p<sfi)break;v=c-p;y=c+p;bu[0]=er(n,i,u,v);bu[1]=er(t,r,f,v);a=to(bu,fe);v>=0&&a<h?(c=v,h=a):(fv[0]=er(n,i,u,y),fv[1]=er(t,r,f,y),b=to(fv,fe),y<=1&&b<h?(c=y,h=b):p*=.5)}return s&&(s[0]=er(n,i,u,c),s[1]=er(t,r,f,c)),ws(h)}function kct(n,t,i){if(n.length!==0){for(var r=n[0],f=r[0],e=r[0],o=r[1],s=r[1],u=1;u<n.length;u++)r=n[u],f=wr(f,r[0]),e=br(e,r[0]),o=wr(o,r[1]),s=br(s,r[1]);t[0]=f;t[1]=o;i[0]=e;i[1]=s}}function pfi(n,t,i,r,u,f){u[0]=wr(n,i);u[1]=wr(t,r);f[0]=br(n,i);f[1]=br(t,r)}function uvr(n,t,i,r,u,f,e,o,s,h){var y=afi,p=lr,c,l=y(n,i,u,e,dct),a,v;for(s[0]=Infinity,s[1]=Infinity,h[0]=-Infinity,h[1]=-Infinity,c=0;c<l;c++)a=p(n,i,u,e,dct[c]),s[0]=wr(a,s[0]),h[0]=br(a,h[0]);for(l=y(t,r,f,o,gct),c=0;c<l;c++)v=p(t,r,f,o,gct[c]),s[1]=wr(v,s[1]),h[1]=br(v,h[1]);s[0]=wr(n,s[0]);h[0]=br(n,h[0]);s[0]=wr(e,s[0]);h[0]=br(e,h[0]);s[1]=wr(t,s[1]);h[1]=br(t,h[1]);s[1]=wr(o,s[1]);h[1]=br(o,h[1])}function fvr(n,t,i,r,u,f,e,o){var s=yfi,h=er,a=br(wr(s(n,i,u),1),0),v=br(wr(s(t,r,f),1),0),c=h(n,i,u,a),l=h(t,r,f,v);e[0]=wr(n,u,c);e[1]=wr(t,f,l);o[0]=br(n,u,c);o[1]=br(t,f,l)}function evr(n,t,i,r,u,f,e,o,s){var c=io,l=ro,a=Math.abs(u-f),v,h;if(a%ac<.0001&&a>.0001){o[0]=n-i;o[1]=t-r;s[0]=n+i;s[1]=t+r;return}for(yn[0]=bct(u)*i+n,yn[1]=wct(u)*r+t,pn[0]=bct(f)*i+n,pn[1]=wct(f)*r+t,c(o,yn,pn),l(s,yn,pn),u=u%ac,u<0&&(u=u+ac),f=f%ac,f<0&&(f=f+ac),u>f&&!e?f+=ac:u<f&&e&&(u+=ac),e&&(v=f,f=u,u=v),h=0;h<f;h+=Math.PI/2)h>u&&(wn[0]=bct(h)*i+n,wn[1]=wct(h)*r+t,c(o,wn,o),l(s,wn,s))}function ds(n,t,i,r,u,f,e){var h,l;if(u===0)return!1;var o=u,s=0,c=n;if(e>t+o&&e>r+o||e<t-o&&e<r-o||f>n+o&&f>i+o||f<n-o&&f<i-o)return!1;if(n!==i)s=(t-r)/(n-i),c=(n*r-i*t)/(n-i);else return Math.abs(f-n)<=o/2;return h=s*f-e+c,l=h*h/(s*s+1),l<=o/2*o/2}function ovr(n,t,i,r,u,f,e,o,s,h,c){var l,a;return s===0?!1:(l=s,c>t+l&&c>r+l&&c>f+l&&c>o+l||c<t-l&&c<r-l&&c<f-l&&c<o-l||h>n+l&&h>i+l&&h>u+l&&h>e+l||h<n-l&&h<i-l&&h<u-l&&h<e-l)?!1:(a=tvr(n,t,i,r,u,f,e,o,h,c,null),a<=l/2)}function kfi(n,t,i,r,u,f,e,o,s){var h,c;return e===0?!1:(h=e,s>t+h&&s>r+h&&s>f+h||s<t-h&&s<r-h&&s<f-h||o>n+h&&o>i+h&&o>u+h||o<n-h&&o<i-h&&o<u-h)?!1:(c=rvr(n,t,i,r,u,f,o,s,null),c<=h/2)}function gs(n){return n%=tlt,n<0&&(n+=tlt),n}function svr(n,t,i,r,u,f,e,o,s){var c,l,a,h;return e===0?!1:(c=e,o-=n,s-=t,l=Math.sqrt(o*o+s*s),l-c>i||l+c<i)?!1:Math.abs(r-u)%ov<.0001?!0:(f?(a=r,r=gs(u),u=gs(a)):(r=gs(r),u=gs(u)),r>u&&(u+=ov),h=Math.atan2(s,o),h<0&&(h+=ov),h>=r&&h<=u||h+ov>=r&&h+ov<=u)}function oo(n,t,i,r,u,f){var o,e,s;return f>t&&f>r||f<t&&f<r?0:r===t?0:(o=r<t?1:-1,e=(f-t)/(r-t),(e===1||e===0)&&(o=r<t?.5:-.5),s=e*(i-n)+n,s===u?Infinity:s>u?o:0)}function cvr(n,t){return Math.abs(n-t)<hvr}function lvr(){var n=ru[0];ru[0]=ru[1];ru[1]=n}function avr(n,t,i,r,u,f,e,o,s,h){var p,w,l,v,b,y;if(h>t&&h>r&&h>f&&h>o||h<t&&h<r&&h<f&&h<o||(p=nvr(t,r,f,o,h,or),p===0))return 0;for(w=0,l=-1,y=0;y<p;y++){var a=or[y],c=a===0||a===1?.5:1,k=lr(n,i,u,e,a);k<s||(l<0&&(l=afi(t,r,f,o,ru),ru[1]<ru[0]&&l>1&&lvr(),v=lr(t,r,f,o,ru[0]),l>1&&(b=lr(t,r,f,o,ru[1]))),w+=l==2?a<ru[0]?v<t?c:-c:a<ru[1]?b<v?c:-c:o<b?c:-c:a<ru[0]?v<t?c:-c:o<v?c:-c)}return w}function vvr(n,t,i,r,u,f,e,o){var a,c,v,y,h,s,l;if(o>t&&o>r&&o>f||o<t&&o<r&&o<f||(a=ivr(t,r,f,o,or),a===0))return 0;if(c=yfi(t,r,f),c>=0&&c<=1){for(v=0,y=er(t,r,f,c),h=0;h<a;h++)(s=or[h]===0||or[h]===1?.5:1,l=er(n,i,u,or[h]),l<e)||(v+=or[h]<c?y<t?s:-s:f<y?s:-s);return v}return(s=or[0]===0||or[0]===1?.5:1,l=er(n,i,u,or[0]),l<e)?0:f<t?s:-s}function yvr(n,t,i,r,u,f,e,o){var a,c,v,l,y,s,h;if((o-=t,o>i||o<-i)||(c=Math.sqrt(i*i-o*o),or[0]=-c,or[1]=c,a=Math.abs(r-u),a<.0001))return 0;if(a%sv<.0001)return r=0,u=sv,h=f?1:-1,e>=or[0]+n&&e<=or[1]+n?h:0;for(f?(c=r,r=gs(u),u=gs(c)):(r=gs(r),u=gs(u)),r>u&&(u+=sv),v=0,l=0;l<2;l++)y=or[l],y+n>e&&(s=Math.atan2(o,y),h=f?1:-1,s<0&&(s=sv+s),(s>=r&&s<=u||s+sv>=r&&s+sv<=u)&&(s>Math.PI/2&&s<Math.PI*1.5&&(h=-h),v+=h));return v}function dfi(n,t,i,r,u){for(var k,g,c=0,o=0,e=0,h=0,s=0,f=0;f<n.length;){k=n[f++];k===nh.M&&f>1&&(i||(c+=oo(o,e,h,s,r,u)));f==1&&(o=n[f],e=n[f+1],h=o,s=e);switch(k){case nh.M:h=n[f++];s=n[f++];o=h;e=s;break;case nh.L:if(i){if(ds(o,e,n[f],n[f+1],t,r,u))return!0}else c+=oo(o,e,n[f],n[f+1],r,u)||0;o=n[f++];e=n[f++];break;case nh.C:if(i){if(ovr(o,e,n[f++],n[f++],n[f++],n[f++],n[f],n[f+1],t,r,u))return!0}else c+=avr(o,e,n[f++],n[f++],n[f++],n[f++],n[f],n[f+1],r,u)||0;o=n[f++];e=n[f++];break;case nh.Q:if(i){if(kfi(o,e,n[f++],n[f++],n[f],n[f+1],t,r,u))return!0}else c+=vvr(o,e,n[f++],n[f++],n[f],n[f+1],r,u)||0;o=n[f++];e=n[f++];break;case nh.A:var y=n[f++],w=n[f++],d=n[f++],p=n[f++],l=n[f++],b=n[f++],rt=n[f++],nt=1-n[f++],a=Math.cos(l)*d+y,v=Math.sin(l)*p+w;if(f>1?c+=oo(o,e,a,v,r,u):(h=a,s=v),g=(r-y)*p/d+y,i){if(svr(y,w,p,l,l+b,nt,t,g,u))return!0}else c+=yvr(y,w,p,l,l+b,nt,g,u);o=Math.cos(l+b)*d+y;e=Math.sin(l+b)*p+w;break;case nh.R:h=o=n[f++];s=e=n[f++];var tt=n[f++],it=n[f++],a=h+tt,v=s+it;if(i){if(ds(h,s,a,s,t,r,u)||ds(a,s,a,v,t,r,u)||ds(a,v,h,v,t,r,u)||ds(h,v,h,s,t,r,u))return!0}else c+=oo(a,s,a,v,r,u),c+=oo(h,v,h,s,r,u);break;case nh.Z:if(i){if(ds(o,e,h,s,t,r,u))return!0}else c+=oo(o,e,h,s,r,u);o=h;e=s}}return i||cvr(e,s)||(c+=oo(o,e,h,s,r,u)||0),c!==0}function pvr(n,t,i){return dfi(n,0,!1,t,i)}function wvr(n,t,i,r){return dfi(n,t,!0,i,r)}function nt(n){vr.call(this,n);this.path=null}function rei(n,t,i,r,u,f,e,o,s,h,c){var v=s*(gn/180),l=dn(v)*(n-i)/2+kn(v)*(t-r)/2,a=-1*kn(v)*(n-i)/2+dn(v)*(t-r)/2,b=l*l/(e*e)+a*a/(o*o);b>1&&(e*=rlt(b),o*=rlt(b));var g=(u===f?-1:1)*rlt((e*e*o*o-e*e*a*a-o*o*l*l)/(e*e*a*a+o*o*l*l))||0,p=g*e*a/o,w=g*-o*l/e,nt=(n+i)/2+dn(v)*p-kn(v)*w,tt=(t+r)/2+kn(v)*p+dn(v)*w,it=iei([1,0],[(l-p)/e,(a-w)/o]),k=[(l-p)/e,(a-w)/o],d=[(-1*l-p)/e,(-1*a-w)/o],y=iei(k,d);ult(k,d)<=-1&&(y=gn);ult(k,d)>=1&&(y=0);f===0&&y>0&&(y=y-2*gn);f===1&&y<0&&(y=y+2*gn);c.addData(h,nt,tt,e,o,it,y,v,f)}function nyr(n){var b,w,i,c,l,k,d,g,nt,tt,s,h,a,v;if(!n)return new kr;var r=0,u=0,it=r,rt=u,y,e=new kr,o=kr.CMD,ut=n.match(uei);for(b=0;b<ut.length;b++){var ft=ut[b],p=ft.charAt(0),f,t=ft.match(fei)||[],et=t.length;for(w=0;w<et;w++)t[w]=parseFloat(t[w]);for(i=0;i<et;){s=r;h=u;switch(p){case"l":r+=t[i++];u+=t[i++];f=o.L;e.addData(f,r,u);break;case"L":r=t[i++];u=t[i++];f=o.L;e.addData(f,r,u);break;case"m":r+=t[i++];u+=t[i++];f=o.M;e.addData(f,r,u);it=r;rt=u;p="l";break;case"M":r=t[i++];u=t[i++];f=o.M;e.addData(f,r,u);it=r;rt=u;p="L";break;case"h":r+=t[i++];f=o.L;e.addData(f,r,u);break;case"H":r=t[i++];f=o.L;e.addData(f,r,u);break;case"v":u+=t[i++];f=o.L;e.addData(f,r,u);break;case"V":u=t[i++];f=o.L;e.addData(f,r,u);break;case"C":f=o.C;e.addData(f,t[i++],t[i++],t[i++],t[i++],t[i++],t[i++]);r=t[i-2];u=t[i-1];break;case"c":f=o.C;e.addData(f,t[i++]+r,t[i++]+u,t[i++]+r,t[i++]+u,t[i++]+r,t[i++]+u);r+=t[i-2];u+=t[i-1];break;case"S":c=r;l=u;a=e.len();v=e.data;y===o.C&&(c+=r-v[a-4],l+=u-v[a-3]);f=o.C;s=t[i++];h=t[i++];r=t[i++];u=t[i++];e.addData(f,c,l,s,h,r,u);break;case"s":c=r;l=u;a=e.len();v=e.data;y===o.C&&(c+=r-v[a-4],l+=u-v[a-3]);f=o.C;s=r+t[i++];h=u+t[i++];r+=t[i++];u+=t[i++];e.addData(f,c,l,s,h,r,u);break;case"Q":s=t[i++];h=t[i++];r=t[i++];u=t[i++];f=o.Q;e.addData(f,s,h,r,u);break;case"q":s=t[i++]+r;h=t[i++]+u;r+=t[i++];u+=t[i++];f=o.Q;e.addData(f,s,h,r,u);break;case"T":c=r;l=u;a=e.len();v=e.data;y===o.Q&&(c+=r-v[a-4],l+=u-v[a-3]);r=t[i++];u=t[i++];f=o.Q;e.addData(f,c,l,r,u);break;case"t":c=r;l=u;a=e.len();v=e.data;y===o.Q&&(c+=r-v[a-4],l+=u-v[a-3]);r+=t[i++];u+=t[i++];f=o.Q;e.addData(f,c,l,r,u);break;case"A":k=t[i++];d=t[i++];g=t[i++];nt=t[i++];tt=t[i++];s=r;h=u;r=t[i++];u=t[i++];f=o.A;rei(s,h,r,u,nt,tt,k,d,g,f,e);break;case"a":k=t[i++];d=t[i++];g=t[i++];nt=t[i++];tt=t[i++];s=r;h=u;r+=t[i++];u+=t[i++];f=o.A;rei(s,h,r,u,nt,tt,k,d,g,f,e)}}(p==="z"||p==="Z")&&(f=o.Z,e.addData(f),r=it,u=rt);y=f}return e.toStatic(),e}function eei(n,t){var i=nyr(n);return t=t||{},t.buildPath=function(n){var t;n.setData?(n.setData(i.data),t=n.getContext(),t&&n.rebuildPath(t)):(t=n,i.rebuildPath(t))},t.applyTransform=function(n){gvr(i,n);this.dirty(!0)},t}function oei(n,t){return new nt(eei(n,t))}function tyr(n,t){return nt.extend(eei(n,t))}function iyr(n,t){for(var i,r,f=[],e=n.length,u=0;u<e;u++)i=n[u],i.path||i.createPathProxy(),i.__dirtyPath&&i.buildPath(i.path,i.shape,!0),f.push(i.path);return r=new nt(t),r.createPathProxy(),r.buildPath=function(n){n.appendPath(f);var t=n.getContext();t&&n.rebuildPath(t)},r}function hei(n,t,i,r,u,f,e){var o=(i-n)*.5,s=(r-t)*.5;return(2*(t-i)+o+s)*e+(-3*(t-i)-2*o-s)*f+o*u+t}function aei(n,t,i){var r=t.points,f=t.smooth,o,e,u,l;if(r&&r.length>=2){if(f&&f!=="spline")for(o=lei(r,f,i,t.smoothConstraint),n.moveTo(r[0][0],r[0][1]),e=r.length,u=0;u<(i?e:e-1);u++){var s=o[u*2],h=o[u*2+1],c=r[(u+1)%e];n.bezierCurveTo(s[0],s[1],h[0],h[1],c[0],c[1])}else for(f==="spline"&&(r=cei(r,i)),n.moveTo(r[0][0],r[0][1]),u=1,l=r.length;u<l;u++)n.lineTo(r[u][0],r[u][1]);i&&n.closePath()}}function vei(n,t,i){var r=n.cpx2,u=n.cpy2;return r===null||u===null?[(i?lfi:lr)(n.x1,n.cpx1,n.cpx2,n.x2,t),(i?lfi:lr)(n.y1,n.cpy1,n.cpy2,n.y2,t)]:[(i?yct:er)(n.x1,n.cpx1,n.x2,t),(i?yct:er)(n.y1,n.cpy1,n.y2,t)]}function fu(n){vr.call(this,n);this._displayables=[];this._temporaryDisplayables=[];this._cursor=0;this.notClear=!0}function ce(n){return nt.extend(n)}function ryr(n,t){return tyr(n,t)}function cw(n,t,i,r){var u=oei(n,t);return i&&(r==="center"&&(i=kei(i,u.getBoundingRect())),dei(u,i)),u}function bei(n,t,i){var r=new nr({style:{image:n,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(n){if(i==="center"){var u={width:n.width,height:n.height};r.setStyle(kei(t,u))}}});return r}function kei(n,t){var u=t.width/t.height,i=n.height*u,r,f,e;return i<=n.width?r=n.height:(i=n.width,r=i/u),f=n.x+n.width/2,e=n.y+n.height/2,{x:f-i/2,y:e-r/2,width:i,height:r}}function dei(n,t){if(n.applyTransform){var i=n.getBoundingRect(),r=i.calculateTransform(t);n.applyTransform(r)}}function vc(n){var t=n.shape,i=n.style.lineWidth;return cv(t.x1*2)===cv(t.x2*2)&&(t.x1=t.x2=ae(t.x1,i,!0)),cv(t.y1*2)===cv(t.y2*2)&&(t.y1=t.y2=ae(t.y1,i,!0)),n}function olt(n){var t=n.shape,i=n.style.lineWidth,f=t.x,e=t.y,r=t.width,u=t.height;return t.x=ae(t.x,i,!0),t.y=ae(t.y,i,!0),t.width=Math.max(ae(f+r,i,!1)-t.x,r===0?0:1),t.height=Math.max(ae(e+u,i,!1)-t.y,u===0?0:1),n}function ae(n,t,i){var r=cv(n*2);return(r+cv(t))%2==0?r/2:(r+(i?1:-1))/2}function gei(n){return n!=null&&n!=="none"}function uyr(n){if(typeof n!="string")return n;var t=slt.get(n);return t||(t=tri(n,-.1),hlt<1e4&&(slt.set(n,t),hlt++)),t}function fyr(n){var t,i,r,u;if(n.__hoverStlDirty){if(n.__hoverStlDirty=!1,t=n.__hoverStl,!t){n.__normalStl=null;return}i=n.__normalStl={};r=n.style;for(u in t)t[u]!=null&&(i[u]=r[u]);i.fill=r.fill;i.stroke=r.stroke}}function clt(n){var r=n.__hoverStl,i,f,u,t;r&&!n.__highlighted&&(i=n.useHoverLayer,n.__highlighted=i?"layer":"plain",f=n.__zr,f||!i)&&(u=n,t=n.style,i&&(u=f.addHover(n),t=u.style),roi(t),i||fyr(u),t.extendFrom(r),noi(t,r,"fill"),noi(t,r,"stroke"),ylt(t),i||(n.dirty(!1),n.z2+=1))}function noi(n,t,i){!gei(t[i])&&gei(n[i])&&(n[i]=uyr(n[i]))}function llt(n){n.__highlighted&&(eyr(n),n.__highlighted=!1)}function eyr(n){var r=n.__highlighted,t,i;r==="layer"?n.__zr&&n.__zr.removeHover(n):r&&(t=n.style,i=n.__normalStl,i&&(roi(t),n.setStyle(i),ylt(t),n.z2-=1))}function rtt(n,t){n.isGroup?n.traverse(function(n){n.isGroup||t(n)}):t(n)}function utt(n,t){t=n.__hoverStl=t!==!1&&(t||{});n.__hoverStlDirty=!0;n.__highlighted&&(llt(n),clt(n))}function alt(n){return n&&n.__isEmphasisEntered}function oyr(n){this.__hoverSilentOnTouch&&n.zrByTouch||this.__isEmphasisEntered||rtt(this,clt)}function syr(n){this.__hoverSilentOnTouch&&n.zrByTouch||this.__isEmphasisEntered||rtt(this,llt)}function hyr(){this.__isEmphasisEntered=!0;rtt(this,clt)}function cyr(){this.__isEmphasisEntered=!1;rtt(this,llt)}function pt(n,t,i){n.isGroup?n.traverse(function(n){n.isGroup||utt(n,n.hoverStyle||t)}):utt(n,n.hoverStyle||t);vlt(n,i)}function vlt(n,t){var r=t===!1,i;n.__hoverSilentOnTouch=t!=null&&t.hoverSilentOnTouch;(!r||n.__hoverStyleTrigger)&&(i=r?"off":"on",n[i]("mouseover",oyr)[i]("mouseout",syr),n[i]("emphasis",hyr)[i]("normal",cyr),n.__hoverStyleTrigger=!r)}function du(n,t,i,r,u,f,e){var c,l;u=u||itt;var s=u.labelFetcher,h=u.labelDataIndex,a=u.labelDimIndex,v=i.getShallow("show"),y=r.getShallow("show"),o;(v||y)&&(s&&(o=s.getFormattedLabel(h,"normal",null,a)),o==null&&(o=ar(u.defaultText)?u.defaultText(h,u):u.defaultText));c=v?o:null;l=y?vi(s?s.getFormattedLabel(h,"emphasis",null,a):null,o):null;(c!=null||l!=null)&&(ii(n,i,f,u),ii(t,r,e,u,!0));n.text=c;t.text=l}function ii(n,t,i,r,u){return toi(n,t,r,u),i&&o(n,i),n}function lyr(n,t,i){var r={isRectText:!0},u;i===!1?u=!0:r.autoColor=i;toi(n,t,r,u)}function toi(n,t,i,r){var u,f,e,l;i=i||itt;i.isRectText&&(u=t.getShallow("position")||(r?null:"inside"),u==="outside"&&(u="top"),n.textPosition=u,n.textOffset=t.getShallow("offset"),f=t.getShallow("rotate"),f!=null&&(f*=Math.PI/180),n.textRotation=f,n.textDistance=vi(t.getShallow("distance"),r?null:5));var h=t.ecModel,c=h&&h.option.textStyle,o=ayr(t),s;if(o){s={};for(e in o)o.hasOwnProperty(e)&&(l=t.getModel(["rich",e]),ioi(s[e]={},l,c,i,r))}return n.rich=s,ioi(n,t,c,i,r,!0),i.forceRich&&!i.textStyle&&(i.textStyle={}),n}function ayr(n){for(var t,i,r;n&&n!==n.ecModel;){if(i=(n.option||itt).rich,i){t=t||{};for(r in i)i.hasOwnProperty(r)&&(t[r]=1)}n=n.parentModel}return t}function ioi(n,t,i,r,u,f){i=!u&&i||itt;n.textFill=ftt(t.getShallow("color"),r)||i.color;n.textStroke=ftt(t.getShallow("textBorderColor"),r)||i.textBorderColor;n.textStrokeWidth=vi(t.getShallow("textBorderWidth"),i.textBorderWidth);n.insideRawTextPosition=n.textPosition;u||(f&&(n.insideRollbackOpt=r,ylt(n)),n.textFill==null&&(n.textFill=r.autoColor));n.fontStyle=t.getShallow("fontStyle")||i.fontStyle;n.fontWeight=t.getShallow("fontWeight")||i.fontWeight;n.fontSize=t.getShallow("fontSize")||i.fontSize;n.fontFamily=t.getShallow("fontFamily")||i.fontFamily;n.textAlign=t.getShallow("align");n.textVerticalAlign=t.getShallow("verticalAlign")||t.getShallow("baseline");n.textLineHeight=t.getShallow("lineHeight");n.textWidth=t.getShallow("width");n.textHeight=t.getShallow("height");n.textTag=t.getShallow("tag");f&&r.disableBox||(n.textBackgroundColor=ftt(t.getShallow("backgroundColor"),r),n.textPadding=t.getShallow("padding"),n.textBorderColor=ftt(t.getShallow("borderColor"),r),n.textBorderWidth=t.getShallow("borderWidth"),n.textBorderRadius=t.getShallow("borderRadius"),n.textBoxShadowColor=t.getShallow("shadowColor"),n.textBoxShadowBlur=t.getShallow("shadowBlur"),n.textBoxShadowOffsetX=t.getShallow("shadowOffsetX"),n.textBoxShadowOffsetY=t.getShallow("shadowOffsetY"));n.textShadowColor=t.getShallow("textShadowColor")||i.textShadowColor;n.textShadowBlur=t.getShallow("textShadowBlur")||i.textShadowBlur;n.textShadowOffsetX=t.getShallow("textShadowOffsetX")||i.textShadowOffsetX;n.textShadowOffsetY=t.getShallow("textShadowOffsetY")||i.textShadowOffsetY}function ftt(n,t){return n!=="auto"?n:t&&t.autoColor?t.autoColor:null}function ylt(n){var t=n.insideRollbackOpt;if(t&&n.textFill==null){var f=t.useInsideStyle,r=n.insideRawTextPosition,i,u=t.autoColor;f!==!1&&(f===!0||t.isRectText&&r&&typeof r=="string"&&r.indexOf("inside")>=0)?(i={textFill:null,textStroke:n.textStroke,textStrokeWidth:n.textStrokeWidth},n.textFill="#fff",n.textStroke==null&&(n.textStroke=u,n.textStrokeWidth==null&&(n.textStrokeWidth=2))):u!=null&&(i={textFill:null},n.textFill=u);i&&(n.insideRollback=i)}}function roi(n){var t=n.insideRollback;t&&(n.textFill=t.textFill,n.textStroke=t.textStroke,n.textStrokeWidth=t.textStrokeWidth,n.insideRollback=null)}function plt(n,t){var i=t||t.getModel("textStyle");return vu([n.fontStyle||i&&i.getShallow("fontStyle")||"",n.fontWeight||i&&i.getShallow("fontWeight")||"",(n.fontSize||i&&i.getShallow("fontSize")||12)+"px",n.fontFamily||i&&i.getShallow("fontFamily")||"sans-serif"].join(" "))}function uoi(n,t,i,r,u,f){var h;if(typeof u=="function"&&(f=u,u=null),h=r&&r.isAnimationEnabled(),h){var s=n?"Update":"",e=r.getShallow("animationDuration"+s),c=r.getShallow("animationEasing"+s),o=r.getShallow("animationDelay"+s);typeof o=="function"&&(o=o(u,r.getAnimationDelayParams?r.getAnimationDelayParams(t,u):null));typeof e=="function"&&(e=e(u));e>0?t.animateTo(i,e,o||0,c,f,!!f):(t.stopAnimation(),t.attr(i),f&&f())}else t.stopAnimation(),t.attr(i),f&&f()}function w(n,t,i,r,u){uoi(!0,n,t,i,r,u)}function sr(n,t,i,r,u){uoi(!1,n,t,i,r,u)}function yc(n,t){for(var i=pa([]);n&&n!==t;)cs(i,n.getLocalTransform(),i),n=n.parent;return i}function ve(n,t,i){return t&&!ge(t)&&(t=hf.getLocalTransform(t)),i&&(t=kd([],t)),vt([],n,t)}function wlt(n,t,i){var u=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),f=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),r=[n==="left"?-u:n==="right"?u:0,n==="top"?-f:n==="bottom"?f:0];return r=ve(r,t,i),Math.abs(r[0])>Math.abs(r[1])?r[0]>0?"right":"left":r[1]>0?"bottom":"top"}function blt(n,t,i){function u(n){var t={};return n.traverse(function(n){!n.isGroup&&n.anid&&(t[n.anid]=n)}),t}function r(n){var t={position:sf(n.position),rotation:n.rotation};return n.shape&&(t.shape=o({},n.shape)),t}if(n&&t){var f=u(n);t.traverse(function(n){var t,u;!n.isGroup&&n.anid&&(t=f[n.anid],t&&(u=r(n),n.attr(r(t)),w(n,u,i,n.dataIndex)))})}}function foi(n,t){return r(n,function(n){var r=n[0],i;return r=ntt(r,t.x),r=ttt(r,t.x+t.width),i=n[1],i=ntt(i,t.y),i=ttt(i,t.y+t.height),[r,i]})}function vyr(n,t){var i=ntt(n.x,t.x),u=ttt(n.x+n.width,t.x+t.width),r=ntt(n.y,t.y),f=ttt(n.y+n.height,t.y+t.height);if(u>=i&&f>=r)return{x:i,y:r,width:u-i,height:f-r}}function lw(n,t,i){t=o({rectHover:!0},t);var r=t.style={strokeNoScale:!0};return i=i||{x:-1,y:-1,width:2,height:2},n?n.indexOf("image://")===0?(r.image=n.slice(8),s(r,i),new nr(t)):cw(n.replace("path://",""),t,i,"center"):void 0}function ut(n,t,i){this.parentModel=t;this.ecModel=i;this.option=n}function ooi(n,t,i){for(var r=0;r<t.length;r++)if(t[r]&&(n=n&&typeof n=="object"?n[t[r]]:null,n==null))break;return n==null&&i&&(n=i.get(t)),n}function klt(n,t){var i=eoi(n).getParent;return i?i.call(n,t):n.parentModel}function aw(n){return[n||"",soi++,Math.random().toFixed(5)].join("_")}function kyr(n){var t={};return n.registerSubTypeDefaulter=function(n,i){n=ps(n);t[n.main]=i},n.determineSubType=function(i,r){var u=r.type,f;return u||(f=ps(i).main,n.hasSubTypes(i)&&t[f]&&(u=t[f](r))),u},n}function dyr(n,i){function u(n){var u={},e=[];return t(n,function(o){var s=r(u,o),c=s.originalDeps=i(o),h=f(c,n);s.entryCount=h.length;s.entryCount===0&&e.push(o);t(h,function(n){tt(s.predecessor,n)<0&&s.predecessor.push(n);var t=r(u,n);tt(t.successor,n)<0&&t.successor.push(o)})}),{graph:u,noEntryList:e}}function r(n,t){return n[t]||(n[t]={predecessor:[],successor:[]}),n[t]}function f(n,i){var r=[];return t(n,function(n){tt(i,n)>=0&&r.push(n)}),r}n.topologicalTravel=function(n,i,r,f){function v(n){s[n].entryCount--;s[n].entryCount===0&&h.push(n)}function y(n){e[n]=!0;v(n)}if(n.length){var c=u(i),s=c.graph,h=c.noEntryList,e={};for(t(n,function(n){e[n]=!0});h.length;){var o=h.pop(),l=s[o],a=!!e[o];a&&(r.call(f,o,l.originalDeps.slice()),delete e[o]);t(l.successor,a?y:v)}t(e,function(){throw new Error("Circle dependency may exists");})}}}function gyr(n){return n.replace(/^\s+/,"").replace(/\s+$/,"")}function ri(n,t,i,r){var u=t[1]-t[0],f=i[1]-i[0];if(u===0)return f===0?i[0]:(i[0]+i[1])/2;if(r)if(u>0){if(n<=t[0])return i[0];if(n>=t[1])return i[1]}else{if(n>=t[0])return i[0];if(n<=t[1])return i[1]}else{if(n===t[0])return i[0];if(n===t[1])return i[1]}return(n-t[0])/u*f+i[0]}function f(n,t){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%"}return typeof n=="string"?gyr(n).match(/%$/)?parseFloat(n)/100*t:parseFloat(n):n==null?NaN:+n}function ki(n,t,i){return t==null&&(t=10),t=Math.min(Math.max(0,t),20),n=(+n).toFixed(t),i?n:+n}function pc(n){return n.sort(function(n,t){return n-t}),n}function hoi(n){if(n=+n,isNaN(n))return 0;for(var t=1,i=0;Math.round(n*t)/t!==n;)t*=10,i++;return i}function ott(n){var t=n.toString(),u=t.indexOf("e"),i,r;return u>0?(i=+t.slice(u+1),i<0?-i:0):(r=t.indexOf("."),r<0?0:t.length-1-r)}function glt(n,t){var i=Math.log,r=Math.LN10,f=Math.floor(i(n[1]-n[0])/r),e=Math.round(i(Math.abs(t[1]-t[0]))/r),u=Math.min(Math.max(-f+e,0),20);return isFinite(u)?u:20}function coi(n,t,i){var s,c,o,u,v;if(!n[t]||(s=ca(n,function(n,t){return n+(isNaN(t)?0:t)},0),s===0))return 0;for(var h=Math.pow(10,i),l=r(n,function(n){return(isNaN(n)?0:n)/s*h*100}),y=h*100,f=r(l,function(n){return Math.floor(n)}),a=ca(f,function(n,t){return n+t},0),e=r(l,function(n,t){return n-f[t]});a<y;){for(c=Number.NEGATIVE_INFINITY,o=null,u=0,v=e.length;u<v;++u)e[u]>c&&(c=e[u],o=u);++f[o];e[o]=0;++a}return f[t]/h}function nat(n){var t=Math.PI*2;return(n%t+t)%t}function vw(n){return n>-dlt&&n<dlt}function yw(n){var t,i;return n instanceof Date?n:typeof n=="string"?(t=loi.exec(n),!t)?new Date(NaN):t[8]?(i=+t[4]||0,t[8].toUpperCase()!=="Z"&&(i-=t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,i,+(t[5]||0),+t[6]||0,+t[7]||0))):new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,+t[7]||0):n==null?new Date(NaN):new Date(Math.round(n))}function aoi(n){return Math.pow(10,voi(n))}function voi(n){return Math.floor(Math.log(n)/Math.LN10)}function tat(n,t){var r=voi(n),u=Math.pow(10,r),i=n/u,f;return f=t?i<1.5?1:i<2.5?2:i<4?3:i<7?5:10:i<1?1:i<2?2:i<3?3:i<5?5:10,n=f*u,r>=-20?+n.toFixed(r<0?-r:0):n}function npr(n,t){var u=(n.length-1)*t+1,i=Math.floor(u),r=+n[i-1],f=u-i;return f?r+f*(n[i]-r):r}function iat(n){function o(n,t,i){return n.interval[i]<t.interval[i]||n.interval[i]===t.interval[i]&&(n.close[i]-t.close[i]==(i?-1:1)||!i&&o(n,t,1))}var f,e,i,r,u,t;for(n.sort(function(n,t){return o(n,t,0)?-1:1}),f=-Infinity,e=1,i=0;i<n.length;){for(r=n[i].interval,u=n[i].close,t=0;t<2;t++)r[t]<=f&&(r[t]=f,u[t]=t?1:1-e),f=r[t],e=u[t];r[0]===r[1]&&u[0]*u[1]!=1?n.splice(i,1):i++}return n}function yoi(n){return n-parseFloat(n)>=0}function uh(n){return isNaN(n)?"-":(n=(n+"").split("."),n[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(n.length>1?"."+n[1]:""))}function woi(n,t){return n=(n||"").toLowerCase().replace(/-(.)/g,function(n,t){return t.toUpperCase()}),t&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}function dt(n){return n==null?"":(n+"").replace(tpr,function(n,t){return ipr[t]})}function uat(n,t,r){var s,e,o,h,u,f,c;if(i(t)||(t=[t]),s=t.length,!s)return"";for(e=t[0].$vars||[],o=0;o<e.length;o++)h=rat[o],n=n.replace(htt(h),htt(h,0));for(u=0;u<s;u++)for(f=0;f<e.length;f++)c=t[u][e[f]],n=n.replace(htt(rat[f],u),r?dt(c):c);return n}function boi(n,i,r){return t(i,function(t,i){n=n.replace("{"+i+"}",r?dt(t):t)}),n}function ctt(n,t){n=at(n)?{color:n,extraCssText:t}:n||{};var i=n.color,u=n.type,t=n.extraCssText,r=n.renderMode||"html",f=n.markerId||"X";return i?r==="html"?u==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+dt(i)+";"+(t||"")+'"><\/span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+dt(i)+";"+(t||"")+'"><\/span>':{renderMode:r,content:"{marker"+f+"|}  ",style:{color:i}}:""}function lv(n,t){return n+="","0000".substr(0,t-n.length)+n}function fat(n,t,i){(n==="week"||n==="month"||n==="quarter"||n==="half-year"||n==="year")&&(n="MM-dd\nyyyy");var r=yw(t),u=i?"UTC":"",f=r["get"+u+"FullYear"](),e=r["get"+u+"Month"]()+1,o=r["get"+u+"Date"](),s=r["get"+u+"Hours"](),h=r["get"+u+"Minutes"](),c=r["get"+u+"Seconds"](),l=r["get"+u+"Milliseconds"]();return n.replace("MM",lv(e,2)).replace("M",e).replace("yyyy",f).replace("yy",f%100).replace("dd",lv(o,2)).replace("d",o).replace("hh",lv(s,2)).replace("h",s).replace("mm",lv(h,2)).replace("m",h).replace("ss",lv(c,2)).replace("s",c).replace("SSS",lv(l,3))}function ltt(n){return n?n.charAt(0).toUpperCase()+n.substr(1):n}function eat(n,t,i,r,u){var e=0,o=0,f;r==null&&(r=Infinity);u==null&&(u=Infinity);f=0;t.eachChild(function(s,h){var w=s.position,c=s.getBoundingRect(),b=t.childAt(h+1),l=b&&b.getBoundingRect(),a,v,y,p;(n==="horizontal"?(y=c.width+(l?-l.x+c.x:0),a=e+y,a>r||s.newline?(e=0,a=y,o+=f+i,f=c.height):f=Math.max(f,c.height)):(p=c.height+(l?-l.y+c.y:0),v=o+p,v>u||s.newline?(e+=f+i,o=0,v=p,f=c.width):f=Math.max(f,c.width)),s.newline)||(w[0]=e,w[1]=o,n==="horizontal"?e=a+i:o=v+i)})}function fpr(n,t,i){var r=t.width,u=t.height,e=f(n.x,r),o=f(n.y,u),s=f(n.x2,r),h=f(n.y2,u);return(isNaN(e)||isNaN(parseFloat(n.x)))&&(e=0),(isNaN(s)||isNaN(parseFloat(n.x2)))&&(s=r),(isNaN(o)||isNaN(parseFloat(n.y)))&&(o=0),(isNaN(h)||isNaN(parseFloat(n.y2)))&&(h=u),i=wc(i||0),{width:Math.max(s-e-i[1]-i[3],0),height:Math.max(h-o-i[0]-i[2],0)}}function li(n,t,i){var p;i=wc(i||0);var e=t.width,o=t.height,s=f(n.left,e),h=f(n.top,o),v=f(n.right,e),y=f(n.bottom,o),r=f(n.width,e),u=f(n.height,o),c=i[2]+i[0],l=i[1]+i[3],a=n.aspect;isNaN(r)&&(r=e-v-l-s);isNaN(u)&&(u=o-y-c-h);a!=null&&(isNaN(r)&&isNaN(u)&&(a>e/o?r=e*.8:u=o*.8),isNaN(r)&&(r=a*u),isNaN(u)&&(u=r/a));isNaN(s)&&(s=e-v-r-l);isNaN(h)&&(h=o-y-u-c);switch(n.left||n.right){case"center":s=e/2-r/2-i[3];break;case"right":s=e-r-l}switch(n.top||n.bottom){case"middle":case"center":h=o/2-u/2-i[0];break;case"bottom":h=o-u-c}return s=s||0,h=h||0,isNaN(r)&&(r=e-l-s-(v||0)),isNaN(u)&&(u=o-c-h-(y||0)),p=new b(s+i[3],h+i[0],r,u),p.margin=i,p}function vtt(n,t,i,r,u){var e=!u||!u.hv||u.hv[0],o=!u||!u.hv||u.hv[1],h=u&&u.boundingMode||"all",f,c;if(e||o){h==="raw"?f=n.type==="group"?new b(0,0,+t.width||0,+t.height||0):n.getBoundingRect():(f=n.getBoundingRect(),n.needLocalTransform()&&(c=n.getLocalTransform(),f=f.clone(),f.applyTransform(c)));t=li(s({width:f.width,height:f.height},t),i,r);var l=n.position,a=e?t.x-f.x:0,v=o?t.y-f.y:0;n.attr("position",h==="raw"?[a,v]:[l[0]+a,l[1]+v])}}function epr(n,t){return n[bc[t][0]]!=null||n[bc[t][1]]!=null&&n[bc[t][2]]!=null}function fh(n,t,r){function h(i,r){var s={},l=0,o={},a=0,v=2,c,h;if(att(i,function(t){o[t]=n[t]}),att(i,function(n){e(t,n)&&(s[n]=o[n]=t[n]);f(s,n)&&l++;f(o,n)&&a++}),u[r])return f(t,i[1])?o[i[2]]=null:f(t,i[2])&&(o[i[1]]=null),o;if(a!==v&&l){if(l>=v)return s;for(c=0;c<i.length;c++)if(h=i[c],!e(s,h)&&e(n,h)){s[h]=n[h];break}return s}return o}function e(n,t){return n.hasOwnProperty(t)}function f(n,t){return n[t]!=null&&n[t]!=="auto"}function c(n,t,i){att(n,function(n){t[n]=i[n]})}var u,o,s;a(r)||(r={});u=r.ignoreSize;i(u)||(u=[u,u]);o=h(bc[0],0);s=h(bc[1],1);c(bc[0],n,o);c(bc[1],n,s)}function av(n){return goi({},n)}function goi(n,t){return t&&n&&att(doi,function(i){t.hasOwnProperty(i)&&(n[i]=t[i])}),n}function hpr(n){var i=[];return t(it.getClassesByMainType(n),function(n){i=i.concat(n.prototype.dependencies||[])}),i=r(i,function(n){return ps(n).main}),n!=="dataset"&&tt(i,"dataset")<=0&&i.unshift("dataset"),i}function cpr(n,t){for(var r=n.length,i=0;i<r;i++)if(n[i].length>t)return n[i];return n[r-1]}function tsi(n){var i=n.get("coordinateSystem"),t={coordSysName:i,coordSysDims:[],axisMap:p(),categoryAxisMap:p()},r=isi[i];if(r)return r(n,t,t.axisMap,t.categoryAxisMap),t}function vv(n){return n.get("type")==="category"}function yf(n){this.fromDataset=n.fromDataset;this.data=n.data||(n.sourceFormat===btt?{}:[]);this.sourceFormat=n.sourceFormat||rsi;this.seriesLayoutBy=n.seriesLayoutBy||usi;this.dimensionsDefine=n.dimensionsDefine;this.encodeDefine=n.encodeDefine&&p(n.encodeDefine);this.startIndex=n.startIndex||0;this.dimensionsDetectCount=n.dimensionsDetectCount}function lpr(n){var t=n.option.source,r=rsi,u,o,f,e;if(of(t))r=bw;else if(i(t)){for(t.length===0&&(r=ww),u=0,o=t.length;u<o;u++)if(f=t[u],f==null)continue;else if(i(f)){r=ww;break}else if(a(f)){r=wtt;break}}else if(a(t)){for(e in t)if(t.hasOwnProperty(e)&&ge(t[e])){r=btt;break}}else if(t!=null)throw new Error("Invalid data");dc(n).sourceFormat=r}function apr(n){return dc(n).source}function vpr(n){dc(n).datasetMap=p()}function fsi(n){var t=n.option,i=t.data,o=of(i)?bw:kc,l=!1,r=t.seriesLayoutBy,h=t.sourceHeader,c=t.dimensions,u=bpr(n),f,e,s;u&&(f=u.option,i=f.source,o=dc(u).sourceFormat,l=!0,r=r||f.seriesLayoutBy,h==null&&(h=f.sourceHeader),c=c||f.dimensions);e=ypr(i,o,r,h,c);s=t.encode;!s&&u&&(s=wpr(n,u,i,o,r,e));dc(n).source=new yf({data:i,fromDataset:l,seriesLayoutBy:r,sourceFormat:o,dimensionsDefine:e.dimensionsDefine,startIndex:e.startIndex,dimensionsDetectCount:e.dimensionsDetectCount,encodeDefine:s})}function ypr(n,r,f,e,o){var h,s,c,l,v;return n?(r===ww?(e==="auto"||e==null?osi(function(n){n!=null&&n!=="-"&&(at(n)?s==null&&(s=1):s=0)},f,n,10):s=e?1:0,o||s!==1||(o=[],osi(function(n,t){o[t]=n!=null?n:""},f,n)),h=o?o.length:f===sat?n.length:n[0]?n[0].length:null):r===wtt?o||(o=ppr(n),c=!0):r===btt?o||(o=[],c=!0,t(n,function(n,t){o.push(t)})):r===kc?(l=fw(n[0]),h=i(l)&&l.length||1):r===bw&&u&&g(!!o,"dimensions must be given if data is TypedArray."),c&&t(o,function(n,t){(a(n)?n.name:n)==="name"&&(v=t)}),{startIndex:s,dimensionsDefine:esi(o),dimensionsDetectCount:h,potentialNameDimIndex:v}):{dimensionsDefine:esi(o)}}function esi(n){if(n){var t=p();return r(n,function(n){if(n=o({},a(n)?n:{name:n}),n.name==null)return n;n.name+="";n.displayName==null&&(n.displayName=n.name);var i=t.get(n.name);return i?n.name+="-"+i.count++:t.set(n.name,{count:1}),n})}}function osi(n,t,i,r){var f,u;if(r==null&&(r=Infinity),t===sat)for(u=0;u<i.length&&u<r;u++)n(i[u]?i[u][0]:null,u);else for(f=i[0]||[],u=0;u<f.length&&u<r;u++)n(f[u],u)}function ppr(n){for(var u=0,i,r;u<n.length&&!(i=n[u++]););if(i)return r=[],t(i,function(n,t){r.push(t)}),r}function wpr(n,i,r,u,f,e){var l=tsi(n),o={},a=[],s=[],y=n.subType,d=p(["pie","map","funnel"]),g=p(["line","bar","pictorialBar","scatter","effectScatter","candlestick","boxplot"]),h,c,v;if(l&&g.get(y)!=null){var nt=n.ecModel,w=dc(nt).datasetMap,b=i.uid+"_"+f,k=w.get(b)||w.set(b,{categoryWayDim:1,valueWayDim:0});t(l.coordSysDims,function(n){var t;l.firstCategoryDimIndex==null?(t=k.valueWayDim++,o[n]=t,s.push(t)):l.categoryAxisMap.get(n)?(o[n]=0,a.push(0)):(t=k.categoryWayDim++,o[n]=t,s.push(t))})}else if(d.get(y)!=null){for(c=0;c<5&&h==null;c++)ssi(r,u,f,e.dimensionsDefine,e.startIndex,c)||(h=c);h!=null&&(o.value=h,v=e.potentialNameDimIndex||Math.max(h-1,0),s.push(v),a.push(v))}return a.length&&(o.itemName=a),s.length&&(o.seriesName=s),o}function bpr(n){var t=n.option,i=t.data;if(!i)return n.ecModel.getComponent("dataset",t.datasetIndex||0)}function kpr(n,t){return ssi(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,t)}function ssi(n,t,r,u,f,e){function y(n){return n!=null&&isFinite(n)&&n!==""?!1:at(n)&&n!=="-"?!0:void 0}var s,l=5,h,p,c,o,v,w;if(of(n))return!1;if(u&&(h=u[e],h=a(h)?h.name:h),t===ww){if(r===sat){for(c=n[e],o=0;o<(c||[]).length&&o<l;o++)if((s=y(c[f+o]))!=null)return s}else for(o=0;o<n.length&&o<l;o++)if(p=n[f+o],p&&(s=y(p[e]))!=null)return s}else if(t===wtt){if(!h)return;for(o=0;o<n.length&&o<l;o++)if(v=n[o],v&&(s=y(v[h]))!=null)return s}else if(t===btt){if(!h)return;if(c=n[h],!c||of(c))return!1;for(o=0;o<c.length&&o<l;o++)if((s=y(c[o]))!=null)return s}else if(t===kc)for(o=0;o<n.length&&o<l;o++){if(v=n[o],w=fw(v),!i(w))return!1;if((s=y(w[e]))!=null)return s}return!1}function dpr(n,t){if(t){var i=t.seiresIndex,r=t.seriesId,u=t.seriesName;return i!=null&&n.componentIndex!==i||r!=null&&n.id!==r||u!=null&&n.name!==u}}function gpr(n,i){var r=n.color&&!n.colorLayer;t(i,function(t,i){i==="colorLayer"&&r||it.hasClass(i)||(typeof t=="object"?n[i]=n[i]?v(n[i],t,!1):c(t):n[i]==null&&(n[i]=t))})}function nwr(n){n=n;this.option={};this.option[ktt]=1;this._componentsMap=p({series:[]});this._seriesIndices;this._seriesIndicesMap;gpr(n,this._theme.option);v(n,nsi,!1);this.mergeOption(n)}function twr(n,r){i(r)||(r=r?[r]:[]);var u={};return t(r,function(t){u[t]=(n.get(t)||[]).slice()}),u}function iwr(n,t,i){return t.type?t.type:i?i.subType:it.determineSubType(n,t)}function hat(n,t){n._seriesIndicesMap=p(n._seriesIndices=r(t,function(n){return n.componentIndex})||[])}function hsi(n,t){return t.hasOwnProperty("subType")?hi(n,function(n){return n.subType===t.subType}):n}function gtt(n){if(u&&!n._seriesIndices)throw new Error("Option should contains series.");}function lsi(n){t(csi,function(t){this[t]=l(n[t],n)},this)}function ir(){this._coordinateSystems=[]}function cat(n){this._api=n;this._timelineOptions=[];this._mediaList=[];this._mediaDefault;this._currentMediaIndices=[];this._optionBackup;this._newBaseOption}function uwr(n,t,i){var f=[],e=[],o,u,s=n.timeline,h;return n.baseOption&&(u=n.baseOption),(s||n.options)&&(u=u||{},f=(n.options||[]).slice()),n.media&&(u=u||{},h=n.media,tit(h,function(n){n&&n.option&&(n.query?e.push(n):o||(o=n))})),u||(u=n),u.timeline||(u.timeline=s),tit([u].concat(f).concat(r(e,function(n){return n.option})),function(n){tit(t,function(t){t(n,i)})}),{baseOption:u,timelineOptions:f,mediaDefault:o,mediaList:e}}function fwr(n,i,r){var f={width:i,height:r,aspectratio:i/r},u=!0;return t(n,function(n,t){var i=t.match(rwr),r,e;i&&i[1]&&i[2]&&(r=i[1],e=i[2].toLowerCase(),ewr(f[e],n,r)||(u=!1))}),u}function ewr(n,t,i){return i==="min"?n>=t:i==="max"?n<=t:n===t}function owr(n,t){return n.join(",")===t.join(",")}function swr(n,t){t=t||{};tit(t,function(t,i){var r,u;t!=null&&(r=n[i],it.hasClass(i)?(t=tr(t),r=tr(r),u=lct(r,t),n[i]=iit(u,function(n){return n.option&&n.exist?asi(n.exist,n.option,!0):n.exist||n.option})):n[i]=asi(r,t,!0))})}function lat(n){var f=n&&n.itemStyle,u,e;if(f)for(u=0,e=vsi.length;u<e;u++){var t=vsi[u],i=f.normal,r=f.emphasis;i&&i[t]&&(n[t]=n[t]||{},n[t].normal?v(n[t].normal,i[t]):n[t].normal=i[t],i[t]=null);r&&r[t]&&(n[t]=n[t]||{},n[t].emphasis?v(n[t].emphasis,r[t]):n[t].emphasis=r[t],r[t]=null)}}function hr(n,t,i){if(n&&n[t]&&(n[t].normal||n[t].emphasis)){var r=n[t].normal,u=n[t].emphasis;r&&(i?(n[t].normal=n[t].emphasis=null,s(n[t],r)):n[t]=r);u&&(n.emphasis=n.emphasis||{},n.emphasis[t]=u)}}function dw(n){hr(n,"itemStyle");hr(n,"lineStyle");hr(n,"areaStyle");hr(n,"label");hr(n,"labelLine");hr(n,"upperLabel");hr(n,"edgeLabel")}function ei(n,t){var r=kw(n)&&n[t],u=kw(r)&&r.textStyle,i,f,t;if(u)for(i=0,f=cct.length;i<f;i++)t=cct[i],u.hasOwnProperty(t)&&(r[t]=u[t])}function gu(n){n&&(dw(n),ei(n,"label"),n.emphasis&&ei(n.emphasis,"label"))}function hwr(n){var h,e,s,u,c,f,o,r;if(kw(n)){if(lat(n),dw(n),ei(n,"label"),ei(n,"upperLabel"),ei(n,"edgeLabel"),n.emphasis&&(ei(n.emphasis,"label"),ei(n.emphasis,"upperLabel"),ei(n.emphasis,"edgeLabel")),u=n.markPoint,u&&(lat(u),gu(u)),f=n.markLine,f&&(lat(f),gu(f)),h=n.markArea,h&&gu(h),e=n.data,n.type==="graph"){if(e=e||n.nodes,s=n.links||n.edges,s&&!of(s))for(r=0;r<s.length;r++)gu(s[r]);t(n.categories,function(n){dw(n)})}if(e&&!of(e))for(r=0;r<e.length;r++)gu(e[r]);if(u=n.markPoint,u&&u.data)for(c=u.data,r=0;r<c.length;r++)gu(c[r]);if(f=n.markLine,f&&f.data)for(o=f.data,r=0;r<o.length;r++)i(o[r])?(gu(o[r][0]),gu(o[r][1])):gu(o[r]);n.type==="gauge"?(ei(n,"axisLabel"),ei(n,"title"),ei(n,"detail")):n.type==="treemap"?(hr(n.breadcrumb,"itemStyle"),t(n.levels,function(n){dw(n)})):n.type==="tree"&&dw(n.leaves)}}function ho(n){return i(n)?n:n?[n]:[]}function ysi(n){return(i(n)?n[0]:n)||{}}function cwr(n,t){var i,r;for(t=t.split(","),i=n,r=0;r<t.length;r++)if(i=i&&i[t[r]],i==null)break;return i}function lwr(n,t,i,r){var u,e,f;for(t=t.split(","),u=n,f=0;f<t.length-1;f++)e=t[f],u[e]==null&&(u[e]={}),u=u[e];(r||u[t[f]]==null)&&(u[t[f]]=i)}function wsi(n){t(awr,function(t){t[0]in n&&!(t[1]in n)&&(n[t[1]]=n[t[0]])})}function pwr(n){t(n,function(t,i){var u=[],o=[NaN,NaN],s=[t.stackResultDimension,t.stackedOverDimension],r=t.data,f=t.isStackedByIndex,e=r.map(s,function(e,s,h){var c=r.get(t.stackedDimension,h),w,v,p,y,l,a;if(isNaN(c))return o;for(f?v=r.getRawIndex(h):w=r.get(t.stackedByDimension,h),p=NaN,y=i-1;y>=0;y--)if(l=n[y],f||(v=l.data.rawIndexOf(l.stackedByDimension,w)),v>=0&&(a=l.data.getByRawIndex(l.stackResultDimension,v),c>=0&&a>0||c<=0&&a<0)){c+=a;p=a;break}return u[0]=c,u[1]=p,u});r.hostModel.setData(e);t.data=e})}function ksi(n,t){var f,i,r;if(yf.isInstance(n)||(n=yf.seriesDataToSource(n)),this._source=n,f=this._data=n.data,i=n.sourceFormat,i===bw){if(u&&t==null)throw new Error("Typed array data must specify dimension size");this._offset=0;this._dimSize=t;this._data=f}r=dsi[i===ww?i+"_"+n.seriesLayoutBy:i];u&&g(r,"Invalide sourceFormat: "+i);o(this,r)}function gsi(){return this._data.length}function nhi(n){return this._data[n]}function aat(n){for(var t=0;t<n.length;t++)this._data.push(n[t])}function vat(n,t,i){return i!=null?n[i]:n}function rhi(n,t,i,r){return yat(n[r],this._dimensionInfos[t])}function yat(n,t){var r=t&&t.type,i;return r==="ordinal"?(i=t&&t.ordinalMeta,i?i.parseAndCollect(n):n):(r==="time"&&typeof n!="number"&&n!=null&&n!=="-"&&(n=+yw(n)),n==null||n===""?NaN:+n)}function nl(n,t,i){var u,f,e,o,r;if(n)return(u=n.getRawDataItem(t),u==null)?void 0:(f=n.getProvider().getSource().sourceFormat,r=n.getDimensionInfo(i),r&&(e=r.name,o=r.index),thi[f](u,t,o,e))}function uhi(n,t,i){var u,r;if(n)return(u=n.getProvider().getSource().sourceFormat,u!==kc&&u!==wtt)?void 0:(r=n.getRawDataItem(t),u!==kc||a(r)||(r=null),r?r[i]:void 0)}function gw(n){return new ehi(n)}function ehi(n){n=n||{};this._reset=n.reset;this._plan=n.plan;this._count=n.count;this._onDirty=n.onDirty;this._dirty=!0;this.context}function ohi(n,t,i,r,u,f){pat.reset(i,r,u,f);n._callingProgress=t;n._callingProgress({start:i,end:r,count:r-i,next:pat.next},n.context)}function wwr(n,t){var r,f,u;return n._dueIndex=n._outputDueEnd=n._dueEnd=0,n._settedOutputEnd=null,!t&&n._reset&&(r=n._reset(n.context),r&&r.progress&&(f=r.forceFirstProgress,r=r.progress),i(r)&&!r.length&&(r=null)),n._progress=r,n._modBy=n._modDataCount=null,u=n._downstream,u&&u.dirty(),f}function shi(n){var t=n.name;act(n)||(n.name=bwr(n)||t)}function bwr(n){var i=n.getRawData(),u=i.mapDimension("seriesName",!0),r=[];return t(u,function(n){var t=i.getDimensionInfo(n);t.displayName&&r.push(t.displayName)}),r.join(" ")}function kwr(n){return n.model.getRawData().count()}function dwr(n){var t=n.model;return t.setData(t.getRawData().cloneShallow()),gwr}function gwr(n,t){n.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function hhi(n,i){t(n.CHANGABLE_METHODS,function(t){n.wrapMethod(t,y(nbr,i))})}function nbr(n){var t=wat(n);t&&t.setOutputEnd(this.count())}function wat(n){var r=(n.ecModel||{}).scheduler,u=r&&r.getPipeline(n.uid),t,i;if(u)return t=u.currentTask,t&&(i=t.agentStubMap,i&&(t=i.get(n.uid))),t}function yi(){this.group=new e;this.uid=aw("viewChart");this.renderTask=gw({plan:ibr,reset:rbr});this.renderTask.context={view:this}}function bat(n,t){if(n&&(n.trigger(t),n.type==="group"))for(var i=0;i<n.childCount();i++)bat(n.childAt(i),t)}function lhi(n,i,r){var u=on(n,i);u!=null?t(tr(u),function(t){bat(n.getItemGraphicEl(t),r)}):n.eachItemGraphicEl(function(n){bat(n,r)})}function ibr(n){return tbr(n.model)}function rbr(n){var u=n.model,e=n.ecModel,o=n.api,t=n.payload,s=u.pipelineContext.progressiveRender,f=n.view,i=t&&chi(t).updateMethod,r=s?"incrementalPrepareRender":i&&f[i]?i:"render";return r!=="render"&&f[r](u,e,o,t),ubr[r]}function kat(n,t,i){function s(){c=(new Date).getTime();r=null;n.apply(l,a||[])}var e,h=0,c=0,r=null,o,l,a,u,f;return t=t||0,f=function(){e=(new Date).getTime();l=this;a=arguments;var n=u||t,f=u||i;u=null;o=e-(f?h:c)-n;clearTimeout(r);f?r=setTimeout(s,n):o>=0?s():r=setTimeout(s,-o);h=e},f.clear=function(){r&&(clearTimeout(r),r=null)},f.debounceNextCall=function(n){u=n},f}function nb(n,t,i,r){var u=n[t];if(u){var f=u[oit]||u,e=u[vhi],o=u[ahi];if(o!==i||e!==r){if(i==null||!r)return n[t]=f;u=n[t]=kat(f,i,r==="debounce");u[oit]=f;u[vhi]=r;u[ahi]=i}return u}}function yhi(n,t){var i=n[t];i&&i[oit]&&(n[t]=i[oit])}function hit(n,t,i,r){this.ecInstance=n;this.api=t;this.unfinished;var i=this._dataProcessorHandlers=i.slice(),r=this._visualHandlers=r.slice();this._allHandlers=i.concat(r);this._stageTaskMap=p()}function phi(n,i,r,u,f){function o(n,t){return n.setDirty&&(!n.dirtyMap||n.dirtyMap.get(t.__pipeline.id))}f=f||{};var e;t(i,function(t){var a,s,h;if(!f.visualType||f.visualType===t.visualType){var c=n._stageTaskMap.get(t.uid),l=c.seriesTaskMap,i=c.overallTask;i?(s=i.agentStubMap,s.each(function(n){o(f,n)&&(n.dirty(),a=!0)}),a&&i.dirty(),dat(i,u),h=n.getPerformArgs(i,f.block),s.each(function(n){n.perform(h)}),e|=i.perform(h)):l&&l.each(function(i){o(f,i)&&i.dirty();var s=n.getPerformArgs(i,f.block);s.skip=!t.performRawSeries&&r.isSeriesFiltered(i.context.model);dat(i,u);e|=i.perform(s)})}});n.unfinished|=e}function sbr(n,t,i,r,u){function e(i){var e=i.uid,o=f.get(e)||f.set(e,gw({plan:ybr,reset:pbr,count:wbr}));o.context={model:i,ecModel:r,api:u,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:n};cit(n,i,o)}var f=i.seriesTaskMap||(i.seriesTaskMap=p()),o=t.seriesType,s=t.getTargetSeries,h;t.createOnAllSeries?r.eachRawSeries(e):o?r.eachRawSeriesByType(o,e):s&&s(r,u).each(e);h=n._pipelineMap;f.each(function(n,t){h.get(t)||(n.dispose(),f.removeKey(t))})}function hbr(n,i,r,u,f){function h(t){var r=t.uid,i=o.get(r);i||(i=o.set(r,gw({reset:lbr,onDirty:vbr})),e.dirty());i.context={model:t,overallProgress:s,modifyOutputEnd:v};i.agent=e;i.__block=s;cit(n,t,i)}var e=r.overallTask=r.overallTask||gw({reset:cbr}),a;e.context={ecModel:u,api:f,overallReset:i.overallReset,scheduler:n};var o=e.agentStubMap=e.agentStubMap||p(),c=i.seriesType,l=i.getTargetSeries,s=!0,v=i.modifyOutputEnd;c?u.eachRawSeriesByType(c,h):l?l(u,f).each(h):(s=!1,t(u.getSeries(),h));a=n._pipelineMap;o.each(function(n,t){a.get(t)||(n.dispose(),e.dirty(),o.removeKey(t))})}function cbr(n){n.overallReset(n.ecModel,n.api,n.payload)}function lbr(n){return n.overallProgress&&abr}function abr(){this.agent.dirty();this.getDownstream().dirty()}function vbr(){this.agent&&this.agent.dirty()}function ybr(n){return n.plan&&n.plan(n.model,n.ecModel,n.api,n.payload)}function pbr(n){n.useClearVisual&&n.data.clearAllVisual();var t=n.resetDefines=tr(n.reset(n.model,n.ecModel,n.api,n.payload));return t.length>1?r(t,function(n,t){return bhi(t)}):whi}function bhi(n){return function(t,i){var f=i.data,r=i.resetDefines[n],u;if(r&&r.dataEach)for(u=t.start;u<t.end;u++)r.dataEach(f,u);else r&&r.progress&&r.progress(t,f)}}function wbr(n){return n.data.count()}function cit(n,t,i){var u=t.uid,r=n._pipelineMap.get(u);r.head||(r.head=i);r.tail&&r.tail.pipe(i);r.tail=i;i.__idxInPipeline=r.count++;i.__pipeline=r}function bbr(n){lit=null;try{n(wv,gat)}catch(t){}return lit}function khi(n,t){for(var i in t.prototype)n[i]=di}function tci(n){if(at(n)){var t=new DOMParser;n=t.parseFromString(n,"text/xml")}for(n.nodeType===9&&(n=n.firstChild);n.nodeName.toLowerCase()!=="svg"||n.nodeType!==1;)n=n.nextSibling;return n}function vit(){this._defs={};this._root=null;this._isDefine=!1;this._isText=!1}function dbr(n,t){for(var r=n.firstChild,i,u;r;)r.nodeType===1&&(i=r.getAttribute("offset"),i=i.indexOf("%")>0?parseInt(i,10)/100:i?parseFloat(i):0,u=r.getAttribute("stop-color")||"#000000",t.addColorStop(i,u)),r=r.nextSibling}function nf(n,t){n&&n.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),s(t.__inheritedStyle,n.__inheritedStyle))}function uci(n){for(var u,f,i=vu(n).split(lo),r=[],t=0;t<i.length;t+=2)u=parseFloat(i[t]),f=parseFloat(i[t+1]),r.push([u,f]);return r}function ou(n,i,r,u){var f=i.__inheritedStyle||{},c=i.type==="text",h,l,a,s,e;if(n.nodeType===1&&(gbr(n,i),o(f,nkr(n)),!u))for(h in tl)tl.hasOwnProperty(h)&&(l=n.getAttribute(h),l!=null&&(f[tl[h]]=l));a=c?"textFill":"fill";s=c?"textStroke":"stroke";i.style=i.style||new vs;e=i.style;f.fill!=null&&e.set(a,eci(f.fill,r));f.stroke!=null&&e.set(s,eci(f.stroke,r));t(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(n){var t=n==="lineWidth"&&c?"textStrokeWidth":n;f[n]!=null&&e.set(t,parseFloat(f[n]))});f.textBaseline&&f.textBaseline!=="auto"||(f.textBaseline="alphabetic");f.textBaseline==="alphabetic"&&(f.textBaseline="bottom");f.textAlign==="start"&&(f.textAlign="left");f.textAlign==="end"&&(f.textAlign="right");t(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(n){f[n]!=null&&e.set(n,f[n])});f.lineDash&&(i.style.lineDash=vu(f.lineDash).split(lo));e[s]&&e[s]!=="none"&&(i[s]=!0);i.__inheritedStyle=f}function eci(n,t){var i=t&&n&&n.match(fci),r,u;return i?(r=vu(i[1]),u=t[r],u):n}function gbr(n,t){var e=n.getAttribute("transform"),r,u,f,o,i;if(e)for(e=e.replace(/,/g," "),r=null,u=[],e.replace(oci,function(n,t,i){u.push(t,i)}),f=u.length-1;f>0;f-=2){i=u[f];o=u[f-1];r=r||cr();switch(o){case"translate":i=vu(i).split(lo);yu(r,r,[parseFloat(i[0]),parseFloat(i[1]||0)]);break;case"scale":i=vu(i).split(lo);pp(r,r,[parseFloat(i[0]),parseFloat(i[1]||i[0])]);break;case"rotate":i=vu(i).split(lo);uo(r,r,parseFloat(i[0]));break;case"skew":i=vu(i).split(lo);console.warn("Skew transform is not supported yet");break;case"matrix":i=vu(i).split(lo);r[0]=parseFloat(i[0]);r[1]=parseFloat(i[1]);r[2]=parseFloat(i[2]);r[3]=parseFloat(i[3]);r[4]=parseFloat(i[4]);r[5]=parseFloat(i[5])}}t.setLocalTransform(r)}function nkr(n){var f=n.getAttribute("style"),r={},i,u,t;if(!f)return r;for(i={},tvt.lastIndex=0;(u=tvt.exec(f))!=null;)i[u[1]]=u[2];for(t in tl)tl.hasOwnProperty(t)&&i[t]!=null&&(r[tl[t]]=i[t]);return r}function sci(n,t,i){var u=t/n.width,f=i/n.height,r=Math.min(u,f),e=[r,r],o=[-(n.x+n.width/2)*r+t/2,-(n.y+n.height/2)*r+i/2];return{scale:e,position:o}}function tkr(n,t){var i=new vit;return i.parse(n,t)}function dv(n){return function(t,i,r){t=t&&t.toLowerCase();ci.prototype[n].call(this,t,i,r)}}function ib(){ci.call(this)}function rb(n,t,i){function o(n,t){return n.__prio-t.__prio}var f,r,t,e;i=i||{};typeof t=="string"&&(t=eli[t]);this.id;this.group;this._dom=n;f="canvas";u&&(f=(typeof window=="undefined"?global:window).__ECHARTS__DEFAULT__RENDERER__||f);r=this._zr=sct(n,{renderer:i.renderer||f,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height});this._throttledZrFlush=kat(l(r.flush,r),17);t=c(t);t&&bsi(t,!0);this._theme=t;this._chartsViews=[];this._chartsMap={};this._componentsViews=[];this._componentsMap={};this._coordSysMgr=new ir;e=this._api=hkr(this);eg(dit,o);eg(svt,o);this._scheduler=new hit(this,e,svt,dit);ci.call(this,this._ecEventProcessor=new ovt);this._messageCenter=new ib;this._initEvents();this.resize=l(this.resize,this);this._pendingActions=[];r.animation.on("frame",this._onframe,this);fkr(r,this);fst(this)}function bci(n,t,i){var e=this._model,o=this._coordSysMgr.getCoordinateSystems(),s,r,f;for(t=sn(e,t),r=0;r<o.length;r++)if(f=o[r],f[n]&&(s=f[n](e,t,i))!=null)return s;u&&console.warn("No coordinate system that supports "+n+" found by the given finder.")}function ub(n){var i=n._model,t=n._scheduler;t.restorePipelines(i);t.prepareStageTasks();nli(n,"component",i,t);nli(n,"chart",i,t);t.plan()}function kci(n,t,i,r,u){function h(r){r&&r.__alive&&r[t]&&r[t](r.__model,o,n._api,i)}var o=n._model,e,s,f;if(!r){pi(n._componentsViews.concat(n._chartsViews),h);return}e={};e[r+"Id"]=i[r+"Id"];e[r+"Index"]=i[r+"Index"];e[r+"Name"]=i[r+"Name"];s={mainType:r,query:e};u&&(s.subType=u);f=i.excludeSeriesId;f!=null&&(f=p(tr(f)));o&&o.eachComponent(s,function(t){f&&f.get(t.id)!=null||h(n[r==="series"?"_chartsMap":"_componentsMap"][t.__viewId])},n)}function dci(n,t){var i=n._chartsMap,r=n._scheduler;t.eachSeries(function(n){r.updateStreamModes(n,i[n.__viewId])})}function gci(n,t){var f=n.type,p=n.escapeConnect,y=bit[f],c=y.actionInfo,u=(c.update||"update").split(":"),e=u.pop(),l,a,h,i,v;u=u[0]!=null&&ivt(u[0]);this[tf]=!0;l=[n];a=!1;n.batch&&(a=!0,l=r(n.batch,function(t){return t=s(o({},t),n),t.batch=null,t}));h=[];v=f==="highlight"||f==="downplay";pi(l,function(n){i=y.action(n,this._model,this._api);i=i||o({},n);i.type=c.event||i.type;h.push(i);v?kci(this,e,n,"series"):u&&kci(this,e,n,u.main,u.sub)},this);e==="none"||v||u||(this[oh]?(ub(this),ao.update.call(this,n),this[oh]=!1):ao[e].call(this,n));i=a?{type:c.event||f,escapeConnect:p,batch:h}:h[0];this[tf]=!1;t||this._messageCenter.trigger(i.type,i)}function pit(n){for(var t=this._pendingActions,i;t.length;)i=t.shift(),gci.call(this,i,n)}function wit(n){n||this.trigger("updated")}function fkr(n,t){n.on("rendered",function(){t.trigger("rendered");!n.animation.isFinished()||t[oh]||t._scheduler.unfinished||t._pendingActions.length||t.trigger("finished")})}function nli(n,t,i,r){function a(n){var e="_ec_"+n.id+"_"+n.type,t=h[e],f,a;t||(f=ivt(n.type),a=o?wf.getClass(f.main,f.sub):yi.getClass(f.sub),u&&bv(a,f.sub+" does not exist."),t=new a,t.init(i,c),h[e]=t,s.push(t),l.add(t.group));n.__viewId=t.__id=e;t.__alive=!0;t.__model=n;t.group.__ecComponentInfo={mainType:n.mainType,index:n.componentIndex};o||r.prepareView(t,n,i,c)}for(var e,o=t==="component",s=o?n._componentsViews:n._chartsViews,h=o?n._componentsMap:n._chartsMap,l=n._zr,c=n._api,f=0;f<s.length;f++)s[f].__alive=!1;for(o?i.eachComponent(function(n,t){n!=="series"&&a(t)}):i.eachSeries(a),f=0;f<s.length;)e=s[f],e.__alive?f++:(o||e.renderTask.dispose(),l.remove(e.group),e.dispose(i,c),s.splice(f,1),delete h[e.__id],e.__id=e.group.__ecComponentInfo=null)}function uvt(n){n.clearColorPalette();n.eachSeries(function(n){n.clearColorPalette()})}function tli(n,t,i,r){ekr(n,t,i,r);pi(n._chartsViews,function(n){n.__alive=!1});fvt(n,t,i,r);pi(n._chartsViews,function(n){n.__alive||n.remove(t,i)})}function ekr(n,t,i,r,u){pi(u||n._componentsViews,function(n){var u=n.__model;n.render(u,t,i,r);rli(u,n)})}function fvt(n,t,i,r,u){var f=n._scheduler,e;t.eachSeries(function(t){var i=n._chartsMap[t.__viewId],o;i.__alive=!0;o=i.renderTask;f.updatePayload(o,r);u&&u.get(t.uid)&&o.dirty();e|=o.perform(f.getPerformArgs(o));i.group.silent=!!t.get("silent");rli(t,i);skr(t,i)});f.unfinished|=e;okr(n._zr,t);ebr(n._zr.dom,t)}function evt(n,t){pi(fli,function(i){i(n,t)})}function okr(n,t){var i=n.storage,r=0;i.traverse(function(n){n.isGroup||r++});r>t.get("hoverLayerThreshold")&&!d.node&&i.traverse(function(n){n.isGroup||(n.useHoverLayer=!0)})}function skr(n,t){var i=n.get("blendMode")||null;u&&!d.canvasSupported&&i&&i!=="source-over"&&console.warn("Only canvas support blendMode");t.group.traverse(function(n){n.isGroup||n.style.blend!==i&&n.setStyle("blend",i);n.eachPendingDisplayable&&n.eachPendingDisplayable(function(n){n.setStyle("blend",i)})})}function rli(n,t){var i=n.get("z"),r=n.get("zlevel");t.group.traverse(function(n){n.type!=="group"&&(i!=null&&(n.z=i),r!=null&&(n.zlevel=r))})}function hkr(n){var t=n._coordSysMgr;return o(new lsi(n),{getCoordinateSystems:l(t.getCoordinateSystems,t),getComponentByElement:function(t){while(t){var i=t.__ecComponentInfo;if(i!=null)return n._model.getComponent(i.mainType,i.index);t=t.parent}}})}function ovt(){this.eventInfo}function akr(n){function r(n,i){for(var u,r=0;r<n.length;r++)u=n[r],u[t]=i}var i=0,u=1,f=2,t="__connectUpdateStatus";pi(kit,function(e,o){n._messageCenter.on(o,function(e){if(git[n.group]&&n[t]!==i){if(e&&e.escapeConnect)return;var s=n.makeActionFromEvent(e),o=[];pi(il,function(t){t!==n&&t.group===n.group&&o.push(t)});r(o,i);pi(o,function(n){n[t]!==u&&n.dispatchAction(s)});r(o,f)}})})}function vkr(n,t,i){var f,r;if(u){if(oct.replace(".","")-0<rvt.zrender.replace(".","")-0)throw new Error("zrender/src "+oct+" is too old for ECharts "+cci+". Current version need ZRender "+rvt.zrender+"+");if(!n)throw new Error("Initialize failed: invalid dom.");}return(f=lvt(n),f)?(u&&console.warn("There is a chart instance already initialized on the dom."),f):(u&&(!la(n)||n.nodeName.toUpperCase()==="CANVAS"||(n.clientWidth||i&&i.width!=null)&&(n.clientHeight||i&&i.height!=null)||console.warn("Can't get dom width or height")),r=new rb(n,t,i),r.id="ec_"+ckr++,il[r.id]=r,ufi(n,cvt,r.id),akr(r),r)}function ykr(n){if(i(n)){var t=n;n=null;pi(t,function(t){t.group!=null&&(n=t.group)});n=n||"g_"+lkr++;pi(t,function(t){t.group=n})}return git[n]=!0,n}function oli(n){git[n]=!1}function pkr(n){typeof n=="string"?n=il[n]:n instanceof rb||(n=lvt(n));n instanceof rb&&!n.isDisposed()&&n.dispose()}function lvt(n){return il[aar(n,cvt)]}function wkr(n){return il[n]}function avt(n,t){eli[n]=t}function ur(n){uli.push(n)}function su(n,t){yvt(svt,n,t,lci)}function bkr(n){fli.push(n)}function rt(n,t,i){typeof t=="function"&&(i=t,t="");var r=tb(n)?n.type:[n,n={event:t}][0];n.event=(n.event||r).toLowerCase();t=n.event;bv(wci.test(r)&&wci.test(t));bit[r]||(bit[r]={action:i,actionInfo:n});kit[t]=r}function vvt(n,t){ir.register(n,t)}function kkr(n){var t=ir.get(n);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()}function gt(n,t){yvt(dit,n,t,vci,"layout")}function yt(n,t){yvt(dit,n,t,pci,"visual")}function yvt(n,t,i,r,f){if((rkr(t)||tb(t))&&(i=t,t=r),u){if(isNaN(t)||t==null)throw new Error("Illegal priority");pi(n,function(n){bv(n.__raw!==i)})}var e=hit.wrapStageHandler(i,f);return e.__prio=t,e.__raw=i,n.push(e),e}function hli(n,t){hvt[n]=t}function hu(n){return it.extend(n)}function wi(n){return wf.extend(n)}function nrt(n){return wt.extend(n)}function gr(n){return yi.extend(n)}function dkr(n){uii("createCanvas",n)}function gkr(n,t,i){yit.registerMap(n,t,i)}function ndr(n){var t=yit.retrieveMap(n);return t&&t[0]&&{geoJson:t[0].geoJSON,specialAreas:t[0].specialAreas}}function lli(n){return n}function vo(n,t,i,r,u){this._old=n;this._new=t;this._oldKeyGetter=i||lli;this._newKeyGetter=r||lli;this.context=u}function ali(n,t,i,r,u){for(var o,e,f=0;f<n.length;f++)o="_ec_"+u[r](n[f],f),e=t[o],e==null?(i.push(o),t[o]=f):(e.length||(t[o]=e=[e]),e.push(f))}function tdr(n){var f={},i=f.encode={},l=p(),e=[],r=[],o,c,s,h;return t(n.dimensions,function(t){var f=n.getDimensionInfo(t),o=f.coordDim,s;o&&(u&&g(trt.get(o)==null),s=i[o],i.hasOwnProperty(o)||(s=i[o]=[]),s[f.coordDimIndex]=t,f.isExtraCoord||(l.set(o,1),idr(f.type)&&(e[0]=t)),f.defaultTooltip&&r.push(t));trt.each(function(n,t){var u=i[t],r;i.hasOwnProperty(t)||(u=i[t]=[]);r=f.otherDims[t];r!=null&&r!==!1&&(u[r]=f.name)})}),o=[],c={},l.each(function(n,t){var r=i[t];c[t]=r[0];o=o.concat(r)}),f.dataDimsOnCoord=o,f.encodeFirstDimNotExtra=c,s=i.label,s&&s.length&&(e=s.slice()),h=i.tooltip,h&&h.length?r=h.slice():r.length||(r=e.slice()),i.defaultedLabel=e,i.defaultedTooltip=r,f}function irt(n){return n==="category"?"ordinal":n==="time"?"time":"float"}function idr(n){return!(n==="ordinal"||n==="time")}function frt(n){return n._rawCount>65535?vli:fdr}function edr(n){var t=n.constructor;return t===Array?n.slice():new t(n)}function wli(n,i){t(yli.concat(i.__wrappedMethods||[]),function(t){i.hasOwnProperty(t)&&(n[t]=i[t])});n.__wrappedMethods=i.__wrappedMethods;t(pli,function(t){n[t]=c(i[t])});n._calculationInfo=o(i._calculationInfo)}function odr(n){var i=n._invertedIndicesMap;t(i,function(t,r){var e=n._dimensionInfos[r],f=e.ordinalMeta,u;if(f){for(t=i[r]=new vli(f.categories.length),u=0;u<t.length;u++)t[u]=NaN;for(u=0;u<n._count;u++)t[n.get(r,u)]=u}})}function bli(n,t,i){var r,u;if(t!=null){var f=n._chunkSize,s=Math.floor(i/f),h=i%f,e=n.dimensions[t],o=n._storage[e][s];o&&(r=o[h],u=n._dimensionInfos[e].ordinalMeta,u&&u.categories.length&&(r=u.categories[r]))}return r}function fb(n){return n}function eb(n){return n<this._count&&n>=0?this._indices[n]:-1}function pvt(n,t){var i=n._idList[t];return i==null&&(i=bli(n,n._idDimIdx,t)),i==null&&(i=rdr+t),i}function wvt(n){return i(n)||(n=[n]),n}function ert(n,t){for(var i=0;i<t.length;i++)n._dimensionInfos[t[i]]||console.error("Unkown dimension "+t[i])}function kli(n,t){var o=n.dimensions,u=new ai(r(o,n.getDimensionInfo,n),n.hostModel),s,f,e,i;for(wli(u,n),s=u._storage={},f=n._storage,e=0;e<o.length;e++)i=o[e],f[i]&&(tt(t,i)>=0?(s[i]=sdr(f[i]),u._rawExtent[i]=bvt(),u._extent[i]=null):s[i]=f[i]);return u}function sdr(n){for(var i=new Array(n.length),t=0;t<n.length;t++)i[t]=edr(n[t]);return i}function bvt(){return[Infinity,-Infinity]}function gli(n,i,r){function it(n,t,i){trt.get(t)!=null?n.otherDims[t]=i:(n.coordDim=t,n.coordDimIndex=i,tt.set(t,!0))}var e,h,rt,l,u,ut;yf.isInstance(i)||(i=yf.seriesDataToSource(i));r=r||{};n=(n||[]).slice();var v=(r.dimsDef||[]).slice(),b=p(r.encodeDef),k=p(),tt=p(),f=[],g=hdr(i,n,v,r.dimCount);for(e=0;e<g;e++){var y=v[e]=o({},a(v[e])?v[e]:{name:v[e]}),d=y.name,u=f[e]={otherDims:{}};d!=null&&k.get(d)==null&&(u.name=u.displayName=d,k.set(d,e));y.type!=null&&(u.type=y.type);y.displayName!=null&&(u.displayName=y.displayName)}b.each(function(n,i){if(n=tr(n).slice(),n.length===1&&n[0]<0){b.set(i,!1);return}var r=b.set(i,[]);t(n,function(n,t){at(n)&&(n=k.get(n));n!=null&&n<g&&(r[t]=n,it(f[n],i,t))})});h=0;t(n,function(n){var u,n,r,e,l,i,o;if(at(n)?(u=n,n={}):(u=n.name,l=n.ordinalMeta,n.ordinalMeta=null,n=c(n),n.ordinalMeta=l,r=n.dimsDef,e=n.otherDims,n.name=n.coordDim=n.coordDimIndex=n.dimsDef=n.otherDims=null),i=b.get(u),i!==!1){if(i=tr(i),!i.length)for(o=0;o<(r&&r.length||1);o++){while(h<f.length&&f[h].coordDim!=null)h++;h<f.length&&i.push(h++)}t(i,function(t,i){var o=f[t],h;it(s(o,n),u,i);o.name==null&&r&&(h=r[i],a(h)||(h={name:h}),o.name=o.displayName=h.name,o.defaultTooltip=h.defaultTooltip);e&&s(o.otherDims,e)})}});var nt=r.generateCoord,w=r.generateCoordCount,ft=w!=null;for(w=nt?w||1:0,rt=nt||"value",l=0;l<g;l++)u=f[l]=f[l]||{},ut=u.coordDim,ut==null&&(u.coordDim=nai(rt,tt,ft),u.coordDimIndex=0,(!nt||w<=0)&&(u.isExtraCoord=!0),w--),u.name==null&&(u.name=nai(u.coordDim,k)),u.type==null&&kpr(i,l,u.name)&&(u.type="ordinal");return f}function hdr(n,i,r,u){var f=Math.max(n.dimensionsDetectCount||1,i.length,r.length,u||0);return t(i,function(n){var t=n.dimsDef;t&&(f=Math.max(f,t.length))}),f}function nai(n,t,i){if(i||t.get(n)!=null){for(var r=0;t.get(n+r)!=null;)r++;n+=r}return t.set(n,!0),n}function tai(n,i,r){r=r||{};var e=r.byIndex,c=r.stackedCoordDimension,v=!!(n&&n.get("stack")),f,u,h,o;if(t(i,function(n,t){at(n)&&(i[t]=n={name:n});v&&!n.isExtraCoord&&(e||f||!n.ordinalMeta||(f=n),u||n.type==="ordinal"||n.type==="time"||c&&c!==n.coordDim||(u=n))}),!u||e||f||(e=!0),u){h='__\0ecstackresult';o='__\0ecstackedover';f&&(f.createInvertedIndices=!0);var l=u.coordDim,a=u.type,s=0;t(i,function(n){n.coordDim===l&&s++});i.push({name:h,coordDim:l,coordDimIndex:s,type:a,isExtraCoord:!0,isCalculationCoord:!0});s++;i.push({name:o,coordDim:o,coordDimIndex:s,type:a,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:u&&u.name,stackedByDimension:f&&f.name,isStackedByIndex:e,stackedOverDimension:o,stackResultDimension:h}}function yo(n,t){return!!t&&t===n.getCalculationInfo("stackedDimension")}function ort(n,t){return yo(n,t)?n.getCalculationInfo("stackResultDimension"):t}function po(n,i,u){var o,f,l,a,s,v;u=u||{};yf.isInstance(n)||(n=yf.seriesDataToSource(n));var y=i.get("coordinateSystem"),h=ir.get(y),e=tsi(i),c;return e&&(c=r(e.coordSysDims,function(n){var t={name:n},i=e.axisMap.get(n),r;return i&&(r=i.get("type"),t.type=irt(r)),t})),c||(c=h&&(h.getDimensionsInfo?h.getDimensionsInfo():h.dimensions.slice())||["x","y"]),o=rl(n,{coordDimensions:c,generateCoord:u.generateCoord}),e&&t(o,function(n,t){var r=n.coordDim,i=e.categoryAxisMap.get(r);i&&(f==null&&(f=t),n.ordinalMeta=i.getOrdinalMeta());n.otherDims.itemName!=null&&(l=!0)}),l||f==null||(o[f].otherDims.itemName=0),a=tai(i,o),s=new ai(o,i),s.setCalculationInfo(a),v=f!=null&&cdr(n)?function(n,t,i,r){return r===f?i:this.defaultDimValueGetter(n,t,i,r)}:null,s.hasItemOption=!1,s.initData(n,null,v),s}function cdr(n){if(n.sourceFormat===kc){var t=ldr(n.data||[]);return t!=null&&!i(fw(t))}}function ldr(n){for(var t=0;t<n.length&&n[t]==null;)t++;return n[t]}function oi(n){this._setting=n||{};this._extent=[Infinity,-Infinity];this._interval=0;this.init&&this.init.apply(this,arguments)}function ob(n){this.categories=n.categories||[];this._needCollect=n.needCollect;this._deduplication=n.deduplication;this._map}function iai(n){return n._map||(n._map=p(n.categories))}function adr(n){return a(n)&&n.value!=null?n.value:n+""}function vdr(n,t,i,r){var f={},s=n[1]-n[0],u=f.interval=tat(s/t,!0),e,o;return i!=null&&u<i&&(u=f.interval=i),r!=null&&u>r&&(u=f.interval=r),e=f.intervalPrecision=rai(u),o=f.niceTickExtent=[crt(Math.ceil(n[0]/u)*u,e),crt(Math.floor(n[1]/u)*u,e)],fai(o,n),f}function rai(n){return ott(n)+2}function uai(n,t,i){n[t]=Math.max(Math.min(n[t],i[1]),i[0])}function fai(n,t){isFinite(n[0])||(n[0]=t[0]);isFinite(n[1])||(n[1]=t[1]);uai(n,0,t);uai(n,1,t);n[0]>n[1]&&(n[0]=n[1])}function ydr(n,t,i,r){var u=[],e,f;if(!n)return u;for(e=1e4,t[0]<i[0]&&u.push(t[0]),f=i[0];f<=i[1];){if(u.push(f),f=crt(f+n,r),f===u[u.length-1])break;if(u.length>e)return[]}return t[1]>(u.length?u[u.length-1]:i[1])&&u.push(t[1]),u}function gvt(n){return n.get("stack")||dvt+n.seriesIndex}function nyt(n){return n.dim+n.index}function wdr(n){var u=[],f=n.axis,e="axis0",o,h,r,t,i;if(f.type==="category"){for(o=f.getBandWidth(),t=0;t<n.count||0;t++)u.push(s({bandWidth:o,axisKey:e,stackId:dvt+t},n));for(h=sai(u),r=[],t=0;t<n.count;t++)i=h[e][dvt+t],i.offsetCenter=i.offset+i.width/2,r.push(i);return r}}function oai(n,t){var i=[];return t.eachSeriesByType(n,function(n){aai(n)&&!vai(n)&&i.push(n)}),i}function tyt(n){var i=[];return t(n,function(n){var e=n.getData(),o=n.coordinateSystem,t=o.getBaseAxis(),u=t.getExtent(),r=t.type==="category"?t.getBandWidth():Math.abs(u[1]-u[0])/e.count(),s=f(n.get("barWidth"),r),h=f(n.get("barMaxWidth"),r),c=n.get("barGap"),l=n.get("barCategoryGap");i.push({bandWidth:r,barWidth:s,barMaxWidth:h,barGap:c,barCategoryGap:l,axisKey:nyt(t),stackId:gvt(n)})}),sai(i)}function sai(n){var r={},i;return t(n,function(n){var h=n.axisKey,c=n.bandWidth,t=r[h]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},u=t.stacks,i,f,e,o,s;r[h]=t;i=n.stackId;u[i]||t.autoWidthCount++;u[i]=u[i]||{width:0,maxWidth:0};f=n.barWidth;f&&!u[i].width&&(u[i].width=f,f=Math.min(t.remainedWidth,f),t.remainedWidth-=f);e=n.barMaxWidth;e&&(u[i].maxWidth=e);o=n.barGap;o!=null&&(t.gap=o);s=n.barCategoryGap;s!=null&&(t.categoryGap=s)}),i={},t(r,function(n,r){var h,l,a;i[r]={};var c=n.stacks,y=n.bandWidth,v=f(n.categoryGap,y),e=f(n.gap,1),s=n.remainedWidth,o=n.autoWidthCount,u=(s-v)/(o+(o-1)*e);u=Math.max(u,0);t(c,function(n){var t=n.maxWidth;t&&t<u&&(t=Math.min(t,s),n.width&&(t=Math.min(t,n.width)),s-=t,n.width=t,o--)});u=(s-v)/(o+(o-1)*e);u=Math.max(u,0);h=0;t(c,function(n){n.width||(n.width=u);l=n;h+=n.width*(1+e)});l&&(h-=l.width*e);a=-h/2;t(c,function(n,t){i[r][t]=i[r][t]||{offset:a,width:n.width};a+=n.width*(1+e)})}),i}function hai(n,t,i){if(n&&t){var r=n[nyt(t)];return r!=null&&i!=null&&(r=r[gvt(i)]),r}}function cai(n,i){var u=oai(n,i),f=tyt(u),r={};t(u,function(n){var t=n.getData(),a=n.coordinateSystem,v=a.getBaseAxis(),i=gvt(n),it=f[nyt(v)][i],k=it.offset,d=it.width,g=a.getOtherAxis(v),y=n.get("barMinHeight")||0,s,ut,l,u,w,b,nt,tt,e,o,h;r[i]=r[i]||[];t.setLayout({offset:k,size:d});var rt=t.mapDimension(g.dim),ft=t.mapDimension(v.dim),p=yo(t,rt),et=g.isHorizontal(),c=yai(v,g,p);for(s=0,ut=t.count();s<ut;s++)(l=t.get(rt,s),u=t.get(ft,s),isNaN(l))||(w=l>=0?"p":"n",b=c,p&&(r[i][u]||(r[i][u]={p:c,n:c}),b=r[i][u][w]),et?(h=a.dataToPoint([l,u]),nt=b,tt=h[1]+k,e=h[0]-c,o=d,Math.abs(e)<y&&(e=(e<0?-1:1)*y),p&&(r[i][u][w]+=e)):(h=a.dataToPoint([u,l]),nt=h[0]+k,tt=b,e=d,o=h[1]-c,Math.abs(o)<y&&(o=(o<=0?-1:1)*y),p&&(r[i][u][w]+=o)),t.setItemLayout(s,{x:nt,y:tt,width:e,height:o}))},this)}function aai(n){return n.coordinateSystem&&n.coordinateSystem.type==="cartesian2d"}function vai(n){return n.pipelineContext&&n.pipelineContext.large}function yai(n,t){var i=t.getGlobalExtent(),u,f,r;return i[0]>i[1]?(u=i[1],f=i[0]):(u=i[0],f=i[1]),r=t.toGlobalCoord(t.dataToCoord(0)),r<u&&(r=u),r>f&&(r=f),r}function wrt(n,t){return gdr(n,ddr(t))}function bai(n,r){var c=n.type,e=r.getMin(),o=r.getMax(),k=e!=null,d=o!=null,h=n.getExtent(),l,s,a,v,y,w,b,p;return c==="ordinal"?l=r.getCategories().length:(s=r.get("boundaryGap"),i(s)||(s=[s||0,s||0]),typeof s[0]=="boolean"&&(u&&console.warn('Boolean type for boundaryGap is only allowed for ordinal axis. Please use string in percentage instead, e.g., "20%". Currently, boundaryGap is set to be 0.'),s=[0,0]),s[0]=f(s[0],1),s[1]=f(s[1],1),a=h[1]-h[0]||Math.abs(h[0])),e==null&&(e=c==="ordinal"?l?0:NaN:h[0]-s[0]*a),o==null&&(o=c==="ordinal"?l?l-1:NaN:h[1]+s[1]*a),e==="dataMin"?e=h[0]:typeof e=="function"&&(e=e({min:h[0],max:h[1]})),o==="dataMax"?o=h[1]:typeof o=="function"&&(o=o({min:h[0],max:h[1]})),e!=null&&isFinite(e)||(e=NaN),o!=null&&isFinite(o)||(o=NaN),n.setBlank(lp(e)||lp(o)||c==="ordinal"&&!n.getOrdinalMeta().categories.length),r.getNeedCrossZero()&&(e>0&&o>0&&!k&&(e=0),e<0&&o<0&&!d&&(o=0)),v=r.ecModel,v&&c==="time"&&(y=oai("bar",v),t(y,function(n){w|=n.getBaseAxis()===r.axis}),w&&(b=tyt(y),p=igr(e,o,r,b),e=p.min,o=p.max)),[e,o]}function igr(n,i,r,u){var s=r.axis.getExtent(),a=s[1]-s[0],o=hai(u,r.axis),f,e;if(o===undefined)return{min:n,max:i};f=Infinity;t(o,function(n){f=Math.min(n.offset,f)});e=-Infinity;t(o,function(n){e=Math.max(n.offset+n.width,e)});f=Math.abs(f);e=Math.abs(e);var h=f+e,c=i-n,v=1-(f+e)/a,l=c/v-c;return i+=l*(e/h),n-=l*(f/h),{min:n,max:i}}function sh(n,t){var u=bai(n,t),f=t.getMin()!=null,e=t.getMax()!=null,o=t.get("splitNumber"),i,r;n.type==="log"&&(n.base=t.get("logBase"));i=n.type;n.setExtent(u[0],u[1]);n.niceExtent({splitNumber:o,fixMin:f,fixMax:e,minInterval:i==="interval"||i==="time"?t.get("minInterval"):null,maxInterval:i==="interval"||i==="time"?t.get("maxInterval"):null});r=t.get("interval");r!=null&&n.setInterval&&n.setInterval(r)}function ty(n,t){if(t=t||n.get("type"),t)switch(t){case"category":return new hrt(n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),[Infinity,-Infinity]);case"value":return new bf;default:return(oi.getClass(t)||bf).create(n)}}function rgr(n){var t=n.scale.getExtent(),i=t[0],r=t[1];return!(i>0&&r>0||i<0&&r<0)}function hb(n){var t=n.getLabelModel().get("formatter"),i=n.type==="category"?n.scale.getExtent()[0]:null;return typeof t=="string"?t=function(t){return function(i){return i=n.scale.getLabel(i),t.replace("{value}",i!=null?i:"")}}(t):typeof t=="function"?function(r,u){return i!=null&&(u=r-i),t(uyt(n,r),u)}:function(t){return n.scale.getLabel(t)}}function uyt(n,t){return n.type==="category"?n.scale.getLabel(t):t}function ugr(n){var l=n.model,r=n.scale,e,u,t,o,i;if(l.get("axisLabel.show")&&!r.isBlank()){e=n.type==="category";o=r.getExtent();e?t=r.count():(u=r.getTicks(),t=u.length);var s=n.getLabelModel(),a=hb(n),f,h=1;for(t>40&&(h=Math.ceil(t/40)),i=0;i<t;i+=h){var v=u?u[i]:o[0]+i,y=a(v),p=s.getTextRect(y),c=fgr(p,s.get("rotate")||0);f?f.union(c):f=c}return f}}function fgr(n,t){var i=t*Math.PI/180,r=n.plain(),u=r.width,f=r.height,e=u*Math.cos(i)+f*Math.sin(i),o=u*Math.sin(i)+f*Math.cos(i);return new b(r.x,r.y,e,o)}function agr(n,t){if(this.type!=="image"){var i=this.style,r=this.shape;r&&r.symbolType==="line"?i.stroke=n:this.__isEmptyBrush?(i.stroke=n,i.fill=t||"#fff"):(i.fill&&(i.fill=n),i.stroke&&(i.stroke=n));this.dirty(!1)}}function cu(n,t,i,r,u,f,e){var s=n.indexOf("empty")===0,o;return s&&(n=n.substr(5,1).toLowerCase()+n.substr(6)),o=n.indexOf("image://")===0?bei(n.slice(8),new b(t,i,r,u),e?"center":"cover"):n.indexOf("path://")===0?cw(n.slice(7),{},new b(t,i,r,u),e?"center":"cover"):new kai({shape:{symbolType:n,x:t,y:i,width:r,height:u}}),o.__isEmptyBrush=s,o.setColor=agr,o.setColor(f),o}function vgr(n){return po(n.getSource(),n)}function ygr(n,t){var i=t,r;return ut.isInstance(t)||(i=new ut(t),st(i,ul)),r=ty(i),r.setExtent(n[0],n[1]),sh(r,i),r}function pgr(n){st(n,ul)}function tvi(n,t){return Math.abs(n-t)<nvi}function fl(n,t,i){var o=0,r=n[0],f,e,u;if(!r)return!1;for(f=1;f<n.length;f++)e=n[f],o+=oo(r[0],r[1],e[0],e[1],t,i),r=e;return u=n[0],tvi(r[0],u[0])&&tvi(r[1],u[1])||(o+=oo(r[0],r[1],u[0],u[1],t,i)),o!==0}function cb(n,t,i){if(this.name=n,this.geometries=t,i)i=[i[0],i[1]];else{var r=this.getBoundingRect();i=[r.x+r.width/2,r.y+r.height/2]}this.center=i}function wgr(n){var r,o,f,t,u,i,c;if(!n.UTF8Encoding)return n;for(r=n.UTF8Scale,r==null&&(r=1024),o=n.features,f=0;f<o.length;f++){var l=o[f],e=l.geometry,s=e.coordinates,h=e.encodeOffsets;for(t=0;t<s.length;t++)if(u=s[t],e.type==="Polygon")s[t]=ivi(u,h[t],r);else if(e.type==="MultiPolygon")for(i=0;i<u.length;i++)c=u[i],u[i]=ivi(c,h[t][i],r)}return n.UTF8Encoding=!1,n}function ivi(n,t,i){for(var r,u,e=[],o=t[0],s=t[1],f=0;f<n.length;f+=2)r=n.charCodeAt(f)-64,u=n.charCodeAt(f+1)-64,r=r>>1^-(r&1),u=u>>1^-(u&1),r+=o,u+=s,o=r,s=u,e.push([r/i,u/i]);return e}function bgr(n){return n.type==="category"?dgr(n):nnr(n)}function kgr(n,t){return n.type==="category"?ggr(n,t):{ticks:n.scale.getTicks()}}function dgr(n){var t=n.getLabelModel(),i=rvi(n,t);return!t.get("show")||n.scale.isBlank()?{labels:[],labelCategoryInterval:i.labelCategoryInterval}:i}function rvi(n,t){var f=uvi(n,"labels"),i=hvi(t),e=fvi(f,i),r,u;return e?e:(ar(i)?r=svi(n,i):(u=i==="auto"?tnr(n):i,r=ovi(n,u)),evi(f,i,{labels:r,labelCategoryInterval:u}))}function ggr(n,t){var o=uvi(n,"ticks"),i=hvi(t),s=fvi(o,i),u,f,e;return s?s:((!t.get("show")||n.scale.isBlank())&&(u=[]),ar(i)?u=svi(n,i,!0):i==="auto"?(e=rvi(n,n.getLabelModel()),f=e.labelCategoryInterval,u=r(e.labels,function(n){return n.tickValue})):(f=i,u=ovi(n,f,!0)),evi(o,i,{ticks:u,tickCategoryInterval:f}))}function nnr(n){var t=n.scale.getTicks(),i=hb(n);return{labels:r(t,function(t,r){return{formattedLabel:i(t,r),rawLabel:n.scale.getLabel(t),tickValue:t}})}}function uvi(n,t){return iy(n)[t]||(iy(n)[t]=[])}function fvi(n,t){for(var i=0;i<n.length;i++)if(n[i].key===t)return n[i].value}function evi(n,t,i){return n.push({key:t,value:i}),i}function tnr(n){var t=iy(n).autoInterval;return t!=null?t:iy(n).autoInterval=n.calculateCategoryInterval()}function inr(n){var h=rnr(n),g=hb(n),v=(h.axisRotate-h.labelRotate)/180*Math.PI,y=n.scale,r=y.getExtent(),u=y.count(),c,f,e;if(r[1]-r[0]<1)return 0;c=1;u>40&&(c=Math.max(1,Math.floor(u/40)));for(var t=r[0],p=n.dataToCoord(t+1)-n.dataToCoord(t),nt=Math.abs(p*Math.cos(v)),tt=Math.abs(p*Math.sin(v)),l=0,a=0;t<=r[1];t+=c){var w=0,b=0,k=ue(g(t),h.font,"center","top");w=k.width*1.3;b=k.height*1.3;l=Math.max(l,w,7);a=Math.max(a,b,7)}f=l/nt;e=a/tt;isNaN(f)&&(f=Infinity);isNaN(e)&&(e=Infinity);var i=Math.max(0,Math.floor(Math.min(f,e))),o=iy(n.model),s=o.lastAutoInterval,d=o.lastTickCount;return s!=null&&d!=null&&Math.abs(s-i)<=1&&Math.abs(d-u)<=1&&s>i?i=s:(o.lastTickCount=u,o.lastAutoInterval=i),i}function rnr(n){var t=n.getLabelModel();return{axisRotate:n.getRotate?n.getRotate():n.isHorizontal&&!n.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function ovi(n,t,i){function h(n){l.push(i?n:{formattedLabel:a(n),rawLabel:o.getLabel(n),tickValue:n})}var a=hb(n),o=n.scale,r=o.getExtent(),c=n.getLabelModel(),l=[],u=Math.max((t||0)+1,1),f=r[0],v=o.count(),s,e;for(f!==0&&u>1&&v/u>2&&(f=Math.round(Math.ceil(f/u)*u)),s={min:c.get("showMinLabel"),max:c.get("showMaxLabel")},s.min&&f!==r[0]&&h(r[0]),e=f;e<=r[1];e+=u)h(e);return s.max&&e!==r[1]&&h(r[1]),l}function svi(n,i,r){var u=n.scale,e=hb(n),f=[];return t(u.getTicks(),function(n){var t=u.getLabel(n);i(n,t)&&f.push(r?n:{formattedLabel:e(n),rawLabel:t,tickValue:n})}),f}function hvi(n){var t=n.get("interval");return t==null?"auto":t}function cvi(n,t){var r=n[1]-n[0],u=t,i=r/u/2;n[0]+=i;n[1]-=i}function unr(n,i,r,u,f){function h(n,t){return l?n>t:n<t}var c=i.length,e,o,s,l;n.onBand&&!u&&c&&(e=n.getExtent(),c===1?(i[0].coord=e[0],o=i[1]={coord:e[0]}):(s=i[1].coord-i[0].coord,t(i,function(n){n.coord-=s/2;var t=t||0;t%2>0&&(n.coord-=s/((t+1)*2))}),o={coord:i[c-1].coord+s},i.push(o)),l=e[0]>e[1],h(i[0].coord,e[0])&&(f?i[0].coord=e[0]:i.shift()),f&&h(e[0],i[0].coord)&&i.unshift({coord:e[0]}),h(e[1],o.coord)&&(f?o.coord=e[1]:i.pop()),f&&h(o.coord,e[1])&&i.push({coord:e[1]}))}function krt(n,t){var i=n.mapDimension("defaultedLabel",!0),f=i.length,u,r,e;if(f===1)return nl(n,t,i[0]);if(f){for(u=[],r=0;r<i.length;r++)e=nl(n,t,i[r]),u.push(e);return u.join(" ")}}function hh(n,t,i){e.call(this);this.updateData(n,t,i)}function hyt(n){return[n[0]/2,n[1]/2]}function fnr(n,t){this.parent.drift(n,t)}function cnr(){alt(this)||vvi.call(this)}function lnr(){alt(this)||yvi.call(this)}function vvi(){if(!this.incremental&&!this.useHoverLayer){var n=this.__symbolOriginalScale,t=n[1]/n[0];this.animateTo({scale:[Math.max(n[0]*1.1,n[0]+3),Math.max(n[1]*1.1,n[1]+3*t)]},400,"elasticOut")}}function yvi(){this.incremental||this.useHoverLayer||this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}function ry(n){this.group=new e;this._symbolCtor=n||hh}function cyt(n,t,i,r){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(r.isIgnore&&r.isIgnore(i))&&!(r.clipShape&&!r.clipShape.contain(t[0],t[1]))&&n.getItemVisual(i,"symbol")!=="none"}function pvi(n){return n==null||a(n)||(n={isIgnore:n}),n||{}}function wvi(n){var t=n.hostModel;return{itemStyle:t.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:t.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label"),cursorStyle:t.get("cursor")}}function lyt(n,t,i){var o=n.getBaseAxis(),s=n.getOtherAxis(o),l=anr(s,i),h=o.dim,f=s.dim,a=t.mapDimension(f),v=t.mapDimension(h),y=f==="x"||f==="radius"?1:0,u=r(n.dimensions,function(n){return t.mapDimension(n)}),e,c=t.getCalculationInfo("stackResultDimension");return(e|=yo(t,u[0]))&&(u[0]=c),(e|=yo(t,u[1]))&&(u[1]=c),{dataDimsForPoint:u,valueStart:l,valueAxisDim:f,baseAxisDim:h,stacked:!!e,valueDim:a,baseDim:v,baseDataOffset:y,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function anr(n,t){var r=0,i=n.scale.getExtent();return t==="start"?r=i[0]:t==="end"?r=i[1]:i[0]>0?r=i[0]:i[1]<0&&(r=i[1]),r}function ayt(n,t,i,r){var u=NaN,e,f;return n.stacked&&(u=i.get(i.getCalculationInfo("stackedOverDimension"),r)),isNaN(u)&&(u=n.valueStart),e=n.baseDataOffset,f=[],f[e]=i.get(n.baseDim,r),f[1-e]=u,t.dataToPoint(f)}function vnr(n,t){var i=[];return t.diff(n).add(function(n){i.push({cmd:"+",idx:n})}).update(function(n,t){i.push({cmd:"=",idx:t,idx1:n})}).remove(function(n){i.push({cmd:"-",idx:n})}).execute(),i}function wo(n){return isNaN(n[0])||isNaN(n[1])}function yyt(n,t,i,r,u,f,e,o,s,h){return h!=="none"&&h?pnr.apply(this,arguments):wnr.apply(this,arguments)}function pnr(n,t,i,r,u,f,e,o,s,h,c){for(var l,w=0,a=i,y=0;y<r;y++){if(l=t[a],a>=u||a<0)break;if(wo(l)){if(c){a+=f;continue}break}if(a===i)n[f>0?"moveTo":"lineTo"](l[0],l[1]);else if(s>0){var p=t[w],v=h==="y"?1:0,b=(l[v]-p[v])*s;drt(uf,p);uf[v]=p[v]+b;drt(ff,l);ff[v]=l[v]-b;n.bezierCurveTo(uf[0],uf[1],ff[0],ff[1],l[0],l[1])}else n.lineTo(l[0],l[1]);w=a;a+=f}return y}function wnr(n,t,i,r,u,f,e,o,s,h,c){for(var l,y,a,g,w,p,nt=0,v=i,b=0;b<r;b++){if(l=t[v],v>=u||v<0)break;if(wo(l)){if(c){v+=f;continue}break}if(v===i)n[f>0?"moveTo":"lineTo"](l[0],l[1]),drt(uf,l);else if(s>0){if(y=v+f,a=t[y],c)while(a&&wo(t[y]))y+=f,a=t[y];var k=.5,d=t[nt],a=t[y];!a||wo(a)?drt(ff,l):(wo(a)&&!c&&(a=l),no(vyt,a,d),h==="x"||h==="y"?(p=h==="x"?0:1,g=Math.abs(l[p]-d[p]),w=Math.abs(l[p]-a[p])):(g=hs(l,d),w=hs(l,a)),k=w/(w+g),dvi(ff,l,vyt,-s*(1-k)));bvi(uf,uf,o);kvi(uf,uf,e);bvi(ff,ff,o);kvi(ff,ff,e);n.bezierCurveTo(uf[0],uf[1],ff[0],ff[1],l[0],l[1]);dvi(uf,l,vyt,s*k)}else n.lineTo(l[0],l[1]);nt=v;v+=f}return b}function pyt(n,t){var r=[Infinity,Infinity],u=[-Infinity,-Infinity],f,i;if(t)for(f=0;f<n.length;f++)i=n[f],i[0]<r[0]&&(r[0]=i[0]),i[1]<r[1]&&(r[1]=i[1]),i[0]>u[0]&&(u[0]=i[0]),i[1]>u[1]&&(u[1]=i[1]);return{min:t?r:u,max:t?u:r}}function nyi(n,t){var i,r,u;if(n.length===t.length){for(i=0;i<n.length;i++)if(r=n[i],u=t[i],r[0]!==u[0]||r[1]!==u[1])return;return!0}}function tyi(n){return typeof n=="number"?n:n?.5:0}function iyi(n){var t=n.getGlobalExtent(),i,r;return n.onBand&&(i=n.getBandWidth()/2-1,r=t[1]>t[0]?1:-1,t[0]+=r*i,t[1]-=r*i),t}function bnr(n,t,i){var u,r,f;if(!i.valueDim)return[];for(u=[],r=0,f=t.count();r<f;r++)u.push(ayt(i,n,t,r));return u}function knr(n,t,i,r){var o=iyi(n.getAxis("x")),s=iyi(n.getAxis("y")),a=n.getBaseAxis().isHorizontal(),h=Math.min(o[0],o[1]),c=Math.min(s[0],s[1]),u=Math.max(o[0],o[1])-h,f=Math.max(s[0],s[1])-c,v,e,l;return i?(h-=.5,u+=.5,c-=.5,f+=.5):(v=r.get("lineStyle.width")||2,e=r.get("clipOverflow")?v/2:Math.max(u,f),a?(c-=e,f+=e*2):(h-=e,u+=e*2)),l=new et({shape:{x:h,y:c,width:u,height:f}}),t&&(l.shape[a?"width":"height"]=0,sr(l,{shape:{width:u,height:f}},r)),l}function dnr(n,t,i,r){var s=n.getAngleAxis(),h=n.getRadiusAxis(),u=h.getExtent().slice(),f,e,o;return u[0]>u[1]&&u.reverse(),f=s.getExtent(),e=Math.PI/180,i&&(u[0]-=.5,u[1]+=.5),o=new so({shape:{cx:ki(n.cx,1),cy:ki(n.cy,1),r0:ki(u[0],1),r:ki(u[1],1),startAngle:-f[0]*e,endAngle:-f[1]*e,clockwise:s.inverse}}),t&&(o.shape.endAngle=-f[0]*e,sr(o,{shape:{endAngle:-f[1]*e}},r)),o}function grt(n,t,i,r){return n.type==="polar"?dnr(n,t,i,r):knr(n,t,i,r)}function ch(n,t,i){for(var s,o,u,l,h,c=t.getBaseAxis(),r=c.dim==="x"||c.dim==="radius"?0:1,f=[],e=0;e<n.length-1;e++){s=n[e+1];o=n[e];f.push(o);u=[];switch(i){case"end":u[r]=s[r];u[1-r]=o[1-r];f.push(u);break;case"middle":l=(o[r]+s[r])/2;h=[];u[r]=h[r]=l;u[1-r]=o[1-r];h[1-r]=s[1-r];f.push(u);f.push(h);break;default:u[r]=o[r];u[1-r]=s[1-r];f.push(u)}}return n[e]&&f.push(n[e]),f}function gnr(n,i){var s=n.getVisual("visualMeta"),e,c,h,l;if(s&&s.length&&n.count()){if(i.type!=="cartesian2d"){u&&console.warn("Visual map on line style is only supported on cartesian2d.");return}for(h=s.length-1;h>=0;h--){var d=s[h].dimension,g=n.dimensions[d],y=n.getDimensionInfo(g);if(e=y&&y.coordDim,e==="x"||e==="y"){c=s[h];break}}if(!c){u&&console.warn("Visual map on line style only support x or y dimension.");return}var p=i.getAxis(e),f=r(c.stops,function(n){return{coord:p.toGlobalCoord(p.dataToCoord(n.value)),color:n.color}}),o=f.length,a=c.outerColors.slice();o&&f[0].coord>f[o-1].coord&&(f.reverse(),a.reverse());var w=10,v=f[0].coord-w,b=f[o-1].coord+w,k=b-v;return k<.001?"transparent":(t(f,function(n){n.offset=(n.coord-v)/k}),f.push({offset:o?f[o-1].offset:.5,color:a[1]||"transparent"}),f.unshift({offset:o?f[0].offset:.5,color:a[0]||"transparent"}),l=new rh(0,0,0,0,f,!0),l[e]=v,l[e+"2"]=b,l)}}function ntu(n,i,r){var e=n.get("showAllSymbol"),o=e==="auto",u,s,f;if(!e||o)return(u=r.getAxesByScale("ordinal")[0],!u)?void 0:o&&ttu(u,i)?void 0:(s=i.mapDimension(u.dim),f={},t(u.getViewLabels(),function(n){f[n.tickValue]=1}),function(n){return!f.hasOwnProperty(i.get(s,n))})}function ttu(n,t){var f=n.getExtent(),r=Math.abs(f[1]-f[0])/n.scale.count(),u,e,i;for(isNaN(r)&&(r=0),u=t.count(),e=Math.max(1,Math.round(u/5)),i=0;i<u;i+=e)if(hh.getSymbolSize(t,i)[n.isHorizontal()?1:0]*1.5>r)return!1;return!0}function ftu(n){return this._axes[n]}function vb(n){ab.call(this,n)}function ryi(n,t){return t.type||(t.data?"category":"value")}function dyt(n,t){return n.getCoordSysModel()===t}function ey(n,t,i){this._coordsMap={};this._coordsList=[];this._axesMap={};this._axesList=[];this._initCartesian(n,t,i);this.model=n}function uyi(n,t,i,r){function h(n){return n.dim+"_"+n.index}var e;i.getAxesOnZeroOf=function(){return f?[f]:[]};var u=n[t],f,s=i.model,c=s.get("axisLine.onZero"),o=s.get("axisLine.onZeroAxisIndex");if(c){if(o!=null)fyi(u[o])&&(f=u[o]);else for(e in u)if(u.hasOwnProperty(e)&&fyi(u[e])&&!r[h(u[e])]){f=u[e];break}f&&(r[h(f)]=!0)}}function fyi(n){return n&&n.type!=="category"&&n.type!=="time"&&rgr(n)}function otu(n,t){var i=n.getExtent(),r=i[0]+i[1];n.toGlobalCoord=n.dim==="x"?function(n){return n+t}:function(n){return r-n+t};n.toLocalCoord=n.dim==="x"?function(n){return n-t}:function(n){return r-n+t}}function oyi(n){return r(eyi,function(t){var i=n.getReferringComponents(t)[0];if(u&&!i)throw new Error(t+' "'+kt(n.get(t+"Index"),n.get(t+"Id"),0)+'" not found');return i})}function syi(n){return n.get("coordinateSystem")==="cartesian2d"}function hyi(n){var t={componentType:n.mainType,componentIndex:n.componentIndex};return t[n.mainType+"Index"]=n.componentIndex,t}function stu(n,t,i,r){var u=nat(i-n.rotation),f,e,s=r[0]>r[1],o=t==="start"&&!s||t!=="start"&&s;return vw(u-ko/2)?(e=o?"bottom":"top",f="center"):vw(u-ko*1.5)?(e=o?"top":"bottom",f="center"):(e="middle",f=u<ko*1.5&&u>ko/2?o?"left":"right":o?"right":"left"),{rotation:u,textAlign:f,textVerticalAlign:e}}function cyi(n){var t=n.get("tooltip");return n.get("silent")||!(n.get("triggerEvent")||t&&t.show)}function htu(n,t,i){var f=n.get("axisLabel.showMinLabel"),e=n.get("axisLabel.showMaxLabel");t=t||[];i=i||[];var r=t[0],o=t[1],u=t[t.length-1],s=t[t.length-2],h=i[0],l=i[1],c=i[i.length-1],a=i[i.length-2];f===!1?(ef(r),ef(h)):lyi(r,o)&&(f?(ef(o),ef(l)):(ef(r),ef(h)));e===!1?(ef(u),ef(c)):lyi(s,u)&&(e?(ef(s),ef(a)):(ef(u),ef(c)))}function ef(n){n&&(n.ignore=!0)}function lyi(n,t){var r=n&&n.getBoundingRect().clone(),u=t&&t.getBoundingRect().clone(),i;if(r&&u)return i=pa([]),uo(i,i,-n.rotation),r.applyTransform(cs([],i,n.getLocalTransform())),u.applyTransform(cs([],i,t.getLocalTransform())),r.intersect(u)}function ayi(n){return n==="middle"||n==="center"}function ctu(n,t,i){var l=t.axis,f,h,c;if(t.get("axisTick.show")&&!l.scale.isBlank()){var a=t.getModel("axisTick"),y=a.getModel("lineStyle"),p=a.get("length"),e=l.getTicksCoords(),r=[],u=[],o=n._transform,v=[];for(f=0;f<e.length;f++)h=e[f].coord,r[0]=h,r[1]=0,u[0]=h,u[1]=i.tickDirection*p,o&&(vt(r,r,o),vt(u,u,o)),c=new uu(vc({anid:"tick_"+e[f].tickValue,shape:{x1:r[0],y1:r[1],x2:u[0],y2:u[1]},style:s(y.getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")}),z2:2,silent:!0})),n.group.add(c),v.push(c);return v}}function ltu(n,i,r){var u=i.axis,h=kt(r.axisLabelShow,i.get("axisLabel.show"));if(h&&!u.scale.isBlank()){var f=i.getModel("axisLabel"),c=f.get("margin"),l=u.getViewLabels(),a=(kt(r.labelRotate,f.get("rotate"))||0)*ko/180,o=npt(r.rotation,a,r.labelDirection),e=i.getCategories(!0),s=[],v=cyi(i),y=i.get("triggerEvent");return t(l,function(t,h){var a=t.tickValue,d=t.formattedLabel,b=t.rawLabel,p=f;e&&e[a]&&e[a].textStyle&&(p=new ut(e[a].textStyle,f,i.ecModel));var w=p.getTextColor()||i.get("axisLine.lineStyle.color"),g=u.dataToCoord(a),nt=[g,r.labelOffset+r.labelDirection*c],l=new k({anid:"label_"+a,position:nt,rotation:o.rotation,silent:v,z2:10});ii(l.style,p,{text:d,textAlign:p.getShallow("align",!0)||o.textAlign,textVerticalAlign:p.getShallow("verticalAlign",!0)||p.getShallow("baseline",!0)||o.textVerticalAlign,textFill:typeof w=="function"?w(u.type==="category"?b:u.type==="value"?a+"":a,h):w});y&&(l.eventData=hyi(i),l.eventData.targetType="axisLabel",l.eventData.value=b);n._dumbGroup.add(l);l.updateTransform();s.push(l);n.group.add(l);l.decomposeTransform()}),s}}function atu(n,t){var i={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return vtu(i,n,t),i.seriesInvolved&&ptu(i,n),i}function vtu(n,t,i){var u=t.getComponent("tooltip"),r=t.getComponent("axisPointer"),f=r.get("link",!0)||[],e=[];sl(i.getCoordinateSystems(),function(i){function c(u,s,h){var c=h.model.getModel("axisPointer",r),w=c.get("show"),a,y;if(w&&(w!=="auto"||u||rpt(c))){s==null&&(s=c.get("triggerTooltip"));c=u?ytu(h,o,r,t,u,s):c;var b=c.get("snap"),v=pb(h.model),k=s||b||h.type==="category",p=n.axesInfo[v]={key:v,axis:h,coordSys:i,axisPointerModel:c,triggerTooltip:s,involveSeries:k,snap:b,useHandle:rpt(c),seriesModels:[]};l[v]=p;n.seriesInvolved|=k;a=wtu(f,h);a!=null&&(y=e[a]||(e[a]={axesInfo:{}}),y.axesInfo[v]=p,y.mapper=f[a].mapper,p.linkGroup=y)}}var s,l,a,o;if(i.axisPointerEnabled&&(s=pb(i.model),l=n.coordSysAxesInfo[s]={},n.coordSysMap[s]=i,a=i.model,o=a.getModel("tooltip",u),sl(i.getAxes(),nut(c,!1,null)),i.getTooltipAxes&&u&&o.get("show"))){var v=o.get("trigger")==="axis",h=o.get("axisPointer.type")==="cross",y=i.getTooltipAxes(o.get("axisPointer.axis"));(v||h)&&sl(y.baseAxes,nut(c,h?"cross":!0,v));h&&sl(y.otherAxes,nut(c,"cross",!1))}})}function ytu(n,t,i,r,u,f){var h=t.getModel("axisPointer"),e={},o,l,a;return sl(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(n){e[n]=c(h.get(n))}),e.snap=n.type!=="category"&&!!f,h.get("type")==="cross"&&(e.type="line"),o=e.label||(e.label={}),o.show==null&&(o.show=!1),u==="cross"&&(l=h.get("label.show"),o.show=l!=null?l:!0,f||(a=e.lineStyle=h.get("crossStyle"),a&&s(o,a.textStyle))),n.model.getModel("axisPointer",new ut(e,i,r))}function ptu(n,t){t.eachSeries(function(t){var i=t.coordinateSystem,r=t.get("tooltip.trigger",!0),u=t.get("tooltip.show",!0);i&&r!=="none"&&r!==!1&&r!=="item"&&u!==!1&&t.get("axisPointer.show",!0)!==!1&&sl(n.coordSysAxesInfo[pb(i.model)],function(n){var r=n.axis;i.getAxis(r.dim)===r&&(n.seriesModels.push(t),n.seriesDataCount==null&&(n.seriesDataCount=0),n.seriesDataCount+=t.getData().count())})},this)}function wtu(n,t){for(var r,u=t.model,f=t.dim,i=0;i<n.length;i++)if(r=n[i]||{},tpt(r[f+"AxisId"],u.id)||tpt(r[f+"AxisIndex"],u.componentIndex)||tpt(r[f+"AxisName"],u.name))return i}function tpt(n,t){return n==="all"||i(n)&&tt(n,t)>=0||n===t}function btu(n){var r=ipt(n),e,i;if(r){var u=r.axisPointerModel,o=r.axis.scale,f=u.option,s=u.get("status"),t=u.get("value");t!=null&&(t=o.parse(t));e=rpt(u);s==null&&(f.status=e?"show":"hide");i=o.getExtent().slice();i[0]>i[1]&&i.reverse();(t==null||t>i[1])&&(t=i[1]);t<i[0]&&(t=i[0]);f.value=t;e&&(f.status=r.axis.scale.isBlank()?"hide":"show")}}function ipt(n){var t=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[pb(n)]}function ktu(n){var t=ipt(n);return t&&t.axisPointerModel}function rpt(n){return!!n.get("handle.show")}function pb(n){return n.type+"||"+n.id}function vyi(n,t,i,r,u,f){var o=nu.getAxisPointerClass(n.axisPointerClass),e;o&&(e=ktu(t),e?(n._axisPointer||(n._axisPointer=new o)).render(t,e,r,f):yyi(n,r))}function yyi(n,t,i){var r=n._axisPointer;r&&r.dispose(t,i);n._axisPointer=null}function upt(n,t,i){var p,w,y;i=i||{};var b=n.coordinateSystem,l=t.axis,r={},o=l.getAxesOnZeroOf()[0],a=l.position,v=o?"onZero":a,h=l.dim,f=b.getRect(),e=[f.x,f.x+f.width,f.y,f.y+f.height],s={left:0,right:1,top:0,bottom:1,onZero:2},c=t.get("offset")||0,u=h==="x"?[e[2]-c,e[3]+c]:[e[0]-c,e[1]+c];return o&&(p=o.toGlobalCoord(o.dataToCoord(0)),u[s.onZero]=Math.max(Math.min(p,u[1]),u[0])),r.position=[h==="y"?u[s[v]]:e[0],h==="x"?u[s[v]]:e[3]],r.rotation=Math.PI/2*(h==="x"?0:1),w={top:-1,bottom:1,left:-1,right:1},r.labelDirection=r.tickDirection=r.nameDirection=w[a],r.labelOffset=o?u[s[a]]-u[s.onZero]:0,t.get("axisTick.inside")&&(r.tickDirection=-r.tickDirection),kt(i.labelInside,t.get("axisLabel.inside"))&&(r.labelDirection=-r.labelDirection),y=t.get("axisLabel.rotate"),r.labelRotate=v==="top"?-y:y,r.z2=1,r}function pyi(n,t,i,r,u,f){var e=i.getModel("label"),o=i.getModel("emphasis.label");du(n,t,e,o,{labelFetcher:u,labelDataIndex:f,defaultText:krt(u.getData(),f),isRectText:!0,autoColor:r});wyi(n);wyi(t)}function wyi(n,t){n.textPosition==="outside"&&(n.textPosition=t)}function byi(n,t,i){i.style.text=null;w(i,{shape:{width:0}},t,n,function(){i.parent&&i.parent.remove(i)})}function kyi(n,t,i){i.style.text=null;w(i,{shape:{r:i.shape.r0}},t,n,function(){i.parent&&i.parent.remove(i)})}function dyi(n,t,i,r,u,f,e,o){var c=t.getItemVisual(i,"color"),y=t.getItemVisual(i,"opacity"),l=r.getModel("itemStyle"),a=r.getModel("emphasis.itemStyle").getBarItemStyle(),h,v;o||n.setShape("r",l.get("barBorderRadius")||0);n.useStyle(s({fill:c,opacity:y},l.getBarItemStyle()));h=r.getShallow("cursor");h&&n.attr("cursor",h);v=e?u.height>0?"bottom":"top":u.width>0?"left":"right";o||pyi(n.style,a,r,c,f,i,v);pt(n,a)}function riu(n,t){var i=n.get(iiu)||0;return Math.min(i,Math.abs(t.width),Math.abs(t.height))}function npi(n,t,i){var r=n.getData(),f=[],e=r.getLayout("valueAxisHorizontal")?1:0,u;f[1-e]=r.getLayout("valueAxisStart");u=new gyi({shape:{points:r.getLayout("largePoints")},incremental:!!i,__startPoint:f,__valueIdx:e});t.add(u);uiu(u,n,r)}function uiu(n,t,i){var r=i.getVisual("borderColor")||i.getVisual("color"),u=t.getModel("itemStyle").getItemStyle(["color","borderColor"]);n.useStyle(u);n.style.fill=null;n.style.stroke=r;n.style.lineWidth=i.getLayout("barWidth")}function fiu(n,t,i,r){var u=t.getData(),f=this.dataIndex,e=u.getName(f),o=t.get("selectedOffset");r.dispatchAction({type:"pieToggleSelect",from:n,name:e,seriesId:t.id});u.each(function(n){tpi(u.getItemGraphicEl(n),u.getItemLayout(n),t.isSelected(u.getName(n)),o,i)})}function tpi(n,t,i,r,u){var f=(t.startAngle+t.endAngle)/2,s=Math.cos(f),h=Math.sin(f),e=i?r:0,o=[s*e,h*e];u?n.animate().when(200,{position:o}).start("bounceOut"):n.attr("position",o)}function cpt(n,t){function u(){i.ignore=i.hoverIgnore;r.ignore=r.hoverIgnore}function f(){i.ignore=i.normalIgnore;r.ignore=r.normalIgnore}e.call(this);var o=new so({z2:2}),i=new af,r=new k;this.add(o);this.add(i);this.add(r);this.updateData(n,t,!0);this.on("emphasis",u).on("normal",f).on("mouseover",u).on("mouseout",f)}function rpi(n,t,i,r,u,f,e){function p(t,i,r){for(var u=t;u<i;u++)if(n[u].y+=r,u>t&&u+1<i&&n[u+1].y>n[u].y+n[u].height){c(u,r/2);return}c(i-1,r/2)}function c(t,i){for(var r=t;r>=0;r--)if(n[r].y-=i,r>0&&n[r].y>n[r-1].y+n[r-1].height)break}function a(n,t,i,r,u,f){for(var s=f>0?t?Number.MAX_VALUE:0:t?Number.MAX_VALUE:0,e=0,a=n.length;e<a;e++)if(n[e].position!=="center"){var h=Math.abs(n[e].y-r),c=n[e].len,l=n[e].len2,o=h<u+c?Math.sqrt((u+c+l)*(u+c+l)-h*h):Math.abs(n[e].x-i);t&&o>=s&&(o=s-10);!t&&o<=s&&(o=s+10);n[e].x=i+o*f;s=o}}var o;n.sort(function(n,t){return n.y-t.y});var s=0,l,h=n.length,v=[],y=[];for(o=0;o<h;o++)l=n[o].y-s,l<0&&p(o,h,-l,u),s=n[o].y+n[o].height;for(e-s<0&&c(h-1,s-e),o=0;o<h;o++)n[o].y>=i?y.push(n[o]):v.push(n[o]);a(v,!1,t,i,r,u);a(y,!0,t,i,r,u)}function eiu(n,t,i,r,u,f){for(var o,c,s=[],h=[],e=0;e<n.length;e++)n[e].x<t?s.push(n[e]):h.push(n[e]);for(rpi(h,t,i,r,1,u,f),rpi(s,t,i,r,-1,u,f),e=0;e<n.length;e++)o=n[e].linePoints,o&&(c=o[1][0]-o[2][0],o[2][0]=n[e].x<t?n[e].x+3:n[e].x-3,o[1][1]=o[2][1]=n[e].y,o[1][0]=o[2][0]+c)}function fpi(){this.group=new e}function epi(n,t,i){fi.call(this,n,t,i);this.type="value";this.angle=0;this.name="";this.model}function pe(n,t,i){this._model=n;this.dimensions=[];this._indicatorAxes=r(n.getIndicatorModels(),function(n,t){var r="indicator_"+t,i=new epi(r,new bf);return i.name=n.get("name"),i.model=n,n.axis=i,this.dimensions.push(r),i},this);this.resize(n,i);this.cx;this.cy;this.r;this.r0;this.startAngle}function out(n,t){return s({show:t},n)}function ciu(n){return i(n)||(n=[+n,+n]),n}function vpt(){hf.call(this)}function lh(n){this.name=n;this.zoomLimit;hf.call(this);this._roamTransformable=new vpt;this._rawTransformable=new vpt;this._center;this._zoom}function lpi(n,t,i,r){var u=i.seriesModel,f=u?u.coordinateSystem:null;return f===this?f[n](r):null}function diu(n){for(var r,t,i=0;i<n.length;i++)r=n[i].getBoundingRect(),t=t||r.clone(),t.union(r);return t}function ypi(n,t){var h=n.svgXML,r,i,s,u;try{r=h&&tkr(h,{ignoreViewBox:!0,ignoreRootClip:!0})||{};i=r.root;g(i!=null)}catch(l){throw new Error("Invalid svg format\n"+l.message);}var f=r.width,o=r.height,c=r.viewBoxRect;return t||(t=f==null||o==null?i.getBoundingRect():new b(0,0,0,0),f!=null&&(t.width=f),o!=null&&(t.height=o)),c&&(s=sci(c,t.width,t.height),u=i,i=new e,i.add(u),u.scale=s.scale,u.position=s.position),i.setClipPath(new et({shape:t.plain()})),{root:i,boundingRect:t}}function ppi(n){return function(i,r){var f=wpi(i),u=[];return t(f,function(t){var f=ypt[t.type][n];f&&u.push(f(i,t,r))}),u}}function giu(n){u&&console.error("Map "+n+" not exists. You can download map file on http://echarts.baidu.com/download-map.html")}function wpi(n){var t=yit.retrieveMap(n)||[];return u&&(t.length||giu(n)),t}function hy(n,t,i,r){lh.call(this,n);this.map=t;var u=bb.load(t,i);this._nameCoordMap=u.nameCoordMap;this._regionsMap=u.nameCoordMap;this._invertLongitute=r==null?!0:r;this.regions=u.regions;this._rect=u.boundingRect}function bpi(n,t,i,r){var f=i.geoModel,u=i.seriesModel,e=f?f.coordinateSystem:u?u.coordinateSystem||(u.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return e===this?e[n](r):null}function kpi(n,t){var c=n.get("boundingCoords"),o,s,i;c!=null&&(o=c[0],s=c[1],isNaN(o[0])||isNaN(o[1])||isNaN(s[0])||isNaN(s[1])?u&&console.error("Invalid boundingCoords"):this.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]));var y=this.getBoundingRect(),l,r=n.get("layoutCenter"),e=n.get("layoutSize"),a=t.getWidth(),v=t.getHeight(),h=y.width/y.height*this.aspectScale,p=!1;r&&e&&(r=[f(r[0],a),f(r[1],v)],e=f(e,Math.min(a,v)),isNaN(r[0])||isNaN(r[1])||isNaN(e)?u&&console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead."):p=!0);p?(i={},h>1?(i.width=e,i.height=e/h):(i.height=e,i.width=e*h),i.y=r[1]-i.height/2,i.x=r[0]-i.width/2):(l=n.getBoxLayoutParams(),l.aspect=h,i=li(l,{width:a,height:v}));this.setViewRect(i.x,i.y,i.width,i.height);this.setCenter(n.get("center"));this.setZoom(n.get("zoom"))}function dpi(n,i){t(i.get("geoCoord"),function(t,i){n.addGeoCoord(i,t)})}function nru(n,t,i){var r=wpt(n);r[t]=i}function tru(n,t,i){var r=wpt(n),u=r[t];u===i&&(r[t]=null)}function gpi(n,t){return!!wpt(n)[t]}function wpt(n){return n[ppt]||(n[ppt]={})}function cy(n){this.pointerChecker;this._zr=n;this._opt={};var t=l,i=t(iru,this),r=t(rru,this),u=t(uru,this),f=t(fru,this),e=t(eru,this);ci.call(this);this.setPointerChecker=function(n){this.pointerChecker=n};this.enable=function(t,o){if(this.disable(),this._opt=s(c(o)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t==null&&(t=!0),t===!0||t==="move"||t==="pan"){n.on("mousedown",i);n.on("mousemove",r);n.on("mouseup",u)}if(t===!0||t==="scale"||t==="zoom"){n.on("mousewheel",f);n.on("pinch",e)}};this.disable=function(){n.off("mousedown",i);n.off("mousemove",r);n.off("mouseup",u);n.off("mousewheel",f);n.off("pinch",e)};this.dispose=this.disable;this.isDragging=function(){return this._dragging};this.isPinching=function(){return this._pinching}}function iru(n){if(!ast(n)&&(!n.target||!n.target.draggable)){var t=n.offsetX,i=n.offsetY;this.pointerChecker&&this.pointerChecker(n,t,i)&&(this._x=t,this._y=i,this._dragging=!0)}}function rru(n){if(!ast(n)&&lut("moveOnMouseMove",n,this._opt)&&this._dragging&&n.gestureEvent!=="pinch"&&!gpi(this._zr,"globalPan")){var t=n.offsetX,i=n.offsetY,r=this._x,u=this._y,f=t-r,e=i-u;this._x=t;this._y=i;this._opt.preventDefaultMouseMove&&te(n.event);nwi(this,"pan","moveOnMouseMove",n,{dx:f,dy:e,oldX:r,oldY:u,newX:t,newY:i})}}function uru(n){ast(n)||(this._dragging=!1)}function fru(n){var u=lut("zoomOnMouseWheel",n,this._opt),f=lut("moveOnMouseWheel",n,this._opt),t=n.wheelDelta,e=Math.abs(t),o=n.offsetX,s=n.offsetY,i,h,r,c;t!==0&&(u||f)&&(u&&(i=e>3?1.4:e>1?1.2:1.1,h=t>0?i:1/i,bpt(this,"zoom","zoomOnMouseWheel",n,{scale:h,originX:o,originY:s})),f&&(r=Math.abs(t),c=(t>0?1:-1)*(r>3?.4:r>1?.15:.05),bpt(this,"scrollMove","moveOnMouseWheel",n,{scrollDelta:c,originX:o,originY:s})))}function eru(n){if(!gpi(this._zr,"globalPan")){var t=n.pinchScale>1?1.1:1/1.1;bpt(this,"zoom",null,n,{scale:t,originX:n.pinchX,originY:n.pinchY})}}function bpt(n,t,i,r,u){n.pointerChecker&&n.pointerChecker(r,u.originX,u.originY)&&(te(r.event),nwi(n,t,i,r,u))}function nwi(n,t,i,r,u){u.isAvailableBehavior=l(lut,null,i,r);n.trigger(t,u)}function lut(n,t,i){var r=i[n];return!n||r&&(!at(r)||t.event[r+"Key"])}function kpt(n,t,i){var r=n.target,u=r.position;u[0]+=t;u[1]+=i;r.dirty()}function dpt(n,t,i,r){var o=n.target,s=n.zoomLimit,e=o.position,h=o.scale,u=n.zoom=n.zoom||1,c,l,f;u*=t;s&&(c=s.min||0,l=s.max||Infinity,u=Math.max(Math.min(l,u),c));f=u/n.zoom;n.zoom=u;e[0]-=(i-e[0])*(f-1);e[1]-=(r-e[1])*(f-1);h[0]*=f;h[1]*=f;o.dirty()}function aut(n,t,i){var r=t.getComponentByElement(n.topTarget),u=r&&r.coordinateSystem;return r&&r!==i&&!twi[r.mainType]&&u&&u.model!==i}function iwi(n){var t=n.getItemStyle(),i=n.get("areaColor");return i!=null&&(t.fill=i),t}function oru(n,t,i,u,f){if(i.off("click"),i.off("mousedown"),t.get("selectedMode")){i.on("mousedown",function(){n._mouseDownFlag=!0});i.on("click",function(e){var o,s;if(n._mouseDownFlag){for(n._mouseDownFlag=!1,o=e.target;!o.__regions;)o=o.parent;o&&(s={type:(t.mainType==="geo"?"geo":"map")+"ToggleSelect",batch:r(o.__regions,function(n){return{name:n.name,from:f.uid}})},s[t.mainType+"Id"]=t.id,u.dispatchAction(s),rwi(t,i))}})}}function rwi(n,i){i.eachChild(function(i){t(i.__regions,function(t){i.trigger(n.isSelected(t.name)?"emphasis":"normal")})})}function vut(n,t){var i=new e;this.uid=aw("ec_map_draw");this._controller=new cy(n.getZr());this._controllerHost={target:t?i:null};this.group=i;this._updateGroup=t;this._mouseDownFlag;this._mapName;this._initialized;i.add(this._regionsGroup=new e);i.add(this._backgroundGroup=new e)}function gpt(n,t,i){var o=n.getZoom(),u=n.getCenter(),r=t.zoom,f=n.dataToPoint(u),s,h;if(t.dx!=null&&t.dy!=null&&(f[0]-=t.dx,f[1]-=t.dy,u=n.pointToData(f),n.setCenter(u)),r!=null){i&&(s=i.min||0,h=i.max||Infinity,r=Math.max(Math.min(o*r,h),s)/o);n.scale[0]*=r;n.scale[1]*=r;var e=n.position,c=(t.originX-e[0])*(r-1),l=(t.originY-e[1])*(r-1);e[0]-=c;e[1]-=l;n.updateTransform();u=n.pointToData(f);n.setCenter(u);n.setZoom(r*o)}return{center:n.getCenter(),zoom:n.getZoom()}}function sru(n,i){var r={};return t(n,function(n){n.each(n.mapDimension("value"),function(t,i){var u="ec-"+n.getName(i);r[u]=r[u]||[];isNaN(t)||r[u].push(t)})}),n[0].map(n[0].mapDimension("value"),function(t,u){for(var l,e="ec-"+n[0].getName(u),o=0,s=Infinity,h=-Infinity,c=r[e].length,f=0;f<c;f++)s=Math.min(s,r[e][f]),h=Math.max(h,r[e][f]),o+=r[e][f];return l=i==="min"?s:i==="max"?h:i==="average"?o/c:o,c===0?NaN:l})}function swi(n){var t=n.mainData,i=n.datas;i||(i={main:t},n.datasAttr={main:"data"});n.datas=n.mainData=null;hwi(t,i,n);kb(i,function(i){kb(t.TRANSFERABLE_METHODS,function(t){i.wrapMethod(t,y(hru,n))})});t.wrapMethod("cloneShallow",y(lru,n));kb(t.CHANGABLE_METHODS,function(i){t.wrapMethod(i,y(cru,n))});g(i[t.dataType]===t)}function hru(n,t){if(vru(this)){var i=o({},this[db]);i[this.dataType]=t;hwi(t,i,n)}else nwt(t,this.dataType,this[yut],n);return t}function cru(n,t){return n.struct&&n.struct.update(this),t}function lru(n,t){return kb(t[db],function(i,r){i!==t&&nwt(i.cloneShallow(),r,t,n)}),t}function aru(n){var t=this[yut];return n==null||t==null?t:t[db][n]}function vru(n){return n[yut]===n}function hwi(n,t,i){n[db]={};kb(t,function(t,r){nwt(t,r,n,i)})}function nwt(n,t,i,r){i[db][t]=n;n[yut]=i;n.dataType=t;r.struct&&(n[r.structAttr]=r.struct,r.struct[r.datasAttr[t]]=n);n.getLinkedData=aru}function ll(n,t,i){this.root;this.data;this._nodes=[];this.hostModel=n;this.levelModels=r(t||[],function(t){return new ut(t,n,n.ecModel)});this.leavesModel=new ut(i||{},n,n.ecModel)}function yru(n,t){var i=t.children;n.parentNode!==t&&(i.push(n),n.parentNode=t)}function pru(n){var u,f,i,e,t,r;for(n.hierNode={defaultAncestor:null,ancestor:n,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null},u=[n];f=u.pop();)if(i=f.children,f.isExpand&&i.length)for(e=i.length,t=e-1;t>=0;t--)r=i[t],r.hierNode={defaultAncestor:null,ancestor:r,prelim:0,modifier:0,change:0,shift:0,i:t,thread:null},u.push(r)}function wru(n,t){var r=n.isExpand?n.children:[],f=n.parentNode.children,i=n.hierNode.i?f[n.hierNode.i-1]:null,u;r.length?(dru(n),u=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2,i?(n.hierNode.prelim=i.hierNode.prelim+t(n,i),n.hierNode.modifier=n.hierNode.prelim-u):n.hierNode.prelim=u):i&&(n.hierNode.prelim=i.hierNode.prelim+t(n,i));n.parentNode.hierNode.defaultAncestor=gru(n,i,n.parentNode.hierNode.defaultAncestor||f[0],t)}function bru(n){var t=n.hierNode.prelim+n.parentNode.hierNode.modifier;n.setLayout({x:t},!0);n.hierNode.modifier+=n.parentNode.hierNode.modifier}function cwi(n){return arguments.length?n:iuu}function gb(n,t){var i={};return n-=Math.PI/2,i.x=t*Math.cos(n),i.y=t*Math.sin(n),i}function kru(n,t){return li(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function dru(n){for(var r=n.children,u=r.length,i=0,f=0,t;--u>=0;)t=r[u],t.hierNode.prelim+=i,t.hierNode.modifier+=i,f+=t.hierNode.change,i+=t.hierNode.shift+f}function gru(n,t,i,r){var s;if(t){for(var e=n,u=n,o=u.parentNode.children[0],f=t,c=e.hierNode.modifier,h=u.hierNode.modifier,a=o.hierNode.modifier,l=f.hierNode.modifier;f=twt(f),u=iwt(u),f&&u;)e=twt(e),o=iwt(o),e.hierNode.ancestor=n,s=f.hierNode.prelim+l-u.hierNode.prelim-h+r(f,u),s>0&&(tuu(nuu(f,n,i),n,s),h+=s,c+=s),l+=f.hierNode.modifier,h+=u.hierNode.modifier,c+=e.hierNode.modifier,a+=o.hierNode.modifier;f&&!twt(e)&&(e.hierNode.thread=f,e.hierNode.modifier+=l-c);u&&!iwt(o)&&(o.hierNode.thread=u,o.hierNode.modifier+=h-a,i=n)}return i}function twt(n){var t=n.children;return t.length&&n.isExpand?t[t.length-1]:n.hierNode.thread}function iwt(n){var t=n.children;return t.length&&n.isExpand?t[0]:n.hierNode.thread}function nuu(n,t,i){return n.hierNode.ancestor.parentNode===t.parentNode?n.hierNode.ancestor:i}function tuu(n,t,i){var r=i/(t.hierNode.i-n.hierNode.i);t.hierNode.change-=r;t.hierNode.shift+=i;t.hierNode.modifier+=i;t.hierNode.prelim+=i;n.hierNode.change+=r}function iuu(n,t){return n.parentNode===t.parentNode?1:2}function lwi(n,t){var i=n.getItemLayout(t);return i&&!isNaN(i.x)&&!isNaN(i.y)&&n.getItemVisual(t,"symbol")!=="none"}function awi(n,t,i){return i.itemModel=t,i.itemStyle=t.getModel("itemStyle").getItemStyle(),i.hoverItemStyle=t.getModel("emphasis.itemStyle").getItemStyle(),i.lineStyle=t.getModel("lineStyle").getLineStyle(),i.labelModel=t.getModel("label"),i.hoverLabelModel=t.getModel("emphasis.label"),i.symbolInnerColor=n.isExpand===!1&&n.children.length!==0?i.itemStyle.fill:"#fff",i}function vwi(n,t,i,r,u,f){var rt=!i,o=n.tree.getNodeByDataIndex(t),ut=o.getModel(),f=awi(o,ut,f),k=n.tree.root,d=o.parentNode===k?o:o.parentNode||o,y=n.getItemGraphicEl(d.dataIndex),g=d.getLayout(),b=y?{x:y.position[0],y:y.position[1],rawX:y.__radialOldRawX,rawY:y.__radialOldRawY}:g,h=o.getLayout(),nt,v,it,p;if(rt?(i=new hh(n,t,f),i.attr("position",[b.x,b.y])):i.updateData(n,t,f),i.__radialOldRawX=i.__radialRawX,i.__radialOldRawY=i.__radialRawY,i.__radialRawX=h.rawX,i.__radialRawY=h.rawY,r.add(i),n.setItemGraphicEl(t,i),w(i,{position:[h.x,h.y]},u),nt=i.getSymbolPath(),f.layout==="radial"){var a=k.children[0],c=a.getLayout(),tt=a.children.length,e,l;h.x===c.x&&o.isExpand===!0?(v={},v.x=(a.children[0].getLayout().x+a.children[tt-1].getLayout().x)/2,v.y=(a.children[0].getLayout().y+a.children[tt-1].getLayout().y)/2,e=Math.atan2(v.y-c.y,v.x-c.x),e<0&&(e=Math.PI*2+e),l=v.x<c.x,l&&(e=e-Math.PI)):(e=Math.atan2(h.y-c.y,h.x-c.x),e<0&&(e=Math.PI*2+e),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(l=h.x<c.x,l&&(e=e-Math.PI)):(l=h.x>c.x,l||(e=e-Math.PI)));it=l?"left":"right";nt.setStyle({textPosition:it,textRotation:-e,textOrigin:"center",verticalAlign:"middle"})}o.parentNode&&o.parentNode!==k&&(p=i.__edge,p||(p=i.__edge=new elt({shape:rwt(f,b,b),style:s({opacity:0,strokeNoScale:!0},f.lineStyle)})),w(p,{shape:rwt(f,g,h),style:{opacity:1}},u),r.add(p))}function ywi(n,t,i,r,u,f){for(var e=n.tree.getNodeByDataIndex(t),c=n.tree.root,l=e.getModel(),f=awi(e,l,f),o=e.parentNode===c?e:e.parentNode||e,s,h;s=o.getLayout(),s==null;)o=o.parentNode===c?o:o.parentNode||o;w(i,{position:[s.x+1,s.y+1]},u,function(){r.remove(i);n.setItemGraphicEl(t,null)});i.fadeOut(null,{keepLabel:!0});h=i.__edge;h&&w(h,{shape:rwt(f,s,s),style:{opacity:0}},u,function(){r.remove(h)})}function rwt(n,t,i){var s,h,c,l,o=n.orient,f,e,r,u;if(n.layout==="radial"){f=t.rawX;r=t.rawY;e=i.rawX;u=i.rawY;var a=gb(f,r),v=gb(f,r+(u-r)*n.curvature),y=gb(e,u+(r-u)*n.curvature),p=gb(e,u);return{x1:a.x,y1:a.y,x2:p.x,y2:p.y,cpx1:v.x,cpy1:v.y,cpx2:y.x,cpy2:y.y}}return f=t.x,r=t.y,e=i.x,u=i.y,(o==="LR"||o==="RL")&&(s=f+(e-f)*n.curvature,h=r,c=e+(f-e)*n.curvature,l=u),(o==="TB"||o==="BT")&&(s=f,h=r+(u-r)*n.curvature,c=e,l=u+(r-u)*n.curvature),{x1:f,y1:r,x2:e,y2:u,cpx1:s,cpy1:h,cpx2:c,cpy2:l}}function ruu(n,t,i){for(var e=[n],o=[],r,u,f;r=e.pop();)if(o.push(r),r.isExpand&&(u=r.children,u.length))for(f=0;f<u.length;f++)e.push(u[f]);while(r=o.pop())t(r,i)}function nk(n,t){for(var f=[n],i,r,u;i=f.pop();)if(t(i),i.isExpand&&(r=i.children,r.length))for(u=r.length-1;u>=0;u--)f.push(r[u])}function uuu(n,t){var a=kru(n,t),w,i,s;n.layoutInfo=a;var k=n.get("layout"),h=0,c=0,p=null;if(k==="radial"?(h=2*Math.PI,c=Math.min(a.height,a.width)/2,p=cwi(function(n,t){return(n.parentNode===t.parentNode?1:2)/n.depth})):(h=a.width,c=a.height,p=cwi()),w=n.getData().tree.root,i=w.children[0],i){pru(w);ruu(i,wru,p);w.hierNode.modifier=-i.hierNode.prelim;nk(i,bru);var v=i,r=i,y=i;nk(i,function(n){var t=n.getLayout().x;t<v.getLayout().x&&(v=n);t>r.getLayout().x&&(r=n);n.depth>y.depth&&(y=n)});var b=v===r?1:p(v,r)/2,l=b-v.getLayout().x,u=0,f=0,e=0,o=0;k==="radial"?(u=h/(r.getLayout().x+b+l),f=c/(y.depth-1||1),nk(i,function(n){e=(n.getLayout().x+l)*u;o=(n.depth-1)*f;var t=gb(e,o);n.setLayout({x:t.x,y:t.y,rawX:e,rawY:o},!0)})):(s=n.getOrient(),s==="RL"||s==="LR"?(f=c/(r.getLayout().x+b+l),u=h/(y.depth-1||1),nk(i,function(n){o=(n.getLayout().x+l)*f;e=s==="LR"?(n.depth-1)*u:h-(n.depth-1)*u;n.setLayout({x:e,y:o},!0)})):(s==="TB"||s==="BT")&&(u=h/(r.getLayout().x+b+l),f=c/(y.depth-1||1),nk(i,function(n){e=(n.getLayout().x+l)*u;o=s==="TB"?(n.depth-1)*f:c-(n.depth-1)*f;n.setLayout({x:e,y:o},!0)})))}}function tk(n,t,i){var u,r,f;if(n&&tt(t,n.type)>=0){if(u=i.getData().tree.root,r=n.targetNode,typeof r=="string"&&(r=u.getNodeById(r)),r&&u.contains(r))return{node:r};if(f=n.targetNodeId,f!=null&&(r=u.getNodeById(f)))return{node:r}}}function wwi(n){for(var t=[];n;)n=n.parentNode,n&&t.push(n);return t.reverse()}function uwt(n,t){var i=wwi(n);return tt(i,t)>=0}function fwt(n,t){for(var i=[],r;n;)r=n.dataIndex,i.push({name:n.name,dataIndex:r,value:t.getRawValue(r)}),n=n.parentNode;return i.reverse(),i}function bwi(n){var u=0,r;t(n.children,function(n){bwi(n);var t=n.value;i(t)&&(t=t[0]);u+=t});r=n.value;i(r)&&(r=r[0]);(r==null||isNaN(r))&&(r=u);r<0&&(r=0);i(n.value)?n.value[0]=r:n.value=r}function fuu(n,i){var r=i.get("color"),u,f;if(r)return n=n||[],t(n,function(n){var t=new ut(n),i=t.get("color");(t.get("itemStyle.color")||i&&i!=="none")&&(u=!0)}),u||(f=n[0]||(n[0]={}),f.color=r.slice()),n}function owt(n){this.group=new e;n.add(this.group)}function ouu(n,t,i,r,u,f){var e=[[u?n:n-ewt,t],[n+i,t],[n+i,t+r],[u?n:n-ewt,t+r]];return f||e.splice(2,0,[n+i+ewt,t+r/2]),u||e.push([n,t+r/2]),e}function suu(n,t,i){n.eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.componentIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:i&&i.dataIndex,name:i&&i.name},treePathInfo:i&&fwt(i,t)}}function huu(){var n=[],t={},i;return{add:function(i,r,u,f,e){return(at(f)&&(e=f,f=0),t[i.id])?!1:(t[i.id]=1,n.push({el:i,target:r,time:u,delay:f,easing:e}),!0)},done:function(n){return i=n,this},start:function(){function o(){f--;f||(n.length=0,t={},i&&i())}for(var r,f=n.length,u=0,e=n.length;u<e;u++)r=n[u],r.el.animateTo(r.target,r.time,r.delay,r.easing,o);return this}}}function ik(){return{nodeGroup:[],background:[],content:[]}}function buu(n,t,i,r,u,f,e,s,h,l){function ht(t,i,r){i.dataIndex=e.dataIndex;i.seriesIndex=n.seriesIndex;i.setShape({x:0,y:0,width:p,height:w});var u=e.getVisual("borderColor",!0),f=d.get("borderColor");ot(i,function(){var t=tbi(et),n,e;t.fill=u;n=swt(d);n.fill=f;r?(e=p-2*y,st(t,n,u,e,ut,{x:y,y:0,width:e,height:ut})):t.text=n.text=null;i.setStyle(t);pt(i,n)});t.add(i)}function ct(t,i){var r,u,f;i.dataIndex=e.dataIndex;i.seriesIndex=n.seriesIndex;r=Math.max(p-2*y,0);u=Math.max(w-2*y,0);i.culling=!0;i.setShape({x:y,y:y,width:r,height:u});f=e.getVisual("color",!0);ot(i,function(){var n=tbi(et),t;n.fill=f;t=swt(d);st(n,t,f,r,u);i.setStyle(n);pt(i,t)});t.add(i)}function ot(n,t){it?n.invisible||f.push(n):(t(),n.__tmWillVisible||(n.invisible=!1))}function st(t,i,r,u,f,o){var h=e.getModel(),s=kt(n.getFormattedLabel(e.dataIndex,"normal",null,null,o?"upperLabel":"label"),h.get("name")),l;!o&&a.isLeafRoot&&(l=n.get("drillDownIcon",!0),s=l?l+" "+s:s);var v=h.getModel(o?auu:cuu),p=h.getModel(o?vuu:luu),y=v.getShallow("show");du(t,i,v,p,{defaultText:y?s:null,autoColor:r,isRectText:!0});o&&(t.textRect=c(o));t.truncate=y&&v.get("ellipsis")?{outerWidth:u,outerHeight:f,minChar:2}:null}function tt(n,r,f,e){var o=k!=null&&i[n][k],s=u[n];return o?(i[n][k]=null,lt(s,o,n)):it||(o=new r({z:kuu(f,e)}),o.__tmDepth=f,o.__tmStorageName=n,at(s,o,n)),t[n][b]=o}function lt(n,t,i){var r=n[b]={};r.old=i==="nodeGroup"?t.position.slice():o({},t.shape)}function at(n,t,i){var s=n[b]={},h=e.parentNode;if(h&&(!r||r.direction==="drillDown")){var c=0,o=0,f=u.background[h.getRawIndex()];!r&&f&&f.old&&(c=f.old.width,o=f.old.height);s.old=i==="nodeGroup"?[0,o]:{x:c,y:o,width:0,height:0}}s.fadein=i!=="nodeGroup"}var a,g,nt;if(e&&(a=e.getLayout(),a&&a.isInView)){var p=a.width,w=a.height,y=a.borderWidth,it=a.invisible,b=e.getRawIndex(),k=s&&s.getRawIndex(),rt=e.viewChildren,ut=a.upperHeight,ft=rt&&rt.length,et=e.getModel("itemStyle"),d=e.getModel("emphasis.itemStyle"),v=tt("nodeGroup",dwi);if(v)return(h.add(v),v.attr("position",[a.x||0,a.y||0]),v.__tmNodeWidth=p,v.__tmNodeHeight=w,a.isAboveViewRoot)?v:(g=tt("background",gwi,l,puu),g&&ht(v,g,ft&&a.upperHeight),ft||(nt=tt("content",gwi,l,wuu),nt&&ct(v,nt)),v)}}function kuu(n,t){var i=n*yuu+t;return(i-1)/i}function duu(n){var i=n.pieceList;n.hasSpecialVisual=!1;t(i,function(t,i){t.originIndex=i;t.visual!=null&&(n.hasSpecialVisual=!0)})}function guu(n){var u=n.categories,t=n.visual,e=n.categoryMap={},f,r;for(rk(u,function(n,t){e[n]=t}),i(t)||(f=[],a(t)?rk(t,function(n,t){var i=e[t];f[i!=null?i:kut]=n}):f[kut]=t,t=fbi(n,f)),r=u.length-1;r>=0;r--)t[r]==null&&(delete e[u[r]],u.pop())}function cwt(n,t){var r=n.visual,i=[],u;a(r)?rk(r,function(n){i.push(n)}):r!=null&&i.push(r);u={color:1,symbol:1};t||i.length!==1||u.hasOwnProperty(n.type)||(i[1]=i[0]);fbi(n,i)}function dut(n){return{applyVisual:function(t,i,r){t=this.mapValueToVisual(t);r("color",n(i("color"),t))},_doMap:lwt([0,1])}}function ubi(n){var t=this.option.visual;return t[Math.round(ri(n,[0,1],[0,t.length-1],!0))]||{}}function gut(n){return function(t,i,r){r(n,this.mapValueToVisual(t))}}function nft(n){var t=this.option.visual;return t[this.option.loop&&n!==kut?n%t.length:n]}function al(){return this.option.visual[0]}function lwt(n){return{linear:function(t){return ri(t,n,this.option.visual,!0)},category:nft,piecewise:function(t,i){var r=awt.call(this,i);return r==null&&(r=ri(t,n,this.option.visual,!0)),r},fixed:al}}function awt(n){var i=this.option,r=i.pieceList,u,t;if(i.hasSpecialVisual&&(u=ht.findPieceIndex(n,r),t=r[u],t&&t.visual))return t.visual[this.type]}function fbi(n,t){return n.visual=t,n.type==="color"&&(n.parsedVisual=r(t,function(n){return wu(n)})),t}function tft(n,t,i){return n?t<=i:t<i}function obi(n,i,r,u,f,e){var a=n.getModel(),s=n.getLayout(),o,p;if(s&&!s.invisible&&s.isInView){var h=n.getModel(vwt),w=r[n.depth],c=ifu(h,i,w,u),v=h.get("borderColor"),y=h.get("borderColorSaturation"),l;y!=null&&(l=sbi(c,n),v=rfu(y,l));n.setVisual("borderColor",v);o=n.viewChildren;o&&o.length?(p=ufu(n,a,s,h,c,o),t(o,function(n,t){if(n.depth>=f.length||n===f[n.depth]){var i=ffu(a,c,n,t,p,e);obi(n,i,r,u,f,e)}})):(l=sbi(c,n),n.setVisual("color",l))}}function ifu(n,i,r,u){var f=o({},i);return t(["color","colorAlpha","colorSaturation"],function(t){var e=n.get(t,!0);e==null&&r&&(e=r[t]);e==null&&(e=i[t]);e==null&&(e=u.get(t));e!=null&&(f[t]=e)}),f}function sbi(n){var t=ywt(n,"color"),i,r;if(t)return i=ywt(n,"colorAlpha"),r=ywt(n,"colorSaturation"),r&&(t=da(t,null,null,r)),i&&(t=gd(t,i)),t}function rfu(n,t){return t!=null?da(t,null,null,n):null}function ywt(n,t){var i=n[t];if(i!=null&&i!=="none")return i}function ufu(n,t,i,r,u,f){var s,h,e,a;if(f&&f.length&&(s=pwt(t,"color")||u.color!=null&&u.color!=="none"&&(pwt(t,"colorAlpha")||pwt(t,"colorSaturation")),s)){var c=t.get("visualMin"),l=t.get("visualMax"),o=i.dataExtent.slice();return c!=null&&c<o[0]&&(o[0]=c),l!=null&&l>o[1]&&(o[1]=l),h=t.get("colorMappingBy"),e={type:s.name,dataExtent:o,visual:s.range},e.type==="color"&&(h==="index"||h==="id")?(e.mappingMethod="category",e.loop=!0):e.mappingMethod="linear",a=new ht(e),a.__drColorMappingBy=h,a}}function pwt(n,t){var i=n.get(t);return nfu(i)&&i.length?{name:t,range:i}:null}function ffu(n,t,i,r,u,f){var e=o({},t);if(u){var s=u.type,h=s==="color"&&u.__drColorMappingBy,c=h==="index"?r:h==="id"?f.mapIdToIndex(i.getId()):i.getValue(n.get("visualDimension"));e[s]=u.mapValueToVisual(c)}return e}function lbi(n,t,i,r){var e,o,y,b,s,d,g,nt,f,v;if(!n.isRemoved()){y=n.getLayout();e=y.width;o=y.height;var h=n.getModel(),p=h.get(cbi),c=h.get(efu)/2,tt=ybi(h),it=Math.max(p,tt),w=p-c,rt=it-c,h=n.getModel();if(n.setLayout({borderWidth:p,upperHeight:it,upperLabelHeight:tt},!0),e=uk(e-2*w,0),o=uk(o-w-rt,0),b=e*o,s=cfu(n,h,b,t,i,r),s.length){var l={x:w,y:rt,width:e,height:o},a=ift(e,o),k=Infinity,u=[];for(u.area=0,f=0,v=s.length;f<v;)d=s[f],u.push(d),u.area+=d.getLayout().area,g=yfu(u,a,t.squareRatio),g<=k?(f++,k=g):(u.area-=u.pop().getLayout().area,abi(u,a,l,c,!1),a=ift(l.width,l.height),u.length=u.area=0,k=Infinity);for(u.length&&abi(u,a,l,c,!0),i||(nt=h.get("childrenVisibleMin"),nt!=null&&b<nt&&(i=!0)),f=0,v=s.length;f<v;f++)lbi(s[f],t,i,r+1)}}}function cfu(n,t,i,r,u,f){var e=n.children||[],s=r.sort,c,o,h,l,a;if(s!=="asc"&&s!=="desc"&&(s=null),c=r.leafDepth!=null&&r.leafDepth<=f,u&&!c)return n.viewChildren=[];if(e=hi(e,function(n){return!n.isRemoved()}),afu(e,s),o=vfu(t,e,s),o.sum===0)return n.viewChildren=[];if(o.sum=lfu(t,i,o.sum,s,e),o.sum===0)return n.viewChildren=[];for(h=0,l=e.length;h<l;h++)a=e[h].getValue()/o.sum*i,e[h].setLayout({area:a});return c&&(e.length&&n.setLayout({isLeafRoot:!0},!0),e.length=0),n.viewChildren=e,n.setLayout({dataExtent:o.dataExtent},!0),e}function lfu(n,t,i,r,u){var f,s;if(!r)return i;var h=n.get("visibleMin"),e=u.length,o=e;for(f=e-1;f>=0;f--)s=u[r==="asc"?e-f-1:f].getValue(),s/i*t<h&&(o=f,i-=s);return r==="asc"?u.splice(0,e-o):u.splice(o,e-o),i}function afu(n,t){return t&&n.sort(function(n,i){var r=t==="asc"?n.getValue()-i.getValue():i.getValue()-n.getValue();return r===0?t==="asc"?n.dataIndex-i.dataIndex:i.dataIndex-n.dataIndex:r}),n}function vfu(n,t,i){for(var f,r,e=0,u=0,o=t.length;u<o;u++)e+=t[u].getValue();return f=n.get("visualDimension"),t&&t.length?f==="value"&&i?(r=[t[t.length-1].getValue(),t[0].getValue()],i==="asc"&&r.reverse()):(r=[Infinity,-Infinity],wwt(t,function(n){var t=n.getValue(f);t<r[0]&&(r[0]=t);t>r[1]&&(r[1]=t)})):r=[NaN,NaN],{sum:e,dataExtent:r}}function yfu(n,t,i){for(var u,s,f=0,e=Infinity,o=0,r,h=n.length;o<h;o++)r=n[o].getLayout().area,r&&(r<e&&(e=r),r>f&&(f=r));return u=n.area*n.area,s=t*t*i,u?uk(s*f/u,u/(s*e)):Infinity}function abi(n,t,i,r,u){var o=t===i.width?0:1,f=1-o,s=["x","y"],h=["width","height"],a=i[s[o]],e=t?n.area/t:0,c,v;for((u||e>i[h[f]])&&(e=i[h[f]]),c=0,v=n.length;c<v;c++){var y=n[c],l={},p=e?y.getLayout().area/e:0,k=l[h[f]]=uk(e-2*r,0),w=i[s[o]]+i[h[o]]-a,b=c===v-1||w<p?w:p,d=l[h[o]]=uk(b-2*r,0);l[s[f]]=i[s[f]]+ift(r,k/2);l[s[o]]=a+ift(r,d/2);a+=b;y.setLayout(l,!0)}i[s[f]]+=e;i[h[f]]-=e}function pfu(n,t,i,r,u){var e=(t||{}).node,p=[r,u],h,o,f,l,a,c,w,v,y;if(!e||e===i)return p;for(o=r*u,f=o*n.option.zoomToNodeRatio;h=e.parentNode;){for(l=0,a=h.children,c=0,w=a.length;c<w;c++)l+=a[c].getValue();if(v=e.getValue(),v===0)return p;f*=l/v;var b=h.getModel(),s=b.get(cbi),k=Math.max(s,ybi(b,s));f+=4*s*s+(3*s+k)*Math.pow(f,.5);f>stt&&(f=stt);e=h}return f<o&&(f=o),y=Math.pow(f/o,.5),[r*y,u*y]}function wfu(n,t,i){var s,e,f,r,u,o;if(t)return{x:t.x,y:t.y};if((s={x:0,y:0},!i)||(e=i.node,f=e.getLayout(),!f))return s;for(r=[f.width/2,f.height/2],u=e;u;)o=u.getLayout(),r[0]+=o.x,r[1]+=o.y,u=u.parentNode;return{x:n.width/2-r[0],y:n.height/2-r[1]}}function vbi(n,t,i,r,u){var f=n.getLayout(),e=i[u],o=e&&e===n,s;(!e||o)&&(u!==i.length||n===r)&&(n.setLayout({isInView:!0,invisible:!o&&!t.intersect(f),isAboveViewRoot:o},!0),s=new b(t.x-f.x,t.y-f.y,t.width,t.height),wwt(n.viewChildren||[],function(n){vbi(n,s,i,r,u+1)}))}function ybi(n){return n.get(ofu)?n.get(sfu):0}function ay(n){return"_EC_"+n}function df(n,t){this.id=n==null?"":n;this.inEdges=[];this.outEdges=[];this.edges=[];this.hostGraph;this.dataIndex=t==null?-1:t}function fk(n,t,i){this.node1=n;this.node2=t;this.dataIndex=i==null?-1:i}function dwt(n){return isNaN(+n.cpx1)||isNaN(+n.cpy1)}function kbi(n){return"_"+n+"Type"}function dbi(n,t,r){var o=t.getItemVisual(r,"color"),f=t.getItemVisual(r,n),u=t.getItemVisual(r,n+"Size"),e;if(f&&f!=="none")return i(u)||(u=[u,u]),e=cu(f,-u[0]/2,-u[1]/2,u[0],u[1],o),e.name=n,e}function bfu(n){var t=new bbi({name:"line"});return gwt(t.shape,n),t}function gwt(n,t){var r=t[0],u=t[1],i=t[2];n.x1=r[0];n.y1=r[1];n.x2=u[0];n.y2=u[1];n.percent=1;i?(n.cpx1=i[0],n.cpy1=i[1]):(n.cpx1=NaN,n.cpy1=NaN)}function kfu(){var v=this,c=v.childOfName("fromSymbol"),l=v.childOfName("toSymbol"),i=v.childOfName("label"),r,o,u,t,y,p,w,f,b;if(c||l||!i.ignore){for(r=1,o=this.parent;o;)o.scale&&(r/=o.scale[0]),o=o.parent;if(u=v.childOfName("line"),this.__dirty||u.__dirty){var s=u.shape.percent,a=u.pointAt(0),h=u.pointAt(s),n=no([],h,a);if(va(n,n),c&&(c.attr("position",a),t=u.tangentAt(0),c.attr("rotation",Math.PI/2-Math.atan2(t[1],t[0])),c.attr("scale",[r*s,r*s])),l&&(l.attr("position",h),t=u.tangentAt(1),l.attr("rotation",-Math.PI/2-Math.atan2(t[1],t[0])),l.attr("scale",[r*s,r*s])),!i.ignore){if(i.attr("position",h),f=5*r,i.__position==="end")y=[n[0]*f+h[0],n[1]*f+h[1]],p=n[0]>.8?"left":n[0]<-.8?"right":"center",w=n[1]>.8?"top":n[1]<-.8?"bottom":"middle";else if(i.__position==="middle"){var k=s/2,t=u.tangentAt(k),e=[t[1],-t[0]],d=u.pointAt(k);e[1]>0&&(e[0]=-e[0],e[1]=-e[1]);y=[d[0]+e[0]*f,d[1]+e[1]*f];p="center";w="bottom";b=-Math.atan2(t[1],t[0]);h[0]<a[0]&&(b=Math.PI+b);i.attr("rotation",b)}else y=[-n[0]*f+a[0],-n[1]*f+a[1]],p=n[0]>.8?"right":n[0]<-.8?"left":"center",w=n[1]>.8?"bottom":n[1]<-.8?"top":"middle";i.attr({style:{textVerticalAlign:i.__verticalAlign||w,textAlign:i.__textAlign||p},position:y,scale:[r,r]})}}}}function ok(n,t,i){e.call(this);this._createLine(n,t,i)}function uft(n){this._ctor=n||ok;this.group=new e}function dfu(n,t,i,r){var f=t.getItemLayout(i),u;nbt(f)&&(u=new n._ctor(t,i,r),t.setItemGraphicEl(i,u),n.group.add(u))}function gfu(n,t,i,r,u,f){var e=t.getItemGraphicEl(r);if(!nbt(i.getItemLayout(u))){n.group.remove(e);return}e?e.updateData(i,u,f):e=new n._ctor(i,u,f);i.setItemGraphicEl(u,e);n.group.add(e)}function gbi(n){var t=n.hostModel;return{lineStyle:t.getModel("lineStyle").getLineStyle(),hoverLineStyle:t.getModel("emphasis.lineStyle").getLineStyle(),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label")}}function nki(n){return isNaN(n[0])||isNaN(n[1])}function nbt(n){return!nki(n[0])&&!nki(n[1])}function iki(n,t,i){for(var l,a,s,v,u=n[0],f=n[1],e=n[2],y=Infinity,r,c=i*i,o=.1,h=.1;h<=.9;h+=.1)tbt[0]=yy(u[0],f[0],e[0],h),tbt[1]=yy(u[1],f[1],e[1],h),s=tki(ubt(tbt,t)-c),s<y&&(y=s,r=h);for(l=0;l<32;l++){if(a=r+o,ibt[0]=yy(u[0],f[0],e[0],r),ibt[1]=yy(u[1],f[1],e[1],r),rbt[0]=yy(u[0],f[0],e[0],a),rbt[1]=yy(u[1],f[1],e[1],a),s=ubt(ibt,t)-c,tki(s)<.01)break;v=ubt(rbt,t)-c;o/=2;r=s<0?v>=0?r+o:r-o:v>=0?r-o:r+o}return r}function rki(n,t){return n.getVisual("opacity")||n.getModel().get(t)}function eft(n,t,i){var u=n.getGraphicEl(),r=rki(n,t);i!=null&&(r==null&&(r=1),r*=i);u.downplay&&u.downplay();u.traverse(function(n){n.type!=="group"&&n.setStyle("opacity",r)})}function yl(n,t){var r=rki(n,t),i=n.getGraphicEl();i.highlight&&i.highlight();i.traverse(function(n){n.type!=="group"&&n.setStyle("opacity",r)})}function oft(n){return n instanceof Array||(n=[n,n]),n}function ski(n){var i=n.coordinateSystem,t;i&&i.type!=="view"||(t=n.getGraph(),t.eachNode(function(n){var t=n.getModel();n.setLayout([+t.get("x"),+t.get("y")])}),hki(t))}function hki(n){n.eachEdge(function(n){var r=n.getModel().get("lineStyle.curveness")||0,t=sf(n.node1.getLayout()),i=sf(n.node2.getLayout()),u=[t,i];+r&&u.push([(t[0]+i[0])/2-(t[1]-i[1])*r,(t[1]+i[1])/2-(i[0]-t[0])*r]);n.setLayout(u)})}function lki(n){var u=n.coordinateSystem;if(!u||u.type==="view"){var t=u.getBoundingRect(),i=n.getData(),s=i.graph,r=0,f=i.getSum("value"),h=Math.PI*2/(f||i.count()),e=t.width/2+t.x,o=t.height/2+t.y,c=Math.min(t.width,t.height)/2;s.eachNode(function(n){var t=n.getValue("value");r+=h*(f?t:1)/2;n.setLayout([c*Math.cos(r)+e,c*Math.sin(r)+o]);r+=h*(f?t:1)/2});i.setLayout({cx:e,cy:o});s.eachEdge(function(n){var t=n.getModel().get("lineStyle.curveness")||0,i=sf(n.node1.getLayout()),r=sf(n.node2.getLayout()),u,f=(i[0]+r[0])/2,s=(i[1]+r[1])/2;+t&&(t*=3,u=[e*t+f*(1-t),o*t+s*(1-t)]);n.setLayout([i,r,u])})}}function neu(n,t,i){for(var u,r,f=i.rect,s=f.width,h=f.height,e=[f.x+s/2,f.y+h/2],c=i.gravity==null?.1:i.gravity,o=0;o<n.length;o++)u=n[o],u.p||(u.p=ss(s*(Math.random()-.5)+e[0],h*(Math.random()-.5)+e[1])),u.pp=sf(u.p),u.edges=null;return r=.6,{warmUp:function(){r=.5},setFixed:function(t){n[t].fixed=!0},setUnfixed:function(t){n[t].fixed=!1},step:function(i){for(var a,h,y,s,l,w,b,o,f=[],v=n.length,u=0;u<t.length;u++){var p=t[u],h=p.n1,s=p.n2;no(f,s.p,h.p);l=vp(f)-p.d;a=s.w/(h.w+s.w);isNaN(a)&&(a=0);va(f,f);h.fixed||pl(h.p,h.p,f,a*l*r);s.fixed||pl(s.p,s.p,f,-(1-a)*l*r)}for(u=0;u<v;u++)o=n[u],o.fixed||(no(f,e,o.p),pl(o.p,o.p,f,c*r));for(u=0;u<v;u++)for(h=n[u],y=u+1;y<v;y++)s=n[y],no(f,s.p,h.p),l=vp(f),l===0&&(oii(f,Math.random()-.5,Math.random()-.5),l=1),w=(h.rep+s.rep)/l/l,h.fixed||pl(h.pp,h.pp,f,w),s.fixed||pl(s.pp,s.pp,f,-w);for(b=[],u=0;u<v;u++)o=n[u],o.fixed||(no(b,o.p,o.pp),pl(o.p,o.p,b,r),gi(o.pp,o.p));r=r*.992;i&&i(n,t,r<.01)}}}function teu(n,t,i){var r=n.getBoxLayoutParams();return r.aspect=i,li(r,{width:t.getWidth(),height:t.getHeight()})}function reu(n,t){var i=n.get("center"),r=t.getWidth(),u=t.getHeight(),e=Math.min(r,u),o=f(i[0],t.getWidth()),s=f(i[1],t.getHeight()),h=f(n.get("radius"),e/2);return{cx:o,cy:s,r:h}}function wki(n,t){return t&&(typeof t=="string"?n=t.replace("{value}",n!=null?n:""):typeof t=="function"&&(n=t(n))),n}function ebt(n,t){function u(){i.ignore=i.hoverIgnore;r.ignore=r.hoverIgnore}function f(){i.ignore=i.normalIgnore;r.ignore=r.normalIgnore}e.call(this);var o=new ku,i=new af,r=new k;this.add(o);this.add(i);this.add(r);this.updateData(n,t,!0);this.on("emphasis",u).on("normal",f).on("mouseover",u).on("mouseout",f)}function eeu(n,t){return li(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function oeu(n,t){for(var f=n.mapDimension("value"),i=n.mapArray(f,function(n){return n}),r=[],e=t==="ascending",u=0,o=n.count();u<o;u++)r[u]=u;return typeof t=="function"?r.sort(t):t!=="none"&&r.sort(function(n,t){return e?i[n]-i[t]:i[t]-i[n]}),r}function seu(n){n.each(function(t){var v=n.getItemModel(t),w=v.getModel("label"),o=w.get("position"),b=v.getModel("labelLine"),y=n.getItemLayout(t),i=y.points,p=o==="inner"||o==="inside"||o==="center",s,r,u,c,f,h,e,l,a;p?(r=(i[0][0]+i[1][0]+i[2][0]+i[3][0])/4,u=(i[0][1]+i[1][1]+i[2][1]+i[3][1])/4,s="center",c=[[r,u],[r,u]]):(l=b.get("length"),o==="left"?(f=(i[3][0]+i[0][0])/2,h=(i[3][1]+i[0][1])/2,e=f-l,r=e-5,s="right"):(f=(i[1][0]+i[2][0])/2,h=(i[1][1]+i[2][1])/2,e=f+l,r=e+5,s="left"),a=h,c=[[f,h],[e,a]],u=a);y.label={linePoints:c,x:r,y:u,verticalAlign:"middle",textAlign:s,inside:p}})}function heu(n){if(!n.parallel){var i=!1;t(n.series,function(n){n&&n.type==="parallel"&&(i=!0)});i&&(n.parallel=[{}])}}function ceu(n){var i=tr(n.parallelAxis);t(i,function(t){if(a(t)){var r=t.parallelIndex||0,i=tr(n.parallel)[r];i&&i.parallelAxisDefault&&v(t,i.parallelAxisDefault,!1)}})}function sbt(n,t){var i=n[t]-n[1-t];return{span:Math.abs(i),sign:i>0?-1:i<0?1:t?-1:1}}function sft(n,t){return Math.min(t[1],Math.max(t[0],n))}function cbt(n,t,i){this._axesMap=p();this._axesLayout={};this.dimensions=n.dimensions;this._rect;this._model=n;this._init(n,t,i)}function hft(n,t){return ndi(tdi(n,t[0]),t[1])}function veu(n,t){var i=t.layoutLength/(t.axisCount-1);return{position:i*n,axisNameAvailableWidth:i,axisLabelShow:!0}}function yeu(n,t){var h=t.layoutLength,f=t.axisExpandWidth,c=t.axisCount,i=t.axisCollapseWidth,e=t.winInnerIndices,r,o=i,s=!1,u;return n<e[0]?(r=n*i,u=i):n<=e[1]?(r=t.axisExpandWindow0Pos+n*f-t.axisExpandWindow[0],o=f,s=!0):(r=h-(c-1-n)*i,u=i),{position:r,axisNameAvailableWidth:o,axisLabelShow:s,nameTruncateMaxWidth:u}}function peu(n,t){var i=[];return n.eachComponent("parallel",function(r,u){var f=new cbt(r,n,t);f.name="parallel_"+u;f.resize(r,t);r.coordinateSystem=f;f.model=r;i.push(f)}),n.eachSeries(function(t){if(t.get("coordinateSystem")==="parallel"){var i=n.queryComponents({mainType:"parallel",index:t.get("parallelIndex"),id:t.get("parallelId")})[0];t.coordinateSystem=i.coordinateSystem}}),i}function weu(n,t){return t.type||(t.data?"category":"value")}function wy(n){u&&g(n);ci.call(this);this._zr=n;this.group=new e;this._brushType;this._brushOption;this._panels;this._track=[];this._dragging;this._covers=[];this._creatingCover;this._creatingPanel;this._enableGlobalPan;u&&this._mounted;this._uid="brushController_"+rou++;this._handlers={};be(ngi,function(n,t){this._handlers[t]=l(n,this)},this)}function uou(n,t){var i=n._zr;n._enableGlobalPan||nru(i,edi,n._uid);be(n._handlers,function(n,t){i.on(t,n)});n._brushType=t.brushType;n._brushOption=v(c(odi),t,!0)}function fou(n){var t=n._zr;tru(t,edi,n._uid);be(n._handlers,function(n,i){t.off(i,n)});n._brushType=n._brushOption=null}function sdi(n,t){var i=ck[t.brushType].createCover(n,t);return i.__brushOption=t,ldi(i,t),n.group.add(i),i}function hdi(n,t){var i=vbt(t);return i.endCreating&&(i.endCreating(n,t),ldi(t,t.__brushOption)),t}function cdi(n,t){var i=t.__brushOption;vbt(t).updateCoverShape(n,t,i.range,i)}function ldi(n,t){var i=t.z;i==null&&(i=deu);n.traverse(function(n){n.z=i;n.z2=i})}function abt(n,t){vbt(t).updateCommon(n,t);cdi(n,t)}function vbt(n){return ck[n.__brushOption.brushType]}function ybt(n,t,i){var r=n._panels,u,f;return r?(f=n._transform,be(r,function(n){n.isTargetByCursor(t,i,f)&&(u=n)}),u):!0}function adi(n,t){var r=n._panels,i;return r?(i=t.__brushOption.panelId,i!=null?r[i]:!0):!0}function pbt(n){var t=n._covers,i=t.length;return be(t,function(t){n.group.remove(t)},n),t.length=0,!!i}function bl(n,t){var i=beu(n._covers,function(n){var t=n.__brushOption,i=c(t.range);return{brushType:t.brushType,panelId:t.panelId,range:i}});n.trigger("brush",i,{isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function eou(n){var t=n._track;if(!t.length)return!1;var i=t[t.length-1],r=t[0],u=i[0]-r[0],f=i[1]-r[1],e=keu(u*u+f*f,.5);return e>geu}function vdi(n){var t=n.length-1;return t<0&&(t=0),[n[0],n[t]]}function ydi(n,t,i,r){var u=new e;return u.add(new et({name:"main",style:bbt(i),silent:!0,draggable:!0,cursor:"move",drift:ph(n,t,u,"nswe"),ondragend:ph(bl,t,{isEnd:!0})})),be(r,function(i){u.add(new et({name:i,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:ph(n,t,u,i),ondragend:ph(bl,t,{isEnd:!0})}))}),u}function pdi(n,t,i,r){var f=r.brushStyle.lineWidth||0,u=py(f,nou),s=i[0][0],h=i[1][0],e=s-f/2,o=h-f/2,a=i[0][1],v=i[1][1],c=a-u+f/2,l=v-u+f/2,y=a-s,p=v-h,w=y+f,b=p+f;ts(n,t,"main",s,h,y,p);r.transformable&&(ts(n,t,"w",e,o,u,b),ts(n,t,"e",c,o,u,b),ts(n,t,"n",e,o,w,u),ts(n,t,"s",e,l,w,u),ts(n,t,"nw",e,o,u,u),ts(n,t,"ne",c,o,u,u),ts(n,t,"sw",e,l,u,u),ts(n,t,"se",c,l,u,u))}function wbt(n,t){var r=t.__brushOption,i=r.transformable,u=t.childAt(0);u.useStyle(bbt(r));u.attr({silent:!i,cursor:i?"move":"default"});be(["w","e","n","s","se","sw","ne","nw"],function(r){var u=t.childOfName(r),f=kbt(n,r);u&&u.attr({silent:!i,invisible:!i,cursor:i?iou[f]+"-resize":null})})}function ts(n,t,i,r,u,f,e){var o=t.childOfName(i);o&&o.setShape(hou(dbt(n,t,[[r,u],[r+f,u+e]])))}function bbt(n){return s({strokeNoScale:!0},n.brushStyle)}function wdi(n,t,i,r){var u=[hk(n,i),hk(t,r)],f=[py(n,i),py(t,r)];return[[u[0],f[0]],[u[1],f[1]]]}function oou(n){return yc(n.group)}function kbt(n,t){var i;if(t.length>1)return t=t.split(""),i=[kbt(n,t[0]),kbt(n,t[1])],(i[0]==="e"||i[0]==="w")&&i.reverse(),i.join("");var i=wlt({w:"left",e:"right",n:"top",s:"bottom"}[t],oou(n));return{left:"w",right:"e",top:"n",bottom:"s"}[i]}function bdi(n,t,i,r,u,f,e){var s=r.__brushOption,o=n(s.range),h=kdi(i,f,e);be(u.split(""),function(n){var t=tou[n];o[t[0]][t[1]]+=h[t[0]]});s.range=t(wdi(o[0][0],o[1][0],o[0][1],o[1][1]));abt(i,r);bl(i,{isEnd:!1})}function sou(n,t,i,r){var f=t.__brushOption.range,u=kdi(n,i,r);be(f,function(n){n[0]+=u[0];n[1]+=u[1]});abt(n,t);bl(n,{isEnd:!1})}function kdi(n,t,i){var r=n.group,u=r.transformCoordToLocal(t,i),f=r.transformCoordToLocal(0,0);return[u[0]-f[0],u[1]-f[1]]}function dbt(n,t,i){var r=adi(n,t);return r&&r!==!0?r.clipPath(i,n._transform):c(i)}function hou(n){var t=hk(n[0][0],n[1][0]),i=hk(n[0][1],n[1][1]),r=py(n[0][0],n[1][0]),u=py(n[0][1],n[1][1]);return{x:t,y:i,width:r-t,height:u-i}}function cou(n,t,i){var r,e;if(n._brushType){var o=n._zr,f=n._covers,u=ybt(n,t,i);if(!n._dragging)for(r=0;r<f.length;r++)if(e=f[r].__brushOption,u&&(u===!0||e.panelId===u.panelId)&&ck[e.brushType].contain(f[r],i[0],i[1]))return;u&&o.setCursorStyle("crosshair")}}function gbt(n){var t=n.event;t.preventDefault&&t.preventDefault()}function nkt(n,t,i){return n.childOfName("main").contain(t,i)}function ddi(n,t,i,r){var u=n._creatingCover,f=n._creatingPanel,o=n._brushOption,s,e,h,l;return n._track.push(i.slice()),eou(n)||u?(f&&!u&&(o.brushMode==="single"&&pbt(n),e=c(o),e.brushType=gdi(e.brushType,f),e.panelId=f===!0?null:f.panelId,u=n._creatingCover=sdi(n,e),n._covers.push(u)),u&&(h=ck[gdi(n._brushType,f)],l=u.__brushOption,l.range=h.getCreatingRange(dbt(n,u,n._track)),r&&(hdi(n,u),h.updateCommon(n,u)),cdi(n,u),s={isEnd:r})):r&&o.brushMode==="single"&&o.removeOnClick&&ybt(n,t,i)&&pbt(n)&&(s={isEnd:r,removeOnClick:!0}),s}function gdi(n,t){return n==="auto"?(u&&g(t&&t.defaultBrushType,'MUST have defaultBrushType when brushType is "atuo"'),t.defaultBrushType):n}function tgi(n){if(this._dragging){gbt(n);var i=this.group.transformCoordToLocal(n.offsetX,n.offsetY),t=ddi(this,n,i,!0);this._dragging=!1;this._track=[];this._creatingCover=null;t&&bl(this,t)}}function igi(n){return{createCover:function(t,i){return ydi(ph(bdi,function(t){var i=[t,[0,100]];return n&&i.reverse(),i},function(t){return t[n]}),t,i,[["w","e"],["n","s"]][n])},getCreatingRange:function(t){var i=vdi(t),r=hk(i[0][n],i[1][n]),u=py(i[0][n],i[1][n]);return[r,u]},updateCoverShape:function(t,i,r,u){var f,e=adi(t,i),o,s;e!==!0&&e.getLinearBrushOtherExtent?f=e.getLinearBrushOtherExtent(n,t._transform):(o=t._zr,f=[0,[o.getWidth(),o.getHeight()][1-n]]);s=[r,f];n&&s.reverse();pdi(t,i,s,u)},updateCommon:wbt,contain:nkt}}function rgi(n){return n=tkt(n),function(t){return foi(t,n)}}function ugi(n,t){return n=tkt(n),function(i){var r=t!=null?t:i,f=r?n.width:n.height,u=r?n.x:n.y;return[u,u+(f||0)]}}function fgi(n,t,i){return n=tkt(n),function(r,u){return n.contain(u[0],u[1])&&!aut(r,t,i)}}function tkt(n){return b.create(n)}function lou(n,t,i){return i&&i.type==="axisAreaSelect"&&t.findComponents({mainType:"parallelAxis",query:i})[0]===n}function aou(n){var t=n.axis;return r(n.activeIntervals,function(n){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(n[0],!0),t.dataToCoord(n[1],!0)]}})}function vou(n,t){return t.getComponent("parallel",n.get("parallelIndex"))}function ikt(n,t){var i=n._model;return i.get("axisExpandable")&&i.get("axisExpandTriggerOn")===t}function you(n,i){var r,u;n.encodeDefine||(r=i.ecModel.getComponent("parallel",i.get("parallelIndex")),r)&&(u=n.encodeDefine=p(),t(r.dimensions,function(n){var t=pou(n);u.set(n,t)}))}function pou(n){return+n.replace("dim","")}function bou(n,t,i){var f=n.model,r=n.getRect(),u=new et({shape:{x:r.x,y:r.y,width:r.width,height:r.height}}),e=f.get("layout")==="horizontal"?"width":"height";return u.setShape(e,0),sr(u,{shape:{width:r.width,height:r.height}},t,i),u}function cgi(n,t,i,r){for(var u,e,o=[],f=0;f<i.length;f++)u=i[f],e=n.get(n.mapDimension(u),t),kou(e,r.getAxis(u).type)||o.push(r.dataToPoint(e,u));return o}function lgi(n,t,i,r,u){var e=cgi(n,i,r,u),f=new af({shape:{points:e},silent:!0,z2:10});return t.add(f),n.setItemGraphicEl(i,f),f}function agi(n){var t=n.get("smooth",!0);return t===!0&&(t=rkt),{lineStyle:n.getModel("lineStyle").getLineStyle(),smooth:t!=null?t:rkt}}function ukt(n,t,i,r){var f=r.lineStyle,e,u;t.hasItemOption&&(e=t.getItemModel(i).getModel("lineStyle"),f=e.getLineStyle());n.useStyle(f);u=n.style;u.fill=null;u.stroke=t.getItemVisual(i,"color");u.opacity=t.getItemVisual(i,"opacity");r.smooth&&(n.shape.smooth=r.smooth)}function kou(n,t){return t==="category"?n==null:n==null||isNaN(n)}function pgi(n,t){return n.getVisual("opacity")||n.getModel().get(t)}function cft(n,t,i){var u=n.getGraphicEl(),r=pgi(n,t);i!=null&&(r==null&&(r=1),r*=i);u.downplay&&u.downplay();u.traverse(function(n){n.type!=="group"&&n.setStyle("opacity",r)})}function gf(n,t){var r=pgi(n,t),i=n.getGraphicEl();i.highlight&&i.highlight();i.traverse(function(n){n.type!=="group"&&n.setStyle("opacity",r)})}function gou(n,t,i){var r=new et({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return sr(r,{shape:{width:n.width+20,height:n.height+20}},t,i),r}function fkt(){function r(i,u){var o,s;if(u>=n.length)return i;for(var f=-1,c=i.length,l=n[u++],h={},e={};++f<c;)o=l(i[f]),s=e[o],s?s.push(i[f]):e[o]=[i[f]];return t(e,function(n,t){h[t]=r(n,u)}),h}function u(r,f){if(f>=n.length)return r;var e=[],o=i[f++];return(t(r,function(n,t){e.push({key:t,values:u(n,f)})}),o)?e.sort(function(n,t){return o(n.key,t.key)}):e}var n=[],i=[];return{key:function(t){return n.push(t),this},sortKeys:function(t){return i[n.length-1]=t,this},entries:function(n){return u(r(n,0),0)}}}function nsu(n,t){return li(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function tsu(n,t,i,r,u,f,e,o){rsu(n,t,i,u,f,o);esu(n,t,f,u,r,e,o);vsu(n,o)}function isu(n){t(n,function(n){var t=dy(n.outEdges,lft),i=dy(n.inEdges,lft),r=Math.max(t,i);n.setLayout({value:r},!0)})}function rsu(n,t,i,r,f,e){for(var a,s,v,w,d,b,g,l=[],y=[],c=[],p=[],h=0,k=0,o=0;o<t.length;o++)l[o]=1;for(o=0;o<n.length;o++)y[o]=n[o].inEdges.length,y[o]===0&&c.push(n[o]);while(c.length){for(a=0;a<c.length;a++)for(s=c[a],e==="vertical"?(s.setLayout({y:h},!0),s.setLayout({dy:i},!0)):(s.setLayout({x:h},!0),s.setLayout({dx:i},!0)),v=0;v<s.outEdges.length;v++)w=s.outEdges[v],d=t.indexOf(w),l[d]=0,b=w.node2,g=n.indexOf(b),--y[g]==0&&p.push(b);++h;c=p;p=[]}for(o=0;o<l.length;o++)if(u&&l[o]===1)throw new Error("Sankey is a DAG, the original data has cycle!");usu(n,h,e);k=e==="vertical"?(f-i)/(h-1):(r-i)/(h-1);fsu(n,k,e)}function usu(n,i,r){t(n,function(n){n.outEdges.length||(r==="vertical"?n.setLayout({y:i-1},!0):n.setLayout({x:i-1},!0))})}function fsu(n,i,r){t(n,function(n){var t,u;r==="vertical"?(t=n.getLayout().y*i,n.setLayout({y:t},!0)):(u=n.getLayout().x*i,n.setLayout({x:u},!0))})}function esu(n,t,i,r,u,f,e){var o=fkt().key(osu(e)).sortKeys(function(n,t){return n-t}).entries(n).map(function(n){return n.values}),s;for(ssu(n,o,t,i,r,u,e),ekt(o,u,i,r,e),s=1;f>0;f--)s*=.99,hsu(o,s,e),ekt(o,u,i,r,e),asu(o,s,e),ekt(o,u,i,r,e)}function osu(n){return n==="vertical"?function(n){return n.getLayout().y}:function(n){return n.getLayout().x}}function ssu(n,i,r,u,f,e,o){var s=[],h;t(i,function(n){var r=n.length,i=0,h=0;t(n,function(n){i+=n.getLayout().value});h=o==="vertical"?(f-(r-1)*e)/i:(u-(r-1)*e)/i;s.push(h)});s.sort(function(n,t){return n-t});h=s[0];t(i,function(n){t(n,function(n,t){var i=n.getLayout().value*h;o==="vertical"?(n.setLayout({x:t},!0),n.setLayout({dx:i},!0)):(n.setLayout({y:t},!0),n.setLayout({dy:i},!0))})});t(r,function(n){var t=+n.getValue()*h;n.setLayout({dy:t},!0)})}function ekt(n,i,r,u,f){t(n,function(n){var t,e,s=0,l=n.length,o,h,c;if(f==="vertical"){for(n.sort(function(n,t){return n.getLayout().x-t.getLayout().x}),o=0;o<l;o++)t=n[o],e=s-t.getLayout().x,e>0&&(h=t.getLayout().x+e,t.setLayout({x:h},!0)),s=t.getLayout().x+t.getLayout().dx+i;if(e=s-i-u,e>0)for(h=t.getLayout().x-e,t.setLayout({x:h},!0),s=h,o=l-2;o>=0;--o)t=n[o],e=t.getLayout().x+t.getLayout().dx+i-s,e>0&&(h=t.getLayout().x-e,t.setLayout({x:h},!0)),s=t.getLayout().x}else{for(n.sort(function(n,t){return n.getLayout().y-t.getLayout().y}),o=0;o<l;o++)t=n[o],e=s-t.getLayout().y,e>0&&(c=t.getLayout().y+e,t.setLayout({y:c},!0)),s=t.getLayout().y+t.getLayout().dy+i;if(e=s-i-r,e>0)for(c=t.getLayout().y-e,t.setLayout({y:c},!0),s=c,o=l-2;o>=0;--o)t=n[o],e=t.getLayout().y+t.getLayout().dy+i-s,e>0&&(c=t.getLayout().y-e,t.setLayout({y:c},!0)),s=t.getLayout().y}})}function hsu(n,i,r){t(n.slice().reverse(),function(n){t(n,function(n){var t,u,f;n.outEdges.length&&(t=dy(n.outEdges,csu,r)/dy(n.outEdges,lft,r),r==="vertical"?(u=n.getLayout().x+(t-ky(n,r))*i,n.setLayout({x:u},!0)):(f=n.getLayout().y+(t-ky(n,r))*i,n.setLayout({y:f},!0)))})})}function csu(n,t){return ky(n.node2,t)*n.getValue()}function lsu(n,t){return ky(n.node1,t)*n.getValue()}function ky(n,t){return t==="vertical"?n.getLayout().x+n.getLayout().dx/2:n.getLayout().y+n.getLayout().dy/2}function lft(n){return n.getValue()}function dy(n,t,i){for(var u=0,e=n.length,f=-1,r;++f<e;)r=+t.call(n,n[f],i),isNaN(r)||(u+=r);return u}function asu(n,i,r){t(n,function(n){t(n,function(n){var t,u,f;n.inEdges.length&&(t=dy(n.inEdges,lsu,r)/dy(n.inEdges,lft,r),r==="vertical"?(u=n.getLayout().x+(t-ky(n,r))*i,n.setLayout({x:u},!0)):(f=n.getLayout().y+(t-ky(n,r))*i,n.setLayout({y:f},!0)))})})}function vsu(n,i){t(n,function(n){i==="vertical"?(n.outEdges.sort(function(n,t){return n.node2.getLayout().x-t.node2.getLayout().x}),n.inEdges.sort(function(n,t){return n.node1.getLayout().x-t.node1.getLayout().x})):(n.outEdges.sort(function(n,t){return n.node2.getLayout().y-t.node2.getLayout().y}),n.inEdges.sort(function(n,t){return n.node1.getLayout().y-t.node1.getLayout().y}))});t(n,function(n){var i=0,r=0;t(n.outEdges,function(n){n.setLayout({sy:i},!0);i+=n.getLayout().dy});t(n.inEdges,function(n){n.setLayout({ty:r},!0);r+=n.getLayout().dy})})}function ggi(n,t,i,r,u){var f=n.ends,e=new wsu({shape:{points:u?bsu(f,r,n):f}});return nni(n,e,t,i,u),e}function nni(n,t,i,r,u){var s=i.hostModel,h=vf[u?"initProps":"updateProps"],o;h(t,{shape:{points:n.ends}},s,r);var e=i.getItemModel(r),c=e.getModel(ysu),l=i.getItemVisual(r,"color"),f=c.getItemStyle(["borderColor"]);f.stroke=l;f.strokeNoScale=!0;t.useStyle(f);t.z2=100;o=e.getModel(psu).getItemStyle();pt(t,o)}function bsu(n,t,i){return r(n,function(n){return n=n.slice(),n[t]=i.initBaseline,n})}function gsu(n){var t=[],i=[];return n.eachSeriesByType("boxplot",function(n){var u=n.getBaseAxis(),r=tt(i,u);r<0&&(r=i.length,i[r]=u,t[r]={axis:u,seriesModels:[]});t[r].seriesModels.push(n)}),t}function nhu(n){var e,o=n.axis,t=n.seriesModels,s=t.length,y=n.boxWidthList=[],p=n.boxOffsetList=[],h=[],r,u;o.type==="category"?r=o.getBandWidth():(u=0,lk(t,function(n){u=Math.max(u,n.getData().count())}),e=o.getExtent(),Math.abs(e[1]-e[0])/u);lk(t,function(n){var t=n.get("boxWidth");i(t)||(t=[t,t]);h.push([f(t[0],r)||0,f(t[1],r)||0])});var c=r*.8-2,a=c/s*.3,l=(c-a*(s-1))/s,v=l/2-c/2;lk(t,function(n,t){p.push(v);v+=a+l;y.push(Math.min(Math.max(l,h[t][0]),h[t][1]))})}function thu(n,t,i){function h(n,i,r){var s=e.get(i,r),o=[],f;return o[u]=n,o[l]=s,isNaN(n)||isNaN(s)?f=[NaN,NaN]:(f=nt.dataToPoint(o),f[u]+=t),f}function g(n,t,i){var r=t.slice(),f=t.slice();r[u]+=c;f[u]-=c;i?n.push(r,f):n.push(f,r)}function a(n,t){var i=t.slice(),r=t.slice();i[u]-=c;r[u]+=c;n.push(i,r)}var nt=n.coordinateSystem,e=n.getData(),c=i/2,u=n.get("layout")==="horizontal"?0:1,l=1-u,v=["x","y"],y=e.mapDimension(v[u]),o=e.mapDimension(v[l],!0),r;if(y!=null&&!(o.length<5))for(r=0;r<e.count();r++){var s=e.get(y,r),p=h(s,o[2],r),w=h(s,o[0],r),b=h(s,o[1],r),k=h(s,o[3],r),d=h(s,o[4],r),f=[];g(f,b,0);g(f,k,1);f.push(w,b,d,k);a(f,w);a(f,d);a(f,p);e.setItemLayout(r,{initBaseline:p[l],ends:f})}}function skt(n,t,i){var r=n.ends;return new rhu({shape:{points:i?uhu(r,n):r},z2:100})}function hkt(n,t,i,r){var u=t.getItemModel(i),o=u.getModel(rni),f=t.getItemVisual(i,"color"),s=t.getItemVisual(i,"borderColor")||f,h=o.getItemStyle(uni),e;n.useStyle(h);n.style.strokeNoScale=!0;n.style.fill=f;n.style.stroke=s;n.__simpleBox=r;e=u.getModel(ihu).getItemStyle();pt(n,e)}function uhu(n,t){return r(n,function(n){return n=n.slice(),n[1]=t.initBaseline,n})}function fni(n,t,i){var u=n.getData(),e=u.getLayout("largePoints"),f=new ckt({shape:{points:e},__sign:1}),r;t.add(f);r=new ckt({shape:{points:e},__sign:-1});t.add(r);eni(1,f,n,u);eni(-1,r,n,u);i&&(f.incremental=!0,r.incremental=!0)}function eni(n,t,i,r){var u=n>0?"P":"N",f=r.getVisual("borderColor"+u)||r.getVisual("color"+u),e=i.getModel(rni).getItemStyle(uni);t.useStyle(e);t.style.fill=null;t.style.stroke=f}function oni(n,t,i,r,u){return i>r?-1:i<r?1:t>0?n.get(u,t-1)<=r?1:-1:1}function vhu(n,t){var r=n.getBaseAxis(),u,i=r.type==="category"?r.getBandWidth():(u=r.getExtent(),Math.abs(u[1]-u[0])/t.count()),o=f(vi(n.get("barMaxWidth"),i),i),s=f(vi(n.get("barMinWidth"),1),i),e=n.get("barWidth");return e!=null?f(e,i):Math.max(Math.min(i/2,o),s)}function yhu(n){return i(n)||(n=[+n,+n]),n}function sni(n,t){n.eachChild(function(n){n.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?t.color:null,fill:t.brushType==="fill"?t.color:null}})})}function akt(n,t){e.call(this);var i=new hh(n,t),r=new e;this.add(i);this.add(r);r.beforeUpdate=function(){this.attr(i.getScale())};this.updateData(n,t)}function lni(n){var t=n.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(u&&console.warn("Lines data configuration has been changed to { coords:[[1,2],[2,3]] }"),n.data=r(t,function(n){var i=[n[0].coord,n[1].coord],t={coords:i};return n[0].name&&(t.fromName=n[0].name),n[1].name&&(t.toName=n[1].name),cp([t,n[0],n[1]])}))}function ak(n,t,i){e.call(this);this.add(this.createLine(n,t,i));this._updateEffectSymbol(n,t)}function aft(n,t,i){e.call(this);this._createPolyline(n,t,i)}function ykt(n,t,i){ak.call(this,n,t,i);this._lastFrame=0;this._lastFramePercent=0}function ani(){this.group=new e}function vft(n){return n instanceof Array||(n=[n,n]),n}function pni(){var n=rc();this.canvas=n;this.blurSize=30;this.pointSize=20;this.maxOpacity=1;this.minOpacity=0;this._gradientPixels={}}function phu(n,t,i){var e=n[1]-n[0],f,u;return t=r(t,function(t){return{interval:[(t.interval[0]-n[0])/e,(t.interval[1]-n[0])/e]}}),f=t.length,u=0,function(n){for(var e,r=u;r<f;r++)if(e=t[r].interval,e[0]<=n&&n<=e[1]){u=r;break}if(r===f)for(r=u-1;r>=0;r--)if(e=t[r].interval,e[0]<=n&&n<=e[1]){u=r;break}return r>=0&&r<f&&i[r]}}function whu(n,t){var i=n[1]-n[0];return t=[(t[0]-n[0])/i,(t[1]-n[0])/i],function(n){return n>=t[0]&&n<=t[1]}}function bhu(n){var t=n.dimensions;return t[0]==="lng"&&t[1]==="lat"}function bni(n,t,r,u){var s=n.getItemLayout(t),h=r.get("symbolRepeat"),l=r.get("symbolClip"),p=r.get("symbolPosition")||"start",w=r.get("symbolRotate"),a=(w||0)*Math.PI/180||0,v=r.get("symbolPatternSize")||2,y=r.isAnimationEnabled(),e={dataIndex:t,layout:s,itemModel:r,symbolType:n.getItemVisual(t,"symbol")||"circle",color:n.getItemVisual(t,"color"),symbolClip:l,symbolRepeat:h,symbolRepeatDirection:r.get("symbolRepeatDirection"),symbolPatternSize:v,rotation:a,animationModel:y?r:null,hoverAnimation:y&&r.get("hoverAnimation"),z2:r.getShallow("z",!0)||0},c,o;return ghu(r,h,s,u,e),ncu(n,t,s,h,l,e.boundingLength,e.pxSign,v,u,e),tcu(r,e.symbolScale,a,u,e),c=e.symbolSize,o=r.get("symbolOffset"),i(o)&&(o=[f(o[0],c[0]),f(o[1],c[1])]),icu(r,c,s,h,l,o,p,e.valueLineWidth,e.boundingLength,e.repeatCutLength,u,e),e}function ghu(n,t,r,u,f){var c=u.valueDim,e=n.get("symbolBoundingData"),o=u.coordSys.getOtherAxis(u.coordSys.getBaseAxis()),l=o.toGlobalCoord(o.dataToCoord(0)),a=1-+(r[c.wh]<=0),s,h;i(e)?(h=[dkt(o,e[0])-l,dkt(o,e[1])-l],h[1]<h[0]&&h.reverse(),s=h[a]):s=e!=null?dkt(o,e)-l:t?u.coordSysExtent[c.index][a]-l:r[c.wh];f.boundingLength=s;t&&(f.repeatCutLength=r[c.wh]);f.pxSign=s>0?1:s<0?-1:0}function dkt(n,t){return n.toGlobalCoord(n.dataToCoord(n.scale.parse(t)))}function ncu(n,t,r,u,e,o,s,h,c,l){var v=c.valueDim,y=c.categoryDim,p=Math.abs(r[y.wh]),a=n.getItemVisual(t,"symbolSize"),w;i(a)?a=a.slice():(a==null&&(a="100%"),a=[a,a]);a[y.index]=f(a[y.index],p);a[v.index]=f(a[v.index],u?p:Math.abs(o));l.symbolSize=a;w=l.symbolScale=[a[0]/h,a[1]/h];w[v.index]*=(c.isHorizontal?-1:1)*s}function tcu(n,t,i,r,u){var f=n.get(dhu)||0;f&&(kkt.attr({scale:t.slice(),rotation:i}),kkt.updateTransform(),f/=kkt.getLineScale(),f*=t[r.valueDim.index]);u.valueLineWidth=f}function icu(n,t,i,r,u,e,s,h,c,l,a,v){var w=a.categoryDim,p=a.valueDim,et=v.pxSign,g=Math.max(t[p.index]+h,0),ot=g,rt,k,ut,ft,d;if(r){var st=Math.abs(c),y=kt(n.get("symbolMargin"),"15%")+"",nt=!1;y.lastIndexOf("!")===y.length-1&&(nt=!0,y=y.slice(0,y.length-1));y=f(y,t[p.index]);var tt=Math.max(g+y*2,0),it=nt?0:y*2,ht=yoi(r),b=ht?r:otr((st+it)/tt),ct=st-b*g;y=ct/2/(nt?b:b-1);tt=g+y*2;it=nt?0:y*2;ht||r==="fixed"||(b=l?otr((Math.abs(l)+it)/tt):0);ot=b*tt-it;v.repeatTimes=b;v.symbolMargin=y}rt=et*(ot/2);k=v.pathPosition=[];k[w.index]=i[w.wh]/2;k[p.index]=s==="start"?rt:s==="end"?c-rt:c/2;e&&(k[0]+=e[0],k[1]+=e[1]);ut=v.bundlePosition=[];ut[w.index]=i[w.xy];ut[p.index]=i[p.xy];ft=v.barRectShape=o({},i);ft[p.wh]=et*Math.max(Math.abs(i[p.wh]),Math.abs(k[p.index]+rt));ft[w.wh]=i[w.wh];d=v.clipShape={};d[w.xy]=-i[w.xy];d[w.wh]=a.ecSize[w.wh];d[p.xy]=0;d[p.wh]=i[p.wh]}function kni(n){var t=n.symbolPatternSize,i=cu(n.symbolType,-t/2,-t/2,t,t,n.color);return i.attr({culling:!0}),i.type!=="image"&&i.setStyle({strokeNoScale:!0}),i}function dni(n,t,i,r){function l(n){var t=h.slice(),r=i.pxSign,u=n;return(i.symbolRepeatDirection==="start"?r>0:r<0)&&(u=e-1-n),t[c.index]=y*(u-e/2+.5)+h[c.index],{position:t,scale:i.symbolScale.slice(),rotation:i.rotation}}function p(){pk(n,function(n){n.trigger("emphasis")})}function w(){pk(n,function(n){n.trigger("normal")})}var s=n.__pictorialBundle,a=i.symbolSize,v=i.valueLineWidth,h=i.pathPosition,c=t.valueDim,e=i.repeatTimes||0,u=0,y=a[t.valueDim.index]+v+i.symbolMargin*2,f,o;for(pk(n,function(n){n.__pictorialAnimationIndex=u;n.__pictorialRepeatTimes=e;u<e?gy(n,null,l(u),i,r):gy(n,null,{scale:[0,0]},i,r,function(){s.remove(n)});gkt(n,i);u++});u<e;u++){f=kni(i);f.__pictorialAnimationIndex=u;f.__pictorialRepeatTimes=e;s.add(f);o=l(u);gy(f,{position:o.position,scale:[0,0]},{scale:o.scale,rotation:o.rotation},i,r);f.on("mouseover",p).on("mouseout",w);gkt(f,i)}}function gni(n,t,i,r){function e(){this.trigger("emphasis")}function o(){this.trigger("normal")}var f=n.__pictorialBundle,u=n.__pictorialMainPath;if(u)gy(u,null,{position:i.pathPosition.slice(),scale:i.symbolScale.slice(),rotation:i.rotation},i,r);else{u=n.__pictorialMainPath=kni(i);f.add(u);gy(u,{position:i.pathPosition.slice(),scale:[0,0],rotation:i.rotation},{scale:i.symbolScale.slice()},i,r);u.on("mouseover",e).on("mouseout",o)}gkt(u,i)}function ntr(n,t,i){var u=o({},t.barRectShape),r=n.__pictorialBarRect;r?gy(r,null,{shape:u},t,i):(r=n.__pictorialBarRect=new et({z2:2,shape:u,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),n.add(r))}function ttr(n,t,i,r){var s;if(i.symbolClip){var u=n.__pictorialClipPath,f=o({},i.clipShape),e=t.valueDim,h=i.animationModel,c=i.dataIndex;u?w(u,{shape:f},h,c):(f[e.wh]=0,u=new et({shape:f}),n.__pictorialBundle.setClipPath(u),n.__pictorialClipPath=u,s={},s[e.wh]=i.clipShape[e.wh],vf[r?"updateProps":"initProps"](u,{shape:s},h,c))}}function itr(n,t){var i=n.getItemModel(t);return i.getAnimationDelayParams=rcu,i.isAnimationEnabled=ucu,i}function rcu(n){return{index:n.__pictorialAnimationIndex,count:n.__pictorialRepeatTimes}}function ucu(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function gkt(n,t){n.off("emphasis").off("normal");var i=t.symbolScale.slice();t.hoverAnimation&&n.on("emphasis",function(){this.animateTo({scale:[i[0]*1.1,i[1]*1.1]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:i.slice()},400,"elasticOut")})}function rtr(n,t,i,r){var u=new e,f=new e;return u.add(f),u.__pictorialBundle=f,f.attr("position",i.bundlePosition.slice()),i.symbolRepeat?dni(u,t,i):gni(u,t,i),ntr(u,i,r),ttr(u,t,i,r),u.__pictorialShapeStr=ftr(n,i),u.__pictorialSymbolMeta=i,u}function fcu(n,t,i){var r=i.animationModel,u=i.dataIndex,f=n.__pictorialBundle;w(f,{position:i.bundlePosition.slice()},r,u);i.symbolRepeat?dni(n,t,i,!0):gni(n,t,i,!0);ntr(n,i,!0);ttr(n,t,i,!0)}function utr(n,i,r,u){var e=u.__pictorialBarRect,f;e&&(e.style.text=null);f=[];pk(u,function(n){f.push(n)});u.__pictorialMainPath&&f.push(u.__pictorialMainPath);u.__pictorialClipPath&&(r=null);t(f,function(n){w(n,{scale:[0,0]},r,i,function(){u.parent&&u.parent.remove(u)})});n.setItemGraphicEl(i,null)}function ftr(n,t){return[n.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function pk(n,i,r){t(n.__pictorialBundle.children(),function(t){t!==n.__pictorialBarRect&&i.call(r,t)})}function gy(n,t,i,r,u,f){t&&n.attr(t);r.symbolClip&&!u?i&&n.attr(i):i&&vf[u?"updateProps":"initProps"](n,i,r.animationModel,r.dataIndex,f)}function etr(n,t,i){var u=i.color,h=i.dataIndex,r=i.itemModel,c=r.getModel("itemStyle").getItemStyle(["color"]),l=r.getModel("emphasis.itemStyle").getItemStyle(),f=r.getShallow("cursor");pk(n,function(n){n.setColor(u);n.setStyle(s({fill:u,opacity:i.opacity},c));pt(n,l);f&&(n.cursor=f);n.z2=i.z2});var e={},a=t.valueDim.posDesc[+(i.boundingLength>0)],o=n.__pictorialBarRect;pyi(o.style,e,r,u,t.seriesModel,h,a);pt(o,e)}function otr(n){var t=Math.round(n);return Math.abs(n-t)<.0001?t:Math.ceil(n)}function yft(n,t,i){this.dimension="single";this.dimensions=["single"];this._axis=null;this._rect;this._init(n,t,i);this.model=n}function ecu(n,t){var i=[];return n.eachComponent("singleAxis",function(r,u){var f=new yft(r,n,t);f.name="single_"+u;f.resize(r,t);r.coordinateSystem=f;i.push(f)}),n.eachSeries(function(t){if(t.get("coordinateSystem")==="singleAxis"){var i=n.queryComponents({mainType:"singleAxis",index:t.get("singleAxisIndex"),id:t.get("singleAxisId")})[0];t.coordinateSystem=i&&i.coordinateSystem}}),i}function ndt(n,t){var c,l,f;t=t||{};var a=n.coordinateSystem,s=n.axis,i={},e=s.position,o=s.orient,r=a.getRect(),u=[r.x,r.x+r.width,r.y,r.y+r.height],h={horizontal:{top:u[2],bottom:u[3]},vertical:{left:u[0],right:u[1]}};return i.position=[o==="vertical"?h.vertical[e]:u[0],o==="horizontal"?h.horizontal[e]:u[3]],c={horizontal:0,vertical:1},i.rotation=Math.PI/2*c[o],l={top:-1,bottom:1,right:1,left:-1},i.labelDirection=i.tickDirection=i.nameDirection=l[e],n.get("axisTick.inside")&&(i.tickDirection=-i.tickDirection),kt(t.labelInside,n.get("axisLabel.inside"))&&(i.labelDirection=-i.labelDirection),f=t.rotate,f==null&&(f=n.get("axisLabel.rotate")),i.labelRotation=e==="top"?-f:f,i.z2=1,i}function hcu(n,t){return t.type||(t.data?"category":"value")}function vtr(n,t,i,r,u){var e=n.axis;if(!e.scale.isBlank()&&e.containData(t)){if(!n.involveSeries){i.showPointer(n,t);return}var s=lcu(t,n),h=s.payloadBatch,f=s.snapToValue;h[0]&&u.seriesIndex==null&&o(u,h[0]);!r&&n.snap&&e.containData(f)&&f!=null&&(t=f);i.showPointer(n,t,h,u);i.showTooltip(n,s,f)}}function lcu(n,t){var i=t.axis,o=i.dim,f=n,r=[],u=Number.MAX_VALUE,e=-1;return ke(t.seriesModels,function(t){var a=t.getData().mapDimension(o,!0),s,h,v,c,l;if(t.getAxisTooltipData)v=t.getAxisTooltipData(a,n,i),h=v.dataIndices,s=v.nestestValue;else{if(h=t.getData().indicesOfNearest(a[0],n,i.type==="category"?.5:null),!h.length)return;s=t.getData().get(a[0],h[0])}s!=null&&isFinite(s)&&(c=n-s,l=Math.abs(c),l<=u&&((l<u||c>=0&&e<0)&&(u=l,e=c,f=s,r.length=0),ke(h,function(n){r.push({seriesIndex:t.seriesIndex,dataIndexInside:n,dataIndex:t.getData().getRawIndex(n)})})))}),{payloadBatch:r,snapToValue:f}}function acu(n,t,i,r){n[t.key]={value:i,payloadBatch:r}}function vcu(n,t,i,r){var o=i.payloadBatch,s=t.axis,e=s.model,h=t.axisPointerModel;if(t.triggerTooltip&&o.length){var u=t.coordSys.model,c=pb(u),f=n.map[c];f||(f=n.map[c]={coordSysId:u.id,coordSysIndex:u.componentIndex,coordSysType:u.type,coordSysMainType:u.mainType,dataByAxis:[]},n.list.push(f));f.dataByAxis.push({axisDim:s.dim,axisIndex:e.componentIndex,axisType:e.type,axisId:e.id,value:r,valueLabelOpt:{precision:h.get("label.precision"),formatter:h.get("label.formatter")},seriesDataIndices:o.slice()})}}function ycu(n,t,i){var r=i.axesInfo=[];ke(t,function(t,i){var u=t.axisPointerModel.option,f=n[i];f?(t.useHandle||(u.status="show"),u.value=f.value,u.seriesDataIndices=(f.payloadBatch||[]).slice()):t.useHandle||(u.status="hide");u.status==="show"&&r.push({axisDim:t.axis.dim,axisIndex:t.axis.model.componentIndex,value:u.value})})}function pcu(n,t,i,r){if(pft(t)||!n.list.length){r({type:"hideTip"});return}var u=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:i.tooltipOption,position:i.position,dataIndexInside:u.dataIndexInside,dataIndex:u.dataIndex,seriesIndex:u.seriesIndex,dataByCoordSys:n.list})}function wcu(n,i,r){var o=r.getZr(),s="axisPointerLastHighlights",h=atr(o)[s]||{},e=atr(o)[s]={},u,f;ke(n,function(n){var t=n.axisPointerModel.option;t.status==="show"&&ke(t.seriesDataIndices,function(n){var t=n.seriesIndex+" | "+n.dataIndex;e[t]=n})});u=[];f=[];t(h,function(n,t){e[t]||f.push(n)});t(e,function(n,t){h[t]||u.push(n)});f.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,batch:f});u.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,batch:u})}function bcu(n,t){for(var r,i=0;i<(n||[]).length;i++)if(r=n[i],t.axis.dim===r.axisDim&&t.axis.model.componentIndex===r.axisIndex)return r}function ytr(n){var i=n.axis.model,t={},r=t.axisDim=n.axis.dim;return t.axisIndex=t[r+"AxisIndex"]=i.componentIndex,t.axisName=t[r+"AxisName"]=i.name,t.axisId=t[r+"AxisId"]=i.id,t}function pft(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function ptr(n,t,i){var r,u;d.node||(r=t.getZr(),us(r).records||(us(r).records={}),dcu(r,t),u=us(r).records[n]||(us(r).records[n]={}),u.handler=i)}function dcu(n,t){function i(i,r){n.on(i,function(i){var u=tlu(t);kcu(us(n).records,function(n){n&&r(n,i,u.dispatchAction)});gcu(u.pendings,t)})}us(n).initialized||(us(n).initialized=!0,i("click",y(wtr,"click")),i("mousemove",y(wtr,"mousemove")),i("globalout",nlu))}function gcu(n,t){var r=n.showTip.length,u=n.hideTip.length,i;r?i=n.showTip[r-1]:u&&(i=n.hideTip[u-1]);i&&(i.dispatchAction=null,t.dispatchAction(i))}function nlu(n,t,i){n.handler("leave",null,i)}function wtr(n,t,i,r){t.handler(n,i,r)}function tlu(n){var t={showTip:[],hideTip:[]},i=function(r){var u=t[r.type];u?u.push(r):(r.dispatchAction=i,n.dispatchAction(r))};return{dispatchAction:i,pendings:t}}function tdt(n,t){if(!d.node){var i=t.getZr(),r=(us(i).records||{})[n];r&&(us(i).records[n]=null)}}function dl(){}function dtr(n,t,i,r){gtr(kl(i).lastProp,r)||(kl(i).lastProp=r,t?w(i,r,n):(i.stopAnimation(),i.attr(r)))}function gtr(n,i){if(a(n)&&a(i)){var r=!0;return t(i,function(t,i){r=r&&gtr(n[i],t)}),!!r}return n===i}function nir(n,t){n[t.get("label.show")?"show":"hide"]()}function rdt(n){return{position:n.position.slice(),rotation:n.rotation||0}}function tir(n,t,i){var r=t.get("z"),u=t.get("zlevel");n&&n.traverse(function(n){n.type!=="group"&&(r!=null&&(n.z=r),u!=null&&(n.zlevel=u),n.silent=i)})}function udt(n){var i=n.get("type"),r=n.getModel(i+"Style"),t;return i==="line"?(t=r.getLineStyle(),t.fill=null):i==="shadow"&&(t=r.getAreaStyle(),t.stroke=null),t}function iir(n,t,i,r,u){var w=i.get("value"),a=rir(w,t.axis,t.ecModel,i.get("seriesDataIndices"),{precision:i.get("label.precision"),formatter:i.get("label.formatter")}),f=i.getModel("label"),s=wc(f.get("padding")||0),v=f.getFont(),y=ue(a,v),e=u.position,h=y.width+s[1]+s[3],c=y.height+s[0]+s[2],p=u.align,l,o;p==="right"&&(e[0]-=h);p==="center"&&(e[0]-=h/2);l=u.verticalAlign;l==="bottom"&&(e[1]-=c);l==="middle"&&(e[1]-=c/2);ilu(e,h,c,r);o=f.get("backgroundColor");o&&o!=="auto"||(o=t.get("axisLine.lineStyle.color"));n.label={shape:{x:0,y:0,width:h,height:c,r:f.get("borderRadius")},position:e.slice(),style:{text:a,textFont:v,textFill:f.getTextColor(),textPosition:"inside",fill:o,stroke:f.get("borderColor")||"transparent",lineWidth:f.get("borderWidth")||0,shadowBlur:f.get("shadowBlur"),shadowColor:f.get("shadowColor"),shadowOffsetX:f.get("shadowOffsetX"),shadowOffsetY:f.get("shadowOffsetY")},z2:10}}function ilu(n,t,i,r){var u=r.getWidth(),f=r.getHeight();n[0]=Math.min(n[0]+t,u)-t;n[1]=Math.min(n[1]+i,f)-i;n[0]=Math.max(n[0],0);n[1]=Math.max(n[1],0)}function rir(n,i,r,u,f){var o,e,s;return n=i.scale.parse(n),o=i.scale.getLabel(n,{precision:f.precision}),e=f.formatter,e&&(s={value:uyt(i,n),seriesData:[]},t(u,function(n){var t=r.getSeriesByIndex(n.seriesIndex),u=n.dataIndexInside,i=t&&t.getDataParams(u);i&&s.seriesData.push(i)}),at(e)?o=e.replace("{value}",o):ar(e)&&(o=e(s))),o}function fdt(n,t,i){var r=cr();return uo(r,r,i.rotation),yu(r,r,i.position),ve([n.dataToCoord(t),(i.labelOffset||0)+(i.labelDirection||1)*(i.labelMargin||0)],r)}function uir(n,t,i,r,u,f){var e=kf.innerTextLayout(i.rotation,0,i.labelDirection);i.labelMargin=u.get("label.margin");iir(t,r,u,f,{position:fdt(r.axis,n,i),align:e.textAlign,verticalAlign:e.textVerticalAlign})}function edt(n,t,i){return i=i||0,{x1:n[i],y1:n[1-i],x2:t[i],y2:t[1-i]}}function fir(n,t,i){return i=i||0,{x:n[i],y:n[1-i],width:t[i],height:t[1-i]}}function eir(n,t,i,r,u,f){return{cx:n,cy:t,r0:i,r:r,startAngle:u,endAngle:f,clockwise:!0}}function sir(n,t){var i={};return i[t.dim+"AxisIndex"]=t.index,n.getCartesian(i)}function cir(n){return n.dim==="x"?0:1}function wft(n){return n.isHorizontal()?0:1}function odt(n,t){var i=n.getRect();return[i[lir[t]],i[lir[t]]+i[rlu[t]]]}function elu(n,t,i){var r=new et({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return sr(r,{shape:{width:n.width+20,height:n.height+20}},t,i),r}function yir(n,t,i){var u,f;if(n.count()){var l=t.coordinateSystem,o=t.getLayerSeries(),a=n.mapDimension("single"),v=n.mapDimension("value"),e=r(o,function(t){return r(t.indices,function(t){var i=l.dataToPoint(n.get(a,t));return i[1]=n.get(v,t),i})}),c=olu(e),y=c.y0,s=i/c.max,p=o.length,w=o[0].indices.length,h;for(u=0;u<w;++u)for(h=y[u]*s,n.setItemLayout(o[0].indices[u],{layerIndex:0,x:e[0][u][0],y0:h,y:e[0][u][1]*s}),f=1;f<p;++f)h+=e[f-1][u][1]*s,n.setItemLayout(o[f].indices[u],{layerIndex:f,x:e[f][u][0],y0:h,y:e[f][u][1]*s})}}function olu(n){for(var f,i,r,u,l,a=n.length,e=n[0].length,o=[],s=[],t=0,h={},c=0;c<e;++c){for(f=0,i=0;f<a;++f)i+=n[f][c][1];i>t&&(t=i);o.push(i)}for(r=0;r<e;++r)s[r]=(t-o[r])/2;for(t=0,u=0;u<e;++u)l=o[u]+s[u],l>t&&(t=l);return h.y0=s,h.max=t,h}function wir(n){var u=0,r;t(n.children,function(n){wir(n);var t=n.value;i(t)&&(t=t[0]);u+=t});r=n.value;i(r)&&(r=r[0]);(r==null||isNaN(r))&&(r=u);r<0&&(r=0);i(n.value)?n.value[0]=r:n.value=r}function dft(n,t,i){function f(){r.ignore=r.hoverIgnore}function o(){r.ignore=r.normalIgnore}var u,r;e.call(this);u=new so({z2:slu});u.seriesIndex=t.seriesIndex;r=new k({z2:hlu,silent:n.getModel("label").get("silent")});this.add(u);this.add(r);this.updateData(!0,n,"normal",t,i);this.on("emphasis",f).on("normal",o).on("mouseover",f).on("mouseout",o)}function clu(n,t,i){var u=n.getVisual("color"),f=n.getVisual("visualMeta"),r,e;return(f&&f.length!==0||(u=null),r=n.getModel("itemStyle").get("color"),r)?r:u?u:n.depth===0?i.option.color[0]:(e=i.option.color.length,r=i.option.color[llu(n)%e],r)}function llu(n){for(var t=n,i;t.depth>1;)t=t.parentNode;return i=n.getAncestors()[0],tt(i.children,t)}function alu(n,t,i){return i===kft.NONE?!1:i===kft.SELF?n===t:i===kft.ANCESTOR?n===t||n.isAncestorOf(t):n===t||n.isDescendantOf(t)}function gir(n,i){var r=n.children||[];n.children=ylu(r,i);r.length&&t(n.children,function(n){gir(n,i)})}function ylu(n,t){if(typeof t=="function")return n.sort(t);var i=t==="asc";return n.sort(function(n,t){var r=(n.getValue()-t.getValue())*(i?1:-1);return r===0?(n.dataIndex-t.dataIndex)*(i?-1:1):r})}function plu(n,t){return t=t||[0,0],r(["x","y"],function(i,r){var u=this.getAxis(i),f=t[r],e=n[r]/2;return u.type==="category"?u.getBandWidth():Math.abs(u.dataToCoord(f-e)-u.dataToCoord(f+e))},this)}function wlu(n,t){return t=t||[0,0],r([0,1],function(i){var f=t[i],e=n[i]/2,r=[],u=[];return r[i]=f-e,u[i]=f+e,r[1-i]=u[1-i]=t[1-i],Math.abs(this.dataToPoint(r)[i]-this.dataToPoint(u)[i])},this)}function blu(n,t){var i=this.getAxis(),r=t instanceof Array?t[0]:t,u=(n instanceof Array?n[0]:n)/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(r-u)-i.dataToCoord(r+u))}function klu(n,t){return r(["Radius","Angle"],function(i,r){var u=this["get"+i+"Axis"](),e=t[r],o=n[r]/2,s="dataTo"+i,f=u.type==="category"?u.getBandWidth():Math.abs(u[s](e-o)-u[s](e+o));return i==="Angle"&&(f=f*Math.PI/180),f},this)}function fau(n){var r=n.type,t,f;if(r==="path"){var i=n.shape,o=i.width!=null&&i.height!=null?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,e=srr(i);t=cw(e,null,o,i.layout||"center");t.__customPathData=e}else r==="image"?(t=new nr({}),t.__customImagePath=n.style.image):r==="text"?(t=new k({}),t.__customText=n.style.text):(f=vf[r.charAt(0).toUpperCase()+r.slice(1)],u&&g(f,'graphic type "'+r+'" can not be found.'),t=new f);return t.__customGraphicType=r,t.name=n.name,t}function eau(n,i,r,u,f,e,o){var h={},s=r.style||{},l,a,v,y;r.shape&&(h.shape=c(r.shape));r.position&&(h.position=r.position.slice());r.scale&&(h.scale=r.scale.slice());r.origin&&(h.origin=r.origin.slice());r.rotation&&(h.rotation=r.rotation);n.type==="image"&&r.style&&(l=h.style={},t(["x","y","width","height"],function(t){urr(t,l,s,n.style,e)}));n.type==="text"&&r.style&&(l=h.style={},t(["x","y"],function(t){urr(t,l,s,n.style,e)}),!s.hasOwnProperty("textFill")&&s.fill&&(s.textFill=s.fill),!s.hasOwnProperty("textStroke")&&s.stroke&&(s.textStroke=s.stroke));n.type!=="group"&&(n.useStyle(s),e&&(n.style.opacity=0,a=s.opacity,a==null&&(a=1),sr(n,{style:{opacity:a}},u,i)));e?n.attr(h):w(n,h,u,i);r.hasOwnProperty("z2")&&n.attr("z2",r.z2||0);r.hasOwnProperty("silent")&&n.attr("silent",r.silent);r.hasOwnProperty("invisible")&&n.attr("invisible",r.invisible);r.hasOwnProperty("ignore")&&n.attr("ignore",r.ignore);r.hasOwnProperty("info")&&n.attr("info",r.info);v=r.styleEmphasis;y=v===!1;n.__cusHasEmphStl&&v==null||!n.__cusHasEmphStl&&y||(utt(n,v),n.__cusHasEmphStl=!y);o&&vlt(n,!y)}function urr(n,t,i,r,u){i[n]==null||u||(t[n]=i[n],i[n]=r[n])}function frr(n,t,i,r){function w(n){n==null&&(n=e);v&&(h=t.getItemModel(n),y=h.getModel(iau),p=h.getModel(rau),c=t.getItemVisual(n,"color"),v=!1)}function d(n,i){return i==null&&(i=e),t.get(t.getDimension(n||0),i)}function nt(i,r){var u,f;return r==null&&(r=e),w(r),u=h.getModel(nau).getItemStyle(),c!=null&&(u.fill=c),f=t.getItemVisual(r,"opacity"),f!=null&&(u.opacity=f),ii(u,y,null,{autoColor:c,isRectText:!0}),u.text=y.getShallow("show")?vi(n.getFormattedLabel(r,"normal"),krt(t,r)):null,i&&o(u,i),u}function tt(i,r){r==null&&(r=e);w(r);var u=h.getModel(tau).getItemStyle();return ii(u,p,null,{isRectText:!0},!0),u.text=p.getShallow("show")?uc(n.getFormattedLabel(r,"emphasis"),n.getFormattedLabel(r,"normal"),krt(t,r)):null,i&&o(u,i),u}function it(n,i){return i==null&&(i=e),t.getItemVisual(i,n)}function rt(n){if(f.getBaseAxis){var t=f.getBaseAxis();return wdr(s({axis:t},n),r)}}function ut(){return i.getCurrentSeriesIndices()}function ft(n){return plt(n,i)}var l=n.get("renderItem"),f=n.coordinateSystem,a={};f&&(u&&(g(l,"series.render is required."),g(f.prepareCustoms||rrr[f.type],"This coordSys does not support custom series.")),a=f.prepareCustoms?f.prepareCustoms():rrr[f.type](f));var b=s({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:d,style:nt,styleEmphasis:tt,visual:it,barLayout:rt,currentSeriesIndices:ut,font:ft},a.api||{}),k={context:{},seriesId:n.id,seriesName:n.name,seriesIndex:n.seriesIndex,coordSys:a.coordSys,dataInsideLength:t.count(),encode:oau(n.getData())},e,v=!0,h,y,p,c;return function(n,i){return e=n,v=!0,l&&l(s({dataIndexInside:n,dataIndex:t.getRawIndex(n),actionType:i?i.type:null},k),b)}}function oau(n){var i={};return t(n.dimensions,function(t,r){var u=n.getDimensionInfo(t),f,e;u.isExtraCoord||(f=u.coordDim,e=i[f]=i[f]||[],e[u.coordDimIndex]=r)}),i}function cdt(n,t,i,r,u,f){return n=ldt(n,t,i,r,u,f,!0),n&&f.setItemGraphicEl(t,n),n}function ldt(n,t,i,r,u,f,e){var c=!i,l;i=i||{};var o=i.type,s=i.shape,h=i.style;if(n&&(c||o!=null&&o!==n.__customGraphicType||o==="path"&&lau(s)&&srr(s)!==n.__customPathData||o==="image"&&hrr(h,"image")&&h.image!==n.__customImagePath||o==="text"&&hrr(s,"text")&&h.text!==n.__customText)&&(u.remove(n),n=null),!c)return l=!n,n||(n=fau(i)),eau(n,t,i,r,f,l,e),o==="group"&&sau(n,t,i,r,f),u.add(n),n}function sau(n,t,i,r,f){var o=i.children,h=o?o.length:0,c=i.$mergeChildren,l=c==="byName"||i.diffChildrenByName,s=c===!1,e;if(h||l||s){if(l){hau({oldChildren:n.children()||[],newChildren:o||[],dataIndex:t,animatableModel:r,group:n,data:f});return}for(s&&n.removeAll(),e=0;e<h;e++)o[e]&&ldt(n.childAt(e),t,o[e],r,n,f);u&&g(!s||n.childCount()===e,"MUST NOT contain empty item in children array when `group.$mergeChildren` is `false`.")}}function hau(n){new vo(n.oldChildren,n.newChildren,err,err,n).add(orr).update(orr).remove(cau).execute()}function err(n,t){var i=n&&n.name;return i!=null?i:uau+t}function orr(n,t){var i=this.context,r=n!=null?i.newChildren[n]:null,u=t!=null?i.oldChildren[t]:null;ldt(u,i.dataIndex,r,i.animatableModel,i.group,i.data)}function cau(n){var t=this.context,i=t.oldChildren[n];i&&t.group.remove(i)}function srr(n){return n&&(n.pathData||n.d)}function lau(n){return n&&(n.hasOwnProperty("pathData")||n.hasOwnProperty("d"))}function hrr(n,t){return n&&n.hasOwnProperty(t)}function lrr(n,t,i,r){var e=i.type,o,f;u&&g(e,"graphic type MUST be set");o=vf[e.charAt(0).toUpperCase()+e.slice(1)];u&&g(o,"graphic type can not be found");f=new o(i);t.add(f);r.set(n,f);f.__ecGraphicId=n}function gft(n,t){var i=n&&n.parent;i&&(n.type==="group"&&n.traverse(function(n){gft(n,t)}),t.removeKey(n.__ecGraphicId),i.remove(n))}function aau(n){return n=o({},n),t(["id","parentId","$action","hv","bounding"].concat(doi),function(t){delete n[t]}),n}function arr(n,i){var r;return t(i,function(t){n[t]!=null&&n[t]!=="auto"&&(r=!0)}),r}function vau(n,t){var i=n.exist,r;t.id=n.keyInfo.id;!t.type&&i&&(t.type=i.type);t.parentId==null&&(r=t.parentOption,r?t.parentId=r.id:i&&(t.parentId=i.parentId));t.parentOption=null}function yau(n,t,i){var f=o({},i),r=n[t],e=i.$action||"merge",s;e==="merge"?r?(u&&(s=i.type,g(!s||r.type===s,'Please set $action: "replace" to change `type`')),v(r,f,!0),fh(r,f,{ignoreSize:!0}),goi(i,r)):n[t]=f:e==="replace"?n[t]=f:e==="remove"&&r&&(n[t]=null)}function pau(n,t){n&&(n.hv=t.hv=[arr(t,["left","right"]),arr(t,["top","bottom"])],n.type==="group"&&(n.width==null&&(n.width=t.width=0),n.height==null&&(n.height=t.height=0)))}function wau(n,t){var i=n.eventData;n.silent||n.ignore||i||(i=n.eventData={componentType:"graphic",componentIndex:t.componentIndex,name:n.name});i&&(i.info=n.info)}function vdt(n,i,r){var u={},e=n==="toggleSelected",f;return r.eachComponent("legend",function(r){e&&f!=null?r[f?"select":"unSelect"](i.name):(r[n](i.name),f=r.isSelected(i.name));var o=r.getData();t(o,function(n){var t=n.get("name"),i;t!=="\n"&&t!==""&&(i=r.isSelected(t),u[t]=u.hasOwnProperty(t)?u[t]&&i:i)})}),{name:i.name,selected:u}}function bau(n,t,i){var r=t.getBoxLayoutParams(),u=t.get("padding"),f={width:i.getWidth(),height:i.getHeight()},e=li(r,f,u);pw(t.get("orient"),n,t.get("itemGap"),e.width,e.height);vtt(n,r,f,u)}function vrr(n,t){var i=wc(t.get("padding")),r=t.getItemStyle(["color","opacity"]),n;return r.fill=t.get("backgroundColor"),new et({shape:{x:n.x-i[3],y:n.y-i[0],width:n.width+i[1]+i[3],height:n.height+i[0]+i[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1})}function yrr(n,t){t.dispatchAction({type:"legendToggleSelect",name:n})}function prr(n,t,i,r){var u=i.getZr().storage.getDisplayList()[0];u&&u.useHoverLayer||i.dispatchAction({type:"highlight",seriesName:n,name:t,excludeSeriesId:r})}function wrr(n,t,i,r){var u=i.getZr().storage.getDisplayList()[0];u&&u.useHoverLayer||i.dispatchAction({type:"downplay",seriesName:n,name:t,excludeSeriesId:r})}function krr(n,t,i){var u=n.getOrient(),r=[1,1];r[u.index]=0;fh(t,i,{type:"box",ignoreSize:r})}function ivu(n){var t="cubic-bezier(0.23, 1, 0.32, 1)",i="left "+n+"s "+t+",top "+n+"s "+t;return r(nvu,function(n){return n+"transition:"+i}).join(";")}function rvu(n){var t=[],i=n.get("fontSize"),r=n.getTextColor();return r&&t.push("color:"+r),t.push("font:"+n.getFont()),i&&t.push("line-height:"+Math.round(i*3/2)+"px"),nur(["decoration","align"],function(i){var r=n.get(i);r&&t.push("text-"+i+":"+r)}),t.join(";")}function uvu(n){var t=[],r=n.get("transitionDuration"),i=n.get("backgroundColor"),f=n.getModel("textStyle"),u=n.get("padding");return r&&t.push(ivu(r)),i&&(d.canvasSupported?t.push("background-Color:"+i):(t.push("background-Color:#"+iri(i)),t.push("filter:alpha(opacity=70)"))),nur(["width","color","radius"],function(i){var r="border-"+i,f=gau(r),u=n.get(f);u!=null&&t.push(r+":"+u+(i==="color"?"":"px"))}),t.push(rvu(f)),u!=null&&t.push("padding:"+wc(u).join("px ")+"px"),t.join(";")+";"}function bdt(n,t){var r,u,i;if(d.wxa)return null;r=document.createElement("div");u=this._zr=t.getZr();this.el=r;this._x=t.getWidth()/2;this._y=t.getHeight()/2;n.appendChild(r);this._container=n;this._show=!1;this._hideTimeout;i=this;r.onmouseenter=function(){i._enterable&&(clearTimeout(i._hideTimeout),i._show=!0);i._inContent=!0};r.onmousemove=function(t){if(t=t||window.event,!i._enterable){var r=u.handler;fc(n,t,!0);r.dispatch("mousemove",t)}};r.onmouseleave=function(){i._enterable&&i._show&&i.hideLater(i._hideDelay);i._inContent=!1}}function kdt(n){this._zr=n.getZr();this._show=!1;this._hideTimeout}function ddt(n){for(var i=n.pop(),t;n.length;)t=n.pop(),t&&(ut.isInstance(t)&&(t=t.get("tooltip",!0)),typeof t=="string"&&(t={formatter:t}),i=new ut(t,i,i.ecModel));return i}function rur(n,t){return n.dispatchAction||l(t.dispatchAction,t)}function evu(n,t,i,r,u,f,e){var o=i.getOuterSize(),s=o.width,h=o.height;return f!=null&&(n+s+f>r?n-=s+f:n+=f),e!=null&&(t+h+e>u?t-=h+e:t+=e),[n,t]}function ovu(n,t,i,r,u){var f=i.getOuterSize(),e=f.width,o=f.height;return n=Math.min(n+e,r)-e,t=Math.min(t+o,u)-o,n=Math.max(n,0),t=Math.max(t,0),[n,t]}function svu(n,t,i){var f=i[0],e=i[1],o=5,r=0,u=0,s=t.width,h=t.height;switch(n){case"inside":r=t.x+s/2-f/2;u=t.y+h/2-e/2;break;case"top":r=t.x+s/2-f/2;u=t.y-e-o;break;case"bottom":r=t.x+s/2-f/2;u=t.y+h+o;break;case"left":r=t.x-f-o;u=t.y+h/2-e/2;break;case"right":r=t.x+s+o;u=t.y+h/2-e/2}return[r,u]}function uur(n){return n==="center"||n==="middle"}function fur(n){return n.get("stack")||"__ec_stack_"+n.seriesIndex}function gdt(n){return n.dim}function hvu(n,t,i){var f=i.getWidth(),e=i.getHeight(),r={},u=cvu(hi(t.getSeriesByType(n),function(n){return!t.isSeriesFiltered(n)&&n.coordinateSystem&&n.coordinateSystem.type==="polar"}));t.eachSeriesByType(n,function(n){var e,et,l,i,y,o,p,w,b,k,a,ot,v,st;if(n.coordinateSystem.type==="polar"){var f=n.getData(),g=n.coordinateSystem,s=g.getBaseAxis(),t=fur(n),nt=u[gdt(s)][t],tt=nt.offset,it=nt.width,h=g.getOtherAxis(s),ht=n.coordinateSystem.cx,ct=n.coordinateSystem.cy,rt=n.get("barMinHeight")||0,ut=n.get("barMinAngle")||0;r[t]=r[t]||[];var ft=f.mapDimension(h.dim),lt=f.mapDimension(s.dim),d=yo(f,ft),c=h.getExtent()[0];for(e=0,et=f.count();e<et;e++)(l=f.get(ft,e),i=f.get(lt,e),isNaN(l))||(y=l>=0?"p":"n",o=c,d&&(r[t][i]||(r[t][i]={p:c,n:c}),o=r[t][i][y]),h.dim==="radius"?(a=h.dataToRadius(l)-c,ot=s.dataToAngle(i),Math.abs(a)<rt&&(a=(a<0?-1:1)*rt),p=o,w=o+a,b=ot-tt,k=b-it,d&&(r[t][i][y]=w)):(v=h.dataToAngle(l,!0)-c,st=s.dataToRadius(i),Math.abs(v)<ut&&(v=(v<0?-1:1)*ut),p=st+tt,w=p+it,b=o,k=o+v,d&&(r[t][i][y]=k)),f.setItemLayout(e,{cx:ht,cy:ct,r0:p,r:w,startAngle:-b*Math.PI/180,endAngle:-k*Math.PI/180}))}},this)}function cvu(n){var r={},i;return t(n,function(n){var v=n.getData(),y=n.coordinateSystem,e=y.getBaseAxis(),h=e.getExtent(),s=e.type==="category"?e.getBandWidth():Math.abs(h[1]-h[0])/v.count(),t=r[gdt(e)]||{bandWidth:s,remainedWidth:s,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},u=t.stacks,i;r[gdt(e)]=t;i=fur(n);u[i]||t.autoWidthCount++;u[i]=u[i]||{width:0,maxWidth:0};var o=f(n.get("barWidth"),s),c=f(n.get("barMaxWidth"),s),l=n.get("barGap"),a=n.get("barCategoryGap");o&&!u[i].width&&(o=Math.min(t.remainedWidth,o),u[i].width=o,t.remainedWidth-=o);c&&(u[i].maxWidth=c);l!=null&&(t.gap=l);a!=null&&(t.categoryGap=a)}),i={},t(r,function(n,r){var h,l,a;i[r]={};var c=n.stacks,y=n.bandWidth,v=f(n.categoryGap,y),e=f(n.gap,1),s=n.remainedWidth,o=n.autoWidthCount,u=(s-v)/(o+(o-1)*e);u=Math.max(u,0);t(c,function(n){var t=n.maxWidth;t&&t<u&&(t=Math.min(t,s),n.width&&(t=Math.min(t,n.width)),s-=t,n.width=t,o--)});u=(s-v)/(o+(o-1)*e);u=Math.max(u,0);h=0;t(c,function(n){n.width||(n.width=u);l=n;h+=n.width*(1+e)});l&&(h-=l.width*e);a=-h/2;t(c,function(n,t){i[r][t]=i[r][t]||{offset:a,width:n.width};a+=n.width*(1+e)})}),i}function tet(n,t){fi.call(this,"radius",n,t);this.type="category"}function iet(n,t){t=t||[0,360];fi.call(this,"angle",n,t);this.type="category"}function our(n,t){return t.type||(t.data?"category":"value")}function lvu(n,t,i){var u=t.get("center"),e=i.getWidth(),o=i.getHeight();n.cx=f(u[0],e);n.cy=f(u[1],o);var r=n.getRadiusAxis(),h=Math.min(e,o)/2,s=f(t.get("radius"),h);r.inverse?r.setExtent(s,0):r.setExtent(0,s)}function avu(n){var f=this,i=f.getAngleAxis(),u=f.getRadiusAxis(),r,e;i.scale.setExtent(Infinity,-Infinity);u.scale.setExtent(Infinity,-Infinity);n.eachSeries(function(n){if(n.coordinateSystem===f){var r=n.getData();t(r.mapDimension("radius",!0),function(n){u.scale.unionExtentFromData(r,ort(r,n))});t(r.mapDimension("angle",!0),function(n){i.scale.unionExtentFromData(r,ort(r,n))})}});sh(i.scale,i.model);sh(u.scale,u.model);i.type!=="category"||i.onBand||(r=i.getExtent(),e=360/i.scale.count(),i.inverse?r[1]+=e:r[1]-=e,i.setExtent(r[0],r[1]))}function sur(n,t){if(n.type=t.get("type"),n.scale=ty(t),n.onBand=t.get("boundaryGap")&&n.type==="category",n.inverse=t.get("inverse"),t.mainType==="angleAxis"){n.inverse^=t.get("clockwise");var i=t.get("startAngle");n.setExtent(i,i+(n.inverse?-360:360))}t.axis=n;n.model=t}function lur(n,t,i){t[1]>t[0]&&(t=t.slice().reverse());var r=n.coordToPoint([t[0],i]),u=n.coordToPoint([t[1],i]);return{x1:r[0],y1:r[1],x2:u[0],y2:u[1]}}function tgt(n){var t=n.getRadiusAxis();return t.inverse?0:1}function aur(n){var t=n[0],i=n[n.length-1];t&&i&&Math.abs(Math.abs(t.coord-i.coord)-360)<.0001&&n.pop()}function vvu(n,t,i){return{position:[n.cx,n.cy],rotation:i/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}function yvu(n,t,i,r,u){var y=t.axis,p=y.dataToCoord(n),o=r.getAngleAxis().getExtent()[0],w,f,h,c,e,b,l,s,a,v;return o=o/180*Math.PI,w=r.getRadiusAxis().getExtent(),y.dim==="radius"?(e=cr(),uo(e,e,o),yu(e,e,[r.cx,r.cy]),f=ve([p,-u],e),b=t.getModel("axisLabel").get("rotate")||0,l=kf.innerTextLayout(o,b*Math.PI/180,-1),h=l.textAlign,c=l.textVerticalAlign):(s=w[1],f=r.coordToPoint([s+u,p]),a=r.cx,v=r.cy,h=Math.abs(f[0]-a)/s<.3?"center":f[0]>a?"left":"right",c=Math.abs(f[1]-v)/s<.3?"middle":f[1]>v?"top":"bottom"),{position:f,align:h,verticalAlign:c}}function igt(n,i){i.update="updateView";rt(i,function(i,r){var u={};return r.eachComponent({mainType:"geo",query:i},function(r){r[n](i.name);var f=r.coordinateSystem;t(f.regions,function(n){u[n.name]=r.isSelected(n.name)||!1})}),{selected:u,name:i.name}})}function pvu(n){var i={};t(n,function(n){i[n]=1});n.length=0;t(i,function(t,i){n.push(i)})}function gur(n){if(n)for(var t in n)if(n.hasOwnProperty(t))return!0}function ugt(n,t,i){function u(){var n=function(){};return n.prototype.__hidden=n.prototype,new n}var r={};return rgt(t,function(t){var f=r[t]=u();rgt(n[t],function(n,r){if(ht.isValidType(r)){var u={type:r,visual:n};i&&i(u,t);f[r]=new ht(u);r==="opacity"&&(u=c(u),u.type="colorAlpha",f.__hidden.__alphaForOpacity=new ht(u))}})}),r}function nfr(n,i,r){var u;t(r,function(n){i.hasOwnProperty(n)&&gur(i[n])&&(u=!0)});u&&t(r,function(t){i.hasOwnProperty(t)&&gur(i[t])?n[t]=c(i[t]):delete n[t]})}function wvu(n,i,r,u,f,e){function c(n){return r.getItemVisual(o,n)}function l(n,t){r.setItemVisual(o,n,t)}function h(n,t){var a,h,b,v;if(o=e==null?n:t,a=r.getRawDataItem(o),!a||a.visualMap!==!1){var y=u.call(f,n),p=i[y],w=s[y];for(h=0,b=w.length;h<b;h++)v=w[h],p[v]&&p[v].applyVisual(n,c,l)}}var s={},o;t(n,function(n){var t=ht.prepareVisualTypes(i[n]);s[n]=t});e==null?r.each(h):r.each([e],h)}function bvu(n,i,r,u){function e(n,t){function p(n){return t.getItemVisual(e,n)}function w(n,i){t.setItemVisual(e,n,i)}var e,s,o,y,h;for(u!=null&&(u=t.getDimension(u));(e=n.next())!=null;){if(s=t.getRawDataItem(e),s&&s.visualMap===!1)return;var c=u!=null?t.get(u,e,!0):e,l=r(c),a=i[l],v=f[l];for(o=0,y=v.length;o<y;o++)h=v[o],a[h]&&a[h].applyVisual(c,p,w)}}var f={};return t(n,function(n){var t=ht.prepareVisualTypes(i[n]);f[n]=t}),{progress:e}}function tfr(n){var t=["x","y"],i=["width","height"];return{point:function(t,i,r){if(t){var u=r.range,f=t[n];return dk(f,u)}},rect:function(r,u,f){if(r){var o=f.range,e=[r[t[n]],r[t[n]]+r[i[n]]];return e[1]<e[0]&&e.reverse(),dk(e[0],o)||dk(e[1],o)||dk(o[0],e)||dk(o[1],e)}}}}function dk(n,t){return t[0]<=n&&n<=t[1]}function fet(n,t,i,r,u){for(var o,f=0,e=u[u.length-1];f<u.length;f++){if(o=u[f],kvu(n,t,i,r,o[0],o[1],e[0],e[1]))return!0;e=o}}function kvu(n,t,i,r,u,f,e,o){var s=fgt(i-n,u-e,r-t,f-o),h,c;return dvu(s)?!1:(h=fgt(u-n,u-e,f-t,f-o)/s,h<0||h>1)?!1:(c=fgt(i-n,u-n,r-t,f-t)/s,c<0||c>1)?!1:!0}function dvu(n){return n<=1e-6&&n>=-1e-6}function fgt(n,t,i,r){return n*r-t*i}function set(n,t,i){var r=this._targetInfoList=[],u={},f=ifr(t,n);dh(nyu,function(n,t){(!i||!i.include||eet(i.include,t)>=0)&&n(f,r,u)})}function ogt(n){return n[0]>n[1]&&n.reverse(),n}function ifr(n,t){return sn(n,t,{includeMainTypes:gvu})}function ffr(n,t,i,f){u&&g(i.type==="cartesian2d","lineX/lineY brush is available only in cartesian2d.");var e=i.getAxis(["x","y"][n]),s=ogt(r([0,1],function(n){return t?e.coordToData(e.toLocalCoord(f[n])):e.toGlobalCoord(e.dataToCoord(f[n]))})),o=[];return o[n]=s,o[1-n]=[NaN,NaN],{values:s,xyMinMax:o}}function efr(n,t,i,r){return[t[0]-r[n]*i[0],t[1]-r[n]*i[1]]}function tyu(n,t){var r=ofr(n),u=ofr(t),i=[r[0]/u[0],r[1]/u[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function ofr(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}function iyu(n,t,i,r,u){var f,e;u&&((f=n.getZr(),f[lgt])||(f[cgt]||(f[cgt]=ryu),e=nb(f,cgt,i,t),e(n,r)))}function ryu(n,t){if(!n.isDisposed()){var i=n.getZr();i[lgt]=!0;n.dispatchAction({type:"brushSelect",batch:t});i[lgt]=!1}}function cfr(n,t,i,r){for(var f,u=0,e=t.length;u<e;u++)if(f=t[u],n[f.brushType](r,i,f.selectors,f))return!0}function lfr(n){var i=n.brushSelector,r,u;return at(i)?(r=[],t(uet,function(n,t){r[t]=function(t,r,u,f){var e=r.getItemLayout(t);return n[i](e,u,f)}}),r):ar(i)?(u={},t(uet,function(n,t){u[t]=i}),u):i}function uyu(n,t){var r=n.option.seriesIndex;return r!=null&&r!=="all"&&(i(r)?tt(r,t)<0:t!==r)}function fyu(n){var i=n.selectors={};return t(uet[n.brushType],function(t,r){i[r]=function(r){return t(r,i,n)}}),n}function vfr(n){return new b(n[0][0],n[1][0],n[0][1]-n[0][0],n[1][1]-n[1][0])}function pfr(n,t){return v({brushType:n.brushType,brushMode:n.brushMode,transformable:n.transformable,brushStyle:new ut(n.brushStyle).getItemStyle(),removeOnClick:n.removeOnClick,z:n.z},t,!0)}function agt(n,t,i,r){r&&r.$from===n.id||this._brushController.setPanels(n.brushTargetManager.makePanelOpts(i)).enableBrush(n.brushOption).updateCovers(n.areas.slice())}function tp(n,t){vgt[n]=t}function wfr(n){return vgt[n]}function ygt(n,t,i){this.model=n;this.ecModel=t;this.api=i;this._brushType;this._brushMode}function fs(n){this._model=n}function kfr(n,t,i,r){var u=i.calendarModel,f=i.seriesModel,e=u?u.coordinateSystem:f?f.coordinateSystem:null;return e===this?e[n](r):null}function dfr(n,t){var u=n.cellSize,f;i(u)?u.length===1&&(u[1]=u[0]):u=n.cellSize=[u,u];f=r([0,1],function(n){return epr(t,n)&&(u[n]="auto"),u[n]!=null&&u[n]!=="auto"});fh(n,t,{type:"box",ignoreSize:f})}function oyu(n){return tt(ier,n)>=0}function syu(n,i){var u,f;return n=n.slice(),u=r(n,ltt),i=(i||[]).slice(),f=r(i,ltt),function(r,e){t(n,function(n,t){for(var s={name:n,capital:u[t]},o=0;o<i.length;o++)s[i[o]]=n+f[o];r.call(e,s)})}}function hyu(n,i,r){function f(n,t){return tt(t.nodes,n)>=0}function e(n,u){var f=!1;return i(function(i){t(r(n,i)||[],function(n){u.records[i.name][n]&&(f=!0)})}),f}function u(n,u){u.nodes.push(n);i(function(i){t(r(n,i)||[],function(n){u.records[i.name][n]=!0})})}return function(t){function s(n){!f(n,r)&&e(n,r)&&(u(n,r),o=!0)}var r={nodes:[],records:{}},o;if(i(function(n){r.records[n.name]={}}),!t)return r;u(t,r);do o=!1,n(s);while(o);return r}}function cyu(n,t,i){var r=[Infinity,-Infinity];return gh(i,function(n){var i=n.getData();i&&gh(i.mapDimension(t,!0),function(n){var t=i.getApproximateExtent(n);t[0]<r[0]&&(r[0]=t[0]);t[1]>r[1]&&(r[1]=t[1])})}),r[1]<r[0]&&(r=[NaN,NaN]),lyu(n,r),r}function lyu(n,t){var i=n.getAxisModel(),u=i.getMin(!0),f=i.get("type")==="category",e=f&&i.getCategories().length,r;return u!=null&&u!=="dataMin"&&typeof u!="function"?t[0]=u:f&&(t[0]=e>0?0:NaN),r=i.getMax(!0),r!=null&&r!=="dataMax"&&typeof r!="function"?t[1]=r:f&&(t[1]=e>0?e-1:NaN),i.get("scale",!0)||(t[0]>0&&(t[0]=0),t[1]<0&&(t[1]=0)),t}function uer(n,t){var e=n.getAxisModel(),r=n._percentWindow,u=n._valueWindow,i,f;r&&(i=glt(u,[0,500]),i=Math.min(i,20),f=t||r[0]===0&&r[1]===100,e.setRange(f?null:+u[0].toFixed(i),f?null:+u[1].toFixed(i)))}function ayu(n){var t=n._minMaxSpan={},i=n._dataZoomModel;gh(["min","max"],function(r){var u,f;t[r+"Span"]=i.get(r+"Span");u=i.get(r+"ValueSpan");u!=null&&(t[r+"ValueSpan"]=u,u=n.getAxisModel().axis.scale.parse(u),u!=null&&(f=n._dataExtent,t[r+"Span"]=ri(f[0]+u,f,[0,100],!0)))})}function fer(n){var t={};return ip(["start","end","startValue","endValue","throttle"],function(i){n.hasOwnProperty(i)&&(t[i]=n[i])}),t}function eer(n,t){var i=n._rangePropMode,r=n.get("rangeMode");ip([["start","startValue"],["end","endValue"]],function(n,u){var f=t[n[0]]!=null,e=t[n[1]]!=null;f&&!e?i[u]="percent":!f&&e?i[u]="value":r?i[u]=r[u]:f&&(i[u]="percent")})}function wyu(n){return{x:"y",y:"x",radius:"angle",angle:"radius"}[n]}function her(n){return n==="vertical"?"ns-resize":"ew-resize"}function byu(n,i){var u=ler(n),f=i.dataZoomId,e=i.coordId,r,o;t(u,function(n){var t=n.dataZoomInfos;t[f]&&tt(i.allCoordIds,e)<0&&(delete t[f],n.count--)});aer(u);r=u[e];r||(r=u[e]={coordId:e,dataZoomInfos:{},count:0},r.controller=dyu(n,r),r.dispatchAction=y(gyu,n));r.dataZoomInfos[f]||r.count++;r.dataZoomInfos[f]=i;o=npu(r.dataZoomInfos);r.controller.enable(o.controlType,o.opt);r.controller.setPointerChecker(i.containsPoint);nb(r,"dispatchAction",i.dataZoomModel.get("throttle",!0),"fixRate")}function kyu(n,i){var r=ler(n);t(r,function(n){n.controller.dispose();var t=n.dataZoomInfos;t[i]&&(delete t[i],n.count--)});aer(r)}function cer(n){return n.type+'\0_'+n.id}function ler(n){var t=n.getZr();return t[rnt]||(t[rnt]={})}function dyu(n,i){var r=new cy(n.getZr());return t(["pan","zoom","scrollMove"],function(n){r.on(n,function(r){var u=[];t(i.dataZoomInfos,function(t){if(r.isAvailableBehavior(t.dataZoomModel.option)){var e=(t.getRange||{})[n],f=e&&e(i.controller,r);!t.dataZoomModel.get("disabled",!0)&&f&&u.push({dataZoomId:t.dataZoomId,start:f[0],end:f[1]})}});u.length&&i.dispatchAction(u)})}),r}function aer(n){t(n,function(t,i){t.count||(t.controller.dispose(),delete n[i])})}function gyu(n,t){n.dispatchAction({type:"dataZoom",batch:t})}function npu(n){var i,r="type_",u={type_true:2,type_move:1,type_false:0,type_undefined:-1},f=!0;return t(n,function(n){var t=n.dataZoomModel,e=t.get("disabled",!0)?!1:t.get("zoomLock",!0)?"move":!0;u[r+e]>u[r+i]&&(i=e);f&=t.get("preventDefaultMouseMove",!0)}),{controlType:i,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!f}}}function yer(n){return function(t,i,r,u){var e=this._range,f=e.slice(),o=t.axisModels[0],s;if(o)return s=n(f,o,t,i,r,u),wl(s,f,[0,100],"all"),this._range=f,e[0]!==f[0]||e[1]!==f[1]?f:void 0}}function rp(n,t){return n&&n.hasOwnProperty&&n.hasOwnProperty(t)}function rpu(n,t,i,r){function l(n){return u[n]}function a(n,t){u[n]=t}for(var e,o,s=t.targetVisuals[r],h=ht.prepareVisualTypes(s),u={color:n.getData().getVisual("color")},f=0,c=h.length;f<c;f++)e=h[f],o=s[e==="opacity"?"__alphaForOpacity":e],o&&o.applyVisual(i,l,a);return u.color}function ker(n,t,i){var f;if(i[0]===i[1])return i.slice();var e=200,o=(i[1]-i[0])/e,r=i[0],u=[];for(f=0;f<=e&&r<i[1];f++)u.push(r),r+=o;return u.push(i[1]),u}function der(n,t,i){var f=n.option,o=f.align,r,u,e;if(o!=null&&o!=="auto")return o;var l={width:t.getWidth(),height:t.getHeight()},s=f.orient==="horizontal"?1:0,a=[["left","right","width"],["top","bottom","height"]],h=a[s],v=[0,null,10],c={};for(r=0;r<3;r++)c[a[1-s][r]]=v[r],c[h[r]]=r===2?i[0]:f[h[r]];return u=[["x","width",3],["y","height",0]][s],e=li(c,l,f.padding),h[(e.margin[u[2]]||0)+e[u[0]]+e[u[1]]*.5<l[u[1]]*.5?0:1]}function yet(n){return t(n||[],function(){n.dataIndex!=null&&(n.dataIndexInside=n.dataIndex,n.dataIndex=null)}),n}function wet(n,t,i,r){return new ku({shape:{points:n},draggable:!!i,cursor:t,drift:i,onmousemove:function(n){te(n.event)},ondragend:r})}function apu(n,t){return n===0?[[0,0],[t,0],[t,-t]]:[[0,0],[t,0],[t,t]]}function vpu(n,t,i,r){return n?[[0,-pet(t,td(i,0))],[ger,0],[0,pet(t,td(r-i,0))]]:[[0,0],[5,-5],[5,5]]}function ypu(n,t,i){var r=cpu/2,u=n.get("hoverLinkDataSize");return u&&(r=os(u,t,i,!0)/2),r}function nor(n){var t=n.get("hoverLinkOnHandle");return!!(t==null?n.get("realtime"):t)}function tor(n){return n==="vertical"?"ns-resize":"ew-resize"}function eor(n,t){var i=n.inverse;(n.orient==="vertical"?!i:i)&&t.reverse()}function ket(n){lc(n,"label",["show"])}function wpu(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}function bpu(n){return!isNaN(parseFloat(n.x))&&!isNaN(parseFloat(n.y))}function vnt(n,t,i,r,u,f){var e=[],c=yo(t,r),h=c?t.getCalculationInfo("stackResultDimension"):r,l=ynt(t,h,n),s=t.indicesOfNearest(h,l)[0],o;return e[u]=t.get(i,s),e[f]=t.get(r,s),o=hoi(t.get(r,s)),o=Math.min(o,20),o>=0&&(e[f]=+e[f].toFixed(o)),e}function rd(n,t){var e=n.getData(),s=n.coordinateSystem,o,r,l,h,f,u;if(t&&!bpu(t)&&!i(t.coord)&&s)if(o=s.dimensions,r=oor(t,e,s,n),t=c(t),t.type&&get[t.type]&&r.baseAxis&&r.valueAxis)l=ant(o,r.baseAxis.dim),h=ant(o,r.valueAxis.dim),t.coord=get[t.type](e,r.baseDataDim,r.valueDataDim,l,h),t.value=t.coord[h];else{for(f=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis],u=0;u<2;u++)get[f[u]]&&(f[u]=ynt(e,e.mapDimension(o[u]),f[u]));t.coord=f}return t}function oor(n,t,i,r){var u={};return n.valueIndex!=null||n.valueDim!=null?(u.valueDataDim=n.valueIndex!=null?t.getDimension(n.valueIndex):n.valueDim,u.valueAxis=i.getAxis(kpu(r,u.valueDataDim)),u.baseAxis=i.getOtherAxis(u.valueAxis),u.baseDataDim=t.mapDimension(u.baseAxis.dim)):(u.baseAxis=r.getBaseAxis(),u.valueAxis=i.getOtherAxis(u.baseAxis),u.baseDataDim=t.mapDimension(u.baseAxis.dim),u.valueDataDim=t.mapDimension(u.valueAxis.dim)),u}function kpu(n,t){var r=n.getData(),f=r.dimensions,i,u;for(t=r.getDimension(t),i=0;i<f.length;i++)if(u=r.getDimensionInfo(f[i]),u.name===t)return u.coordDim}function ud(n,t){return n&&n.containData&&t.coord&&!wpu(t)?n.containData(t.coord):!0}function sor(n,t,i,r){return r<2?n.coord&&n.coord[r]:n.value}function ynt(n,t,i){if(i==="average"){var r=0,u=0;return n.each(t,function(n){isNaN(n)||(r+=n,u++)}),r/u}return i==="median"?n.getMedian(t):n.getDataExtent(t,!0)[i==="max"?1:0]}function hor(n,t,i){var r=t.coordinateSystem;n.each(function(u){var h=n.getItemModel(u),e,o=f(h.get("x"),i.getWidth()),s=f(h.get("y"),i.getHeight()),c,l;isNaN(o)||isNaN(s)?t.getMarkerPosition?e=t.getMarkerPosition(n.getValues(n.dimensions,u)):r&&(c=n.get(r.dimensions[0],u),l=n.get(r.dimensions[1],u),e=r.dataToPoint([c,l])):e=[o,s];isNaN(o)||(e[0]=o);isNaN(s)||(e[1]=s);n.setItemLayout(u,e)})}function dpu(n,t,i){var e,f,u;return e=n?r(n&&n.dimensions,function(n){var i=t.getData().getDimensionInfo(t.getData().mapDimension(n))||{};return s({name:n},i)}):[{name:"value",type:"float"}],f=new ai(e,i),u=r(i.get("data"),y(rd,t)),n&&(u=hi(u,y(ud,n))),f.initData(u,null,n?sor:function(n){return n.value}),f}function tot(n){return!isNaN(n)&&!isFinite(n)}function lor(n,t,i,r){var u=1-n,f=r.dimensions[n];return tot(t[u])&&tot(i[u])&&t[n]===i[n]&&r.getAxis(f).containData(t[n])}function gpu(n,t){if(n.type==="cartesian2d"){var i=t[0].coord,r=t[1].coord;if(i&&r&&(lor(1,i,r,n)||lor(0,i,r,n)))return!0}return ud(n,t[0])&&ud(n,t[1])}function pnt(n,t,i,r,u){var o=r.coordinateSystem,l=n.getItemModel(t),e,s=f(l.get("x"),u.getWidth()),h=f(l.get("y"),u.getHeight());if(isNaN(s)||isNaN(h)){if(r.getMarkerPosition)e=r.getMarkerPosition(n.getValues(n.dimensions,t));else{var c=o.dimensions,y=n.get(c[0],t),p=n.get(c[1],t);e=o.dataToPoint([y,p])}if(o.type==="cartesian2d"){var a=o.getAxis("x"),v=o.getAxis("y"),c=o.dimensions;tot(n.get(c[0],t))?e[0]=a.toGlobalCoord(a.getExtent()[i?0:1]):tot(n.get(c[1],t))&&(e[1]=v.toGlobalCoord(v.getExtent()[i?0:1]))}isNaN(s)||(e[0]=s);isNaN(h)||(e[1]=h)}else e=[s,h];n.setItemLayout(t,e)}function nwu(n,t,i){var f,o;f=n?r(n&&n.dimensions,function(n){var i=t.getData().getDimensionInfo(t.getData().mapDimension(n))||{};return s({name:n},i)}):[{name:"value",type:"float"}];var h=new ai(f,i),c=new ai(f,i),e=new ai([],i),u=r(i.get("data"),y(cor,t,n,i));return n&&(u=hi(u,y(gpu,n))),o=n?sor:function(n){return n.value},h.initData(r(u,function(n){return n[0]}),null,o),c.initData(r(u,function(n){return n[1]}),null,o),e.initData(r(u,function(n){return n[2]})),e.hasItemOption=!0,{from:h,to:c,line:e}}function iot(n){return!isNaN(n)&&!isFinite(n)}function vor(n,t,i){var r=1-n;return iot(t[r])&&iot(i[r])}function twu(n,t){var i=t.coord[0],r=t.coord[1];return n.type==="cartesian2d"&&i&&r&&(vor(1,i,r,n)||vor(0,i,r,n))?!0:ud(n,{coord:i,x:t.x0,y:t.y0})||ud(n,{coord:r,x:t.x1,y:t.y1})}function yor(n,t,i,r,u){var o=r.coordinateSystem,l=n.getItemModel(t),e,s=f(l.get(i[0]),u.getWidth()),h=f(l.get(i[1]),u.getHeight());if(isNaN(s)||isNaN(h)){if(r.getMarkerPosition)e=r.getMarkerPosition(n.getValues(i,t));else{var a=n.get(i[0],t),v=n.get(i[1],t),c=[a,v];o.clampData&&o.clampData(c,c);e=o.dataToPoint(c,!0)}if(o.type==="cartesian2d"){var y=o.getAxis("x"),p=o.getAxis("y"),a=n.get(i[0],t),v=n.get(i[1],t);iot(a)?e[0]=y.toGlobalCoord(y.getExtent()[i[0]==="x0"?0:1]):iot(v)&&(e[1]=p.toGlobalCoord(p.getExtent()[i[1]==="y0"?0:1]))}isNaN(s)||(e[0]=s);isNaN(h)||(e[1]=h)}else e=[s,h];return e}function iwu(n,t,i){var f,u,e,o;return n?(f=r(n&&n.dimensions,function(n){var i=t.getData(),r=i.getDimensionInfo(i.mapDimension(n))||{};return s({name:n},r)}),u=new ai(r(["x0","y0","x1","y1"],function(n,t){return{name:n,type:f[t%2].type}}),i)):(f=[{name:"value",type:"float"}],u=new ai(f,i)),e=r(i.get("data"),y(aor,t,n,i)),n&&(e=hi(e,y(twu,n))),o=n?function(n,t,i,r){return n.coord[Math.floor(r/2)][r%2]}:function(n){return n.value},u.initData(e,null,o),u.hasItemOption=!0,u}function rwu(n){var u=n.type,f={number:"value",time:"time"},r;f[u]&&(n.axisType=f[u],delete n.type);wor(n);ia(n,"controlPosition")&&(r=n.controlStyle||(n.controlStyle={}),ia(r,"position")||(r.position=n.controlPosition),r.position!=="none"||ia(r,"show")||(r.show=!1,delete r.position),delete n.controlPosition);t(n.data||[],function(n){a(n)&&!i(n)&&(!ia(n,"value")&&ia(n,"name")&&(n.value=n.name),wor(n))})}function wor(n){var u=n.itemStyle||(n.itemStyle={}),r=u.emphasis||(u.emphasis={}),i=n.label||n.label||{},f=i.normal||(i.normal={}),e={normal:1,emphasis:1};t(i,function(n,t){e[t]||ia(f,t)||(f[t]=n)});r.label&&!ia(i,"emphasis")&&(i.emphasis=r.label,delete r.label)}function ia(n,t){return n.hasOwnProperty(t)}function uwu(n,t){return li(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},n.get("padding"))}function fwu(n,t,i,r){return cw(n.get(t).replace(/^path:\/\//,""),c(r||{}),new b(i[0],i[1],i[2],i[3]),"center")}function dor(n,t,i,r,u,e){var c=t.get("color"),l,a,o,s,h,y;return u?(u.setColor(c),i.add(u),e&&e.onUpdate(u)):(l=n.get("symbol"),u=cu(l,-1,-1,2,2,c),u.setStyle("strokeNoScale",!0),i.add(u),e&&e.onCreate(u)),a=t.getItemStyle(["color","symbol","symbolSize"]),u.setStyle(a),r=v({rectHover:!0,z2:100},r,!0),o=n.get("symbolSize"),o=o instanceof Array?o.slice():[+o,+o],o[0]/=2,o[1]/=2,r.scale=o,s=n.get("symbolOffset"),s&&(h=r.position=r.position||[0,0],h[0]+=f(s[0],o[0]),h[1]+=f(s[1],o[1])),y=n.get("symbolRotate"),r.rotation=(y||0)*Math.PI/180||0,u.attr(r),u.updateTransform(),u}function gor(n,t,i,r,u){if(!n.dragging){var f=r.getModel("checkpointStyle"),e=i.dataToCoord(r.getData().get(["value"],t));u||!f.get("animation",!0)?n.attr({position:[e,0]}):(n.stopAnimation(!0),n.animateTo({position:[e,0]},f.get("animationDuration",!0),f.get("animationEasing",!0)))}}function ewu(n){return n.indexOf("my")===0}function rot(n){this.model=n}function nti(n){this.model=n}function owu(n){var t={},i=[],r=[];return n.eachRawSeries(function(n){var f=n.coordinateSystem,u,e;f&&(f.type==="cartesian2d"||f.type==="polar")?(u=f.getBaseAxis(),u.type==="category"?(e=u.dim+"_"+u.index,t[e]||(t[e]={categoryAxis:u,valueAxis:f.getOtherAxis(u),series:[]},r.push({axisDim:u.dim,axisIndex:u.index})),t[e].series.push(n)):i.push(n)):i.push(n)}),{seriesGroupByCategoryAxis:t,other:i,meta:r}}function swu(n){var i=[];return t(n,function(n){var h=n.categoryAxis,c=n.valueAxis,l=c.dim,a=[" "].concat(r(n.series,function(n){return n.name})),u=[h.model.getCategories()],o,f,s,e;for(t(n.series,function(n){u.push(n.getRawData().mapArray(l,function(n){return n}))}),o=[a.join(ra)],f=0;f<u[0].length;f++){for(s=[],e=0;e<u.length;e++)s.push(u[e][f]);o.push(s.join(ra))}i.push(o.join("\n"))}),i.join("\n\n"+uot+"\n\n")}function hwu(n){return r(n,function(n){var t=n.getRawData(),i=[n.name],r=[];return t.each(t.dimensions,function(){for(var u=arguments.length,e=arguments[u-1],f=t.getName(e),n=0;n<u-1;n++)r[n]=arguments[n];i.push((f?f+ra:"")+r.join(ra))}),i.join("\n")}).join("\n\n"+uot+"\n\n")}function cwu(n){var t=owu(n);return{value:hi([swu(t.seriesGroupByCategoryAxis),hwu(t.other)],function(n){return n.replace(/[\n\t\s]/g,"")}).join("\n\n"+uot+"\n\n"),meta:t.meta}}function fot(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function lwu(n){var t=n.slice(0,n.indexOf("\n"));if(t.indexOf(ra)>=0)return!0}function awu(n){for(var u,t,f=n.split(/\n+/g),s=fot(f.shift()).split(eot),o=[],e=r(s,function(n){return{name:n,data:[]}}),i=0;i<f.length;i++)for(u=fot(f[i]).split(eot),o.push(u.shift()),t=0;t<u.length;t++)e[t]&&(e[t].data[i]=u[t]);return{series:e,categories:o}}function vwu(n){for(var f,e=n.split(/\n+/g),h=fot(e.shift()),i=[],t=0;t<e.length;t++){var r=fot(e[t]).split(eot),o="",u,s=!1;for(isNaN(r[0])?(s=!0,o=r[0],r=r.slice(1),i[t]={name:o,value:[]},u=i[t].value):u=i[t]=[],f=0;f<r.length;f++)u.push(+r[f]);u.length===1&&(s?i[t].value=u[0]:i[t]=u[0])}return{name:h,data:i}}function ywu(n,i){var u=n.split(new RegExp("\n*"+uot+"\n*","g")),r={series:[]};return t(u,function(n,t){var u;if(lwu(n)){var u=awu(n),f=i[t],e=f.axisDim+"Axis";f&&(r[e]=r[e]||[],r[e][f.axisIndex]={data:u.categories},r.series=r.series.concat(u.series))}else u=vwu(n),r.series.push(u)}),r}function ed(n){this._dom=null;this.model=n}function pwu(n,t){return r(n,function(n,r){var u=t&&t[r];return a(u)&&!i(u)?(a(n)&&!i(n)&&(n=n.value),s({value:n},u)):n})}function wwu(n,t){var i=uti(n);rti(t,function(t,r){for(var u=i.length-1,o,f,e;u>=0;u--)if(o=i[u],o[r])break;u<0&&(f=n.queryComponents({mainType:"dataZoom",subType:"select",id:r})[0],f&&(e=f.getPercentRange(),i[0][r]={dataZoomId:r,start:e[0],end:e[1]}))});i.push(t)}function bwu(n){var t=uti(n),r=t[t.length-1],i;return t.length>1&&t.pop(),i={},rti(r,function(n,r){for(var n,u=t.length-1;u>=0;u--)if(n=t[u][r],n){i[r]=n;break}}),i}function kwu(n){n[oot]=null}function dwu(n){return uti(n).length}function uti(n){var t=n[oot];return t||(t=n[oot]=[{}]),t}function fti(n,t,i){(this._brushController=new wy(i.getZr())).on("brush",l(this._onBrush,this)).mount();this._isZoomActive}function osr(n){var i={};return t(["xAxisIndex","yAxisIndex"],function(t){i[t]=n[t];i[t]==null&&(i[t]="all");(i[t]===!1||i[t]==="none")&&(i[t]=[])}),i}function tbu(n,t){n.setIconStatus("back",dwu(t)>1?"emphasis":"normal")}function ibu(n,t,i,r,u){var f=i._isZoomActive,e;r&&r.type==="takeGlobalCursor"&&(f=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1);i._isZoomActive=f;n.setIconStatus("zoom",f?"emphasis":"normal");e=new set(osr(n.option),t,{include:["grid"]});i._brushController.setPanels(e.makePanelOpts(u,function(n){return n.xAxisDeclared&&!n.yAxisDeclared?"lineX":!n.xAxisDeclared&&n.yAxisDeclared?"lineY":"rect"})).enableBrush(f?{brushType:"auto",brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}}:!1)}function eti(n){this.model=n}function oti(n){return sti(n)}function rbu(){if(!asr&&lu){asr=!0;var n=lu.styleSheets;n.length<31?lu.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):n[0].addRule(".zrvml","behavior:url(#default#VML)")}}function up(n){return parseInt(n,10)}function lot(n,t){var r,i,u,f;rbu();this.root=n;this.storage=t;r=document.createElement("div");i=document.createElement("div");r.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;";i.style.cssText="position:absolute;left:0;top:0;";n.appendChild(r);this._vmlRoot=i;this._vmlViewport=r;this.resize();u=t.delFromStorage;f=t.addToStorage;t.delFromStorage=function(n){u.call(t,n);n&&n.onRemove&&n.onRemove(i)};t.addToStorage=function(n){n.onAdd&&n.onAdd(i);f.call(t,n)};this._firstPaint=!0}function kbu(n){return function(){eo('In IE8.0 VML mode painter not support method "'+n+'"')}}function ea(n){return document.createElementNS(gsr,n)}function ne(n){return bti(n*1e4)/1e4}function dti(n){return n<ihr&&n>-ihr}function nku(n,t){var i=t?n.textFill:n.fill;return i!=null&&i!==sa}function tku(n,t){var i=t?n.textStroke:n.stroke;return i!=null&&i!==sa}function vot(n,t){t&&lt(n,"transform","matrix("+dbu.call(t,",")+")")}function lt(n,t,i){i&&(i.type==="linear"||i.type==="radial")||(typeof i=="string"&&i.indexOf("NaN")>-1&&console.log(i),n.setAttribute(t,i))}function iku(n,t,i){n.setAttributeNS("http://www.w3.org/1999/xlink",t,i)}function rhr(n,t,i,r){var u,f,e,o,s;nku(t,i)?(u=i?t.textFill:t.fill,u=u==="transparent"?sa:u,n.getAttribute("clip-path")!=="none"&&u===sa&&(u="rgba(0, 0, 0, 0.002)"),lt(n,"fill",u),lt(n,"fill-opacity",t.fillOpacity!=null?t.fillOpacity*t.opacity:t.opacity)):lt(n,"fill",sa);tku(t,i)?(f=i?t.textStroke:t.stroke,f=f==="transparent"?sa:f,lt(n,"stroke",f),e=i?t.textStrokeWidth:t.lineWidth,o=!i&&t.strokeNoScale?r.getLineScale():1,lt(n,"stroke-width",e/o),lt(n,"paint-order",i?"stroke":"fill"),lt(n,"stroke-opacity",t.strokeOpacity!=null?t.strokeOpacity:t.opacity),s=t.lineDash,s?(lt(n,"stroke-dasharray",t.lineDash.join(",")),lt(n,"stroke-dashoffset",bti(t.lineDashOffset||0))):lt(n,"stroke-dasharray",""),t.lineCap&&lt(n,"stroke-linecap",t.lineCap),t.lineJoin&&lt(n,"stroke-linejoin",t.lineJoin),t.miterLimit&&lt(n,"stroke-miterlimit",t.miterLimit)):lt(n,"stroke",sa)}function rku(n){for(var k,d,f,e,p,o=[],i=n.data,tt=n.len(),t=0;t<tt;){var it=i[t++],r="",s=0;switch(it){case oa.M:r="M";s=2;break;case oa.L:r="L";s=2;break;case oa.Q:r="Q";s=4;break;case oa.C:r="C";s=6;break;case oa.A:var w=i[t++],b=i[t++],l=i[t++],a=i[t++],h=i[t++],u=i[t++],rt=i[t++],v=i[t++],c=Math.abs(u),ut=dti(c-aot)&&!dti(c),y=!1;y=c>=aot?!0:dti(c)?!1:(u>-kti&&u<0||u>kti)==!!v;k=ne(w+l*thr(h));d=ne(b+a*nhr(h));ut&&(u=v?aot-.0001:-aot+.0001,y=!0,t===9&&o.push("M",k,d));f=ne(w+l*thr(h+u));e=ne(b+a*nhr(h+u));o.push("A",ne(l),ne(a),bti(rt*gbu),+y,+v,f,e);break;case oa.Z:r="Z";break;case oa.R:var f=ne(i[t++]),e=ne(i[t++]),g=ne(i[t++]),nt=ne(i[t++]);o.push("M",f,e,"L",f+g,e,"L",f+g,e+nt,"L",f,e+nt,"L",f,e)}for(r&&o.push(r),p=0;p<s;p++)o.push(ne(i[t++]))}return o.join(" ")}function uhr(n){return n==="middle"?"middle":n==="bottom"?"after-edge":"hanging"}function fhr(){}function uku(n,t){for(var e=0,s=t.length,o=0,f=0,i,u,r;e<s;e++)if(i=t[e],i.removed){for(u=[],r=f;r<f+i.count;r++)u.push(r);i.indices=u;f+=i.count}else{for(u=[],r=o;r<o+i.count;r++)u.push(r);i.indices=u;o+=i.count;i.added||(f+=i.count)}return t}function fku(n){return{newPos:n.newPos,components:n.components.slice(0)}}function bt(n,t,i,r,u){this._zrId=n;this._svgRoot=t;this._tagNames=typeof i=="string"?[i]:i;this._markLabel=r;this._domName=u||"_dom";this.nextId=0}function ha(n,t){bt.call(this,n,t,["linearGradient","radialGradient"],"__gradient_in_use__")}function hd(n,t){bt.call(this,n,t,"clipPath","__clippath_in_use__")}function ic(n,t){bt.call(this,n,t,["filter"],"__filter_in_use__","_shadowDom")}function ohr(n){return n&&(n.shadowBlur||n.shadowOffsetX||n.shadowOffsetY||n.textShadowBlur||n.textShadowOffsetX||n.textShadowOffsetY)}function bot(n){return parseInt(n,10)}function hku(n){return n instanceof nt?fp:n instanceof nr?yot:n instanceof k?pot:fp}function shr(n,t){return t&&n&&t.parentNode!==n}function kot(n,t,i){if(shr(n,t)&&i){var r=i.nextSibling;r?n.insertBefore(t,r):n.appendChild(t)}}function hhr(n,t){if(shr(n,t)){var i=n.firstChild;i?n.insertBefore(t,i):n.appendChild(t)}}function chr(n,t){t&&n&&t.parentNode===n&&n.removeChild(t)}function dot(n){return n.__textSvgEl}function got(n){return n.__svgEl}function cku(n){return function(){eo('In SVG mode painter not support method "'+n+'"')}}var ep,d,rc,ld,ust,eii,ost,sii,hii,hs,to,aii,cst,ci,pd,yii,te,vst,bii,ec,kii,hf,pu,ls,sc,dd,wp,wst,wa,dst,iht,kp,rri,fri,eri,ng,tg,eht,eo,gp,ie,e,sht,ga,og,hg,cg,lg,ag,nv,vg,yg,bg,rw,dg,gg,nn,uw,tn,yr,ect,fn,cct,rfi,efi,ys,ofi,dct,gct,tlt,ov,or,ru,uei,fei,k,cei,lei,rh,hw,wei,le,slt,hlt,soi,dlt,stt,loi,poi,rat,htt,oat,nsi,ytt,ptt,isi,dc,ktt,dtt,csi,nit,psi,rit,dsi,thi,ihi,fhi,uit,co,pat,yv,wt,wf,fit,eit,eu,dat,whi,wv,gat,lit,nci,lo,ici,rci,tl,fci,oci,tvt,ft,ao,ili,sli,cli,trt,yli,pli,ai,h,dli,rl,kvt,srt,hrt,crt,lrt,bf,lai,art,kai,dai,gai,nvi,brt,iy,eyt,fi,lvi,oyt,syt,rf,avi,el,gvi,wyt,ab,yb,byt,bo,kyt,fr,eyi,ko,kf,gyt,npt,sl,nut,nu,tut,ept,opt,spt,gyi,lpt,fut,eut,go,sy,hiu,opi,spi,hpi,cpi,apt,sut,ah,vh,hl,cl,vpi,ypt,bb,hut,cut,ppt,twi,uwi,fwi,ewi,owi,put,pwi,ibi,hwt,but,ly,ebi,vy,tu,bwt,bbi,rft,ns,yh,uki,fki,eki,oki,cki,aki,pl,vki,yki,ieu,pki,obt,kki,feu,dki,gki,sk,wl,lbt,udi,fdi,ngi,ck,egi,ogi,sgi,hgi,rkt,wou,vgi,ygi,wgi,bgi,kgi,okt,dgi,ini,ckt,lkt,wh,hni,cni,vkt,rs,vk,yk,pkt,bh,wkt,bkt,vni,yni,wk,oir,hir,bft,air,vir,pir,kh,sdt,kir,hdt,dir,nrr,trr,irr,crr,adt,brr,pdt,eur,kk,ret,ngt,hur,cur,vur,yur,pur,wur,bur,kur,dur,rgt,uet,gl,hgt,afr,yfr,eyu,vgt,bfr,gk,het,pgt,gfr,ner,ter,ier,wgt,rnt,aet,unt,fnt,ent,cnt,ior,ror,uor,ppu,lnt,bet,id,ant,det,get,not,cor,aor,wnt,por,bnt,bor,kor,fd,nsr,gnt,tsr,isr,tti,iti,rsr,eot,rti,oot,ua,esr,ssr,hsr,sti,ksr,hot,cot,gsr,fp,yot,cd;typeof window!="undefined"?ep=window.__DEV__:typeof global!="undefined"&&(ep=global.__DEV__);typeof ep=="undefined"&&(ep=!0);var u=ep,lhr=2311,nii=function(){return lhr++},tii={};tii=typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:typeof document=="undefined"&&typeof self!="undefined"?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:typeof navigator=="undefined"?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:ahr(navigator.userAgent);d=tii;var iii={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},rii={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},op=Object.prototype.toString,sp=Array.prototype,vhr=sp.forEach,yhr=sp.filter,hp=sp.slice,phr=sp.map,whr=sp.reduce,nst={};rc=function(){return nst.createCanvas()};nst.createCanvas=function(){return document.createElement("canvas")};ust="__ec_primitive__";ad.prototype={constructor:ad,get:function(n){return this.data.hasOwnProperty(n)?this.data[n]:null},set:function(n,t){return this.data[n]=t},each:function(n,t){t!==void 0&&(n=l(n,t));for(var i in this.data)this.data.hasOwnProperty(i)&&n(this.data[i],i)},removeKey:function(n){delete this.data[n]}};eii=(Object.freeze||Object)({$override:uii,clone:c,merge:v,mergeAll:cp,extend:o,defaults:s,createCanvas:rc,getContext:fii,indexOf:tt,inherits:ct,mixin:st,isArrayLike:ge,each:t,map:r,reduce:ca,filter:hi,find:bhr,bind:l,curry:y,isArray:i,isFunction:ar,isString:at,isObject:a,isBuiltInObject:tst,isTypedArray:of,isDom:la,eqNaN:lp,retrieve:kt,retrieve2:vi,retrieve3:uc,slice:ist,normalizeCssArray:rst,assert:g,trim:vu,setAsPrimitive:fst,isPrimitive:aa,createHashMap:p,concatArray:est,noop:di});ost=typeof Float32Array=="undefined"?Array:Float32Array;sii=vp;hii=hst;hs=yp;to=cii;aii=(Object.freeze||Object)({create:ss,copy:gi,clone:sf,set:oii,add:sst,scaleAndAdd:ap,sub:no,len:vp,length:sii,lenSquare:hst,lengthSquare:hii,mul:khr,div:dhr,dot:ghr,scale:vd,normalize:va,distance:yp,dist:hs,distanceSquare:cii,distSquare:to,negate:ncr,lerp:lii,applyTransform:vt,min:io,max:ro});yd.prototype={constructor:yd,_dragStart:function(n){var t=n.target;t&&t.draggable&&(this._draggingTarget=t,t.dragging=!0,this._x=n.offsetX,this._y=n.offsetY,this.dispatchToElement(ya(t,n),"dragstart",n.event))},_drag:function(n){var i=this._draggingTarget,t,r;if(i){var u=n.offsetX,f=n.offsetY,e=u-this._x,o=f-this._y;this._x=u;this._y=f;i.drift(e,o,n);this.dispatchToElement(ya(i,n),"drag",n.event);t=this.findHover(u,f,i).target;r=this._dropTarget;this._dropTarget=t;i!==t&&(r&&t!==r&&this.dispatchToElement(ya(r,n),"dragleave",n.event),t&&t!==r&&this.dispatchToElement(ya(t,n),"dragenter",n.event))}},_dragEnd:function(n){var t=this._draggingTarget;t&&(t.dragging=!1);this.dispatchToElement(ya(t,n),"dragend",n.event);this._dropTarget&&this.dispatchToElement(ya(this._dropTarget,n),"drop",n.event);this._draggingTarget=null;this._dropTarget=null}};cst=Array.prototype.slice;ci=function(n){this._$handlers={};this._$eventProcessor=n};ci.prototype={constructor:ci,one:function(n,t,i,r){var u=this._$handlers,f;if(typeof t=="function"&&(r=i,i=t,t=null),!i||!n)return this;for(t=vii(this,t),u[n]||(u[n]=[]),f=0;f<u[n].length;f++)if(u[n][f].h===i)return this;return u[n].push({h:i,one:!0,query:t,ctx:r||this}),this},on:function(n,t,i,r){var u=this._$handlers,f;if(typeof t=="function"&&(r=i,i=t,t=null),!i||!n)return this;for(t=vii(this,t),u[n]||(u[n]=[]),f=0;f<u[n].length;f++)if(u[n][f].h===i)return this;return u[n].push({h:i,one:!1,query:t,ctx:r||this}),this},isSilent:function(n){var t=this._$handlers;return t[n]&&t[n].length},off:function(n,t){var i=this._$handlers,u,r,f;if(!n)return this._$handlers={},this;if(t){if(i[n]){for(u=[],r=0,f=i[n].length;r<f;r++)i[n][r].h!==t&&u.push(i[n][r]);i[n]=u}i[n]&&i[n].length===0&&delete i[n]}else delete i[n];return this},trigger:function(n){var f=this._$handlers[n],r=this._$eventProcessor,i,e,o,u,t;if(f)for(i=arguments,e=i.length,e>3&&(i=cst.call(i,1)),o=f.length,u=0;u<o;){if(t=f[u],r&&r.filter&&t.query!=null&&!r.filter(n,t.query)){u++;continue}switch(e){case 1:t.h.call(t.ctx);break;case 2:t.h.call(t.ctx,i[1]);break;case 3:t.h.call(t.ctx,i[1],i[2]);break;default:t.h.apply(t.ctx,i)}t.one?(f.splice(u,1),o--):u++}return r&&r.afterTrigger&&r.afterTrigger(n),this},triggerWithContext:function(n){var e=this._$handlers[n],r=this._$eventProcessor,t,o,f,s,u,i;if(e)for(t=arguments,o=t.length,o>4&&(t=cst.call(t,1,t.length-1)),f=t[t.length-1],s=e.length,u=0;u<s;){if(i=e[u],r&&r.filter&&i.query!=null&&!r.filter(n,i.query)){u++;continue}switch(o){case 1:i.h.call(f);break;case 2:i.h.call(f,t[1]);break;case 3:i.h.call(f,t[1],t[2]);break;default:i.h.apply(f,t)}i.one?(e.splice(u,1),s--):u++}return r&&r.afterTrigger&&r.afterTrigger(n),this}};pd=typeof window!="undefined"&&!!window.addEventListener;yii=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;te=pd?function(n){n.preventDefault();n.stopPropagation();n.cancelBubble=!0}:function(n){n.returnValue=!1;n.cancelBubble=!0};vst="silent";wii.prototype.dispose=function(){};bii=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];ec=function(n,t,i,r){ci.call(this);this.storage=n;this.painter=t;this.painterRoot=r;i=i||new wii;this.proxy=null;this._hovered={};this._lastTouchMoment;this._lastX;this._lastY;yd.call(this);this.setHandlerProxy(i)};ec.prototype={constructor:ec,setHandlerProxy:function(n){this.proxy&&this.proxy.dispose();n&&(t(bii,function(t){n.on&&n.on(t,this[t],this)},this),n.handler=this);this.proxy=n},mousemove:function(n){var e=n.zrX,o=n.zrY,t=this._hovered,i=t.target;i&&!i.__zr&&(t=this.findHover(t.x,t.y),i=t.target);var u=this._hovered=this.findHover(e,o),r=u.target,f=this.proxy;f.setCursor&&f.setCursor(r?r.cursor:"default");i&&r!==i&&this.dispatchToElement(t,"mouseout",n);this.dispatchToElement(u,"mousemove",n);r&&r!==i&&this.dispatchToElement(u,"mouseover",n)},mouseout:function(n){this.dispatchToElement(this._hovered,"mouseout",n);var t=n.toElement||n.relatedTarget,i;do t=t&&t.parentNode;while(t&&t.nodeType!=9&&!(i=t===this.painterRoot));i||this.trigger("globalout",{event:n})},resize:function(){this._hovered={}},dispatch:function(n,t){var i=this[n];i&&i.call(this,t)},dispose:function(){this.proxy.dispose();this.storage=this.proxy=this.painter=null},setCursorStyle:function(n){var t=this.proxy;t.setCursor&&t.setCursor(n)},dispatchToElement:function(n,t,i){var r,f,u;if(n=n||{},r=n.target,!r||!r.silent){for(f="on"+t,u=rcr(t,n,i);r;)if(r[f]&&(u.cancelBubble=r[f].call(r,u)),r.trigger(t,u),r=r.parent,u.cancelBubble)break;u.cancelBubble||(this.trigger(t,u),this.painter&&this.painter.eachOtherLayer(function(n){typeof n[f]=="function"&&n[f].call(n,u);n.trigger&&n.trigger(t,u)}))}},findHover:function(n,t,i){for(var e,u=this.storage.getDisplayList(),f={x:n,y:t},r=u.length-1;r>=0;r--)if(u[r]!==i&&!u[r].ignore&&(e=fcr(u[r],n,t))&&(f.topTarget||(f.topTarget=u[r]),e!==vst)){f.target=u[r];break}return f}};t(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){ec.prototype[n]=function(t){var r=this.findHover(t.zrX,t.zrY),i=r.target;if(n==="mousedown")this._downEl=i,this._downPoint=[t.zrX,t.zrY],this._upEl=i;else if(n==="mouseup")this._upEl=i;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||hs(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(r,n,t)}});st(ec,ci);st(ec,yd);kii=typeof Float32Array=="undefined"?Array:Float32Array;var ecr=(Object.freeze||Object)({create:cr,identity:pa,copy:bd,mul:cs,translate:yu,rotate:uo,scale:pp,invert:kd,clone:dii}),yst=pa,gii=5e-5;hf=function(n){n=n||{};n.position||(this.position=[0,0]);n.rotation==null&&(this.rotation=0);n.scale||(this.scale=[1,1]);this.origin=this.origin||null};pu=hf.prototype;pu.transform=null;pu.needLocalTransform=function(){return oc(this.rotation)||oc(this.position[0])||oc(this.position[1])||oc(this.scale[0]-1)||oc(this.scale[1]-1)};ls=[];pu.updateTransform=function(){var i=this.parent,u=i&&i.transform,r=this.needLocalTransform(),n=this.transform,t;if(!(r||u)){n&&yst(n);return}if(n=n||cr(),r?this.getLocalTransform(n):yst(n),u&&(r?cs(n,i.transform,n):bd(n,i.transform)),this.transform=n,t=this.globalScaleRatio,t!=null&&t!==1){this.getGlobalScale(ls);var f=ls[0]<0?-1:1,e=ls[1]<0?-1:1,o=((ls[0]-f)*t+f)/ls[0]||0,s=((ls[1]-e)*t+e)/ls[1]||0;n[0]*=o;n[1]*=o;n[2]*=s;n[3]*=s}this.invTransform=this.invTransform||cr();kd(this.invTransform,n)};pu.getLocalTransform=function(n){return hf.getLocalTransform(this,n)};pu.setTransform=function(n){var i=this.transform,t=n.dpr||1;i?n.setTransform(t*i[0],t*i[1],t*i[2],t*i[3],t*i[4],t*i[5]):n.setTransform(t,0,0,t,0,0)};pu.restoreTransform=function(n){var t=n.dpr||1;n.setTransform(t,0,0,t,0,0)};sc=[];dd=cr();pu.setLocalTransform=function(n){if(n){var t=n[0]*n[0]+n[1]*n[1],i=n[2]*n[2]+n[3]*n[3],r=this.position,u=this.scale;oc(t-1)&&(t=Math.sqrt(t));oc(i-1)&&(i=Math.sqrt(i));n[0]<0&&(t=-t);n[3]<0&&(i=-i);r[0]=n[4];r[1]=n[5];u[0]=t;u[1]=i;this.rotation=Math.atan2(-n[1]/i,n[0]/t)}};pu.decomposeTransform=function(){var i,t,n;this.transform&&(i=this.parent,t=this.transform,i&&i.transform&&(cs(sc,i.invTransform,t),t=sc),n=this.origin,n&&(n[0]||n[1])&&(dd[4]=n[0],dd[5]=n[1],cs(sc,t,dd),sc[4]-=n[0],sc[5]-=n[1],t=sc),this.setLocalTransform(t))};pu.getGlobalScale=function(n){var t=this.transform;return(n=n||[],!t)?(n[0]=1,n[1]=1,n):(n[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),n[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(n[0]=-n[0]),t[3]<0&&(n[1]=-n[1]),n)};pu.transformCoordToLocal=function(n,t){var i=[n,t],r=this.invTransform;return r&&vt(i,i,r),i};pu.transformCoordToGlobal=function(n,t){var i=[n,t],r=this.transform;return r&&vt(i,i,r),i};hf.getLocalTransform=function(n,t){t=t||[];yst(t);var i=n.origin,f=n.scale||[1,1],r=n.rotation||0,u=n.position||[0,0];return i&&(t[4]-=i[0],t[5]-=i[1]),pp(t,t,f),r&&uo(t,t,r),i&&(t[4]+=i[0],t[5]+=i[1]),t[4]+=u[0],t[5]+=u[1],t};wp={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return.5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var i,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,i=r/4):i=r*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(n-=1))*Math.sin((n-i)*2*Math.PI/r)))},elasticOut:function(n){var i,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,i=r/4):i=r*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*n)*Math.sin((n-i)*2*Math.PI/r)+1)},elasticInOut:function(n){var i,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,i=r/4):i=r*Math.asin(1/t)/(2*Math.PI),(n*=2)<1)?-.5*t*Math.pow(2,10*(n-=1))*Math.sin((n-i)*2*Math.PI/r):t*Math.pow(2,-10*(n-=1))*Math.sin((n-i)*2*Math.PI/r)*.5+1},backIn:function(n){var t=1.70158;return n*n*((t+1)*n-t)},backOut:function(n){var t=1.70158;return--n*n*((t+1)*n+t)+1},backInOut:function(n){var t=1.70158*1.525;return(n*=2)<1?.5*n*n*((t+1)*n-t):.5*((n-=2)*n*((t+1)*n+t)+2)},bounceIn:function(n){return 1-wp.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?wp.bounceIn(n*2)*.5:wp.bounceOut(n*2-1)*.5+.5}};pst.prototype={constructor:pst,step:function(n,t){var i;if(this._initialized||(this._startTime=n+this._delay,this._initialized=!0),this._paused){this._pausedTime+=t;return}if(i=(n-this._startTime-this._pausedTime)/this._life,!(i<0)){i=Math.min(i,1);var r=this.easing,u=typeof r=="string"?wp[r]:r,f=typeof u=="function"?u(i):i;return(this.fire("frame",f),i==1)?this.loop?(this.restart(n),"restart"):(this._needsRemove=!0,"destroy"):null}},restart:function(n){var t=(n-this._startTime-this._pausedTime)%this._life;this._startTime=n-t+this.gap;this._pausedTime=0;this._needsRemove=!1},fire:function(n,t){n="on"+n;this[n]&&this[n](this._target,t)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};wst=function(){this.head=null;this.tail=null;this._len=0};wa=wst.prototype;wa.insert=function(n){var t=new nri(n);return this.insertEntry(t),t};wa.insertEntry=function(n){this.head?(this.tail.next=n,n.prev=this.tail,n.next=null,this.tail=n):this.head=this.tail=n;this._len++};wa.remove=function(n){var t=n.prev,i=n.next;t?t.next=i:this.head=i;i?i.prev=t:this.tail=t;n.next=n.prev=null;this._len--};wa.len=function(){return this._len};wa.clear=function(){this.head=this.tail=null;this._len=0};var nri=function(n){this.value=n;this.next;this.prev},bst=function(n){this._list=new wst;this._map={};this._maxSize=n||10;this._lastRemovedEntry=null},kst=bst.prototype;kst.put=function(n,t){var u=this._list,f=this._map,o=null,e,i,r;return f[n]==null&&(e=u.len(),i=this._lastRemovedEntry,e>=this._maxSize&&e>0&&(r=u.head,u.remove(r),delete f[r.key],o=r.value,this._lastRemovedEntry=r),i?i.value=t:i=new nri(t),i.key=n,u.insertEntry(i),f[n]=i),o};kst.get=function(n){var t=this._map[n],i=this._list;if(t!=null)return t!==i.tail&&(i.remove(t),i.insertEntry(t)),t.value};kst.clear=function(){this._list.clear();this._map={}};dst={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};iht=new bst(20);kp=null;rri=dp;fri=uri;eri=(Object.freeze||Object)({parse:wu,lift:tri,toHex:iri,fastLerp:dp,fastMapToColor:rri,lerp:uri,mapToColor:fri,modifyHSL:da,modifyAlpha:gd,stringify:fo});ng=Array.prototype.slice;tg=function(n,t,i,r){this._tracks={};this._target=n;this._loop=t||!1;this._getter=i||hcr;this._setter=r||ccr;this._clipCount=0;this._delay=0;this._doneList=[];this._onframeList=[];this._clipList=[]};tg.prototype={when:function(n,t){var r=this._tracks,i,u;for(i in t)if(t.hasOwnProperty(i)){if(!r[i]){if(r[i]=[],u=this._getter(this._target,i),u==null)continue;n!==0&&r[i].push({time:0,value:acr(u)})}r[i].push({time:n,value:t[i]})}return this},during:function(n){return this._onframeList.push(n),this},pause:function(){for(var n=0;n<this._clipList.length;n++)this._clipList[n].pause();this._paused=!0},resume:function(){for(var n=0;n<this._clipList.length;n++)this._clipList[n].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){var t,i,n;for(this._tracks={},this._clipList.length=0,t=this._doneList,i=t.length,n=0;n<i;n++)t[n].call(this)},start:function(n,t){var e=this,r=0,s=function(){r--;r||e._doneCallback()},u,f,i,o;for(f in this._tracks)this._tracks.hasOwnProperty(f)&&(i=ycr(this,n,s,this._tracks[f],f,t),i&&(this._clipList.push(i),r++,this.animation&&this.animation.addClip(i),u=i));return u&&(o=u.onframe,u.onframe=function(n,t){o(n,t);for(var i=0;i<e._onframeList.length;i++)e._onframeList[i](n,t)}),r||this._doneCallback(),this},stop:function(n){for(var r,t=this._clipList,u=this.animation,i=0;i<t.length;i++){if(r=t[i],n)r.onframe(this._target,1);u&&u.removeClip(r)}t.length=0},delay:function(n){return this._delay=n,this},done:function(n){return n&&this._doneList.push(n),this},getClips:function(){return this._clipList}};eht=1;typeof window!="undefined"&&(eht=Math.max(window.devicePixelRatio||1,1));var ari=0,ig=eht,oht=function(){};ari===1?oht=function(){for(var n in arguments)throw new Error(arguments[n]);}:ari>1&&(oht=function(){for(var n in arguments)console.log(arguments[n])});eo=oht;gp=function(){this.animators=[]};gp.prototype={constructor:gp,animate:function(n,t){var f,h=!1,u=this,c=this.__zr,e,i,o,l,s,r;if(n){for(e=n.split("."),i=u,h=e[0]==="shape",o=0,l=e.length;o<l;o++)i&&(i=i[e[o]]);i&&(f=i)}else f=u;if(!f){eo('Property "'+n+'" is not existed in element '+u.id);return}return s=u.animators,r=new tg(f,t),r.during(function(){u.dirty(h)}).done(function(){s.splice(tt(s,r),1)}),s.push(r),c&&c.animation.addAnimator(r),r},stopAnimation:function(n){for(var t=this.animators,r=t.length,i=0;i<r;i++)t[i].stop(n);return t.length=0,this},animateTo:function(n,t,i,r,u,f){vri(this,n,t,i,r,u,f)},animateFrom:function(n,t,i,r,u,f){vri(this,n,t,i,r,u,f,!0)}};ie=function(n){hf.call(this,n);ci.call(this,n);gp.call(this,n);this.id=n.id||nii()};ie.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(n,t){switch(this.draggable){case"horizontal":t=0;break;case"vertical":n=0}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]);i[4]+=n;i[5]+=t;this.decomposeTransform();this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(){},attrKV:function(n,t){if(n==="position"||n==="scale"||n==="origin"){if(t){var i=this[n];i||(i=this[n]=[]);i[0]=t[0];i[1]=t[1]}}else this[n]=t},hide:function(){this.ignore=!0;this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1;this.__zr&&this.__zr.refresh()},attr:function(n,t){if(typeof n=="string")this.attrKV(n,t);else if(a(n))for(var i in n)n.hasOwnProperty(i)&&this.attrKV(i,n[i]);return this.dirty(!1),this},setClipPath:function(n){var t=this.__zr;t&&n.addSelfToZr(t);this.clipPath&&this.clipPath!==n&&this.removeClipPath();this.clipPath=n;n.__zr=t;n.__clipTarget=this;this.dirty(!1)},removeClipPath:function(){var n=this.clipPath;n&&(n.__zr&&n.removeSelfFromZr(n.__zr),n.__zr=null,n.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(n){var t,i;if(this.__zr=n,t=this.animators,t)for(i=0;i<t.length;i++)n.animation.addAnimator(t[i]);this.clipPath&&this.clipPath.addSelfToZr(n)},removeSelfFromZr:function(n){var t,i;if(this.__zr=null,t=this.animators,t)for(i=0;i<t.length;i++)n.animation.removeAnimator(t[i]);this.clipPath&&this.clipPath.removeSelfFromZr(n)}};st(ie,gp);st(ie,hf);st(ie,ci);var rg=vt,ug=Math.min,fg=Math.max;b.prototype={constructor:b,union:function(n){var t=ug(n.x,this.x),i=ug(n.y,this.y);this.width=fg(n.x+n.width,this.x+this.width)-t;this.height=fg(n.y+n.height,this.y+this.height)-i;this.x=t;this.y=i},applyTransform:function(){var n=[],t=[],i=[],r=[];return function(u){if(u){n[0]=i[0]=this.x;n[1]=r[1]=this.y;t[0]=r[0]=this.x+this.width;t[1]=i[1]=this.y+this.height;rg(n,n,u);rg(t,t,u);rg(i,i,u);rg(r,r,u);this.x=ug(n[0],t[0],i[0],r[0]);this.y=ug(n[1],t[1],i[1],r[1]);var f=fg(n[0],t[0],i[0],r[0]),e=fg(n[1],t[1],i[1],r[1]);this.width=f-this.x;this.height=e-this.y}}}(),calculateTransform:function(n){var i=this,r=n.width/i.width,u=n.height/i.height,t=cr();return yu(t,t,[-i.x,-i.y]),pp(t,t,[r,u]),yu(t,t,[n.x,n.y]),t},intersect:function(n){if(!n)return!1;n instanceof b||(n=b.create(n));var t=this,i=t.x,r=t.x+t.width,u=t.y,f=t.y+t.height,e=n.x,o=n.x+n.width,s=n.y,h=n.y+n.height;return!(r<e||o<i||f<s||h<u)},contain:function(n,t){var i=this;return n>=i.x&&n<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},clone:function(){return new b(this.x,this.y,this.width,this.height)},copy:function(n){this.x=n.x;this.y=n.y;this.width=n.width;this.height=n.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}};b.create=function(n){return new b(n.x,n.y,n.width,n.height)};e=function(n){n=n||{};ie.call(this,n);for(var t in n)n.hasOwnProperty(t)&&(this[t]=n[t]);this._children=[];this.__storage=null;this.__dirty=!0};e.prototype={constructor:e,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(n){return this._children[n]},childOfName:function(n){for(var i=this._children,t=0;t<i.length;t++)if(i[t].name===n)return i[t]},childCount:function(){return this._children.length},add:function(n){return n&&n!==this&&n.parent!==this&&(this._children.push(n),this._doAdd(n)),this},addBefore:function(n,t){if(n&&n!==this&&n.parent!==this&&t&&t.parent===this){var i=this._children,r=i.indexOf(t);r>=0&&(i.splice(r,0,n),this._doAdd(n))}return this},_doAdd:function(n){n.parent&&n.parent.remove(n);n.parent=this;var t=this.__storage,i=this.__zr;t&&t!==n.__storage&&(t.addToStorage(n),n instanceof e&&n.addChildrenToStorage(t));i&&i.refresh()},remove:function(n){var i=this.__zr,t=this.__storage,r=this._children,u=tt(r,n);return u<0?this:(r.splice(u,1),n.parent=null,t&&(t.delFromStorage(n),n instanceof e&&n.delChildrenFromStorage(t)),i&&i.refresh(),this)},removeAll:function(){for(var i=this._children,r=this.__storage,n,t=0;t<i.length;t++)n=i[t],r&&(r.delFromStorage(n),n instanceof e&&n.delChildrenFromStorage(r)),n.parent=null;return i.length=0,this},eachChild:function(n,t){for(var u,r=this._children,i=0;i<r.length;i++)u=r[i],n.call(t,u,i);return this},traverse:function(n,t){for(var r,i=0;i<this._children.length;i++)r=this._children[i],n.call(t,r),r.type==="group"&&r.traverse(n,t);return this},addChildrenToStorage:function(n){for(var i,t=0;t<this._children.length;t++)i=this._children[t],n.addToStorage(i),i instanceof e&&i.addChildrenToStorage(n)},delChildrenFromStorage:function(n){for(var i,t=0;t<this._children.length;t++)i=this._children[t],n.delFromStorage(i),i instanceof e&&i.delChildrenFromStorage(n)},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(n){for(var r,u,e,t=null,i=new b(0,0,0,0),o=n||this._children,s=[],f=0;f<o.length;f++)(r=o[f],r.ignore||r.invisible)||(u=r.getBoundingRect(),e=r.getLocalTransform(s),e?(i.copy(u),i.applyTransform(e),t=t||i.clone(),t.union(i)):(t=t||u.clone(),t.union(u)));return t||i}};ct(e,ie);sht=32;ga=7;og=function(){this._roots=[];this._displayList=[];this._displayListLen=0};og.prototype={constructor:og,traverse:function(n,t){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(n,t)},getDisplayList:function(n,t){return t=t||!1,n&&this.updateDisplayList(t),this._displayList},updateDisplayList:function(n){var i,r,t,u;for(this._displayListLen=0,i=this._roots,r=this._displayList,t=0,u=i.length;t<u;t++)this._updateAndAddDisplayable(i[t],null,n);r.length=this._displayListLen;d.canvasSupported&&eg(r,kri)},_updateAndAddDisplayable:function(n,t,i){var f,r,e,o,u,s;if(!n.ignore||i){if(n.beforeUpdate(),n.__dirty&&n.update(),n.afterUpdate(),f=n.clipPath,f)for(t=t?t.slice():[],r=f,e=n;r;)r.parent=e,r.updateTransform(),t.push(r),e=r,r=r.clipPath;if(n.isGroup){for(o=n._children,u=0;u<o.length;u++)s=o[u],n.__dirty&&(s.__dirty=!0),this._updateAndAddDisplayable(s,t,i);n.__dirty=!1}else n.__clipPaths=t,this._displayList[this._displayListLen++]=n}},addRoot:function(n){n.__storage!==this&&(n instanceof e&&n.addChildrenToStorage(this),this.addToStorage(n),this._roots.push(n))},delRoot:function(n){var i,t,u,r;if(n==null){for(t=0;t<this._roots.length;t++)i=this._roots[t],i instanceof e&&i.delChildrenFromStorage(this);this._roots=[];this._displayList=[];this._displayListLen=0;return}if(n instanceof Array){for(t=0,u=n.length;t<u;t++)this.delRoot(n[t]);return}r=tt(this._roots,n);r>=0&&(this.delFromStorage(n),this._roots.splice(r,1),n instanceof e&&n.delChildrenFromStorage(this))},addToStorage:function(n){return n&&(n.__storage=this,n.dirty(!1)),this},delFromStorage:function(n){return n&&(n.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:kri};var kcr={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},lht=function(n,t,i){return kcr.hasOwnProperty(t)?i*n.dpr:i},sg=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],vs=function(n){this.extendFrom(n,!1)};for(vs.prototype={constructor:vs,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(n,t,i){for(var s,f,h,r=this,u=i&&i.style,e=!u,o=0;o<sg.length;o++)s=sg[o],f=s[0],(e||r[f]!==u[f])&&(n[f]=lht(n,f,r[f]||s[1]));(e||r.fill!==u.fill)&&(n.fillStyle=r.fill);(e||r.stroke!==u.stroke)&&(n.strokeStyle=r.stroke);(e||r.opacity!==u.opacity)&&(n.globalAlpha=r.opacity==null?1:r.opacity);(e||r.blend!==u.blend)&&(n.globalCompositeOperation=r.blend||"source-over");this.hasStroke()&&(h=r.lineWidth,n.lineWidth=h/(this.strokeNoScale&&t&&t.getLineScale?t.getLineScale():1))},hasFill:function(){var n=this.fill;return n!=null&&n!=="none"},hasStroke:function(){var n=this.stroke;return n!=null&&n!=="none"&&this.lineWidth>0},extendFrom:function(n,t){if(n)for(var i in n)n.hasOwnProperty(i)&&(t===!0||(t===!1?!this.hasOwnProperty(i):n[i]!=null))&&(this[i]=n[i])},set:function(n,t){typeof n=="string"?this[n]=t:this.extendFrom(n,!0)},clone:function(){var n=new this.constructor;return n.extendFrom(this,!0),n},getGradient:function(n,t,i){for(var e=t.type==="radial"?gcr:dcr,f=e(n,t,i),u=t.colorStops,r=0;r<u.length;r++)f.addColorStop(u[r].offset,u[r].color);return f}},hg=vs.prototype,cg=0;cg<sg.length;cg++)lg=sg[cg],lg[0]in hg||(hg[lg[0]]=lg[1]);vs.getGradient=hg.getGradient;ag=function(n,t){this.image=n;this.repeat=t;this.type="pattern"};ag.prototype.getCanvasPattern=function(n){return n.createPattern(this.image,this.repeat||"repeat")};nv=function(n,t,i){var u,r;i=i||ig;typeof n=="string"?u=dri(n,t,i):a(n)&&(u=n,n=u.id);this.id=n;this.dom=u;r=u.style;r&&(u.onselectstart=nlr,r["-webkit-user-select"]="none",r["user-select"]="none",r["-webkit-touch-callout"]="none",r["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",r.padding=0,r.margin=0,r["border-width"]=0);this.domBack=null;this.ctxBack=null;this.painter=t;this.config=null;this.clearColor=0;this.motionBlur=!1;this.lastFrameAlpha=.7;this.dpr=i};nv.prototype={constructor:nv,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d");this.ctx.dpr=this.dpr},createBackBuffer:function(){var n=this.dpr;this.domBack=dri("back-"+this.id,this.painter,n);this.ctxBack=this.domBack.getContext("2d");n!=1&&this.ctxBack.scale(n,n)},resize:function(n,t){var i=this.dpr,r=this.dom,u=r.style,f=this.domBack;u&&(u.width=n+"px",u.height=t+"px");r.width=n*i;r.height=t*i;f&&(f.width=n*i,f.height=t*i,i!=1&&this.ctxBack.scale(i,i))},clear:function(n,t){var e=this.dom,i=this.ctx,r=e.width,u=e.height,t=t||this.clearColor,o=this.motionBlur&&!n,c=this.lastFrameAlpha,s=this.dpr,f,h;o&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,r/s,u/s));i.clearRect(0,0,r,u);t&&t!=="transparent"&&(t.colorStops?(f=t.__canvasGradient||vs.getGradient(i,t,{x:0,y:0,width:r,height:u}),t.__canvasGradient=f):t.image&&(f=ag.prototype.getCanvasPattern.call(t,i)),i.save(),i.fillStyle=f||t,i.fillRect(0,0,r,u),i.restore());o&&(h=this.domBack,i.save(),i.globalAlpha=c,i.drawImage(h,0,0,r,u),i.restore())}};vg=typeof window!="undefined"&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){setTimeout(n,16)};yg=new bst(50);var wg={},aht=0,rlr=5e3,vht=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,tv="12px sans-serif",yht={};yht.measureText=function(n,t){var i=fii();return i.font=t||tv,i.measureText(n)};var hlr={left:1,right:1,center:1},clr={top:1,bottom:1,middle:1},oui=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]];bg=new b;rw=function(){};rw.prototype={constructor:rw,drawRectText:function(n,t){var i=this.style,r,u;(t=i.textRect||t,this.__dirty&&iw(i,!0),r=i.text,r!=null&&(r+=""),pui(r,i))&&(n.save(),u=this.transform,i.transformText?this.setTransform(n):u&&(bg.copy(t),bg.applyTransform(u),t=bg),hui(this,n,r,i,t),n.restore())}};vr.prototype={constructor:vr,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(){},afterBrush:function(){},brush:function(){},getBoundingRect:function(){},contain:function(n,t){return this.rectContain(n,t)},traverse:function(n,t){n.call(t,this)},rectContain:function(n,t){var i=this.transformCoordToLocal(n,t),r=this.getBoundingRect();return r.contain(i[0],i[1])},dirty:function(){this.__dirty=this.__dirtyText=!0;this._rect=null;this.__zr&&this.__zr.refresh()},animateStyle:function(n){return this.animate("style",n)},attrKV:function(n,t){n!=="style"?ie.prototype.attrKV.call(this,n,t):this.style.set(t)},setStyle:function(n,t){return this.style.set(n,t),this.dirty(!1),this},useStyle:function(n){return this.style=new vs(n,this),this.dirty(!1),this}};ct(vr,ie);st(vr,rw);nr.prototype={constructor:nr,type:"image",brush:function(n,t){var i=this.style,l=i.image,r,e,o;if(i.bind(n,this,t),r=this._image=gri(l,this._image,this,this.onload),r&&pg(r)){var s=i.x||0,h=i.y||0,u=i.width,f=i.height,c=r.width/r.height;if(u==null&&f!=null?u=f*c:f==null&&u!=null?f=u/c:u==null&&f==null&&(u=r.width,f=r.height),this.setTransform(n),i.sWidth&&i.sHeight)e=i.sx||0,o=i.sy||0,n.drawImage(r,e,o,i.sWidth,i.sHeight,s,h,u,f);else if(i.sx&&i.sy){var e=i.sx,o=i.sy,a=u-e,v=f-o;n.drawImage(r,e,o,a,v,s,h,u,f)}else n.drawImage(r,s,h,u,f);i.text!=null&&(this.restoreTransform(n),this.drawRectText(n,this.getBoundingRect()))}},getBoundingRect:function(){var n=this.style;return this._rect||(this._rect=new b(n.x||0,n.y||0,n.width||0,n.height||0)),this._rect}};ct(nr,vr);var wui=1e5,hc=314159,bui=.01,plr=.001;dg=new b(0,0,0,0);gg=new b(0,0,0,0);nn=function(n,t,i){var s,r,h,c,l,f,e,u;this.type="canvas";s=!n.nodeName||n.nodeName.toUpperCase()==="CANVAS";this._opts=i=o({},i||{});this.dpr=i.devicePixelRatio||ig;this._singleCanvas=s;this.root=n;r=n.style;r&&(r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]=r["user-select"]=r["-webkit-touch-callout"]="none",n.innerHTML="");this.storage=t;h=this._zlevelList=[];c=this._layers={};this._layerConfig={};this._needsManuallyCompositing=!1;s?(f=n.width,e=n.height,i.width!=null&&(f=i.width),i.height!=null&&(e=i.height),this.dpr=i.devicePixelRatio||1,n.width=f*this.dpr,n.height=e*this.dpr,this._width=f,this._height=e,u=new nv(n,this,this.dpr),u.__builtin__=!0,u.initContext(),c[hc]=u,u.zlevel=hc,h.push(hc),this._domRoot=n):(this._width=this._getSize(0),this._height=this._getSize(1),l=this._domRoot=glr(this._width,this._height),n.appendChild(l));this._hoverlayer=null;this._hoverElements=[]};nn.prototype={constructor:nn,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},refresh:function(n){var e=this.storage.getDisplayList(!0),r=this._zlevelList,t,u,i,f;for(this._redrawId=Math.random(),this._paintList(e,n,this._redrawId),t=0;t<r.length;t++)u=r[t],i=this._layers[u],!i.__builtin__&&i.refresh&&(f=t===0?this._backgroundColor:null,i.refresh(f));return this.refreshHover(),this},addHover:function(n,t){if(!n.__hoverMir){var i=new n.constructor({style:n.style,shape:n.shape,z:n.z,z2:n.z2,silent:n.silent});return i.__from=n,n.__hoverMir=i,t&&i.setStyle(t),this._hoverElements.push(i),i}},removeHover:function(n){var r=n.__hoverMir,t=this._hoverElements,i=tt(t,r);i>=0&&t.splice(i,1);n.__hoverMir=null},clearHover:function(){for(var i,n=this._hoverElements,t=0;t<n.length;t++)i=n[t].__from,i&&(i.__hoverMir=null);n.length=0},refreshHover:function(){var u=this._hoverElements,f=u.length,t=this._hoverlayer,e,r,i,n;if(t&&t.clear(),f){for(eg(u,this.storage.displayableSortFunc),t||(t=this._hoverlayer=this.getLayer(wui)),e={},t.ctx.save(),r=0;r<f;){if(i=u[r],n=i.__from,!(n&&n.__zr)){u.splice(r,1);n.__hoverMir=null;f--;continue}r++;n.invisible||(i.transform=n.transform,i.invTransform=n.invTransform,i.__clipPaths=n.__clipPaths,this._doPaintEl(i,t,!0,e))}t.ctx.restore()}},getHoverLayer:function(){return this.getLayer(wui)},_paintList:function(n,t,i){var r,u;this._redrawId===i&&(t=t||!1,this._updateLayerStatus(n),r=this._doPaintList(n,t),this._needsManuallyCompositing&&this._compositeManually(),r||(u=this,vg(function(){u._paintList(n,t,i)})))},_compositeManually:function(){var n=this.getLayer(hc).ctx,t=this._domRoot.width,i=this._domRoot.height;n.clearRect(0,0,t,i);this.eachBuiltinLayer(function(r){r.virtual&&n.drawImage(r.dom,0,0,t,i)})},_doPaintList:function(n,i){for(var v,r,c,e,a,f,o,b,s=[],h=0;h<this._zlevelList.length;h++)v=this._zlevelList[h],r=this._layers[v],r.__builtin__&&r!==this._hoverlayer&&(r.__dirty||i)&&s.push(r);for(c=!0,e=0;e<s.length;e++){var r=s[e],l=r.ctx,y={};l.save();var u=i?r.__startIndex:r.__drawIndex,p=!i&&r.incremental&&Date.now,k=p&&Date.now(),w=r.zlevel===this._zlevelList[0]?this._backgroundColor:null;for(r.__startIndex===r.__endIndex?r.clear(!1,w):u===r.__startIndex&&(a=n[u],a.incremental&&a.notClear&&!i||r.clear(!1,w)),u===-1&&(console.error("For some unknown reason. drawIndex is -1"),u=r.__startIndex),f=u;f<r.__endIndex;f++)if(o=n[f],this._doPaintEl(o,r,i,y),o.__dirty=o.__dirtyText=!1,p&&(b=Date.now()-k,b>15))break;r.__drawIndex=f;r.__drawIndex<r.__endIndex&&(c=!1);y.prevElClipPaths&&l.restore();l.restore()}return d.wxa&&t(this._layers,function(n){n&&n.ctx&&n.ctx.draw&&n.ctx.draw()}),c},_doPaintEl:function(n,t,i,r){var u=t.ctx,e=n.transform,f;!(t.__dirty||i)||n.invisible||n.style.opacity===0||e&&!e[0]&&!e[3]||n.culling&&blr(n,this._width,this._height)||(f=n.__clipPaths,(!r.prevElClipPaths||klr(f,r.prevElClipPaths))&&(r.prevElClipPaths&&(t.ctx.restore(),r.prevElClipPaths=null,r.prevEl=null),f&&(u.save(),dlr(f,u),r.prevElClipPaths=f)),n.beforeBrush&&n.beforeBrush(u),n.brush(u,r.prevEl||null),r.prevEl=n,n.afterBrush&&n.afterBrush(u))},getLayer:function(n,t){this._singleCanvas&&!this._needsManuallyCompositing&&(n=hc);var i=this._layers[n];return i||(i=new nv("zr_"+n,this,this.dpr),i.zlevel=n,i.__builtin__=!0,this._layerConfig[n]&&v(i,this._layerConfig[n],!0),t&&(i.virtual=t),this.insertLayer(n,i),i.initContext()),i},insertLayer:function(n,t){var f=this._layers,r=this._zlevelList,s=r.length,e=null,i=-1,u=this._domRoot,o;if(f[n]){eo("ZLevel "+n+" has been used already");return}if(!wlr(t)){eo("Layer of zlevel "+n+" is not valid");return}if(s>0&&n>r[0]){for(i=0;i<s-1;i++)if(r[i]<n&&r[i+1]>n)break;e=f[r[i]]}r.splice(i+1,0,n);f[n]=t;t.virtual||(e?(o=e.dom,o.nextSibling?u.insertBefore(t.dom,o.nextSibling):u.appendChild(t.dom)):u.firstChild?u.insertBefore(t.dom,u.firstChild):u.appendChild(t.dom))},eachLayer:function(n,t){for(var u=this._zlevelList,r,i=0;i<u.length;i++)r=u[i],n.call(t,this._layers[r],r)},eachBuiltinLayer:function(n,t){for(var f=this._zlevelList,r,u,i=0;i<f.length;i++)u=f[i],r=this._layers[u],r.__builtin__&&n.call(t,r,u)},eachOtherLayer:function(n,t){for(var f=this._zlevelList,r,u,i=0;i<f.length;i++)u=f[i],r=this._layers[u],r.__builtin__||n.call(t,r,u)},getLayers:function(){return this._layers},_updateLayerStatus:function(n){function o(n){u&&(u.__endIndex!==n&&(u.__dirty=!0),u.__endIndex=n)}var u,e,i,r,f,t;if(this.eachBuiltinLayer(function(n){n.__dirty=n.__used=!1}),this._singleCanvas)for(i=1;i<n.length;i++)if(r=n[i],r.zlevel!==n[i-1].zlevel||r.incremental){this._needsManuallyCompositing=!0;break}for(u=null,e=0,i=0;i<n.length;i++)r=n[i],f=r.zlevel,r.incremental?(t=this.getLayer(f+plr,this._needsManuallyCompositing),t.incremental=!0,e=1):t=this.getLayer(f+(e>0?bui:0),this._needsManuallyCompositing),t.__builtin__||eo("ZLevel "+f+" has been used by unkown layer "+t.id),t!==u&&(t.__used=!0,t.__startIndex!==i&&(t.__dirty=!0),t.__startIndex=i,t.__drawIndex=t.incremental?-1:i,o(i),u=t),r.__dirty&&(t.__dirty=!0,t.incremental&&t.__drawIndex<0&&(t.__drawIndex=i));o(i);this.eachBuiltinLayer(function(n){!n.__used&&n.getElementCount()>0&&(n.__dirty=!0,n.__startIndex=n.__endIndex=n.__drawIndex=0);n.__dirty&&n.__drawIndex<0&&(n.__drawIndex=n.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(n){n.clear()},setBackgroundColor:function(n){this._backgroundColor=n},configLayer:function(n,t){var i,r,u,f;if(t)for(i=this._layerConfig,i[n]?v(i[n],t,!0):i[n]=t,r=0;r<this._zlevelList.length;r++)u=this._zlevelList[r],(u===n||u===n+bui)&&(f=this._layers[u],v(f,i[n],!0))},delLayer:function(n){var i=this._layers,r=this._zlevelList,t=i[n];t&&(t.dom.parentNode.removeChild(t.dom),delete i[n],r.splice(tt(r,n),1))},resize:function(n,i){var r,u,f;if(this._domRoot.style){if(r=this._domRoot,r.style.display="none",u=this._opts,n!=null&&(u.width=n),i!=null&&(u.height=i),n=this._getSize(0),i=this._getSize(1),r.style.display="",this._width!=n||i!=this._height){r.style.width=n+"px";r.style.height=i+"px";for(f in this._layers)this._layers.hasOwnProperty(f)&&this._layers[f].resize(n,i);t(this._progressiveLayers,function(t){t.resize(n,i)});this.refresh(!0)}this._width=n;this._height=i}else{if(n==null||i==null)return;this._width=n;this._height=i;this.getLayer(hc).resize(n,i)}return this},clearLayer:function(n){var t=this._layers[n];t&&t.clear()},dispose:function(){this.root.innerHTML="";this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(n){var t,u,r,i,f;if(n=n||{},this._singleCanvas&&!this._compositeManually)return this._layers[hc].dom;if(t=new nv("image",this,n.pixelRatio||this.dpr),t.initContext(),t.clear(!1,n.backgroundColor||this._backgroundColor),n.pixelRatio<=this.dpr){this.refresh();var e=t.dom.width,o=t.dom.height,s=t.ctx;this.eachLayer(function(n){n.__builtin__?s.drawImage(n.dom,0,0,e,o):n.renderToCanvas&&(t.ctx.save(),n.renderToCanvas(t.ctx),t.ctx.restore())})}else for(u={},r=this.storage.getDisplayList(!0),i=0;i<r.length;i++)f=r[i],this._doPaintEl(f,t,!0,u);return t.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(n){var u=this._opts,t=["width","height"][n],f=["clientWidth","clientHeight"][n],e=["paddingLeft","paddingTop"][n],o=["paddingRight","paddingBottom"][n],i,r;return u[t]!=null&&u[t]!=="auto"?parseFloat(u[t]):(i=this.root,r=document.defaultView.getComputedStyle(i),(i[f]||kg(r[t])||kg(i.style[t]))-(kg(r[e])||0)-(kg(r[o])||0)|0)},pathToImage:function(n,t){var i,w,u;t=t||this.dpr;var f=document.createElement("canvas"),e=f.getContext("2d"),o=n.getBoundingRect(),r=n.style,s=r.shadowBlur*t,c=r.shadowOffsetX*t,l=r.shadowOffsetY*t,h=r.hasStroke()?r.lineWidth:0,a=Math.max(h/2,-c+s),b=Math.max(h/2,c+s),v=Math.max(h/2,-l+s),k=Math.max(h/2,l+s),y=o.width+a+b,p=o.height+v+k;return f.width=y*t,f.height=p*t,e.scale(t,t),e.clearRect(0,0,y,p),e.dpr=t,i={position:n.position,rotation:n.rotation,scale:n.scale},n.position=[a-o.x,v-o.y],n.rotation=0,n.scale=[1,1],n.updateTransform(),n&&n.brush(e),w=nr,u=new w({style:{x:0,y:0,image:f}}),i.position!=null&&(u.position=n.position=i.position),i.rotation!=null&&(u.rotation=n.rotation=i.rotation),i.scale!=null&&(u.scale=n.scale=i.scale),u}};uw=function(n){n=n||{};this.stage=n.stage||{};this.onframe=n.onframe||function(){};this._clips=[];this._running=!1;this._time;this._pausedTime;this._pauseStart;this._paused=!1;ci.call(this)};uw.prototype={constructor:uw,addClip:function(n){this._clips.push(n)},addAnimator:function(n){var i,t;for(n.animation=this,i=n.getClips(),t=0;t<i.length;t++)this.addClip(i[t])},removeClip:function(n){var t=tt(this._clips,n);t>=0&&this._clips.splice(t,1)},removeAnimator:function(n){for(var i=n.getClips(),t=0;t<i.length;t++)this.removeClip(i[t]);n.animation=null},_update:function(){for(var e,o,r=(new Date).getTime()-this._pausedTime,u=r-this._time,t=this._clips,i=t.length,f=[],s=[],n=0;n<i;n++)e=t[n],o=e.step(r,u),o&&(f.push(o),s.push(e));for(n=0;n<i;)t[n]._needsRemove?(t[n]=t[i-1],t.pop(),i--):n++;for(i=f.length,n=0;n<i;n++)s[n].fire(f[n]);this._time=r;this.onframe(u);this.trigger("frame",u);this.stage.update&&this.stage.update()},_startLoop:function(){function t(){n._running&&(vg(t),n._paused||n._update())}var n=this;this._running=!0;vg(t)},start:function(){this._time=(new Date).getTime();this._pausedTime=0;this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(n,t){t=t||{};var i=new tg(n,t.loop,t.getter,t.setter);return this.addAnimator(i),i}};st(uw,ci);tn=function(){this._track=[]};tn.prototype={constructor:tn,recognize:function(n,t,i){return this._doTrack(n,t,i),this._recognize(n)},clear:function(){return this._track.length=0,this},_doTrack:function(n,t,i){var f=n.touches,r,u,s,e,o;if(f){for(r={points:[],touches:[],target:t,event:n},u=0,s=f.length;u<s;u++)e=f[u],o=lst(i,e,{}),r.points.push([o.zrX,o.zrY]),r.touches.push(e);this._track.push(r)}},_recognize:function(n){var t,i;for(t in tct)if(tct.hasOwnProperty(t)&&(i=tct[t](this._track,n),i))return i}};var tct={pinch:function(n,t){var f=n.length,i,r,u,e;if(f)return i=(n[f-1]||{}).points,r=(n[f-2]||{}).points||i,r&&r.length>1&&i&&i.length>1?(u=kui(i)/kui(r),isFinite(u)||(u=1),t.pinchScale=u,e=nar(i),t.pinchX=e[0],t.pinchY=e[1],{type:"pinch",target:n[0].target,event:t}):void 0}},tar=300,rn=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],ict=["touchstart","touchend","touchmove"],iar={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},dui=r(rn,function(n){var t=n.replace("mouse","pointer");return iar[t]?t:n});yr={mousemove:function(n){n=fc(this.dom,n);this.trigger("mousemove",n)},mouseout:function(n){n=fc(this.dom,n);var t=n.toElement||n.relatedTarget;if(t!=this.dom)while(t&&t.nodeType!=9){if(t===this.dom)return;t=t.parentNode}this.trigger("mouseout",n)},touchstart:function(n){n=fc(this.dom,n);n.zrByTouch=!0;this._lastTouchMoment=new Date;rct(this,n,"start");yr.mousemove.call(this,n);yr.mousedown.call(this,n);uct(this)},touchmove:function(n){n=fc(this.dom,n);n.zrByTouch=!0;rct(this,n,"change");yr.mousemove.call(this,n);uct(this)},touchend:function(n){n=fc(this.dom,n);n.zrByTouch=!0;rct(this,n,"end");yr.mouseup.call(this,n);+new Date-this._lastTouchMoment<tar&&yr.click.call(this,n);uct(this)},pointerdown:function(n){yr.mousedown.call(this,n)},pointermove:function(n){nfi(n)||yr.mousemove.call(this,n)},pointerup:function(n){yr.mouseup.call(this,n)},pointerout:function(n){nfi(n)||yr.mouseout.call(this,n)}};t(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){yr[n]=function(t){t=fc(this.dom,t);this.trigger(n,t)}});ect=fct.prototype;ect.dispose=function(){for(var t,i=rn.concat(ict),n=0;n<i.length;n++)t=i[n],icr(this.dom,gui(t),this._handlers[t])};ect.setCursor=function(n){this.dom.style&&(this.dom.style.cursor=n||"default")};st(fct,ci);
/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/
var uar=!d.canvasSupported,un={canvas:nn},cc={},oct="4.0.5";fn=function(n,t,i){var f,o,s,h;i=i||{};this.dom=t;this.id=n;var e=this,r=new og,u=i.renderer;if(uar){if(!un.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");u="vml"}else u&&un[u]||(u="canvas");f=new un[u](t,r,i,n);this.storage=r;this.painter=f;o=!d.node&&!d.worker?new fct(f.getViewportRoot()):null;this.handler=new ec(r,f,o,f.root);this.animation=new uw({stage:{update:l(this.flush,this)}});this.animation.start();this._needsRefresh;s=r.delFromStorage;h=r.addToStorage;r.delFromStorage=function(n){s.call(r,n);n&&n.removeSelfFromZr(e)};r.addToStorage=function(n){h.call(r,n);n.addSelfToZr(e)}};fn.prototype={constructor:fn,getId:function(){return this.id},add:function(n){this.storage.addRoot(n);this._needsRefresh=!0},remove:function(n){this.storage.delRoot(n);this._needsRefresh=!0},configLayer:function(n,t){this.painter.configLayer&&this.painter.configLayer(n,t);this._needsRefresh=!0},setBackgroundColor:function(n){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(n);this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1;this.painter.refresh();this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var n;this._needsRefresh&&(n=!0,this.refreshImmediately());this._needsRefreshHover&&(n=!0,this.refreshHoverImmediately());n&&this.trigger("rendered")},addHover:function(n,t){if(this.painter.addHover){var i=this.painter.addHover(n,t);return this.refreshHover(),i}},removeHover:function(n){this.painter.removeHover&&(this.painter.removeHover(n),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1;this.painter.refreshHover&&this.painter.refreshHover()},resize:function(n){n=n||{};this.painter.resize(n.width,n.height);this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(n,t){return this.painter.pathToImage(n,t)},setCursorStyle:function(n){this.handler.setCursorStyle(n)},findHover:function(n,t){return this.handler.findHover(n,t)},on:function(n,t,i){this.handler.on(n,t,i)},off:function(n,t){this.handler.off(n,t)},trigger:function(n,t){this.handler.trigger(n,t)},clear:function(){this.storage.delRoot();this.painter.clear()},dispose:function(){this.animation.stop();this.clear();this.storage.dispose();this.painter.dispose();this.handler.dispose();this.animation=this.storage=this.painter=this.handler=null;oar(this.id)}};var sar=(Object.freeze||Object)({version:oct,init:sct,dispose:far,getInstance:ear,registerPainter:hct}),iv=t,rv=a,har=i,tfi='series\0';cct=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];rfi=0;efi=".";ys="___EC__COMPONENT__CONTAINER___";ofi=0;var uv=function(n){for(var t=0;t<n.length;t++)n[t][1]||(n[t][1]=n[t][0]);return function(t,i,r){for(var f,e,o={},u=0;u<n.length;u++)(f=n[u][1],i&&tt(i,f)>=0||r&&tt(r,f)<0)||(e=t.getShallow(f),e!=null&&(o[n[u][0]]=e));return o}},bar=uv([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),kar={getLineStyle:function(n){var t=bar(this,n),i=this.getLineDash(t.lineWidth);return i&&(t.lineDash=i),t},getLineDash:function(n){n==null&&(n=1);var t=this.get("type"),i=Math.max(n,2),r=n*4;return t==="solid"||t==null?null:t==="dashed"?[r,r]:[i,i]}},dar=uv([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),gar={getAreaStyle:function(n,t){return dar(this,n,t)}},ln=Math.pow,ws=Math.sqrt,an=1e-8,sfi=.0001,hfi=ws(3),vn=1/3,fe=ss(),bu=ss(),fv=ss();var wr=Math.min,br=Math.max,wct=Math.sin,bct=Math.cos,ac=Math.PI*2,yn=ss(),pn=ss(),wn=ss();dct=[];gct=[];var ui={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},ee=[],ks=[],oe=[],se=[],wfi=Math.min,bfi=Math.max,ow=Math.cos,sw=Math.sin,bn=Math.sqrt,ev=Math.abs,nlt=typeof Float32Array!="undefined",kr=function(n){this._saveData=!(n||!1);this._saveData&&(this.data=[]);this._ctx=null};kr.prototype={constructor:kr,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(n,t){this._ux=ev(1/ig/n)||0;this._uy=ev(1/ig/t)||0},getContext:function(){return this._ctx},beginPath:function(n){return this._ctx=n,n&&n.beginPath(),n&&(this.dpr=n.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(n,t){return this.addData(ui.M,n,t),this._ctx&&this._ctx.moveTo(n,t),this._x0=n,this._y0=t,this._xi=n,this._yi=t,this},lineTo:function(n,t){var i=ev(n-this._xi)>this._ux||ev(t-this._yi)>this._uy||this._len<5;return this.addData(ui.L,n,t),this._ctx&&i&&(this._needsDash()?this._dashedLineTo(n,t):this._ctx.lineTo(n,t)),i&&(this._xi=n,this._yi=t),this},bezierCurveTo:function(n,t,i,r,u,f){return this.addData(ui.C,n,t,i,r,u,f),this._ctx&&(this._needsDash()?this._dashedBezierTo(n,t,i,r,u,f):this._ctx.bezierCurveTo(n,t,i,r,u,f)),this._xi=u,this._yi=f,this},quadraticCurveTo:function(n,t,i,r){return this.addData(ui.Q,n,t,i,r),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(n,t,i,r):this._ctx.quadraticCurveTo(n,t,i,r)),this._xi=i,this._yi=r,this},arc:function(n,t,i,r,u,f){return this.addData(ui.A,n,t,i,i,r,u-r,0,f?0:1),this._ctx&&this._ctx.arc(n,t,i,r,u,f),this._xi=ow(u)*i+n,this._yi=sw(u)*i+t,this},arcTo:function(n,t,i,r,u){return this._ctx&&this._ctx.arcTo(n,t,i,r,u),this},rect:function(n,t,i,r){return this._ctx&&this._ctx.rect(n,t,i,r),this.addData(ui.R,n,t,i,r),this},closePath:function(){this.addData(ui.Z);var n=this._ctx,t=this._x0,i=this._y0;return n&&(this._needsDash()&&this._dashedLineTo(t,i),n.closePath()),this._xi=t,this._yi=i,this},fill:function(n){n&&n.fill();this.toStatic()},stroke:function(n){n&&n.stroke();this.toStatic()},setLineDash:function(n){var i,t;if(n instanceof Array){for(this._lineDash=n,this._dashIdx=0,i=0,t=0;t<n.length;t++)i+=n[t];this._dashSum=i}return this},setLineDashOffset:function(n){return this._dashOffset=n,this},len:function(){return this._len},setData:function(n){var i=n.length,t;for(this.data&&this.data.length==i||!nlt||(this.data=new Float32Array(i)),t=0;t<i;t++)this.data[t]=n[t];this._len=i},appendPath:function(n){var t,u,i;n instanceof Array||(n=[n]);var f=n.length,e=0,r=this._len;for(t=0;t<f;t++)e+=n[t].len();for(nlt&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+e)),t=0;t<f;t++)for(u=n[t].data,i=0;i<u.length;i++)this.data[r++]=u[i];this._len=r},addData:function(n){var t,i;if(this._saveData){for(t=this.data,this._len+arguments.length>t.length&&(this._expandData(),t=this.data),i=0;i<arguments.length;i++)t[this._len++]=arguments[i];this._prevCmd=n}},_expandData:function(){var t,n;if(!(this.data instanceof Array)){for(t=[],n=0;n<this._len;n++)t[n]=this.data[n];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(n,t){var l=this._dashSum,e=this._dashOffset,a=this._lineDash,y=this._ctx,o=this._xi,s=this._yi,i=n-o,r=t-s,v=bn(i*i+r*r),u=o,f=s,c,p=a.length,h;for(i/=v,r/=v,e<0&&(e=l+e),e%=l,u-=e*i,f-=e*r;i>0&&u<=n||i<0&&u>=n||i==0&&(r>0&&f<=t||r<0&&f>=t);)(h=this._dashIdx,c=a[h],u+=i*c,f+=r*c,this._dashIdx=(h+1)%p,i>0&&u<o||i<0&&u>o||r>0&&f<s||r<0&&f>s)||y[h%2?"moveTo":"lineTo"](i>=0?wfi(u,n):bfi(u,n),r>=0?wfi(f,t):bfi(f,t));i=u-n;r=f-t;this._dashOffset=-bn(i*i+r*r)},_dashedBezierTo:function(n,t,i,r,u,f){var g=this._dashSum,s=this._dashOffset,y=this._lineDash,p=this._ctx,w=this._xi,b=this._yi,e,h,c,l=lr,k=0,o=this._dashIdx,nt=y.length,a,v,d=0;for(s<0&&(s=g+s),s%=g,e=0;e<1;e+=.1)h=l(w,n,i,u,e+.1)-l(w,n,i,u,e),c=l(b,t,r,f,e+.1)-l(b,t,r,f,e),k+=bn(h*h+c*c);for(;o<nt;o++)if(d+=y[o],d>s)break;for(e=(d-s)/k;e<=1;)a=l(w,n,i,u,e),v=l(b,t,r,f,e),o%2?p.moveTo(a,v):p.lineTo(a,v),e+=y[o]/k,o=(o+1)%nt;o%2!=0&&p.lineTo(u,f);h=u-a;c=f-v;this._dashOffset=-bn(h*h+c*c)},_dashedQuadraticTo:function(n,t,i,r){var u=i,f=r;i=(i+2*n)/3;r=(r+2*t)/3;n=(this._xi+2*n)/3;t=(this._yi+2*t)/3;this._dashedBezierTo(n,t,i,r,u,f)},toStatic:function(){var n=this.data;n instanceof Array&&(n.length=this._len,nlt&&(this.data=new Float32Array(n)))},getBoundingRect:function(){var n,a,v,y;ee[0]=ee[1]=oe[0]=oe[1]=Number.MAX_VALUE;ks[0]=ks[1]=se[0]=se[1]=-Number.MAX_VALUE;var t=this.data,i=0,r=0,u=0,f=0;for(n=0;n<t.length;){a=t[n++];n==1&&(i=t[n],r=t[n+1],u=i,f=r);switch(a){case ui.M:u=t[n++];f=t[n++];i=u;r=f;oe[0]=u;oe[1]=f;se[0]=u;se[1]=f;break;case ui.L:pfi(i,r,t[n],t[n+1],oe,se);i=t[n++];r=t[n++];break;case ui.C:uvr(i,r,t[n++],t[n++],t[n++],t[n++],t[n],t[n+1],oe,se);i=t[n++];r=t[n++];break;case ui.Q:fvr(i,r,t[n++],t[n++],t[n],t[n+1],oe,se);i=t[n++];r=t[n++];break;case ui.A:var o=t[n++],s=t[n++],h=t[n++],c=t[n++],e=t[n++],l=t[n++]+e,w=t[n++],p=1-t[n++];n==1&&(u=ow(e)*h+o,f=sw(e)*c+s);evr(o,s,h,c,e,l,p,oe,se);i=ow(l)*h+o;r=sw(l)*c+s;break;case ui.R:u=i=t[n++];f=r=t[n++];v=t[n++];y=t[n++];pfi(u,f,u+v,f+y,oe,se);break;case ui.Z:i=u;r=f}io(ee,ee,oe);ro(ks,ks,se)}return n===0&&(ee[0]=ee[1]=ks[0]=ks[1]=0),new b(ee[0],ee[1],ks[0]-ee[0],ks[1]-ee[1])},rebuildPath:function(n){for(var w,i=this.data,o,s,r,u,a,v,tt=this._ux,it=this._uy,p=this._len,t=0;t<p;){w=i[t++];t==1&&(r=i[t],u=i[t+1],o=r,s=u);switch(w){case ui.M:o=r=i[t++];s=u=i[t++];n.moveTo(r,u);break;case ui.L:a=i[t++];v=i[t++];(ev(a-r)>tt||ev(v-u)>it||t===p-1)&&(n.lineTo(a,v),r=a,u=v);break;case ui.C:n.bezierCurveTo(i[t++],i[t++],i[t++],i[t++],i[t++],i[t++]);r=i[t-2];u=i[t-1];break;case ui.Q:n.quadraticCurveTo(i[t++],i[t++],i[t++],i[t++]);r=i[t-2];u=i[t-1];break;case ui.A:var h=i[t++],c=i[t++],f=i[t++],e=i[t++],l=i[t++],rt=i[t++],b=i[t++],k=i[t++],d=f>e?f:e,g=f>e?1:f/e,nt=f>e?e/f:1,ut=Math.abs(f-e)>.001,y=l+rt;ut?(n.translate(h,c),n.rotate(b),n.scale(g,nt),n.arc(0,0,d,l,y,1-k),n.scale(1/g,1/nt),n.rotate(-b),n.translate(-h,-c)):n.arc(h,c,d,l,y,1-k);t==1&&(o=ow(l)*f+h,s=sw(l)*e+c);r=ow(y)*f+h;u=sw(y)*e+c;break;case ui.R:o=r=i[t];s=u=i[t+1];n.rect(i[t++],i[t++],i[t++],i[t++]);break;case ui.Z:n.closePath();r=o;u=s}}}};kr.CMD=ui;tlt=Math.PI*2;ov=Math.PI*2;var nh=kr.CMD,sv=Math.PI*2,hvr=.0001;or=[-1,-1,-1];ru=[-1,-1];var gfi=ag.prototype.getCanvasPattern,ilt=Math.abs,bvr=new kr(!0);nt.prototype={constructor:nt,type:"path",__dirtyPath:!0,strokeContainThreshold:5,brush:function(n,t){var i=this.style,r=this.path||bvr,e=i.hasStroke(),l=i.hasFill(),o=i.fill,s=i.stroke,a=l&&!!o.colorStops,v=e&&!!s.colorStops,w=l&&!!o.image,b=e&&!!s.image,u,c;i.bind(n,this,t);this.setTransform(n);this.__dirty&&(a&&(u=u||this.getBoundingRect(),this._fillGradient=i.getGradient(n,o,u)),v&&(u=u||this.getBoundingRect(),this._strokeGradient=i.getGradient(n,s,u)));a?n.fillStyle=this._fillGradient:w&&(n.fillStyle=gfi.call(o,n));v?n.strokeStyle=this._strokeGradient:b&&(n.strokeStyle=gfi.call(s,n));var f=i.lineDash,y=i.lineDashOffset,h=!!n.setLineDash,p=this.getGlobalScale();r.setScale(p[0],p[1]);this.__dirtyPath||f&&!h&&e?(r.beginPath(n),f&&!h&&(r.setLineDash(f),r.setLineDashOffset(y)),this.buildPath(r,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(n.beginPath(),this.path.rebuildPath(n));l&&(i.fillOpacity!=null?(c=n.globalAlpha,n.globalAlpha=i.fillOpacity*i.opacity,r.fill(n),n.globalAlpha=c):r.fill(n));f&&h&&(n.setLineDash(f),n.lineDashOffset=y);e&&(i.strokeOpacity!=null?(c=n.globalAlpha,n.globalAlpha=i.strokeOpacity*i.opacity,r.stroke(n),n.globalAlpha=c):r.stroke(n));f&&h&&n.setLineDash([]);i.text!=null&&(this.restoreTransform(n),this.drawRectText(n,this.getBoundingRect()))},buildPath:function(){},createPathProxy:function(){this.path=new kr},getBoundingRect:function(){var i=this._rect,f=this.style,e=!i,r,n,t,u;return(e&&(r=this.path,r||(r=this.path=new kr),this.__dirtyPath&&(r.beginPath(),this.buildPath(r,this.shape,!1)),i=r.getBoundingRect()),this._rect=i,f.hasStroke())?(n=this._rectWithStroke||(this._rectWithStroke=i.clone()),(this.__dirty||e)&&(n.copy(i),t=f.lineWidth,u=f.strokeNoScale?this.getLineScale():1,f.hasFill()||(t=Math.max(t,this.strokeContainThreshold||4)),u>1e-10&&(n.width+=t/u,n.height+=t/u,n.x-=t/u/2,n.y-=t/u/2)),n):i},contain:function(n,t){var e=this.transformCoordToLocal(n,t),o=this.getBoundingRect(),i=this.style,u,r,f;if(n=e[0],t=e[1],o.contain(n,t)){if(u=this.path.data,i.hasStroke()&&(r=i.lineWidth,f=i.strokeNoScale?this.getLineScale():1,f>1e-10&&(i.hasFill()||(r=Math.max(r,this.strokeContainThreshold)),wvr(u,r/f,n,t))))return!0;if(i.hasFill())return pvr(u,n,t)}return!1},dirty:function(n){n==null&&(n=!0);n&&(this.__dirtyPath=n,this._rect=null);this.__dirty=this.__dirtyText=!0;this.__zr&&this.__zr.refresh();this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(n){return this.animate("shape",n)},attrKV:function(n,t){n==="shape"?(this.setShape(t),this.__dirtyPath=!0,this._rect=null):vr.prototype.attrKV.call(this,n,t)},setShape:function(n,t){var r=this.shape,i;if(r){if(a(n))for(i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);else r[n]=t;this.dirty(!0)}return this},getLineScale:function(){var n=this.transform;return n&&ilt(n[0]-1)>1e-10&&ilt(n[3]-1)>1e-10?Math.sqrt(ilt(n[0]*n[3]-n[2]*n[1])):1}};nt.extend=function(n){var i=function(t){var i,u,r;if(nt.call(this,t),n.style&&this.style.extendFrom(n.style,!1),i=n.shape,i){this.shape=this.shape||{};u=this.shape;for(r in i)!u.hasOwnProperty(r)&&i.hasOwnProperty(r)&&(u[r]=i[r])}n.init&&n.init.call(this,t)},t;ct(i,nt);for(t in n)t!=="style"&&t!=="shape"&&(i.prototype[t]=n[t]);return i};ct(nt,vr);var hv=kr.CMD,kvr=[[],[],[]],nei=Math.sqrt,dvr=Math.atan2,gvr=function(n,t){for(var i=n.data,c,e,o,a=hv.M,v=hv.C,y=hv.L,p=hv.R,w=hv.A,b=hv.Q,u,r=0,f=0;r<i.length;){c=i[r++];f=r;e=0;switch(c){case a:e=1;break;case y:e=1;break;case v:e=3;break;case b:e=2;break;case w:var k=t[4],d=t[5],s=nei(t[0]*t[0]+t[1]*t[1]),h=nei(t[2]*t[2]+t[3]*t[3]),l=dvr(-t[1]/h,t[0]/s);i[r]*=s;i[r++]+=k;i[r]*=h;i[r++]+=d;i[r++]*=s;i[r++]*=h;i[r++]+=l;i[r++]+=l;r+=2;f=r;break;case p:u[0]=i[r++];u[1]=i[r++];vt(u,u,t);i[f++]=u[0];i[f++]=u[1];u[0]+=i[r++];u[1]+=i[r++];vt(u,u,t);i[f++]=u[0];i[f++]=u[1]}for(o=0;o<e;o++)u=kvr[o],u[0]=i[r++],u[1]=i[r++],vt(u,u,t),i[f++]=u[0],i[f++]=u[1]}},rlt=Math.sqrt,kn=Math.sin,dn=Math.cos,gn=Math.PI,tei=function(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])},ult=function(n,t){return(n[0]*t[0]+n[1]*t[1])/(tei(n)*tei(t))},iei=function(n,t){return(n[0]*t[1]<n[1]*t[0]?-1:1)*Math.acos(ult(n,t))};uei=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig;fei=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;k=function(n){vr.call(this,n)};k.prototype={constructor:k,type:"text",brush:function(n,t){var i=this.style,r;(this.__dirty&&iw(i,!0),i.fill=i.stroke=i.shadowBlur=i.shadowColor=i.shadowOffsetX=i.shadowOffsetY=null,r=i.text,r!=null&&(r+=""),pui(r,i))&&(this.setTransform(n),hui(this,n,r,i,null,t),this.restoreTransform(n))},getBoundingRect:function(){var n=this.style,r,t,i;return this.__dirty&&iw(n,!0),this._rect||(r=n.text,r!=null?r+="":r="",t=ue(n.text+"",n.font,n.textAlign,n.textVerticalAlign,n.textPadding,n.rich),t.x+=n.x||0,t.y+=n.y||0,nct(n.textStroke,n.textStrokeWidth)&&(i=n.textStrokeWidth,t.x-=i/2,t.y-=i/2,t.width+=i,t.height+=i),this._rect=t),this._rect}};ct(k,vr);var th=nt.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(n,t,i){i&&n.moveTo(t.cx+t.r,t.cy);n.arc(t.cx,t.cy,t.r,0,Math.PI*2,!0)}}),ih=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],flt=function(n){return d.browser.ie&&d.browser.version>=11?function(){var f=this.__clipPaths,e=this.style,o,r,t;if(f)for(r=0;r<f.length;r++){var u=f[r],i=u&&u.shape,s=u&&u.type;if(i&&(s==="sector"&&i.startAngle===i.endAngle||s==="rect"&&(!i.width||!i.height))){for(t=0;t<ih.length;t++)ih[t][2]=e[ih[t][0]],e[ih[t][0]]=ih[t][1];o=!0;break}}if(n.apply(this,arguments),o)for(t=0;t<ih.length;t++)e[ih[t][0]]=ih[t][2]}:n},so=nt.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:!0},brush:flt(nt.prototype.brush),buildPath:function(n,t){var r=t.cx,u=t.cy,i=Math.max(t.r0||0,0),o=Math.max(t.r,0),f=t.startAngle,e=t.endAngle,s=t.clockwise,h=Math.cos(f),c=Math.sin(f);n.moveTo(h*i+r,c*i+u);n.lineTo(h*o+r,c*o+u);n.arc(r,u,o,f,e,!s);n.lineTo(Math.cos(e)*i+r,Math.sin(e)*i+u);i!==0&&n.arc(r,u,i,e,f,s);n.closePath()}}),sei=nt.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(n,t){var i=t.cx,r=t.cy,u=Math.PI*2;n.moveTo(i+t.r,r);n.arc(i,r,t.r,0,u,!1);n.moveTo(i+t.r0,r);n.arc(i,r,t.r0,0,u,!0)}});cei=function(n,t){for(var f,c,l,i=n.length,a=[],v=0,u=1;u<i;u++)v+=yp(n[u-1],n[u]);for(f=v/2,f=f<i?i:f,u=0;u<f;u++){var y=u/(f-1)*(t?i:i-1),r=Math.floor(y),e=y-r,o,p=n[r%i],s,h;t?(o=n[(r-1+i)%i],s=n[(r+1)%i],h=n[(r+2)%i]):(o=n[r===0?r:r-1],s=n[r>i-2?i-1:r+1],h=n[r>i-3?i-1:r+2]);c=e*e;l=e*c;a.push([hei(o[0],p[0],s[0],h[0],e,c,l),hei(o[1],p[1],s[1],h[1],e,c,l)])}return a};lei=function(n,t,i,r){var s=[],l=[],k=[],d=[],v,y,f,e,u,o,a,h,c;if(r){for(f=[Infinity,Infinity],e=[-Infinity,-Infinity],u=0,o=n.length;u<o;u++)io(f,f,n[u]),ro(e,e,n[u]);io(f,f,r[0]);ro(e,e,r[1])}for(u=0,o=n.length;u<o;u++){if(a=n[u],i)v=n[u?u-1:o-1],y=n[(u+1)%o];else if(u===0||u===o-1){s.push(sf(n[u]));continue}else v=n[u-1],y=n[u+1];no(l,y,v);vd(l,l,t);var p=yp(a,v),w=yp(a,y),b=p+w;b!==0&&(p/=b,w/=b);vd(k,l,-p);vd(d,l,w);h=sst([],a,k);c=sst([],a,d);r&&(ro(h,h,f),io(h,h,e),ro(c,c,f),io(c,c,e));s.push(h);s.push(c)}return i&&s.push(s.shift()),s};var ku=nt.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(n,t){aei(n,t,!0)}}),af=nt.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(n,t){aei(n,t,!1)}}),et=nt.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(n,t){var i=t.x,r=t.y,u=t.width,f=t.height;t.r?eui(n,t):n.rect(i,r,u,f);n.closePath();return}}),uu=nt.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(n,t){var f=t.x1,e=t.y1,r=t.x2,u=t.y2,i=t.percent;i!==0&&(n.moveTo(f,e),i<1&&(r=f*(1-i)+r*i,u=e*(1-i)+u*i),n.lineTo(r,u))},pointAt:function(n){var t=this.shape;return[t.x1*(1-n)+t.x2*n,t.y1*(1-n)+t.y2*n]}}),dr=[];var elt=nt.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(n,t){var h=t.x1,c=t.y1,r=t.x2,u=t.y2,f=t.cpx1,e=t.cpy1,o=t.cpx2,s=t.cpy2,i=t.percent;i!==0&&(n.moveTo(h,c),o==null||s==null?(i<1&&(pct(h,f,r,i,dr),f=dr[1],r=dr[2],pct(c,e,u,i,dr),e=dr[1],u=dr[2]),n.quadraticCurveTo(f,e,r,u)):(i<1&&(vfi(h,f,o,r,i,dr),f=dr[1],o=dr[2],r=dr[3],vfi(c,e,s,u,i,dr),e=dr[1],s=dr[2],u=dr[3]),n.bezierCurveTo(f,e,o,s,r,u)))},pointAt:function(n){return vei(this.shape,n,!1)},tangentAt:function(n){var t=vei(this.shape,n,!0);return va(t,t)}}),yei=nt.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(n,t){var u=t.cx,f=t.cy,i=Math.max(t.r,0),r=t.startAngle,e=t.endAngle,o=t.clockwise,s=Math.cos(r),h=Math.sin(r);n.moveTo(s*i+u,h*i+f);n.arc(u,f,i,r,e,!o)}}),pei=nt.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var n=this.__dirtyPath,i=this.shape.paths,t=0;t<i.length;t++)n=n||i[t].__dirtyPath;this.__dirtyPath=n;this.__dirty=this.__dirty||n},beforeBrush:function(){var t,i,n;for(this._updatePathDirty(),t=this.shape.paths||[],i=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(i[0],i[1])},buildPath:function(n,t){for(var r=t.paths||[],i=0;i<r.length;i++)r[i].buildPath(n,r[i].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],n=0;n<t.length;n++)t[n].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),nt.prototype.getBoundingRect.call(this)}}),he=function(n){this.colorStops=n||[]};he.prototype={constructor:he,addColorStop:function(n,t){this.colorStops.push({offset:n,color:t})}};rh=function(n,t,i,r,u,f){this.x=n==null?0:n;this.y=t==null?0:t;this.x2=i==null?1:i;this.y2=r==null?0:r;this.type="linear";this.global=f||!1;he.call(this,u)};rh.prototype={constructor:rh};ct(rh,he);hw=function(n,t,i,r,u){this.x=n==null?.5:n;this.y=t==null?.5:t;this.r=i==null?.5:i;this.type="radial";this.global=u||!1;he.call(this,r)};hw.prototype={constructor:hw};ct(hw,he);fu.prototype.incremental=!0;fu.prototype.clearDisplaybles=function(){this._displayables=[];this._temporaryDisplayables=[];this._cursor=0;this.dirty();this.notClear=!1};fu.prototype.addDisplayable=function(n,t){t?this._temporaryDisplayables.push(n):this._displayables.push(n);this.dirty()};fu.prototype.addDisplayables=function(n,t){t=t||!1;for(var i=0;i<n.length;i++)this.addDisplayable(n[i],t)};fu.prototype.eachPendingDisplayable=function(n){for(var t=this._cursor;t<this._displayables.length;t++)n&&n(this._displayables[t]);for(t=0;t<this._temporaryDisplayables.length;t++)n&&n(this._temporaryDisplayables[t])};fu.prototype.update=function(){var n,t;for(this.updateTransform(),n=this._cursor;n<this._displayables.length;n++)t=this._displayables[n],t.parent=this,t.update(),t.parent=null;for(n=0;n<this._temporaryDisplayables.length;n++)t=this._temporaryDisplayables[n],t.parent=this,t.update(),t.parent=null};fu.prototype.brush=function(n){for(var i,t=this._cursor;t<this._displayables.length;t++)i=this._displayables[t],i.beforeBrush&&i.beforeBrush(n),i.brush(n,t===this._cursor?null:this._displayables[t-1]),i.afterBrush&&i.afterBrush(n);for(this._cursor=t,t=0;t<this._temporaryDisplayables.length;t++)i=this._temporaryDisplayables[t],i.beforeBrush&&i.beforeBrush(n),i.brush(n,t===0?null:this._temporaryDisplayables[t-1]),i.afterBrush&&i.afterBrush(n);this._temporaryDisplayables=[];this.notClear=!0};wei=[];fu.prototype.getBoundingRect=function(){var i,n,t,r;if(!this._rect){for(i=new b(Infinity,Infinity,-Infinity,-Infinity),n=0;n<this._displayables.length;n++)t=this._displayables[n],r=t.getBoundingRect().clone(),t.needLocalTransform()&&r.applyTransform(t.getLocalTransform(wei)),i.union(r);this._rect=i}return this._rect};fu.prototype.contain=function(n,t){var r=this.transformCoordToLocal(n,t),f=this.getBoundingRect(),i,u;if(f.contain(r[0],r[1]))for(i=0;i<this._displayables.length;i++)if(u=this._displayables[i],u.contain(n,t))return!0;return!1};ct(fu,vr);var cv=Math.round,ntt=Math.max,ttt=Math.min,itt={};le=iyr;slt=p();hlt=0;var vf=(Object.freeze||Object)({extendShape:ce,extendPath:ryr,makePath:cw,makeImage:bei,mergePath:le,resizePath:dei,subPixelOptimizeLine:vc,subPixelOptimizeRect:olt,subPixelOptimize:ae,setElementHoverStyle:utt,isInEmphasis:alt,setHoverStyle:pt,setAsHoverStyleTrigger:vlt,setLabelStyle:du,setTextStyle:ii,setText:lyr,getFont:plt,updateProps:w,initProps:sr,getTransform:yc,applyTransform:ve,transformDirection:wlt,groupTransition:blt,clipPointsByRect:foi,clipRectByRect:vyr,createIcon:lw,Group:e,Image:nr,Text:k,Circle:th,Sector:so,Ring:sei,Polygon:ku,Polyline:af,Rect:et,Line:uu,BezierCurve:elt,Arc:yei,IncrementalDisplayable:fu,CompoundPath:pei,LinearGradient:rh,RadialGradient:hw,BoundingRect:b}),yyr=["textStyle","color"],pyr={getTextColor:function(n){var t=this.ecModel;return this.getShallow("color")||(!n&&t?t.get(yyr):null)},getFont:function(){return plt({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(n){return ue(n,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("rich"),this.getShallow("truncateText"))}},wyr=uv([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),byr={getItemStyle:function(n,t){var i=wyr(this,n,t),r=this.getBorderLineDash();return r&&(i.lineDash=r),i},getBorderLineDash:function(){var n=this.get("borderType");return n==="solid"||n==null?null:n==="dashed"?[5,5]:[1,1]}},ett=st,eoi=pr();ut.prototype={constructor:ut,init:null,mergeOption:function(n){v(this.option,n,!0)},get:function(n,t){return n==null?this.option:ooi(this.option,this.parsePath(n),!t&&klt(this,n))},getShallow:function(n,t){var i=this.option,r=i==null?i:i[n],u=!t&&klt(this,n);return r==null&&u&&(r=u.getShallow(n)),r},getModel:function(n,t){var r=n==null?this.option:ooi(this.option,n=this.parsePath(n)),i;return t=t||(i=klt(this,n))&&i.getModel(n),new ut(r,t,this.ecModel)},isEmpty:function(){return this.option==null},restoreData:function(){},clone:function(){var n=this.constructor;return new n(c(this.option))},setReadOnly:function(){},parsePath:function(n){return typeof n=="string"&&(n=n.split(".")),n},customizeGetParent:function(n){eoi(this).getParent=n},isAnimationEnabled:function(){if(!d.node){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}};ew(ut);hn(ut);ett(ut,kar);ett(ut,gar);ett(ut,pyr);ett(ut,byr);soi=0;dlt=.0001;stt=9007199254740991;loi=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;poi=(Object.freeze||Object)({linearMap:ri,parsePercent:f,round:ki,asc:pc,getPrecision:hoi,getPrecisionSafe:ott,getPixelPrecision:glt,getPercentWithPrecision:coi,MAX_SAFE_INTEGER:stt,remRadian:nat,isRadianAroundZero:vw,parseDate:yw,quantity:aoi,nice:tat,quantile:npr,reformIntervals:iat,isNumeric:yoi});var wc=rst,tpr=/([&<>"'])/g,ipr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};rat=["a","b","c","d","e","f","g"];htt=function(n,t){return"{"+n+(t==null?"":t)+"}"};var koi=nui,rpr=ue,upr=(Object.freeze||Object)({addCommas:uh,toCamelCase:woi,normalizeCssArray:wc,encodeHTML:dt,formatTpl:uat,formatTplSimple:boi,getTooltipMarker:ctt,formatTime:fat,capitalFirst:ltt,truncateText:koi,getTextRect:rpr}),att=t,doi=["left","right","top","bottom","width","height"],bc=[["width","left","right"],["height","top","bottom"]];var pw=eat,lku=y(eat,"vertical"),aku=y(eat,"horizontal");var opr={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}},spr=pr(),it=ut.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(n,t,i,r){ut.call(this,n,t,i,r);this.uid=aw("ec_cpt_model")},init:function(n,t,i){this.mergeDefaultAndTheme(n,i)},mergeDefaultAndTheme:function(n,t){var i=this.layoutMode,r=i?av(n):{},u=t.getTheme();v(n,u.get(this.mainType));v(n,this.getDefaultOption());i&&fh(n,r,i)},mergeOption:function(n){v(this.option,n,!0);var t=this.layoutMode;t&&fh(this.option,n,t)},optionUpdated:function(){},getDefaultOption:function(){var u=spr(this),t,n,f,i,r;if(!u.defaultOption){for(t=[],n=this.constructor;n;)f=n.prototype.defaultOption,f&&t.push(f),n=n.superClass;for(i={},r=t.length-1;r>=0;r--)i=v(i,t[r],!0);u.defaultOption=i}return u.defaultOption},getReferringComponents:function(n){return this.ecModel.queryComponents({mainType:n,index:this.get(n+"Index",!0),id:this.get(n+"Id",!0)})}});cn(it,{registerWhenExtend:!0});kyr(it);dyr(it,hpr);st(it,opr);oat="";typeof navigator!="undefined"&&(oat=navigator.platform||"");nsi={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:oat.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};ytt=pr();ptt={clearColorPalette:function(){ytt(this).colorIdx=0;ytt(this).colorNameMap={}},getColorFromPalette:function(n,t,i){var e;t=t||this;var u=ytt(t),o=u.colorIdx||0,f=u.colorNameMap=u.colorNameMap||{};if(f.hasOwnProperty(n))return f[n];var s=tr(this.get("color",!0)),h=this.get("colorLayer",!0),r=i==null||!h?s:cpr(h,i);if(r=r||s,r&&r.length)return e=r[o],n&&(f[n]=e),u.colorIdx=(o+1)%r.length,e}};isi={cartesian2d:function(n,t,i,r){var f=n.getReferringComponents("xAxis")[0],e=n.getReferringComponents("yAxis")[0];if(u){if(!f)throw new Error('xAxis "'+kt(n.get("xAxisIndex"),n.get("xAxisId"),0)+'" not found');if(!e)throw new Error('yAxis "'+kt(n.get("xAxisIndex"),n.get("yAxisId"),0)+'" not found');}t.coordSysDims=["x","y"];i.set("x",f);i.set("y",e);vv(f)&&(r.set("x",f),t.firstCategoryDimIndex=0);vv(e)&&(r.set("y",e),t.firstCategoryDimIndex=1)},singleAxis:function(n,t,i,r){var f=n.getReferringComponents("singleAxis")[0];if(u&&!f)throw new Error("singleAxis should be specified.");t.coordSysDims=["single"];i.set("single",f);vv(f)&&(r.set("single",f),t.firstCategoryDimIndex=0)},polar:function(n,t,i,r){var o=n.getReferringComponents("polar")[0],f=o.findAxisModel("radiusAxis"),e=o.findAxisModel("angleAxis");if(u){if(!e)throw new Error("angleAxis option not found");if(!f)throw new Error("radiusAxis option not found");}t.coordSysDims=["radius","angle"];i.set("radius",f);i.set("angle",e);vv(f)&&(r.set("radius",f),t.firstCategoryDimIndex=0);vv(e)&&(r.set("angle",e),t.firstCategoryDimIndex=1)},geo:function(n,t){t.coordSysDims=["lng","lat"]},parallel:function(n,i,r,u){var f=n.ecModel,e=f.getComponent("parallel",n.get("parallelIndex")),o=i.coordSysDims=e.dimensions.slice();t(e.parallelAxisIndex,function(n,t){var e=f.getComponent("parallelAxis",n),s=o[t];r.set(s,e);vv(e)&&i.firstCategoryDimIndex==null&&(u.set(s,e),i.firstCategoryDimIndex=t)})}};var kc="original",ww="arrayRows",wtt="objectRows",btt="keyedColumns",rsi="unknown",bw="typedArray",usi="column",sat="row";yf.seriesDataToSource=function(n){return new yf({data:n,sourceFormat:of(n)?bw:kc,fromDataset:!1})};hn(yf);dc=pr();ktt='\0_ec_inner';dtt=ut.extend({init:function(n,t,i,r){i=i||{};this.option=null;this._theme=new ut(i);this._optionManager=r},setOption:function(n,t){g(!(ktt in n),"please use chart.getOption()");this._optionManager.setOption(n,t);this.resetOption(null)},resetOption:function(n){var i=!1,r=this._optionManager,u,f,e;return n&&n!=="recreate"||(u=r.mountOption(n==="recreate"),this.option&&n!=="recreate"?(this.restoreData(),this.mergeOption(u)):nwr.call(this,u),i=!0),(n==="timeline"||n==="media")&&this.restoreData(),n&&n!=="recreate"&&n!=="timeline"||(f=r.getTimelineOption(this),f&&(this.mergeOption(f),i=!0)),n&&n!=="recreate"&&n!=="media"||(e=r.getMediaOption(this,this._api),e.length&&t(e,function(n){this.mergeOption(n,i=!0)},this)),i},mergeOption:function(n){function f(u,f){var h=tr(n[u]),e=lct(r.get(u),h),s;ifi(e);t(e,function(n){var t=n.option;a(t)&&(n.keyInfo.mainType=u,n.keyInfo.subType=iwr(u,t,n.exist))});s=twr(r,f);i[u]=[];r.set(u,[]);t(e,function(n,t){var f=n.exist,e=n.option,c,h;g(a(e)||f,"Empty component definition");e?(c=it.getClass(u,n.keyInfo.subType,!0),f&&f instanceof c?(f.name=n.keyInfo.name,f.mergeOption(e,this),f.optionUpdated(e,!1)):(h=o({dependentModels:s,componentIndex:t},n.keyInfo),f=new c(e,this,this,h),o(f,h),f.init(e,this,this,h),f.optionUpdated(null,!0))):(f.mergeOption({},this),f.optionUpdated({},!1));r.get(u)[t]=f;i[u][t]=f.option},this);u==="series"&&hat(this,r.get("series"))}var i=this.option,r=this._componentsMap,u=[];vpr(this);t(n,function(n,t){n!=null&&(it.hasClass(t)?t&&u.push(t):i[t]=i[t]==null?c(n):v(i[t],n,!0))});it.topologicalTravel(u,it.getAllClassMainTypes(),f,this);this._seriesIndicesMap=p(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var n=c(this.option);return t(n,function(t,i){var t,r;if(it.hasClass(i)){for(t=tr(t),r=t.length-1;r>=0;r--)en(t[r])&&t.splice(r,1);n[i]=t}}),delete n[ktt],n},getTheme:function(){return this._theme},getComponent:function(n,t){var i=this._componentsMap.get(n);if(i)return i[t||0]},queryComponents:function(n){var c=n.mainType,f,s,h;if(!c)return[];var u=n.index,e=n.id,o=n.name,t=this._componentsMap.get(c);return!t||!t.length?[]:(u!=null?(i(u)||(u=[u]),f=hi(r(u,function(n){return t[n]}),function(n){return!!n})):e!=null?(s=i(e),f=hi(t,function(n){return s&&tt(e,n.id)>=0||!s&&n.id===e})):o!=null?(h=i(o),f=hi(t,function(n){return h&&tt(o,n.name)>=0||!h&&n.name===o})):f=t.slice(),hsi(f,n))},findComponents:function(n){function f(n){var i=t+"Index",r=t+"Id",u=t+"Name";return n&&(n[i]!=null||n[r]!=null||n[u]!=null)?{mainType:t,index:n[i],id:n[r],name:n[u]}:null}function e(t){return n.filter?hi(t,n.filter):t}var r=n.query,t=n.mainType,i=f(r),u=i?this.queryComponents(i):this._componentsMap.get(t);return e(hsi(u,n))},eachComponent:function(n,i,r){var u=this._componentsMap,f;typeof n=="function"?(r=i,i=n,u.each(function(n,u){t(n,function(n,t){i.call(r,u,n,t)})})):at(n)?t(u.get(n),i,r):a(n)&&(f=this.findComponents(n),t(f,i,r))},getSeriesByName:function(n){var t=this._componentsMap.get("series");return hi(t,function(t){return t.name===n})},getSeriesByIndex:function(n){return this._componentsMap.get("series")[n]},getSeriesByType:function(n){var t=this._componentsMap.get("series");return hi(t,function(t){return t.subType===n})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(n,i){gtt(this);t(this._seriesIndices,function(t){var r=this._componentsMap.get("series")[t];n.call(i,r,t)},this)},eachRawSeries:function(n,i){t(this._componentsMap.get("series"),n,i)},eachSeriesByType:function(n,i,r){gtt(this);t(this._seriesIndices,function(t){var u=this._componentsMap.get("series")[t];u.subType===n&&i.call(r,u,t)},this)},eachRawSeriesByType:function(n,i,r){return t(this.getSeriesByType(n),i,r)},isSeriesFiltered:function(n){return gtt(this),this._seriesIndicesMap.get(n.componentIndex)==null},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(n,t){gtt(this);var i=hi(this._componentsMap.get("series"),n,t);hat(this,i)},restoreData:function(n){var i=this._componentsMap,r;hat(this,i.get("series"));r=[];i.each(function(n,t){r.push(t)});it.topologicalTravel(r,it.getAllClassMainTypes(),function(r){t(i.get(r),function(t){r==="series"&&dpr(t,n)||t.restoreData()})})}});st(dtt,ptt);csi=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];nit={};ir.prototype={constructor:ir,create:function(n,i){var r=[];t(nit,function(t){var u=t.create(n,i);r=r.concat(u||[])});this._coordinateSystems=r},update:function(n,i){t(this._coordinateSystems,function(t){t.update&&t.update(n,i)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}};ir.register=function(n,t){nit[n]=t};ir.get=function(n){return nit[n]};var tit=t,gc=c,iit=r,asi=v,rwr=/^(min|max)?(.+)$/;cat.prototype={constructor:cat,setOption:function(n,i){n&&t(tr(n.series),function(n){n&&n.data&&of(n.data)&&fst(n.data)});n=gc(n,!0);var u=this._optionBackup,r=uwr.call(this,n,i,!u);this._newBaseOption=r.baseOption;u?(swr(u.baseOption,r.baseOption),r.timelineOptions.length&&(u.timelineOptions=r.timelineOptions),r.mediaList.length&&(u.mediaList=r.mediaList),r.mediaDefault&&(u.mediaDefault=r.mediaDefault)):this._optionBackup=r},mountOption:function(n){var t=this._optionBackup;return this._timelineOptions=iit(t.timelineOptions,gc),this._mediaList=iit(t.mediaList,gc),this._mediaDefault=gc(t.mediaDefault),this._currentMediaIndices=[],gc(n?t.baseOption:this._newBaseOption)},getTimelineOption:function(n){var i,r=this._timelineOptions,t;return r.length&&(t=n.getComponent("timeline"),t&&(i=gc(r[t.getCurrentIndex()],!0))),i},getMediaOption:function(){var e=this._api.getWidth(),o=this._api.getHeight(),i=this._mediaList,r=this._mediaDefault,n=[],u=[],t,f;if(!i.length&&!r)return u;for(t=0,f=i.length;t<f;t++)fwr(i[t].query,e,o)&&n.push(t);return!n.length&&r&&(n=[-1]),n.length&&!owr(n,this._currentMediaIndices)&&(u=iit(n,function(n){return gc(n===-1?r.option:i[n].option)})),this._currentMediaIndices=n,u}};var pf=t,kw=a,vsi=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];psi=function(n,r){pf(ho(n.series),function(n){kw(n)&&hwr(n)});var u=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];r&&u.push("valueAxis","categoryAxis","logAxis","timeAxis");pf(u,function(t){pf(ho(n[t]),function(n){n&&(ei(n,"axisLabel"),ei(n.axisPointer,"label"))})});pf(ho(n.parallel),function(n){var t=n&&n.parallelAxisDefault;ei(t,"axisLabel");ei(t&&t.axisPointer,"label")});pf(ho(n.calendar),function(n){hr(n,"itemStyle");ei(n,"dayLabel");ei(n,"monthLabel");ei(n,"yearLabel")});pf(ho(n.radar),function(n){ei(n,"name")});pf(ho(n.geo),function(n){kw(n)&&(gu(n),pf(ho(n.regions),function(n){gu(n)}))});pf(ho(n.timeline),function(n){gu(n);hr(n,"label");hr(n,"itemStyle");hr(n,"controlStyle",!0);var r=n.data;i(r)&&t(r,function(n){a(n)&&(hr(n,"label"),hr(n,"itemStyle"))})});pf(ho(n.toolbox),function(n){hr(n,"iconStyle");pf(n.feature,function(n){hr(n,"iconStyle")})});ei(ysi(n.axisPointer),"label");ei(ysi(n.tooltip).axisPointer,"label")};var awr=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],vwr=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],bsi=function(n,r){psi(n,r);n.series=tr(n.series);t(n.series,function(n){var t,i;a(n)&&(t=n.type,(t==="pie"||t==="gauge")&&n.clockWise!=null&&(n.clockwise=n.clockWise),t==="gauge"&&(i=cwr(n,"pointer.color"),i!=null&&lwr(n,"itemStyle.normal.color",i)),wsi(n))});n.dataRange&&(n.visualMap=n.dataRange);t(vwr,function(r){var u=n[r];u&&(i(u)||(u=[u]),t(u,function(n){wsi(n)}))})},ywr=function(n){var t=p();n.eachSeries(function(n){var f=n.get("stack");if(f){var r=t.get(f)||t.set(f,[]),i=n.getData(),u={stackResultDimension:i.getCalculationInfo("stackResultDimension"),stackedOverDimension:i.getCalculationInfo("stackedOverDimension"),stackedDimension:i.getCalculationInfo("stackedDimension"),stackedByDimension:i.getCalculationInfo("stackedByDimension"),isStackedByIndex:i.getCalculationInfo("isStackedByIndex"),data:i,seriesModel:n};if(!u.stackedDimension||!(u.isStackedByIndex||u.stackedByDimension))return;r.length&&i.setCalculationInfo("stackedOnSeries",r[r.length-1].seriesModel);r.push(u)}});t.each(pwr)};rit=ksi.prototype;rit.pure=!1;rit.persistent=!0;rit.getSource=function(){return this._source};dsi={arrayRows_column:{pure:!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(n){return this._data[n+this._source.startIndex]},appendData:aat},arrayRows_row:{pure:!0,count:function(){var n=this._data[0];return n?Math.max(0,n.length-this._source.startIndex):0},getItem:function(n){var i,r,t,u;for(n+=this._source.startIndex,i=[],r=this._data,t=0;t<r.length;t++)u=r[t],i.push(u?u[n]:null);return i},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".');}},objectRows:{pure:!0,count:gsi,getItem:nhi,appendData:aat},keyedColumns:{pure:!0,count:function(){var t=this._source.dimensionsDefine[0].name,n=this._data[t];return n?n.length:0},getItem:function(n){for(var i,r=[],u=this._source.dimensionsDefine,t=0;t<u.length;t++)i=this._data[u[t].name],r.push(i?i[n]:null);return r},appendData:function(n){var i=this._data;t(n,function(n,t){for(var u=i[t]||(i[t]=[]),r=0;r<(n||[]).length;r++)u.push(n[r])})}},original:{count:gsi,getItem:nhi,appendData:aat},typedArray:{persistent:!1,pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(n,t){var r,i;for(n=n-this._offset,t=t||[],r=this._dimSize*n,i=0;i<this._dimSize;i++)t[i]=this._data[r+i];return t},appendData:function(n){u&&g(of(n),"Added data must be TypedArray if data in initialization is TypedArray");this._data=n},clean:function(){this._offset+=this.count();this._data=null}}};thi={arrayRows:vat,objectRows:function(n,t,i,r){return i!=null?n[r]:n},keyedColumns:vat,original:function(n,t,i){var r=fw(n);return i==null||!(r instanceof Array)?r:r[i]},typedArray:vat};ihi={arrayRows:rhi,objectRows:function(n,t){return yat(n[t],this._dimensionInfos[t])},keyedColumns:rhi,original:function(n,t,i,r){var u=n&&(n.value==null?n:n.value);return!this._rawData.pure&&car(n)&&(this.hasItemOption=!0),yat(u instanceof Array?u[r]:u,this._dimensionInfos[t])},typedArray:function(n,t,i,r){return n[r]}};fhi=/\{@(.+?)\}/g;uit={getDataParams:function(n,t){var i=this.getData(t),o=this.getRawValue(n,t),s=i.getRawIndex(n),h=i.getName(n),c=i.getRawDataItem(n),u=i.getItemVisual(n,"color"),f=this.ecModel.getComponent("tooltip"),l=f&&f.get("renderMode"),a=ffi(l),e=this.mainType,r=e==="series";return{componentType:e,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:r?this.subType:null,seriesIndex:this.seriesIndex,seriesId:r?this.id:null,seriesName:r?this.name:null,name:h,dataIndex:s,data:c,dataType:t,value:o,color:u,marker:ctt({color:u,renderMode:a}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(n,t,i,r,u){var e,s;t=t||"normal";var o=this.getData(i),h=o.getItemModel(n),f=this.getDataParams(n,i);return(r!=null&&f.value instanceof Array&&(f.value=f.value[r]),e=h.get(t==="normal"?[u||"label","formatter"]:[t,u||"label","formatter"]),typeof e=="function")?(f.status=t,e(f)):typeof e=="string"?(s=uat(e,f),s.replace(fhi,function(t,i){var r=i.length;return i.charAt(0)==="["&&i.charAt(r-1)==="]"&&(i=+i.slice(1,r-1)),nl(o,n,i)})):void 0},getRawValue:function(n,t){return nl(this.getData(t),n)},formatTooltip:function(){}};co=ehi.prototype;co.perform=function(n){function p(n){return n>=1||(n=1),n}var r=this._upstream,c=n&&n.skip,l,a,w,v,s,t,f,h,y;this._dirty&&r&&(l=this.context,l.data=l.outputData=r.context.outputData);this.__pipeline&&(this.__pipeline.currentTask=this);this._plan&&!c&&(a=this._plan(this.context));var b=p(this._modBy),k=this._modDataCount||0,e=p(n&&n.modBy),o=n&&n.modDataCount||0;if((b!==e||k!==o)&&(a="reset"),(this._dirty||a==="reset")&&(this._dirty=!1,w=wwr(this,c)),this._modBy=e,this._modDataCount=o,v=n&&n.step,r?(u&&g(r._outputDueEnd!=null),this._dueEnd=r._outputDueEnd):(u&&g(!this._progress||this._count),this._dueEnd=this._count?this._count(this.context):Infinity),this._progress){if(s=this._dueIndex,t=Math.min(v!=null?this._dueIndex+v:Infinity,this._dueEnd),!c&&(w||s<t))if(f=this._progress,i(f))for(h=0;h<f.length;h++)ohi(this,f[h],s,t,e,o);else ohi(this,f,s,t,e,o);this._dueIndex=t;y=this._settedOutputEnd!=null?this._settedOutputEnd:t;u&&g(y>=this._outputDueEnd);this._outputDueEnd=y}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()};pat=function(){function e(){return n<r?n++:null}function o(){var f=n%u*t+Math.ceil(n/u),e=n>=r?null:f<i?f:n;return n++,e}var r,n,t,i,u,f={reset:function(s,h,c,l){n=s;r=h;t=c;i=l;u=Math.ceil(i/t);f.next=t>1&&i>0?o:e}};return f}();co.dirty=function(){this._dirty=!0;this._onDirty&&this._onDirty(this.context)};co.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd};co.pipe=function(n){u&&g(n&&!n._disposed&&n!==this);(this._downstream!==n||this._dirty)&&(this._downstream=n,n._upstream=this,n.dirty())};co.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)};co.getUpstream=function(){return this._upstream};co.getDownstream=function(){return this._downstream};co.setOutputEnd=function(n){this._outputDueEnd=this._settedOutputEnd=n};yv=pr();wt=it.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.color",layoutMode:null,init:function(n,t,i){this.seriesIndex=this.componentIndex;this.dataTask=gw({count:kwr,reset:dwr});this.dataTask.context={model:this};this.mergeDefaultAndTheme(n,i);fsi(this);var r=this.getInitialData(n,i);hhi(r,this);this.dataTask.context.data=r;u&&g(r,"getInitialData returned invalid data.");yv(this).dataBeforeProcessed=r;shi(this)},mergeDefaultAndTheme:function(n,t){var i=this.layoutMode,u=i?av(n):{},r=this.subType;it.hasClass(r)&&(r+="Series");v(n,t.getTheme().get(this.subType));v(n,this.getDefaultOption());lc(n,"label",["show"]);this.fillDataTextStyle(n.data);i&&fh(n,u,i)},mergeOption:function(n,t){var r,i;n=v(this.option,n,!0);this.fillDataTextStyle(n.data);r=this.layoutMode;r&&fh(this.option,n,r);fsi(this);i=this.getInitialData(n,t);hhi(i,this);this.dataTask.dirty();this.dataTask.context.data=i;yv(this).dataBeforeProcessed=i;shi(this)},fillDataTextStyle:function(n){var i,t;if(n&&!of(n))for(i=["show"],t=0;t<n.length;t++)n[t]&&n[t].label&&lc(n[t],"label",i)},getInitialData:function(){},appendData:function(n){var t=this.getRawData();t.appendData(n.data)},getData:function(n){var i=wat(this),t;return i?(t=i.context.data,n==null?t:t.getLinkedData(n)):yv(this).data},setData:function(n){var t=wat(this),i;t&&(i=t.context,i.data!==n&&t.modifyOutputEnd&&t.setOutputEnd(n.count()),i.outputData=n,t!==this.dataTask&&(i.data=n));yv(this).data=n},getSource:function(){return apr(this)},getRawData:function(){return yv(this).dataBeforeProcessed},getBaseAxis:function(){var n=this.coordinateSystem;return n&&n.getBaseAxis&&n.getBaseAxis()},formatTooltip:function(n,r,u,f){function ft(i){function v(n,t){var i=o.getDimensionInfo(t);if(i&&i.otherDims.tooltip!==!1){var l=i.type,v="sub"+d.seriesIndex+"at"+c,u=ctt({color:e,type:"subItem",renderMode:f,markerId:v}),p=typeof u=="string"?u:u.content,y=(s?p+dt(i.displayName||"-")+": ":"")+dt(l==="ordinal"?n+"":l==="time"?r?"":fat("yyyy/MM/dd hh:mm:ss",n):uh(n));y&&a.push(y);g&&(h[v]=e,++c)}}var s=ca(i,function(n,t,i){var r=o.getDimensionInfo(i);return n|(r&&r.tooltip!==!1&&r.displayName!=null)},0),a=[],u,y;return l.length?t(l,function(t){v(nl(o,n,t),t)}):t(i,v),u=s?g?"\n":"<br/>":"",y=u+a.join(u||", "),{renderMode:f,content:y,style:h}}function nt(n){return{renderMode:f,content:dt(uh(n)),style:h}}var d=this,b,s,k,rt;f=f||"html";var ut=f==="html"?"<br/>":"\n",g=f==="richText",h={},c=0;var o=this.getData(),l=o.mapDimension("defaultedTooltip",!0),y=l.length,v=this.getRawValue(n),tt=i(v),e=o.getItemVisual(n,"color");a(e)&&e.colorStops&&(e=(e.colorStops[0]||{}).color);e=e||"transparent";var et=y>1||tt&&!y?ft(v):y?nt(nl(o,n,l[0])):nt(tt?v[0]:v),p=et.content,it=d.seriesIndex+"at"+c,w=ctt({color:e,type:"item",renderMode:f,markerId:it});return h[it]=e,++c,b=o.getName(n),s=this.name,act(this)||(s=""),s=s?dt(s)+(r?": ":ut):"",k=typeof w=="string"?w:w.content,rt=r?k+s+p:s+k+(b?dt(b)+": "+p:p),{html:rt,markers:h}},isAnimationEnabled:function(){if(d.node)return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),n},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(n,t,i){var u=this.ecModel,r=ptt.getColorFromPalette.call(this,n,t,i);return r||(r=u.getColorFromPalette(n,t,i)),r},coordDimToDataDim:function(n){return this.getRawData().mapDimension(n,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});st(wt,uit);st(wt,ptt);wf=function(){this.group=new e;this.uid=aw("viewComponent")};wf.prototype={constructor:wf,init:function(){},render:function(){},dispose:function(){},filterForExposedEvent:null};fit=wf.prototype;fit.updateView=fit.updateLayout=fit.updateVisual=function(){};ew(wf);cn(wf,{registerWhenExtend:!0});var pv=function(){var n=pr();return function(t){var i=n(t),r=t.pipelineContext,u=i.large,f=i.progressiveRender,e=i.large=r.large,o=i.progressiveRender=r.progressiveRender;return!!(u^e||f^o)&&"reset"}},chi=pr(),tbr=pv();yi.prototype={type:"chart",init:function(){},render:function(){},highlight:function(n,t,i,r){lhi(n.getData(),r,"emphasis")},downplay:function(n,t,i,r){lhi(n.getData(),r,"normal")},remove:function(){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};eit=yi.prototype;eit.updateView=eit.updateLayout=eit.updateVisual=function(n,t,i,r){this.render(n,t,i,r)};ew(yi,["dispose"]);cn(yi,{registerWhenExtend:!0});yi.markUpdateMethod=function(n,t){chi(n).updateMethod=t};var ubr={incrementalPrepareRender:{progress:function(n,t){t.view.incrementalRender(n,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(n,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},oit='\0__throttleOriginMethod',ahi='\0__throttleRate',vhi='\0__throttleType';var fbr={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){var i=n.getData(),u=(n.visualColorAccessPath||"itemStyle.color").split("."),r=n.get(u)||n.getColorFromPalette(n.name,null,t.getSeriesCount()),f;return i.setVisual("color",r),t.isSeriesFiltered(n)?void 0:(typeof r!="function"||r instanceof he||i.each(function(t){i.setItemVisual(t,"color",r(n.getDataParams(t)))}),f=function(n,t){var r=n.getItemModel(t),i=r.get(u,!0);i!=null&&n.setItemVisual(t,"color",i)},{dataEach:i.hasItemOption?f:null})}},eh={toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}},ebr=function(n,i){function e(n,i){if(typeof n!="string")return n;var r=n;return t(i,function(n,t){r=r.replace(new RegExp("\\{\\s*"+t+"\\s*\\}","g"),n)}),r}function r(n){var u=f.get(n),r,t,i;if(u==null){for(r=n.split("."),t=eh.aria,i=0;i<r.length;++i)t=t[r[i]];return t}return u}function y(){var n=i.getModel("title").option;return n&&n.length&&(n=n[0]),n&&n.text}function p(n){return eh.series.typeNames[n]||"自定义图"}var f=i.getModel("aria"),u,h,c,l;if(f.get("show")){if(f.get("description")){n.setAttribute("aria-label",f.get("description"));return}}else return;u=0;i.eachSeries(function(){++u},this);var s=f.get("data.maxCount")||10,a=f.get("series.maxCount")||10,v=Math.min(u,a),o;u<1||(h=y(),o=h?e(r("general.withTitle"),{title:h}):r("general.withoutTitle"),c=[],l=u>1?"series.multiple.prefix":"series.single.prefix",o+=e(r(l),{seriesCount:u}),i.eachSeries(function(n,t){var i,y,h,f,l,o,a,w;if(t<v){for(y=n.get("name"),h="series."+(u>1?"multiple":"single")+".",i=r(y?h+"withName":h+"withoutName"),i=e(i,{seriesId:n.seriesIndex,seriesName:n.get("name"),seriesType:p(n.subType)}),f=n.getData(),window.data=f,i+=f.count()>s?e(r("data.partialData"),{displayCnt:s}):r("data.allData"),l=[],o=0;o<f.count();o++)o<s&&(a=f.getName(o),w=nl(f,o),l.push(e(a?r("data.withName"):r("data.withoutName"),{name:a,value:w})));i+=l.join(r("data.separator.middle"))+r("data.separator.end");c.push(i)}}),o+=c.join(r("series.multiple.separator.middle"))+r("series.multiple.separator.end"),n.setAttribute("aria-label",o))},sit=Math.PI,obr=function(n,t){var i;t=t||{};s(t,{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0});var u=new et({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4}),r=new yei({shape:{startAngle:-sit/2,endAngle:-sit/2+.1,r:10},style:{stroke:t.color,lineCap:"round",lineWidth:5},zlevel:t.zlevel,z:10001}),f=new et({style:{fill:"none",text:t.text,textPosition:"right",textDistance:10,textFill:t.textColor},zlevel:t.zlevel,z:10001});return r.animateShape(!0).when(1e3,{endAngle:sit*3/2}).start("circularInOut"),r.animateShape(!0).when(1e3,{startAngle:sit*3/2}).delay(300).start("circularInOut"),i=new e,i.add(r),i.add(f),i.add(u),i.resize=function(){var i=n.getWidth()/2,e=n.getHeight()/2,t;r.setShape({cx:i,cy:e});t=r.shape.r;f.setShape({x:i-t,y:e-t,width:t*2,height:t*2});u.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},i.resize(),i};eu=hit.prototype;eu.restoreData=function(n,t){n.restoreData(t);this._stageTaskMap.each(function(n){var t=n.overallTask;t&&t.dirty()})};eu.getPerformArgs=function(n,t){if(n.__pipeline){var i=this._pipelineMap.get(n.__pipeline.id),r=i.context,e=!t&&i.progressiveEnabled&&(!r||r.progressiveRender)&&n.__idxInPipeline>i.blockIndex,f=e?i.step:null,u=r&&r.modDataCount,o=u!=null?Math.ceil(u/f):null;return{step:f,modBy:o,modDataCount:u}}};eu.getPipeline=function(n){return this._pipelineMap.get(n)};eu.updateStreamModes=function(n,t){var i=this._pipelineMap.get(n.uid),u=n.getData(),r=u.count(),f=i.progressiveEnabled&&t.incrementalPrepareRender&&r>=i.threshold,e=n.get("large")&&r>=n.get("largeThreshold"),o=n.get("progressiveChunkMode")==="mod"?r:null;n.pipelineContext=i.context={progressiveRender:f,modDataCount:o,large:e}};eu.restorePipelines=function(n){var t=this,i=t._pipelineMap=p();n.eachSeries(function(n){var r=n.getProgressive(),u=n.uid;i.set(u,{id:u,head:null,tail:null,threshold:n.getProgressiveThreshold(),progressiveEnabled:r&&!(n.preventIncremental&&n.preventIncremental()),blockIndex:-1,step:Math.round(r||700),count:0});cit(t,n,n.dataTask)})};eu.prepareStageTasks=function(){var n=this._stageTaskMap,i=this.ecInstance.getModel(),r=this.api;t(this._allHandlers,function(t){var u=n.get(t.uid)||n.set(t.uid,[]);t.reset&&sbr(this,t,u,i,r);t.overallReset&&hbr(this,t,u,i,r)},this)};eu.prepareView=function(n,t,i,r){var u=n.renderTask,f=u.context;f.model=t;f.ecModel=i;f.api=r;u.__block=!n.incrementalPrepareRender;cit(this,t,u)};eu.performDataProcessorTasks=function(n,t){phi(this,this._dataProcessorHandlers,n,t,{block:!0})};eu.performVisualTasks=function(n,t,i){phi(this,this._visualHandlers,n,t,i)};eu.performSeriesTasks=function(n){var t;n.eachSeries(function(n){t|=n.dataTask.perform()});this.unfinished|=t};eu.plan=function(){this._pipelineMap.each(function(n){var t=n.tail;do{if(t.__block){n.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})};dat=eu.updatePayload=function(n,t){t!=="remain"&&(n.context.payload=t)};whi=bhi(0);hit.wrapStageHandler=function(n,t){return ar(n)&&(n={overallReset:n,seriesType:bbr(n)}),n.uid=aw("stageHandler"),t&&(n.visualType=t),n};wv={};gat={};khi(wv,dtt);khi(gat,lsi);wv.eachSeriesByType=wv.eachRawSeriesByType=function(n){lit=n};wv.eachComponent=function(n){n.mainType==="series"&&n.subType&&(lit=n.subType)};var dhi=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],kbr={color:dhi,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],dhi]},rr="#eee",ait=function(){return{axisLine:{lineStyle:{color:rr}},axisTick:{lineStyle:{color:rr}},axisLabel:{textStyle:{color:rr}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:rr}}}},nvt=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],ghi={color:nvt,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:rr},crossStyle:{color:rr}}},legend:{textStyle:{color:rr}},textStyle:{color:rr},title:{textStyle:{color:rr}},toolbox:{iconStyle:{normal:{borderColor:rr}}},dataZoom:{textStyle:{color:rr}},visualMap:{textStyle:{color:rr}},timeline:{lineStyle:{color:rr},itemStyle:{normal:{color:nvt[1]}},label:{normal:{textStyle:{color:rr}}},controlStyle:{normal:{color:rr,borderColor:rr}}},timeAxis:ait(),logAxis:ait(),valueAxis:ait(),categoryAxis:ait(),line:{symbol:"circle"},graph:{color:nvt},gauge:{title:{textStyle:{color:rr}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};ghi.categoryAxis.splitLine.show=!1;it.extend({type:"dataset",defaultOption:{seriesLayoutBy:usi,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){lpr(this)}});wf.extend({type:"dataset"});nci=nt.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(n,t){var s=.5522848,i=t.cx,r=t.cy,u=t.rx,f=t.ry,e=u*s,o=f*s;n.moveTo(i-u,r);n.bezierCurveTo(i-u,r-o,i-e,r-f,i,r-f);n.bezierCurveTo(i+e,r-f,i+u,r-o,i+u,r);n.bezierCurveTo(i+u,r+o,i+e,r+f,i,r+f);n.bezierCurveTo(i-e,r+f,i-u,r+o,i-u,r);n.closePath()}});lo=/[\s,]+/;vit.prototype.parse=function(n,t){var r,i,s,h,c,o,l;if(t=t||{},r=tci(n),!r)throw new Error("Illegal svg");i=new e;this._root=i;var a=r.getAttribute("viewBox")||"",u=parseFloat(r.getAttribute("width")||t.width),f=parseFloat(r.getAttribute("height")||t.height);for(isNaN(u)&&(u=null),isNaN(f)&&(f=null),ou(r,i,null,!0),s=r.firstChild;s;)this._parseNode(s,i),s=s.nextSibling;return a&&(o=vu(a).split(lo),o.length>=4&&(h={x:parseFloat(o[0]||0),y:parseFloat(o[1]||0),width:parseFloat(o[2]),height:parseFloat(o[3])})),h&&u!=null&&f!=null&&(c=sci(h,u,f),t.ignoreViewBox||(l=i,i=new e,i.add(l),l.scale=c.scale.slice(),l.position=c.position.slice())),t.ignoreRootClip||u==null||f==null||i.setClipPath(new et({shape:{x:0,y:0,width:u,height:f}})),{root:i,width:u,height:f,viewBoxRect:h,viewBoxTransform:c}};vit.prototype._parseNode=function(n,t){var r=n.nodeName.toLowerCase(),f,o,e,u,i;for(r==="defs"?this._isDefine=!0:r==="text"&&(this._isText=!0),this._isDefine?(u=rci[r],u&&(o=u.call(this,n),e=n.getAttribute("id"),e&&(this._defs[e]=o))):(u=ici[r],u&&(f=u.call(this,n,t),t.add(f))),i=n.firstChild;i;)i.nodeType===1&&this._parseNode(i,f),i.nodeType===3&&this._isText&&this._parseText(i,f),i=i.nextSibling;r==="defs"?this._isDefine=!1:r==="text"&&(this._isText=!1)};vit.prototype._parseText=function(n,t){var u,f,i,r,e;return n.nodeType===1&&(u=n.getAttribute("dx")||0,f=n.getAttribute("dy")||0,this._textX+=parseFloat(u),this._textY+=parseFloat(f)),i=new k({style:{text:n.textContent,transformText:!0},position:[this._textX||0,this._textY||0]}),nf(t,i),ou(n,i,this._defs),r=i.style.fontSize,r&&r<9&&(i.style.fontSize=9,i.scale=i.scale||[1,1],i.scale[0]*=r/9,i.scale[1]*=r/9),e=i.getBoundingRect(),this._textX+=e.width,t.add(i),i};ici={g:function(n,t){var i=new e;return nf(t,i),ou(n,i,this._defs),i},rect:function(n,t){var i=new et;return nf(t,i),ou(n,i,this._defs),i.setShape({x:parseFloat(n.getAttribute("x")||0),y:parseFloat(n.getAttribute("y")||0),width:parseFloat(n.getAttribute("width")||0),height:parseFloat(n.getAttribute("height")||0)}),i},circle:function(n,t){var i=new th;return nf(t,i),ou(n,i,this._defs),i.setShape({cx:parseFloat(n.getAttribute("cx")||0),cy:parseFloat(n.getAttribute("cy")||0),r:parseFloat(n.getAttribute("r")||0)}),i},line:function(n,t){var i=new uu;return nf(t,i),ou(n,i,this._defs),i.setShape({x1:parseFloat(n.getAttribute("x1")||0),y1:parseFloat(n.getAttribute("y1")||0),x2:parseFloat(n.getAttribute("x2")||0),y2:parseFloat(n.getAttribute("y2")||0)}),i},ellipse:function(n,t){var i=new nci;return nf(t,i),ou(n,i,this._defs),i.setShape({cx:parseFloat(n.getAttribute("cx")||0),cy:parseFloat(n.getAttribute("cy")||0),rx:parseFloat(n.getAttribute("rx")||0),ry:parseFloat(n.getAttribute("ry")||0)}),i},polygon:function(n,t){var i=n.getAttribute("points"),r;return i&&(i=uci(i)),r=new ku({shape:{points:i||[]}}),nf(t,r),ou(n,r,this._defs),r},polyline:function(n,t){var r=new nt,i;return nf(t,r),ou(n,r,this._defs),i=n.getAttribute("points"),i&&(i=uci(i)),new af({shape:{points:i||[]}})},image:function(n,t){var i=new nr;return nf(t,i),ou(n,i,this._defs),i.setStyle({image:n.getAttribute("xlink:href"),x:n.getAttribute("x"),y:n.getAttribute("y"),width:n.getAttribute("width"),height:n.getAttribute("height")}),i},text:function(n,t){var r=n.getAttribute("x")||0,u=n.getAttribute("y")||0,f=n.getAttribute("dx")||0,o=n.getAttribute("dy")||0,i;return this._textX=parseFloat(r)+parseFloat(f),this._textY=parseFloat(u)+parseFloat(o),i=new e,nf(t,i),ou(n,i,this._defs),i},tspan:function(n,t){var r=n.getAttribute("x"),u=n.getAttribute("y");r!=null&&(this._textX=parseFloat(r));u!=null&&(this._textY=parseFloat(u));var f=n.getAttribute("dx")||0,o=n.getAttribute("dy")||0,i=new e;return nf(t,i),ou(n,i,this._defs),this._textX+=f,this._textY+=o,i},path:function(n,t){var r=n.getAttribute("d")||"",i=oei(r);return nf(t,i),ou(n,i,this._defs),i}};rci={lineargradient:function(n){var i=parseInt(n.getAttribute("x1")||0,10),r=parseInt(n.getAttribute("y1")||0,10),u=parseInt(n.getAttribute("x2")||10,10),f=parseInt(n.getAttribute("y2")||0,10),t=new rh(i,r,u,f);return dbr(n,t),t},radialgradient:function(){}};tl={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};fci=/url\(\s*#(.*?)\)/;oci=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g;tvt=/([^\s:;]+)\s*:\s*([^:;]+)/g;var hci=p(),yit={registerMap:function(n,r,f){var e;return i(r)?e=r:r.svg?e=[{type:"svg",source:r.svg,specialAreas:r.specialAreas}]:(r.geoJson&&!r.features&&(f=r.specialAreas,r=r.geoJson),e=[{type:"geoJSON",source:r,specialAreas:f}]),t(e,function(n){var t=n.type,i;t==="geoJson"&&(t=n.type="geoJSON");i=ikr[t];u&&g(i,"Illegal map type: "+t);i(n)}),hci.set(n,e)},retrieveMap:function(n){return hci.get(n)}},ikr={geoJSON:function(n){var t=n.source;n.geoJSON=at(t)?typeof JSON!="undefined"&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t},svg:function(n){n.svgXML=tci(n.source)}},bv=g,pi=t,rkr=ar,tb=a,ivt=it.parseClassType,cci="4.2.0",rvt={zrender:"4.0.5"},ukr=1,lci=1e3,aci=5e3,vci=1e3,yci=2e3,pci=3e3,kv={PROCESSOR:{FILTER:lci,STATISTIC:aci},VISUAL:{LAYOUT:vci,GLOBAL:yci,CHART:pci,COMPONENT:4e3,BRUSH:5e3}},tf="__flagInMainProcess",oh="__optionUpdated",wci=/^[a-zA-Z0-9_]+$/;ib.prototype.on=dv("on");ib.prototype.off=dv("off");ib.prototype.one=dv("one");st(ib,ci);ft=rb.prototype;ft._onframe=function(){var n,i,u;if(!this._disposed)if(n=this._scheduler,this[oh])i=this[oh].silent,this[tf]=!0,ub(this),ao.update.call(this),this[tf]=!1,this[oh]=!1,pit.call(this,i),wit.call(this,i);else if(n.unfinished){var r=ukr,t=this._model,f=this._api;n.unfinished=!1;do u=+new Date,n.performSeriesTasks(t),n.performDataProcessorTasks(t),dci(this,t),n.performVisualTasks(t),fvt(this,this._model,f,"remain"),r-=+new Date-u;while(r>0&&n.unfinished);n.unfinished||this._zr.flush()}};ft.getDom=function(){return this._dom};ft.getZr=function(){return this._zr};ft.setOption=function(n,t,i){var r;if(u&&bv(!this[tf],"`setOption` should not be called during main process."),tb(t)&&(i=t.lazyUpdate,r=t.silent,t=t.notMerge),this[tf]=!0,!this._model||t){var f=new cat(this._api),e=this._theme,o=this._model=new dtt(null,null,e,f);o.scheduler=this._scheduler;o.init(null,null,e,f)}this._model.setOption(n,uli);i?(this[oh]={silent:r},this[tf]=!1):(ub(this),ao.update.call(this),this._zr.flush(),this[oh]=!1,this[tf]=!1,pit.call(this,r),wit.call(this,r))};ft.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")};ft.getModel=function(){return this._model};ft.getOption=function(){return this._model&&this._model.getOption()};ft.getWidth=function(){return this._zr.getWidth()};ft.getHeight=function(){return this._zr.getHeight()};ft.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1};ft.getRenderedCanvas=function(n){if(d.canvasSupported){n=n||{};n.pixelRatio=n.pixelRatio||1;n.backgroundColor=n.backgroundColor||this._model.get("backgroundColor");var t=this._zr;return t.painter.getRenderedCanvas(n)}};ft.getSvgDataUrl=function(){if(d.svgSupported){var n=this._zr,i=n.storage.getDisplayList();return t(i,function(n){n.stopAnimation(!0)}),n.painter.pathToDataUrl()}};ft.getDataURL=function(n){var i;n=n||{};var r=n.excludeComponents,u=this._model,t=[],f=this;return pi(r,function(n){u.eachComponent({mainType:n},function(n){var i=f._componentsMap[n.__viewId];i.group.ignore||(t.push(i),i.group.ignore=!0)})}),i=this._zr.painter.getType()==="svg"?this.getSvgDataUrl():this.getRenderedCanvas(n).toDataURL("image/"+(n&&n.type||"png")),pi(t,function(n){n.group.ignore=!1}),i};ft.getConnectedDataURL=function(n){var h;if(d.canvasSupported){var l=this.group,a=Math.min,v=Math.max,f=Infinity;if(git[l]){var r=f,u=f,e=-f,o=-f,y=[],i=n&&n.pixelRatio||1;t(il,function(t){if(t.group===l){var f=t.getRenderedCanvas(c(n)),i=t.getDom().getBoundingClientRect();r=a(i.left,r);u=a(i.top,u);e=v(i.right,e);o=v(i.bottom,o);y.push({dom:f,left:i.left,top:i.top})}});r*=i;u*=i;e*=i;o*=i;var p=e-r,w=o-u,s=rc();return s.width=p,s.height=w,h=sct(s),pi(y,function(n){var t=new nr({style:{x:n.left*i-r,y:n.top*i-u,image:n.dom}});h.add(t)}),h.refreshImmediately(),s.toDataURL("image/"+(n&&n.type||"png"))}return this.getDataURL(n)}};ft.convertToPixel=y(bci,"convertToPixel");ft.convertFromPixel=y(bci,"convertFromPixel");ft.containPixel=function(n,i){var f=this._model,r;return n=sn(f,n),t(n,function(n,f){f.indexOf("Models")>=0&&t(n,function(n){var e=n.coordinateSystem,t;e&&e.containPoint?r|=!!e.containPoint(i):f==="seriesModels"?(t=this._chartsMap[n.__viewId],t&&t.containPoint?r|=t.containPoint(i,n):u&&console.warn(f+": "+(t?"The found component do not support containPoint.":"No view mapping to the found component."))):u&&console.warn(f+": containPoint is not supported")},this)},this),!!r};ft.getVisual=function(n,t){var e=this._model,r,i,f;return n=sn(e,n,{defaultMainType:"series"}),r=n.seriesModel,u&&(r||console.warn("There is no specified seires model")),i=r.getData(),f=n.hasOwnProperty("dataIndexInside")?n.dataIndexInside:n.hasOwnProperty("dataIndex")?i.indexOfRawIndex(n.dataIndex):null,f!=null?i.getItemVisual(f,t):i.getVisual(t)};ft.getViewOfComponentModel=function(n){return this._componentsMap[n.__viewId]};ft.getViewOfSeriesModel=function(n){return this._chartsMap[n.__viewId]};ao={prepareAndUpdate:function(n){ub(this);ao.update.call(this,n)},update:function(n){var t=this._model,r=this._api,o=this._zr,e=this._coordSysMgr,u=this._scheduler,i,f;t&&(u.restoreData(t,n),u.performSeriesTasks(t),e.create(t,r),u.performDataProcessorTasks(t,n),dci(this,t),e.update(t,r),uvt(t),u.performVisualTasks(t,n),tli(this,t,r,n),i=t.get("backgroundColor")||"transparent",d.canvasSupported?o.setBackgroundColor(i):(f=wu(i),i=fo(f,"rgb"),f[3]===0&&(i="transparent")),evt(t,r))},updateTransform:function(n){var t=this._model,r=this,u=this._api,f,i;t&&(f=[],t.eachComponent(function(i,e){var o=r.getViewOfComponentModel(e),s;o&&o.__alive&&(o.updateTransform?(s=o.updateTransform(e,t,u,n),s&&s.update&&f.push(o)):f.push(o))}),i=p(),t.eachSeries(function(f){var o=r._chartsMap[f.__viewId],e;o.updateTransform?(e=o.updateTransform(f,t,u,n),e&&e.update&&i.set(f.uid,1)):i.set(f.uid,1)}),uvt(t),this._scheduler.performVisualTasks(t,n,{setDirty:!0,dirtyMap:i}),fvt(r,t,u,n,i),evt(t,this._api))},updateView:function(n){var t=this._model;t&&(yi.markUpdateMethod(n,"updateView"),uvt(t),this._scheduler.performVisualTasks(t,n,{setDirty:!0}),tli(this,this._model,this._api,n),evt(t,this._api))},updateVisual:function(n){ao.update.call(this,n)},updateLayout:function(n){ao.update.call(this,n)}};ft.resize=function(n){var t,r,i;(u&&bv(!this[tf],"`resize` should not be called during main process."),this._zr.resize(n),t=this._model,this._loadingFX&&this._loadingFX.resize(),t)&&(r=t.resetOption("media"),i=n&&n.silent,this[tf]=!0,r&&ub(this),ao.update.call(this),this[tf]=!1,pit.call(this,i),wit.call(this,i))};ft.showLoading=function(n,t){if(tb(n)&&(t=n,n=""),n=n||"default",this.hideLoading(),!hvt[n]){u&&console.warn("Loading effects "+n+" not exists.");return}var i=hvt[n](this._api,t),r=this._zr;this._loadingFX=i;r.add(i)};ft.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX);this._loadingFX=null};ft.makeActionFromEvent=function(n){var t=o({},n);return t.type=kit[n.type],t};ft.dispatchAction=function(n,t){if((tb(t)||(t={silent:!!t}),bit[n.type])&&this._model){if(this[tf]){this._pendingActions.push(n);return}gci.call(this,n,t.silent);t.flush?this._zr.flush(!0):t.flush!==!1&&d.browser.weChat&&this._throttledZrFlush();pit.call(this,t.silent);wit.call(this,t.silent)}};ft.appendData=function(n){var i=n.seriesIndex,r=this.getModel(),t=r.getSeriesByIndex(i);u&&bv(n.data&&t);t.appendData(n);this._scheduler.unfinished=!0};ft.on=dv("on");ft.off=dv("off");ft.one=dv("one");ili=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];ft._initEvents=function(){pi(ili,function(n){this._zr.on(n,function(t){var l=this.getModel(),i=t.target,r,a=n==="globalout",h,f,s,e,c;a?r={}:i&&i.dataIndex!=null?(h=i.dataModel||l.getSeriesByIndex(i.seriesIndex),r=h&&h.getDataParams(i.dataIndex,i.dataType,i)||{}):i&&i.eventData&&(r=o({},i.eventData));r&&(f=r.componentType,s=r.componentIndex,(f==="markLine"||f==="markPoint"||f==="markArea")&&(f="series",s=r.seriesIndex),e=f&&s!=null&&l.getComponent(f,s),c=e&&this[e.mainType==="series"?"_chartsMap":"_componentsMap"][e.__viewId],u&&(a||e&&c||console.warn("model or view can not be found by params")),r.event=t,r.type=n,this._ecEventProcessor.eventInfo={targetEl:i,packedEvent:r,model:e,view:c},this.trigger(n,r))},this)},this);pi(kit,function(n,t){this._messageCenter.on(t,function(n){this.trigger(t,n)},this)},this)};ft.isDisposed=function(){return this._disposed};ft.clear=function(){this.setOption({series:[]},!0)};ft.dispose=function(){if(this._disposed){u&&console.warn("Instance "+this.id+" has been disposed");return}this._disposed=!0;ufi(this.getDom(),cvt,"");var n=this._api,t=this._model;pi(this._componentsViews,function(i){i.dispose(t,n)});pi(this._chartsViews,function(i){i.dispose(t,n)});this._zr.dispose();delete il[this.id]};st(rb,ci);ovt.prototype={constructor:ovt,normalizeQuery:function(n){var i={},f={},e={},r,u,o;return at(n)?(r=ivt(n),i.mainType=r.main||null,i.subType=r.sub||null):(u=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1},t(n,function(n,t){for(var r,s,l,h=!1,c=0;c<u.length;c++)r=u[c],s=t.lastIndexOf(r),s>0&&s===t.length-r.length&&(l=t.slice(0,s),l!=="data"&&(i.mainType=l,i[r.toLowerCase()]=n,h=!0));o.hasOwnProperty(t)&&(f[t]=n,h=!0);h||(e[t]=n)})),{cptQuery:i,dataQuery:f,otherQuery:e}},filter:function(n,t){function i(n,t,i,r){return n[i]==null||t[r||i]===n[i]}var f=this.eventInfo,u,o;if(!f)return!0;var h=f.targetEl,e=f.packedEvent,r=f.model,s=f.view;return!r||!s?!0:(u=t.cptQuery,o=t.dataQuery,i(u,r,"mainType")&&i(u,r,"subType")&&i(u,r,"index","componentIndex")&&i(u,r,"name")&&i(u,r,"id")&&i(o,e,"name")&&i(o,e,"dataIndex")&&i(o,e,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(n,t.otherQuery,h,e)))},afterTrigger:function(){this.eventInfo=null}};var bit={},kit={},svt=[],uli=[],fli=[],dit=[],eli={},hvt={},il={},git={},ckr=new Date-0,lkr=new Date-0,cvt="_echarts_instance_";sli=oli;yt(yci,fbr);ur(bsi);su(aci,ywr);hli("default",obr);rt({type:"highlight",event:"highlight",update:"highlight"},di);rt({type:"downplay",event:"downplay",update:"downplay"},di);avt("light",kbr);avt("dark",ghi);cli={};vo.prototype={constructor:vo,add:function(n){return this._add=n,this},update:function(n){return this._update=n,this},remove:function(n){return this._remove=n,this},execute:function(){var o=this._old,h=this._new,r={},s=[],e=[],t,i,n,f,u;for(ali(o,{},s,"_oldKeyGetter",this),ali(h,r,e,"_newKeyGetter",this),t=0;t<o.length;t++)i=s[t],n=r[i],n!=null?(u=n.length,u?(u===1&&(r[i]=null),n=n.unshift()):r[i]=null,this._update&&this._update(n,t)):this._remove&&this._remove(t);for(t=0;t<e.length;t++)if(i=e[t],r.hasOwnProperty(i)){if(n=r[i],n==null)continue;if(n.length)for(f=0,u=n.length;f<u;f++)this._add&&this._add(n[f]);else this._add&&this._add(n)}}};trt=p(["tooltip","label","itemName","itemId","seriesName"]);var rrt=a,urt="undefined",rdr='e\0\0',udr={float:typeof Float64Array===urt?Array:Float64Array,int:typeof Int32Array===urt?Array:Int32Array,ordinal:Array,number:Array,time:Array},vli=typeof Uint32Array===urt?Array:Uint32Array,fdr=typeof Uint16Array===urt?Array:Uint16Array;yli=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"];pli=["_extent","_approximateExtent","_rawExtent"];ai=function(n,t){var r,i,u;n=n||["x","y"];var f={},e=[],o={};for(r=0;r<n.length;r++)i=n[r],at(i)&&(i={name:i}),u=i.name,i.type=i.type||"float",i.coordDim||(i.coordDim=u,i.coordDimIndex=0),i.otherDims=i.otherDims||{},e.push(u),f[u]=i,i.index=r,i.createInvertedIndices&&(o[u]=[]);this.dimensions=e;this._dimensionInfos=f;this.hostModel=t;this.dataType;this._indices=null;this._count=0;this._rawCount=0;this._storage={};this._nameList=[];this._idList=[];this._optionModels=[];this._visual={};this._layout={};this._itemVisuals=[];this.hasItemVisual={};this._itemLayouts=[];this._graphicEls=[];this._chunkSize=1e5;this._chunkCount=0;this._rawData;this._rawExtent={};this._extent={};this._approximateExtent={};this._dimensionsSummary=tdr(this);this._invertedIndicesMap=o;this._calculationInfo={}};h=ai.prototype;h.type="list";h.hasItemOption=!0;h.getDimension=function(n){return isNaN(n)||(n=this.dimensions[n]||n),n};h.getDimensionInfo=function(n){return this._dimensionInfos[this.getDimension(n)]};h.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()};h.mapDimension=function(n,t){var r=this._dimensionsSummary,i;return t==null?r.encodeFirstDimNotExtra[n]:(i=r.encode[n],t===!0?(i||[]).slice():i&&i[t])};h.initData=function(n,t,i){var r=yf.isInstance(n)||ge(n);if(r&&(n=new ksi(n,this.dimensions.length)),u&&!r&&(typeof n.getItem!="function"||typeof n.count!="function"))throw new Error("Inavlid data provider.");this._rawData=n;this._storage={};this._indices=null;this._nameList=t||[];this._idList=[];this._nameRepeatCount={};i||(this.hasItemOption=!1);this.defaultDimValueGetter=ihi[this._rawData.getSource().sourceFormat];this._dimValueGetter=i=i||this.defaultDimValueGetter;this._rawExtent={};this._initDataFromProvider(0,n.count());n.pure&&(this.hasItemOption=!1)};h.getProvider=function(){return this._rawData};h.appendData=function(n){var t,i,r;u&&g(!this._indices,"appendData can only be called on raw data.");t=this._rawData;i=this.count();t.appendData(n);r=t.count();t.persistent||(r+=i);this._initDataFromProvider(i,r)};h._initDataFromProvider=function(n,t){var h,i,k,rt,v,ut,y,e,u,ft,et,f,w,r,ot,st,d,c;if(!(n>=t)){var o=this._chunkSize,l=this._rawData,s=this._storage,b=this.dimensions,g=b.length,ht=this._dimensionInfos,ct=this._nameList,at=this._idList,nt=this._rawExtent,a=this._nameRepeatCount={},tt,lt=this._chunkCount,it=lt-1;for(h=0;h<g;h++){if(i=b[h],nt[i]||(nt[i]=bvt()),k=ht[i],k.otherDims.itemName===0&&(tt=this._nameDimIdx=h),k.otherDims.itemId===0&&(this._idDimIdx=h),rt=udr[k.type],s[i]||(s[i]=[]),v=s[i][it],v&&v.length<o){for(ut=new rt(Math.min(t-it*o,o)),y=0;y<v.length;y++)ut[y]=v[y];s[i][it]=ut}for(f=lt*o;f<t;f+=o)s[i].push(new rt(Math.min(t-f,o)));this._chunkCount=s[i].length}for(e=new Array(g),u=n;u<t;u++){for(e=l.getItem(u,e),ft=Math.floor(u/o),et=u%o,f=0;f<g;f++){var i=b[f],vt=s[i][ft],p=this._dimValueGetter(e,i,u,f);vt[et]=p;w=nt[i];p<w[0]&&(w[0]=p);p>w[1]&&(w[1]=p)}l.pure||(r=ct[u],e&&r==null&&(e.name!=null?ct[u]=r=e.name:tt!=null&&(ot=b[tt],st=s[ot][ft],st&&(r=st[et],d=ht[ot].ordinalMeta,d&&d.categories.length&&(r=d.categories[r])))),c=e==null?null:e.id,c==null&&r!=null&&(a[r]=a[r]||0,c=r,a[r]>0&&(c+="__ec__"+a[r]),a[r]++),c!=null&&(at[u]=c))}!l.persistent&&l.clean&&l.clean();this._rawCount=this._count=t;this._extent={};odr(this)}};h.count=function(){return this._count};h.getIndices=function(){var r=this._indices,u,i,t,n;if(r)if(i=r.constructor,u=this._count,i===Array)for(t=new i(u),n=0;n<u;n++)t[n]=r[n];else t=new i(r.buffer,0,u);else for(i=frt(this),t=new i(this.count()),n=0;n<t.length;n++)t[n]=n;return t};h.get=function(n,t){var i;if(!(t>=0&&t<this._count))return NaN;if(i=this._storage,!i[n])return NaN;t=this.getRawIndex(t);var r=Math.floor(t/this._chunkSize),u=t%this._chunkSize,f=i[n][r];return f[u]};h.getByRawIndex=function(n,t){var i;if(!(t>=0&&t<this._rawCount))return NaN;if(i=this._storage[n],!i)return NaN;var r=Math.floor(t/this._chunkSize),u=t%this._chunkSize,f=i[r];return f[u]};h._getFast=function(n,t){var i=Math.floor(t/this._chunkSize),r=t%this._chunkSize,u=this._storage[n][i];return u[r]};h.getValues=function(n,t){var u=[],r,f;for(i(n)||(t=n,n=this.dimensions),r=0,f=n.length;r<f;r++)u.push(this.get(n[r],t));return u};h.hasValue=function(n){for(var i=this._dimensionsSummary.dataDimsOnCoord,r=this._dimensionInfos,t=0,u=i.length;t<u;t++)if(r[i[t]].type!=="ordinal"&&isNaN(this.get(i[t],n)))return!1;return!0};h.getDataExtent=function(n){var o,e,s,h,t,r,u,f,i;if(n=this.getDimension(n),o=this._storage[n],e=bvt(),!o)return e;if(s=this.count(),h=!this._indices,h)return this._rawExtent[n].slice();if(t=this._extent[n],t)return t.slice();for(t=e,r=t[0],u=t[1],f=0;f<s;f++)i=this._getFast(n,this.getRawIndex(f)),i<r&&(r=i),i>u&&(u=i);return t=[r,u],this._extent[n]=t,t};h.getApproximateExtent=function(n){return n=this.getDimension(n),this._approximateExtent[n]||this.getDataExtent(n)};h.setApproximateExtent=function(n,t){t=this.getDimension(t);this._approximateExtent[t]=n.slice()};h.getCalculationInfo=function(n){return this._calculationInfo[n]};h.setCalculationInfo=function(n,t){rrt(n)?o(this._calculationInfo,n):this._calculationInfo[n]=t};h.getSum=function(n){var f=this._storage[n],r=0,t,u,i;if(f)for(t=0,u=this.count();t<u;t++)i=this.get(n,t),isNaN(i)||(r+=i);return r};h.getMedian=function(n){var r=[],i,t;return this.each(n,function(n){isNaN(n)||r.push(n)}),i=[].concat(r).sort(function(n,t){return n-t}),t=this.count(),t===0?0:t%2==1?i[(t-1)/2]:(i[t/2]+i[t/2-1])/2};h.rawIndexOf=function(n,t){var r=n&&this._invertedIndicesMap[n],i;if(u&&!r)throw new Error("Do not supported yet");return(i=r[t],i==null||isNaN(i))?-1:i};h.indexOfName=function(n){for(var t=0,i=this.count();t<i;t++)if(this.getName(t)===n)return t;return-1};h.indexOfRawIndex=function(n){var i,r,u,f,t;if(!this._indices)return n;if(n>=this._rawCount||n<0)return-1;if(i=this._indices,r=i[n],r!=null&&r<this._count&&r===n)return n;for(u=0,f=this._count-1;u<=f;)if(t=(u+f)/2|0,i[t]<n)u=t+1;else if(i[t]>n)f=t-1;else return t;return-1};h.indicesOfNearest=function(n,t,i){var c=this._storage,l=c[n],f=[],e,s,r,h,u,o;if(!l)return f;for(i==null&&(i=Infinity),e=Number.MAX_VALUE,s=-1,r=0,h=this.count();r<h;r++)u=t-this.get(n,r),o=Math.abs(u),u<=i&&o<=e&&((o<e||u>=0&&s<0)&&(e=o,s=u,f.length=0),f.push(r));return f};h.getRawIndex=fb;h.getRawDataItem=function(n){var i,t,r;if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(n));for(i=[],t=0;t<this.dimensions.length;t++)r=this.dimensions[t],i.push(this.get(r,n));return i};h.getName=function(n){var t=this.getRawIndex(n);return this._nameList[t]||bli(this,this._nameDimIdx,t)||""};h.getId=function(n){return pvt(this,this.getRawIndex(n))};h.each=function(n,t,i,f){var h,e,o,s;if(this._count)for(typeof n=="function"&&(f=i,i=t,t=n,n=[]),i=i||f||this,n=r(wvt(n),this.getDimension,this),u&&ert(this,n),h=n.length,e=0;e<this.count();e++)switch(h){case 0:t.call(i,e);break;case 1:t.call(i,this.get(n[0],e),e);break;case 2:t.call(i,this.get(n[0],e),this.get(n[1],e),e);break;default:for(o=0,s=[];o<h;o++)s[o]=this.get(n[o],e);s[o]=e;t.apply(i,s)}};h.filterSelf=function(n,t,i,f){var e,s,h,w,o;if(this._count){typeof n=="function"&&(f=i,i=t,t=n,n=[]);i=i||f||this;n=r(wvt(n),this.getDimension,this);u&&ert(this,n);var c=this.count(),b=frt(this),y=new b(c),l=[],a=n.length,v=0,p=n[0];for(e=0;e<c;e++){if(h=this.getRawIndex(e),a===0)s=t.call(i,e);else if(a===1)w=this._getFast(p,h),s=t.call(i,w,e);else{for(o=0;o<a;o++)l[o]=this._getFast(p,h);l[o]=e;s=t.apply(i,l)}s&&(y[v++]=h)}return v<c&&(this._indices=y),this._count=v,this._extent={},this.getRawIndex=this._indices?eb:fb,this}};h.selectRange=function(n){var f,l,e,h,k,d,g,y,t,nt,c,i,tt,r;if(this._count){f=[];for(l in n)n.hasOwnProperty(l)&&f.push(l);if(u&&ert(this,f),e=f.length,e){var a=this.count(),it=frt(this),s=new it(a),o=0,v=f[0],p=n[v][0],w=n[v][1],b=!1;if(!this._indices)if(h=0,e===1){for(k=this._storage[f[0]],i=0;i<this._chunkCount;i++)for(d=k[i],g=Math.min(this._count-i*this._chunkSize,this._chunkSize),t=0;t<g;t++)r=d[t],(r>=p&&r<=w||isNaN(r))&&(s[o++]=h),h++;b=!0}else if(e===2){var k=this._storage[v],rt=this._storage[f[1]],ut=n[f[1]][0],ft=n[f[1]][1];for(i=0;i<this._chunkCount;i++){var d=k[i],et=rt[i],g=Math.min(this._count-i*this._chunkSize,this._chunkSize);for(t=0;t<g;t++)r=d[t],y=et[t],(r>=p&&r<=w||isNaN(r))&&(y>=ut&&y<=ft||isNaN(y))&&(s[o++]=h),h++}b=!0}if(!b)if(e===1)for(t=0;t<a;t++)c=this.getRawIndex(t),r=this._getFast(v,c),(r>=p&&r<=w||isNaN(r))&&(s[o++]=c);else for(t=0;t<a;t++){for(nt=!0,c=this.getRawIndex(t),i=0;i<e;i++)tt=f[i],r=this._getFast(l,c),(r<n[tt][0]||r>n[tt][1])&&(nt=!1);nt&&(s[o++]=this.getRawIndex(t))}return o<a&&(this._indices=s),this._count=o,this._extent={},this.getRawIndex=this._indices?eb:fb,this}}};h.mapArray=function(n,t,i,r){typeof n=="function"&&(r=i,i=t,t=n,n=[]);i=i||r||this;var u=[];return this.each(n,function(){u.push(t&&t.apply(this,arguments))},i),u};h.map=function(n,t,i,f){var e,s,h,o,c;i=i||f||this;n=r(wvt(n),this.getDimension,this);u&&ert(this,n);e=kli(this,n);e._indices=this._indices;e.getRawIndex=e._indices?eb:fb;var g=e._storage,y=[],p=this._chunkSize,w=n.length,nt=this.count(),v=[],tt=e._rawExtent;for(s=0;s<nt;s++){for(h=0;h<w;h++)v[h]=this.get(n[h],s);if(v[w]=s,o=t&&t.apply(i,v),o!=null){typeof o!="object"&&(y[0]=o,o=y);var b=this.getRawIndex(s),it=Math.floor(b/p),rt=b%p;for(c=0;c<o.length;c++){var k=n[c],l=o[c],a=tt[k],d=g[k];d&&(d[it][rt]=l);l<a[0]&&(a[0]=l);l>a[1]&&(a[1]=l)}}}return e};h.downSample=function(n,t,i,r){for(var h,u=kli(this,[n]),k=u._storage,c=[],o=Math.floor(1/t),y=k[n],s=this.count(),l=this._chunkSize,a=u._rawExtent[n],p=new(frt(this))(s),w=0,f=0;f<s;f+=o){for(o>s-f&&(o=s-f,c.length=o),h=0;h<o;h++){var b=this.getRawIndex(f+h),d=Math.floor(b/l),g=b%l;c[h]=y[d][g]}var e=i(c),v=this.getRawIndex(Math.min(f+r(c,e)||0,s-1)),nt=Math.floor(v/l),tt=v%l;y[nt][tt]=e;e<a[0]&&(a[0]=e);e>a[1]&&(a[1]=e);p[w++]=v}return u._count=w,u._indices=p,u.getRawIndex=eb,u};h.getItemModel=function(n){var t=this.hostModel;return new ut(this.getRawDataItem(n),t,t&&t.ecModel)};h.diff=function(n){var t=this;return new vo(n?n.getIndices():[],this.getIndices(),function(t){return pvt(n,t)},function(n){return pvt(t,n)})};h.getVisual=function(n){var t=this._visual;return t&&t[n]};h.setVisual=function(n,t){if(rrt(n)){for(var i in n)n.hasOwnProperty(i)&&this.setVisual(i,n[i]);return}this._visual=this._visual||{};this._visual[n]=t};h.setLayout=function(n,t){if(rrt(n)){for(var i in n)n.hasOwnProperty(i)&&this.setLayout(i,n[i]);return}this._layout[n]=t};h.getLayout=function(n){return this._layout[n]};h.getItemLayout=function(n){return this._itemLayouts[n]};h.setItemLayout=function(n,t,i){this._itemLayouts[n]=i?o(this._itemLayouts[n]||{},t):t};h.clearItemLayouts=function(){this._itemLayouts.length=0};h.getItemVisual=function(n,t,i){var r=this._itemVisuals[n],u=r&&r[t];return u==null&&!i?this.getVisual(t):u};h.setItemVisual=function(n,t,i){var u=this._itemVisuals[n]||{},f=this.hasItemVisual,r;if(this._itemVisuals[n]=u,rrt(t)){for(r in t)t.hasOwnProperty(r)&&(u[r]=t[r],f[r]=!0);return}u[t]=i;f[t]=!0};h.clearAllVisual=function(){this._visual={};this._itemVisuals=[];this.hasItemVisual={}};dli=function(n){n.seriesIndex=this.seriesIndex;n.dataIndex=this.dataIndex;n.dataType=this.dataType};h.setItemGraphicEl=function(n,t){var i=this.hostModel;t&&(t.dataIndex=n,t.dataType=this.dataType,t.seriesIndex=i&&i.seriesIndex,t.type==="group"&&t.traverse(dli,t));this._graphicEls[n]=t};h.getItemGraphicEl=function(n){return this._graphicEls[n]};h.eachItemGraphicEl=function(n,i){t(this._graphicEls,function(t,r){t&&n&&n.call(i,t,r)})};h.cloneShallow=function(n){var t,i;return n||(t=r(this.dimensions,this.getDimensionInfo,this),n=new ai(t,this.hostModel)),n._storage=this._storage,wli(n,this),this._indices?(i=this._indices.constructor,n._indices=new i(this._indices)):n._indices=null,n.getRawIndex=n._indices?eb:fb,n};h.wrapMethod=function(n,t){var i=this[n];typeof i=="function"&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(n),this[n]=function(){var n=i.apply(this,arguments);return t.apply(this,[n].concat(ist(arguments)))})};h.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"];h.CHANGABLE_METHODS=["filterSelf","selectRange"];rl=function(n,t){return t=t||{},gli(t.coordDimensions||[],n,{dimsDef:t.dimensionsDefine||n.dimensionsDefine,encodeDef:t.encodeDefine||n.encodeDefine,dimCount:t.dimensionsCount,generateCoord:t.generateCoord,generateCoordCount:t.generateCoordCount})};oi.prototype.parse=function(n){return n};oi.prototype.getSetting=function(n){return this._setting[n]};oi.prototype.contain=function(n){var t=this._extent;return n>=t[0]&&n<=t[1]};oi.prototype.normalize=function(n){var t=this._extent;return t[1]===t[0]?.5:(n-t[0])/(t[1]-t[0])};oi.prototype.scale=function(n){var t=this._extent;return n*(t[1]-t[0])+t[0]};oi.prototype.unionExtent=function(n){var t=this._extent;n[0]<t[0]&&(t[0]=n[0]);n[1]>t[1]&&(t[1]=n[1])};oi.prototype.unionExtentFromData=function(n,t){this.unionExtent(n.getApproximateExtent(t))};oi.prototype.getExtent=function(){return this._extent.slice()};oi.prototype.setExtent=function(n,t){var i=this._extent;isNaN(n)||(i[0]=n);isNaN(t)||(i[1]=t)};oi.prototype.isBlank=function(){return this._isBlank};oi.prototype.setBlank=function(n){this._isBlank=n};oi.prototype.getLabel=null;ew(oi);cn(oi,{registerWhenExtend:!0});ob.createByAxisModel=function(n){var t=n.option,i=t.data,u=i&&r(i,adr);return new ob({categories:u,needCollect:!u,deduplication:t.dedplication!==!1})};kvt=ob.prototype;kvt.getOrdinal=function(n){return iai(this).get(n)};kvt.parseAndCollect=function(n){var t,i=this._needCollect,r;return typeof n!="string"&&!i?n:i&&!this._deduplication?(t=this.categories.length,this.categories[t]=n,t):(r=iai(this),t=r.get(n),t==null&&(i?(t=this.categories.length,this.categories[t]=n,r.set(n,t)):t=NaN),t)};srt=oi.prototype;hrt=oi.extend({type:"ordinal",init:function(n,t){(!n||i(n))&&(n=new ob({categories:n}));this._ordinalMeta=n;this._extent=t||[0,n.categories.length-1]},parse:function(n){return typeof n=="string"?this._ordinalMeta.getOrdinal(n):Math.round(n)},contain:function(n){return n=this.parse(n),srt.contain.call(this,n)&&this._ordinalMeta.categories[n]!=null},normalize:function(n){return srt.normalize.call(this,this.parse(n))},scale:function(n){return Math.round(srt.scale.call(this,n))},getTicks:function(){for(var t=[],i=this._extent,n=i[0];n<=i[1];)t.push(n),n++;return t},getLabel:function(n){if(!this.isBlank())return this._ordinalMeta.categories[n]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(n,t){this.unionExtent(n.getApproximateExtent(t))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:di,niceExtent:di});hrt.create=function(){return new hrt};crt=ki;lrt=ki;bf=oi.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(n,t){var i=this._extent;isNaN(n)||(i[0]=parseFloat(n));isNaN(t)||(i[1]=parseFloat(t))},unionExtent:function(n){var t=this._extent;n[0]<t[0]&&(t[0]=n[0]);n[1]>t[1]&&(t[1]=n[1]);bf.prototype.setExtent.call(this,t[0],t[1])},getInterval:function(){return this._interval},setInterval:function(n){this._interval=n;this._niceExtent=this._extent.slice();this._intervalPrecision=rai(n)},getTicks:function(){return ydr(this._interval,this._extent,this._niceExtent,this._intervalPrecision)},getLabel:function(n,t){if(n==null)return"";var i=t&&t.precision;return i==null?i=ott(n)||0:i==="auto"&&(i=this._intervalPrecision),n=lrt(n,i,!0),uh(n)},niceTicks:function(n,t,i){var r,u,f;(n=n||5,r=this._extent,u=r[1]-r[0],isFinite(u))&&(u<0&&(u=-u,r.reverse()),f=vdr(r,n,t,i),this._intervalPrecision=f.intervalPrecision,this._interval=f.interval,this._niceExtent=f.niceTickExtent)},niceExtent:function(n){var t=this._extent,r,u,i;t[0]===t[1]&&(t[0]!==0?(r=t[0],n.fixMax?t[0]-=r/2:(t[1]+=r/2,t[0]-=r/2)):t[1]=1);u=t[1]-t[0];isFinite(u)||(t[0]=0,t[1]=1);this.niceTicks(n.splitNumber,n.minInterval,n.maxInterval);i=this._interval;n.fixMin||(t[0]=lrt(Math.floor(t[0]/i)*i));n.fixMax||(t[1]=lrt(Math.ceil(t[1]/i)*i))}});bf.create=function(){return new bf};var dvt="__ec_stack_",eai=.5,pdr=typeof Float32Array!="undefined"?Float32Array:Array;lai={seriesType:"bar",plan:pv(),reset:function(n){function c(n,f){for(var l=new pdr(n.count*2),a,c=[],v=[],y=0;(a=n.next())!=null;)v[o]=f.get(s,a),v[1-o]=f.get(h,a),c=i.dataToPoint(v,null,c),l[y++]=c[0],l[y++]=c[1];f.setLayout({largePoints:l,barWidth:u,valueAxisStart:yai(t,r,!1),valueAxisHorizontal:e})}if(aai(n)&&vai(n)){var f=n.getData(),i=n.coordinateSystem,t=i.getBaseAxis(),r=i.getOtherAxis(t),s=f.mapDimension(r.dim),h=f.mapDimension(t.dim),e=r.isHorizontal(),o=e?0:1,u=hai(tyt([n]),t,n).width;return u>eai||(u=eai),{progress:c}}}};var bdr=bf.prototype,pai=Math.ceil,wai=Math.floor,gv=1e3,ny=gv*60,sb=ny*60,ni=sb*24,kdr=function(n,t,i,r){while(i<r){var u=i+r>>>1;n[u][1]<t?i=u+1:r=u}return i},iyt=bf.extend({type:"time",getLabel:function(n){var t=this._stepLvl,i=new Date(n);return fat(t[0],i,this.getSetting("useUTC"))},niceExtent:function(n){var t=this._extent,r,i;t[0]===t[1]&&(t[0]-=ni,t[1]+=ni);t[1]===-Infinity&&t[0]===Infinity&&(r=new Date,t[1]=+new Date(r.getFullYear(),r.getMonth(),r.getDate()),t[0]=t[1]-ni);this.niceTicks(n.splitNumber,n.minInterval,n.maxInterval);i=this._interval;n.fixMin||(t[0]=ki(wai(t[0]/i)*i));n.fixMax||(t[1]=ki(pai(t[1]/i)*i))},niceTicks:function(n,t,i){var l,a,e,s;n=n||10;var r=this._extent,h=r[1]-r[0],f=h/n;t!=null&&f<t&&(f=t);i!=null&&f>i&&(f=i);var c=art.length,v=kdr(art,f,0,c),o=art[Math.min(v,c-1)],u=o[1];o[0]==="year"&&(l=h/u,a=tat(l/n,!0),u*=a);e=this.getSetting("useUTC")?0:new Date(+r[0]||+r[1]).getTimezoneOffset()*6e4;s=[Math.round(pai((r[0]-e)/u)*u+e),Math.round(wai((r[1]-e)/u)*u+e)];fai(s,r);this._stepLvl=o;this._interval=u;this._niceExtent=s},parse:function(n){return+yw(n)}});t(["contain","normalize"],function(n){iyt.prototype[n]=function(t){return bdr[n].call(this,this.parse(t))}});art=[["hh:mm:ss",gv],["hh:mm:ss",gv*5],["hh:mm:ss",gv*10],["hh:mm:ss",gv*15],["hh:mm:ss",gv*30],["hh:mm\nMM-dd",ny],["hh:mm\nMM-dd",ny*5],["hh:mm\nMM-dd",ny*10],["hh:mm\nMM-dd",ny*15],["hh:mm\nMM-dd",ny*30],["hh:mm\nMM-dd",sb],["hh:mm\nMM-dd",sb*2],["hh:mm\nMM-dd",sb*6],["hh:mm\nMM-dd",sb*12],["MM-dd\nyyyy",ni],["MM-dd\nyyyy",ni*2],["MM-dd\nyyyy",ni*3],["MM-dd\nyyyy",ni*4],["MM-dd\nyyyy",ni*5],["MM-dd\nyyyy",ni*6],["week",ni*7],["MM-dd\nyyyy",ni*10],["week",ni*14],["week",ni*21],["month",ni*31],["week",ni*42],["month",ni*62],["week",ni*70],["quarter",ni*95],["month",ni*124],["month",ni*155],["half-year",ni*190],["month",ni*248],["month",ni*310],["year",ni*380]];iyt.create=function(n){return new iyt({useUTC:n.ecModel.get("useUTC")})};var vrt=oi.prototype,yrt=bf.prototype,ddr=ott,gdr=ki,ngr=Math.floor,tgr=Math.ceil,prt=Math.pow,ye=Math.log,ryt=oi.extend({type:"log",base:10,$constructor:function(){oi.apply(this,arguments);this._originalScale=new bf},getTicks:function(){var n=this._originalScale,t=this._extent,i=n.getExtent();return r(yrt.getTicks.call(this),function(r){var u=ki(prt(this.base,r));return u=r===t[0]&&n.__fixMin?wrt(u,i[0]):u,r===t[1]&&n.__fixMax?wrt(u,i[1]):u},this)},getLabel:yrt.getLabel,scale:function(n){return n=vrt.scale.call(this,n),prt(this.base,n)},setExtent:function(n,t){var i=this.base;n=ye(n)/ye(i);t=ye(t)/ye(i);yrt.setExtent.call(this,n,t)},getExtent:function(){var r=this.base,n=vrt.getExtent.call(this),t,i;return n[0]=prt(r,n[0]),n[1]=prt(r,n[1]),t=this._originalScale,i=t.getExtent(),t.__fixMin&&(n[0]=wrt(n[0],i[0])),t.__fixMax&&(n[1]=wrt(n[1],i[1])),n},unionExtent:function(n){this._originalScale.unionExtent(n);var t=this.base;n[0]=ye(n[0])/ye(t);n[1]=ye(n[1])/ye(t);vrt.unionExtent.call(this,n)},unionExtentFromData:function(n,t){this.unionExtent(n.getApproximateExtent(t))},niceTicks:function(n){var i,r,t,u,f;if(n=n||10,i=this._extent,r=i[1]-i[0],r!==Infinity&&!(r<=0)){for(t=aoi(r),u=n/r*t,u<=.5&&(t*=10);!isNaN(t)&&Math.abs(t)<1&&Math.abs(t)>0;)t*=10;f=[ki(tgr(i[0]/t)*t),ki(ngr(i[1]/t)*t)];this._interval=t;this._niceExtent=f}},niceExtent:function(n){yrt.niceExtent.call(this,n);var t=this._originalScale;t.__fixMin=n.fixMin;t.__fixMax=n.fixMax}});t(["contain","normalize"],function(n){ryt.prototype[n]=function(t){return t=ye(t)/ye(this.base),vrt[n].call(this,t)}});ryt.create=function(){return new ryt};var ul={getMin:function(n){var i=this.option,t=!n&&i.rangeStart!=null?i.rangeStart:i.min;return this.axis&&t!=null&&t!=="dataMin"&&typeof t!="function"&&!lp(t)&&(t=this.axis.scale.parse(t)),t},getMax:function(n){var i=this.option,t=!n&&i.rangeEnd!=null?i.rangeEnd:i.max;return this.axis&&t!=null&&t!=="dataMax"&&typeof t!="function"&&!lp(t)&&(t=this.axis.scale.parse(t)),t},getNeedCrossZero:function(){var n=this.option;return n.rangeStart!=null||n.rangeEnd!=null?!1:!n.scale},getCoordSysModel:di,setRange:function(n,t){this.option.rangeStart=n;this.option.rangeEnd=t},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},egr=ce({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,t){var i=t.cx,r=t.cy,f=t.width/2,u=t.height/2;n.moveTo(i,r-u);n.lineTo(i+f,r+u);n.lineTo(i-f,r+u);n.closePath()}}),ogr=ce({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,t){var i=t.cx,r=t.cy,u=t.width/2,f=t.height/2;n.moveTo(i,r-f);n.lineTo(i+u,r);n.lineTo(i,r+f);n.lineTo(i-u,r);n.closePath()}}),sgr=ce({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,t){var r=t.x,o=t.y,c=t.width/5*3,l=Math.max(c,t.height),i=c/2,u=i*i/(l-i),f=o-l+i+u,e=Math.asin(u/i),s=Math.cos(e)*i,a=Math.sin(e),v=Math.cos(e),h=i*.6,y=i*.7;n.moveTo(r-s,f+u);n.arc(r,f,i,Math.PI-e,Math.PI*2+e);n.bezierCurveTo(r+s-a*h,f+u+v*h,r,o-y,r,o);n.bezierCurveTo(r,o-y,r-s+a*h,f+u+v*h,r-s,f+u);n.closePath()}}),hgr=ce({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,t){var u=t.height,e=t.width,i=t.x,r=t.y,f=e/3*2;n.moveTo(i,r);n.lineTo(i+f,r+u);n.lineTo(i,r+u/4*3);n.lineTo(i-f,r+u);n.lineTo(i,r);n.closePath()}}),cgr={line:uu,rect:et,roundRect:et,square:et,circle:th,diamond:ogr,pin:sgr,arrow:hgr,triangle:egr},lgr={line:function(n,t,i,r,u){u.x1=n;u.y1=t+r/2;u.x2=n+i;u.y2=t+r/2},rect:function(n,t,i,r,u){u.x=n;u.y=t;u.width=i;u.height=r},roundRect:function(n,t,i,r,u){u.x=n;u.y=t;u.width=i;u.height=r;u.r=Math.min(i,r)/4},square:function(n,t,i,r,u){var f=Math.min(i,r);u.x=n;u.y=t;u.width=f;u.height=f},circle:function(n,t,i,r,u){u.cx=n+i/2;u.cy=t+r/2;u.r=Math.min(i,r)/2},diamond:function(n,t,i,r,u){u.cx=n+i/2;u.cy=t+r/2;u.width=i;u.height=r},pin:function(n,t,i,r,u){u.x=n+i/2;u.y=t+r/2;u.width=i;u.height=r},arrow:function(n,t,i,r,u){u.x=n+i/2;u.y=t+r/2;u.width=i;u.height=r},triangle:function(n,t,i,r,u){u.cx=n+i/2;u.cy=t+r/2;u.width=i;u.height=r}},fyt={};t(cgr,function(n,t){fyt[t]=new n});kai=ce({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var n=this.style,t=this.shape;t.symbolType==="pin"&&n.textPosition==="inside"&&(n.textPosition=["50%","40%"],n.textAlign="center",n.textVerticalAlign="middle")},buildPath:function(n,t,i){var u=t.symbolType,r=fyt[u];t.symbolType!=="none"&&(r||(u="rect",r=fyt[u]),lgr[u](t.x,t.y,t.width,t.height,r.shape),r.buildPath(n,r.shape,i))}});dai={isDimensionStacked:yo,enableDataStack:tai,getStackedDimension:ort};gai=(Object.freeze||Object)({createList:vgr,getLayoutRect:li,dataStack:dai,createScale:ygr,mixinAxisModelCommonMethods:pgr,completeDimensions:gli,createDimensions:rl,createSymbol:cu});nvi=1e-8;cb.prototype={constructor:cb,properties:null,getBoundingRect:function(){var f=this._rect,i,s;if(f)return f;var r=Number.MAX_VALUE,n=[r,r],t=[-r,-r],e=[],o=[],u=this.geometries;for(i=0;i<u.length;i++)u[i].type==="polygon"&&(s=u[i].exterior,kct(s,e,o),io(n,n,e),ro(t,t,o));return i===0&&(n[0]=n[1]=t[0]=t[1]=0),this._rect=new b(n[0],n[1],t[0]-n[0],t[1]-n[1])},contain:function(n){var o=this.getBoundingRect(),i=this.geometries,t,f,e,r,u;if(!o.contain(n[0],n[1]))return!1;n:for(t=0,f=i.length;t<f;t++)if(i[t].type==="polygon"&&(e=i[t].exterior,r=i[t].interiors,fl(e,n[0],n[1]))){for(u=0;u<(r?r.length:0);u++)if(fl(r[u]))continue n;return!0}return!1},transformTo:function(n,t,i,r){var f=this.getBoundingRect(),l=f.width/f.height,e,c,o,s,u;i?r||(r=i/l):i=l*r;var a=new b(n,t,i,r),v=f.calculateTransform(a),h=this.geometries;for(e=0;e<h.length;e++)if(h[e].type==="polygon"){for(c=h[e].exterior,o=h[e].interiors,u=0;u<c.length;u++)vt(c[u],c[u],v);for(s=0;s<(o?o.length:0);s++)for(u=0;u<o[s].length;u++)vt(o[s][u],o[s][u],v)}f=this._rect;f.copy(a);this.center=[f.x+f.width/2,f.y+f.height/2]},cloneShallow:function(n){n==null&&(n=this.name);var t=new cb(n,this.geometries,this.center);return t._rect=this._rect,t.transformTo=null,t}};brt=function(n){return wgr(n),r(hi(n.features,function(n){return n.geometry&&n.properties&&n.geometry.coordinates.length>0}),function(n){var i=n.properties,r=n.geometry,u=r.coordinates,f=[],e;return r.type==="Polygon"&&f.push({type:"polygon",exterior:u[0],interiors:u.slice(1)}),r.type==="MultiPolygon"&&t(u,function(n){n[0]&&f.push({type:"polygon",exterior:n[0],interiors:n.slice(1)})}),e=new cb(i.name,f,i.cp),e.properties=i,e})};iy=pr();eyt=[0,1];fi=function(n,t,i){this.dim=n;this.scale=t;this._extent=i||[0,0];this.inverse=!1;this.onBand=!1};fi.prototype={constructor:fi,contain:function(n){var t=this._extent,i=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]);return n>=i&&n<=r},containData:function(n){return this.contain(this.dataToCoord(n))},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(n){return glt(n||this.scale.getExtent(),this._extent)},setExtent:function(n,t){var i=this._extent;i[0]=n;i[1]=t},dataToCoord:function(n,t){var i=this._extent,r=this.scale;return n=r.normalize(n),this.onBand&&r.type==="ordinal"&&(i=i.slice(),cvi(i,r.count())),ri(n,eyt,i,t)},coordToData:function(n,t){var i=this._extent,r=this.scale,u;return this.onBand&&r.type==="ordinal"&&(i=i.slice(),cvi(i,r.count())),u=ri(n,i,eyt,t),this.scale.scale(u)},pointToData:function(){},getTicksCoords:function(n){n=n||{};var t=n.tickModel||this.getTickModel(),i=kgr(this,t),f=i.ticks,u=r(f,function(n){return{coord:this.dataToCoord(n),tickValue:n}},this),e=t.get("alignWithLabel");return unr(this,u,i.tickCategoryInterval,e,n.clamp),u},getViewLabels:function(){return bgr(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var t=this._extent,i=this.scale.getExtent(),n=i[1]-i[0]+(this.onBand?1:0),r;return n===0&&(n=1),r=Math.abs(t[1]-t[0]),Math.abs(r)/n},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return inr(this)}};lvi=brt;oyt={};t(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(n){oyt[n]=eii[n]});syt={};t(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(n){syt[n]=vf[n]});wt.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(n){if(u){var t=n.coordinateSystem;if(t!=="polar"&&t!=="cartesian2d")throw new Error("Line not support coordinateSystem besides cartesian and polar");}return po(this.getSource(),this)},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clipOverflow:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:Infinity}});rf=hh.prototype;avi=hh.getSymbolSize=function(n,t){var i=n.getItemVisual(t,"symbolSize");return i instanceof Array?i.slice():[+i,+i]};rf._createSymbol=function(n,t,i,r,u){this.removeAll();var e=t.getItemVisual(i,"color"),f=cu(n,-1,-1,2,2,e,u);f.attr({z2:100,culling:!0,scale:hyt(r)});f.drift=fnr;this._symbolType=n;this.add(f)};rf.stopSymbolAnimation=function(n){this.childAt(0).stopAnimation(n)};rf.getSymbolPath=function(){return this.childAt(0)};rf.getScale=function(){return this.childAt(0).scale};rf.highlight=function(){this.childAt(0).trigger("emphasis")};rf.downplay=function(){this.childAt(0).trigger("normal")};rf.setZ=function(n,t){var i=this.childAt(0);i.zlevel=n;i.z=t};rf.setDraggable=function(n){var t=this.childAt(0);t.draggable=n;t.cursor=n?"move":"pointer"};rf.updateData=function(n,t,i){var s,r;this.silent=!1;var e=n.getItemVisual(t,"symbol")||"circle",u=n.hostModel,f=avi(n,t),o=e!==this._symbolType;if(o?(s=n.getItemVisual(t,"symbolKeepAspect"),this._createSymbol(e,n,t,f,s)):(r=this.childAt(0),r.silent=!1,w(r,{scale:hyt(f)},u,t)),this._updateCommon(n,t,f,i),o){var r=this.childAt(0),h=i&&i.fadeIn,c={scale:r.scale.slice()};h&&(c.style={opacity:r.style.opacity});r.scale=[0,0];h&&(r.style.opacity=0);sr(r,c,u,t)}this._seriesModel=u};var enr=["itemStyle"],onr=["emphasis","itemStyle"],snr=["label"],hnr=["emphasis","label"];rf._updateCommon=function(n,t,i,r){function it(t){return tt?n.getName(t):krt(n,t)}var u=this.childAt(0),p=n.hostModel,w=n.getItemVisual(t,"color"),e,a,v,y,c,tt;u.type!=="image"&&u.useStyle({strokeNoScale:!0});var b=r&&r.itemStyle,s=r&&r.hoverItemStyle,k=r&&r.symbolRotate,h=r&&r.symbolOffset,d=r&&r.labelModel,g=r&&r.hoverLabelModel,nt=r&&r.hoverAnimation,l=r&&r.cursorStyle;if(!r||n.hasItemOption?(e=r&&r.itemModel?r.itemModel:n.getItemModel(t),b=e.getModel(enr).getItemStyle(["color"]),s=e.getModel(onr).getItemStyle(),k=e.getShallow("symbolRotate"),h=e.getShallow("symbolOffset"),d=e.getModel(snr),g=e.getModel(hnr),nt=e.getShallow("hoverAnimation"),l=e.getShallow("cursor")):s=o({},s),a=u.style,u.attr("rotation",(k||0)*Math.PI/180||0),h&&u.attr("position",[f(h[0],i[0]),f(h[1],i[1])]),l&&u.attr("cursor",l),u.setColor(w,r&&r.symbolInnerColor),u.setStyle(b),v=n.getItemVisual(t,"opacity"),v!=null&&(a.opacity=v),y=n.getItemVisual(t,"liftZ"),c=u.__z2Origin,y!=null?c==null&&(u.__z2Origin=u.z2,u.z2+=y):c!=null&&(u.z2=c,u.__z2Origin=null),tt=r&&r.useNameLabel,du(a,s,d,g,{labelFetcher:p,labelDataIndex:t,defaultText:it,isRectText:!0,autoColor:w}),u.off("mouseover").off("mouseout").off("emphasis").off("normal"),u.hoverStyle=s,pt(u),u.__symbolOriginalScale=hyt(i),nt&&p.isAnimationEnabled())u.on("mouseover",cnr).on("mouseout",lnr).on("emphasis",vvi).on("normal",yvi)};rf.fadeOut=function(n,t){var i=this.childAt(0);this.silent=i.silent=!0;t&&t.keepLabel||(i.style.text=null);w(i,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,n)};ct(hh,e);el=ry.prototype;el.updateData=function(n,t){t=pvi(t);var i=this.group,e=n.hostModel,r=this._data,u=this._symbolCtor,f=wvi(n);r||i.removeAll();n.diff(r).add(function(r){var o=n.getItemLayout(r),e;cyt(n,o,r,t)&&(e=new u(n,r,f),e.attr("position",o),n.setItemGraphicEl(r,e),i.add(e))}).update(function(o,s){var h=r.getItemGraphicEl(s),c=n.getItemLayout(o);if(!cyt(n,c,o,t)){i.remove(h);return}h?(h.updateData(n,o,f),w(h,{position:c},e)):(h=new u(n,o),h.attr("position",c));i.add(h);n.setItemGraphicEl(o,h)}).remove(function(n){var t=r.getItemGraphicEl(n);t&&t.fadeOut(function(){i.remove(t)})}).execute();this._data=n};el.isPersistent=function(){return!0};el.updateLayout=function(){var n=this._data;n&&n.eachItemGraphicEl(function(t,i){var r=n.getItemLayout(i);t.attr("position",r)})};el.incrementalPrepareUpdate=function(n){this._seriesScope=wvi(n);this._data=null;this.group.removeAll()};el.incrementalUpdate=function(n,t,i){function e(n){n.isGroup||(n.incremental=n.useHoverLayer=!0)}var r,f,u;for(i=pvi(i),r=n.start;r<n.end;r++)f=t.getItemLayout(r),cyt(t,f,r,i)&&(u=new this._symbolCtor(t,r,this._seriesScope),u.traverse(e),u.attr("position",f),this.group.add(u),t.setItemGraphicEl(r,u))};el.remove=function(n){var t=this.group,i=this._data;i&&n?i.eachItemGraphicEl(function(n){n.fadeOut(function(){t.remove(n)})}):t.removeAll()};var ynr=function(n,t,i,r,u,f,e,o){for(var c,g,v,nt,tt,s,it=vnr(n,t),y=[],p=[],w=[],b=[],rt=[],l=[],a=[],k=lyt(u,t,e),d=lyt(f,n,o),h=0;h<it.length;h++){c=it[h];g=!0;switch(c.cmd){case"=":v=n.getItemLayout(c.idx);nt=t.getItemLayout(c.idx1);(isNaN(v[0])||isNaN(v[1]))&&(v=nt.slice());y.push(v);p.push(nt);w.push(i[c.idx]);b.push(r[c.idx1]);a.push(t.getRawIndex(c.idx1));break;case"+":s=c.idx;y.push(u.dataToPoint([t.get(k.dataDimsForPoint[0],s),t.get(k.dataDimsForPoint[1],s)]));p.push(t.getItemLayout(s).slice());w.push(ayt(k,u,t,s));b.push(r[s]);a.push(t.getRawIndex(s));break;case"-":s=c.idx;tt=n.getRawIndex(s);tt!==s?(y.push(n.getItemLayout(s)),p.push(f.dataToPoint([n.get(d.dataDimsForPoint[0],s),n.get(d.dataDimsForPoint[1],s)])),w.push(i[s]),b.push(ayt(d,f,n,s)),a.push(tt)):g=!1}g&&(rt.push(c),l.push(l.length))}l.sort(function(n,t){return a[n]-a[t]});var ut=[],ft=[],et=[],ot=[],st=[];for(h=0;h<l.length;h++)s=l[h],ut[h]=y[s],ft[h]=p[s],et[h]=w[s],ot[h]=b[s],st[h]=rt[s];return{current:ut,next:ft,stackedOnCurrent:et,stackedOnNext:ot,status:st}},bvi=io,kvi=ro,dvi=ap,drt=gi,vyt=[],uf=[],ff=[];gvi=nt.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:flt(nt.prototype.brush),buildPath:function(n,t){var u=t.points,r=0,i=u.length,f=pyt(u,t.smoothConstraint);if(t.connectNulls){for(;i>0;i--)if(!wo(u[i-1]))break;for(;r<i;r++)if(!wo(u[r]))break}while(r<i)r+=yyt(n,u,r,i,i,1,f.min,f.max,t.smooth,t.smoothMonotone,t.connectNulls)+1}});wyt=nt.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:flt(nt.prototype.brush),buildPath:function(n,t){var u=t.points,e=t.stackedOnPoints,r=0,i=u.length,o=t.smoothMonotone,s=pyt(u,t.smoothConstraint),h=pyt(e,t.smoothConstraint),f;if(t.connectNulls){for(;i>0;i--)if(!wo(u[i-1]))break;for(;r<i;r++)if(!wo(u[r]))break}while(r<i)f=yyt(n,u,r,i,i,1,s.min,s.max,t.smooth,o,t.connectNulls),yyt(n,e,r+f-1,f,i,-1,h.min,h.max,t.stackedOnSmooth,o,t.connectNulls),r+=f+1,n.closePath()}});yi.extend({type:"line",init:function(){var t=new e,n=new ry;this.group.add(n.group);this._symbolDraw=n;this._lineGroup=t},render:function(n,t,i){var r=n.coordinateSystem,it=this.group,u=n.getData(),ft=n.getModel("lineStyle"),p=n.getModel("areaStyle"),f=u.mapArray(u.getItemLayout),rt=r.type==="polar",et=this._coordSys,w=this._symbolDraw,c=this._polyline,e=this._polygon,l=this._lineGroup,a=n.get("animation"),b=!p.isEmpty(),k=p.get("origin"),ot=lyt(r,u,k),o=bnr(r,u,ot),v=n.get("showSymbol"),ut=v&&!rt&&ntu(n,u,r),d=this._data,h,g,y,nt,tt;d&&d.eachItemGraphicEl(function(n,t){n.__temp&&(it.remove(n),d.setItemGraphicEl(t,null))});v||w.remove();it.add(l);h=!rt&&n.get("step");c&&et.type===r.type&&h===this._step?(b&&!e?e=this._newPolygon(f,o,r,a):e&&!b&&(l.remove(e),e=this._polygon=null),l.setClipPath(grt(r,!1,!1,n)),v&&w.updateData(u,{isIgnore:ut,clipShape:grt(r,!1,!0,n)}),u.eachItemGraphicEl(function(n){n.stopAnimation(!0)}),nyi(this._stackedOnPoints,o)&&nyi(this._points,f)||(a?this._updateAnimation(u,o,r,i,h,k):(h&&(f=ch(f,r,h),o=ch(o,r,h)),c.setShape({points:f}),e&&e.setShape({points:f,stackedOnPoints:o})))):(v&&w.updateData(u,{isIgnore:ut,clipShape:grt(r,!1,!0,n)}),h&&(f=ch(f,r,h),o=ch(o,r,h)),c=this._newPolyline(f,r,a),b&&(e=this._newPolygon(f,o,r,a)),l.setClipPath(grt(r,!0,!1,n)));g=gnr(u,r)||u.getVisual("color");c.useStyle(s(ft.getLineStyle(),{fill:"none",stroke:g,lineJoin:"bevel"}));y=n.get("smooth");y=tyi(n.get("smooth"));c.setShape({smooth:y,smoothMonotone:n.get("smoothMonotone"),connectNulls:n.get("connectNulls")});e&&(nt=u.getCalculationInfo("stackedOnSeries"),tt=0,e.useStyle(s(p.getAreaStyle(),{fill:g,opacity:.7,lineJoin:"bevel"})),nt&&(tt=tyi(nt.get("smooth"))),e.setShape({smooth:y,stackedOnSmooth:tt,smoothMonotone:n.get("smoothMonotone"),connectNulls:n.get("connectNulls")}));this._data=u;this._coordSys=r;this._stackedOnPoints=o;this._points=f;this._step=h;this._valueOrigin=k},dispose:function(){},highlight:function(n,t,i,r){var e=n.getData(),f=on(e,r),u,o;if(!(f instanceof Array)&&f!=null&&f>=0){if(u=e.getItemGraphicEl(f),!u){if(o=e.getItemLayout(f),!o)return;u=new hh(e,f);u.position=o;u.setZ(n.get("zlevel"),n.get("z"));u.ignore=isNaN(o[0])||isNaN(o[1]);u.__temp=!0;e.setItemGraphicEl(f,u);u.stopSymbolAnimation(!0);this.group.add(u)}u.highlight()}else yi.prototype.highlight.call(this,n,t,i,r)},downplay:function(n,t,i,r){var e=n.getData(),f=on(e,r),u;f!=null&&f>=0?(u=e.getItemGraphicEl(f),u&&(u.__temp?(e.setItemGraphicEl(f,null),this.group.remove(u)):u.downplay())):yi.prototype.downplay.call(this,n,t,i,r)},_newPolyline:function(n){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new gvi({shape:{points:n},silent:!0,z2:10}),this._lineGroup.add(t),this._polyline=t,t},_newPolygon:function(n,t){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new wyt({shape:{points:n,stackedOnPoints:t},silent:!0}),this._lineGroup.add(i),this._polygon=i,i},_updateAnimation:function(n,t,i,r,u,f){var o=this._polyline,l=this._polygon,p=n.hostModel,e=ynr(this._data,n,this._stackedOnPoints,t,this._coordSys,i,this._valueOrigin,f),a=e.current,b=e.stackedOnCurrent,v=e.next,k=e.stackedOnNext,h,c,s,d,y;for(u&&(a=ch(e.current,i,u),b=ch(e.stackedOnCurrent,i,u),v=ch(e.next,i,u),k=ch(e.stackedOnNext,i,u)),o.shape.__points=e.current,o.shape.points=a,w(o,{shape:{points:v}},p),l&&(l.setShape({points:a,stackedOnPoints:b}),w(l,{shape:{points:v,stackedOnPoints:k}},p)),h=[],c=e.status,s=0;s<c.length;s++)d=c[s].cmd,d==="="&&(y=n.getItemGraphicEl(c[s].idx1),y&&h.push({el:y,ptIdx:s}));o.animators&&o.animators.length&&o.animators[0].during(function(){for(var t,n=0;n<h.length;n++)t=h[n].el,t.attr("position",o.shape.__points[h[n].ptIdx])})},remove:function(){var t=this.group,n=this._data;this._lineGroup.removeAll();this._symbolDraw.remove(!0);n&&n.eachItemGraphicEl(function(i,r){i.__temp&&(t.remove(i),n.setItemGraphicEl(r,null))});this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var ol=function(n,t,i){return{seriesType:n,performRawSeries:!0,reset:function(n,r){function h(t,i){var f,e;if(typeof u=="function"&&(f=n.getRawValue(i),e=n.getDataParams(i),t.setItemVisual(i,"symbolSize",u(f,e))),t.hasItemOption){var r=t.getItemModel(i),o=r.getShallow("symbol",!0),s=r.getShallow("symbolSize",!0),h=r.getShallow("symbolKeepAspect",!0);o!=null&&t.setItemVisual(i,"symbol",o);s!=null&&t.setItemVisual(i,"symbolSize",s);h!=null&&t.setItemVisual(i,"symbolKeepAspect",h)}}var f=n.getData(),e=n.get("symbol")||t,u=n.get("symbolSize"),s=n.get("symbolKeepAspect"),o;if(f.setVisual({legendSymbol:i||e,symbol:e,symbolSize:u,symbolKeepAspect:s}),!r.isSeriesFiltered(n))return o=typeof u=="function",{dataEach:f.hasItemOption||o?h:null}}}},lb=function(n){return{seriesType:n,plan:pv(),reset:function(n){function h(n,i){for(var r,s,v,y=n.end-n.start,h=f&&new Float32Array(y*e),o=n.start,l=0,c=[],a=[];o<n.end;o++)e===1?(s=i.get(t[0],o),r=!isNaN(s)&&u.dataToPoint(s,null,a)):(s=c[0]=i.get(t[0],o),v=c[1]=i.get(t[1],o),r=!isNaN(s)&&!isNaN(v)&&u.dataToPoint(c,null,a)),f?(h[l++]=r?r[0]:NaN,h[l++]=r?r[1]:NaN):i.setItemLayout(o,r&&r.slice()||[NaN,NaN]);f&&i.setLayout("symbolPoints",h)}var i=n.getData(),u=n.coordinateSystem,s=n.pipelineContext,f=s.large;if(u){var t=r(u.dimensions,function(n){return i.mapDimension(n)}).slice(0,2),e=t.length,o=i.getCalculationInfo("stackResultDimension");return yo(i,t[0])&&(t[0]=o),yo(i,t[1])&&(t[1]=o),e&&{progress:h}}}}},itu={average:function(n){for(var r=0,i=0,t=0;t<n.length;t++)isNaN(n[t])||(r+=n[t],i++);return i===0?NaN:r/i},sum:function(n){for(var i=0,t=0;t<n.length;t++)i+=n[t]||0;return i},max:function(n){for(var t=-Infinity,i=0;i<n.length;i++)n[i]>t&&(t=n[i]);return isFinite(t)?t:NaN},min:function(n){for(var t=Infinity,i=0;i<n.length;i++)n[i]<t&&(t=n[i]);return isFinite(t)?t:NaN},nearest:function(n){return n[0]}},rtu=function(n){return Math.round(n.length/2)},utu=function(n){return{seriesType:n,modifyOutputEnd:!0,reset:function(n){var r=n.getData(),t=n.get("sampling"),u=n.coordinateSystem,i;if(u.type==="cartesian2d"&&t){var f=u.getBaseAxis(),s=u.getOtherAxis(f),e=f.getExtent(),h=e[1]-e[0],o=Math.round(r.count()/h);o>1&&(typeof t=="string"?i=itu[t]:typeof t=="function"&&(i=t),i&&n.setData(r.downSample(r.mapDimension(s.dim),1/o,i,rtu)))}}}};ab=function(n){this._axes={};this._dimList=[];this.name=n||""};ab.prototype={constructor:ab,type:"cartesian",getAxis:function(n){return this._axes[n]},getAxes:function(){return r(this._dimList,ftu,this)},getAxesByScale:function(n){return n=n.toLowerCase(),hi(this.getAxes(),function(t){return t.scale.type===n})},addAxis:function(n){var t=n.dim;this._axes[t]=n;this._dimList.push(t)},dataToCoord:function(n){return this._dataCoordConvert(n,"dataToCoord")},coordToData:function(n){return this._dataCoordConvert(n,"coordToData")},_dataCoordConvert:function(n,t){for(var i,e,u=this._dimList,f=n instanceof Array?[]:{},r=0;r<u.length;r++)i=u[r],e=this._axes[i],f[i]=e[t](n[i]);return f}};vb.prototype={constructor:vb,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(n){var t=this.getAxis("x"),i=this.getAxis("y");return t.contain(t.toLocalCoord(n[0]))&&i.contain(i.toLocalCoord(n[1]))},containData:function(n){return this.getAxis("x").containData(n[0])&&this.getAxis("y").containData(n[1])},dataToPoint:function(n,t,i){var r=this.getAxis("x"),u=this.getAxis("y");return i=i||[],i[0]=r.toGlobalCoord(r.dataToCoord(n[0])),i[1]=u.toGlobalCoord(u.dataToCoord(n[1])),i},clampData:function(n,t){var u=this.getAxis("x").scale,f=this.getAxis("y").scale,i=u.getExtent(),r=f.getExtent(),e=u.parse(n[0]),o=f.parse(n[1]);return t=t||[],t[0]=Math.min(Math.max(Math.min(i[0],i[1]),e),Math.max(i[0],i[1])),t[1]=Math.min(Math.max(Math.min(r[0],r[1]),o),Math.max(r[0],r[1])),t},pointToData:function(n,t){var i=this.getAxis("x"),r=this.getAxis("y");return t=t||[],t[0]=i.coordToData(i.toLocalCoord(n[0])),t[1]=r.coordToData(r.toLocalCoord(n[1])),t},getOtherAxis:function(n){return this.getAxis(n.dim==="x"?"y":"x")}};ct(vb,ab);yb=function(n,t,i,r,u){fi.call(this,n,t,i);this.type=r||"value";this.position=u||"bottom"};yb.prototype={constructor:yb,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var n=this.position;return n==="top"||n==="bottom"},getGlobalExtent:function(n){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),n&&t[0]>t[1]&&t.reverse(),t},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(n,t){return this.coordToData(this.toLocalCoord(n[this.dim==="x"?0:1]),t)},toLocalCoord:null,toGlobalCoord:null};ct(yb,fi);byt={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}};bo={};bo.categoryAxis=v({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},byt);bo.valueAxis=v({boundaryGap:[0,0],splitNumber:5},byt);bo.timeAxis=s({scale:!0,min:"dataMin",max:"dataMax"},bo.valueAxis);bo.logAxis=s({scale:!0,logBase:10},bo.valueAxis);var etu=["value","category","time","log"],uy=function(n,i,r,u){t(etu,function(t){i.extend({type:n+"Axis."+t,mergeDefaultAndTheme:function(i,u){var f=this.layoutMode,e=f?av(i):{},o=u.getTheme();v(i,o.get(t+"Axis"));v(i,this.getDefaultOption());i.type=r(n,i);f&&fh(i,e,f)},optionUpdated:function(){var n=this.option;n.type==="category"&&(this.__ordinalMeta=ob.createByAxisModel(this))},getCategories:function(n){var t=this.option;if(t.type==="category")return n?t.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:cp([{},bo[t+"Axis"],u],!0)})});it.registerSubTypeDefaulter(n+"Axis",y(r,n))},fy=it.extend({type:"cartesian2dAxis",axis:null,init:function(){fy.superApply(this,"init",arguments);this.resetRange()},mergeOption:function(){fy.superApply(this,"mergeOption",arguments);this.resetRange()},restoreData:function(){fy.superApply(this,"restoreData",arguments);this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});v(fy.prototype,ul);kyt={offset:0};uy("x",fy,ryi,kyt);uy("y",fy,ryi,kyt);it.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});fr=ey.prototype;fr.type="grid";fr.axisPointerEnabled=!0;fr.getRect=function(){return this._rect};fr.update=function(n,i){var r=this._axesMap,u;this._updateScale(n,this.model);t(r.x,function(n){sh(n.scale,n.model)});t(r.y,function(n){sh(n.scale,n.model)});u={};t(r.x,function(n){uyi(r,"y",n,u)});t(r.y,function(n){uyi(r,"x",n,u)});this.resize(this.model,i)};fr.resize=function(n,i,r){function e(){t(f,function(n){var t=n.isHorizontal(),i=t?[0,u.width]:[0,u.height],r=n.inverse?1:0;n.setExtent(i[r],i[1-r]);otu(n,t?u.x:u.y)})}var u=li(n.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()}),f;this._rect=u;f=this._axesList;e();!r&&n.get("containLabel")&&(t(f,function(n){var t,r,i;n.model.get("axisLabel.inside")||(t=ugr(n),t&&(r=n.isHorizontal()?"height":"width",i=n.model.get("axisLabel.margin"),u[r]-=t[r]+i,n.position==="top"?u.y+=t.height+i:n.position==="left"&&(u.x+=t.width+i)))}),e())};fr.getAxis=function(n,t){var i=this._axesMap[n],r;if(i!=null){if(t==null)for(r in i)if(i.hasOwnProperty(r))return i[r];return i[t]}};fr.getAxes=function(){return this._axesList.slice()};fr.getCartesian=function(n,t){var u,i,r;if(n!=null&&t!=null)return u="x"+n+"y"+t,this._coordsMap[u];for(a(n)&&(t=n.yAxisIndex,n=n.xAxisIndex),i=0,r=this._coordsList;i<r.length;i++)if(r[i].getAxis("x").index===n||r[i].getAxis("y").index===t)return r[i]};fr.getCartesians=function(){return this._coordsList.slice()};fr.convertToPixel=function(n,t,i){var r=this._findConvertTarget(n,t);return r.cartesian?r.cartesian.dataToPoint(i):r.axis?r.axis.toGlobalCoord(r.axis.dataToCoord(i)):null};fr.convertFromPixel=function(n,t,i){var r=this._findConvertTarget(n,t);return r.cartesian?r.cartesian.pointToData(i):r.axis?r.axis.coordToData(r.axis.toLocalCoord(i)):null};fr._findConvertTarget=function(n,t){var i=t.seriesModel,u=t.xAxisModel||i&&i.getReferringComponents("xAxis")[0],f=t.yAxisModel||i&&i.getReferringComponents("yAxis")[0],o=t.gridModel,h=this._coordsList,r,e,s;return i?(r=i.coordinateSystem,tt(h,r)<0&&(r=null)):u&&f?r=this.getCartesian(u.componentIndex,f.componentIndex):u?e=this.getAxis("x",u.componentIndex):f?e=this.getAxis("y",f.componentIndex):o&&(s=o.coordinateSystem,s===this&&(r=this._coordsList[0])),{cartesian:r,axis:e}};fr.containPoint=function(n){var t=this._coordsList[0];if(t)return t.containPoint(n)};fr._initCartesian=function(n,i){function e(t){return function(e,o){var s,h,c;dyt(e,n,i)&&(s=e.get("position"),t==="x"?s!=="top"&&s!=="bottom"&&(s="bottom",u[s]&&(s=s==="top"?"bottom":"top")):s!=="left"&&s!=="right"&&(s="left",u[s]&&(s=s==="left"?"right":"left")),u[s]=!0,h=new yb(t,ty(e),[0,0],e.get("type"),s),c=h.type==="category",h.onBand=c&&e.get("boundaryGap"),h.inverse=e.get("inverse"),e.axis=h,h.model=e,h.grid=this,h.index=o,this._axesList.push(h),r[t][o]=h,f[t]++)}}var u={left:!1,right:!1,top:!1,bottom:!1},r={x:{},y:{}},f={x:0,y:0};if(i.eachComponent("xAxis",e("x"),this),i.eachComponent("yAxis",e("y"),this),!f.x||!f.y){this._axesMap={};this._axesList=[];return}this._axesMap=r;t(r.x,function(i,u){t(r.y,function(t,r){var e="x"+u+"y"+r,f=new vb(e);f.grid=this;f.model=n;this._coordsMap[e]=f;this._coordsList.push(f);f.addAxis(i);f.addAxis(t)},this)},this)};fr._updateScale=function(n,i){function r(n,i){t(n.mapDimension(i.dim,!0),function(t){i.scale.unionExtentFromData(n,ort(n,t))})}t(this._axesList,function(n){n.scale.setExtent(Infinity,-Infinity)});n.eachSeries(function(t){if(syi(t)){var f=oyi(t,n),e=f[0],o=f[1];if(!dyt(e,i,n)||!dyt(o,i,n))return;var s=this.getCartesian(e.componentIndex,o.componentIndex),u=t.getData(),h=s.getAxis("x"),c=s.getAxis("y");u.type==="list"&&(r(u,h,t),r(u,c,t))}},this)};fr.getTooltipAxes=function(n){var i=[],r=[];return t(this.getCartesians(),function(t){var u=n!=null&&n!=="auto"?t.getAxis(n):t.getBaseAxis(),f=t.getOtherAxis(u);tt(i,u)<0&&i.push(u);tt(r,f)<0&&r.push(f)}),{baseAxes:i,otherAxes:r}};eyi=["xAxis","yAxis"];ey.create=function(n,t){var i=[];return n.eachComponent("grid",function(r,u){var f=new ey(r,n,t);f.name="grid_"+u;f.resize(r,t,!0);r.coordinateSystem=f;i.push(f)}),n.eachSeries(function(t){var o;if(syi(t)){var r=oyi(t,n),i=r[0],f=r[1],e=i.getCoordSysModel();if(u){if(!e)throw new Error('Grid "'+kt(i.get("gridIndex"),i.get("gridId"),0)+'" not found');if(i.getCoordSysModel()!==f.getCoordSysModel())throw new Error("xAxis and yAxis must use the same grid");}o=e.coordinateSystem;t.coordinateSystem=o.getCartesian(i.componentIndex,f.componentIndex)}}),i};ey.dimensions=ey.prototype.dimensions=vb.prototype.dimensions;ir.register("cartesian2d",ey);ko=Math.PI;kf=function(n,t){this.opt=t;this.axisModel=n;s(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0});this.group=new e;var i=new e({position:t.position.slice(),rotation:t.rotation});i.updateTransform();this._transform=i.transform;this._dumbGroup=i};kf.prototype={constructor:kf,hasBuilder:function(n){return!!gyt[n]},add:function(n){gyt[n].call(this)},getGroup:function(){return this.group}};gyt={axisLine:function(){var e=this.opt,s=this.axisModel,c,l,a;if(s.get("axisLine.show")){var v=this.axisModel.axis.getExtent(),h=this._transform,n=[v[0],0],i=[v[1],0];h&&(vt(n,n,h),vt(i,i,h));c=o({lineCap:"round"},s.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new uu(vc({anid:"line",shape:{x1:n[0],y1:n[1],x2:i[0],y2:i[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1})));var r=s.get("axisLine.symbol"),u=s.get("axisLine.symbolSize"),f=s.get("axisLine.symbolOffset")||0;typeof f=="number"&&(f=[f,f]);r!=null&&(typeof r=="string"&&(r=[r,r]),(typeof u=="string"||typeof u=="number")&&(u=[u,u]),l=u[0],a=u[1],t([{rotate:e.rotation+Math.PI/2,offset:f[0],r:0},{rotate:e.rotation-Math.PI/2,offset:f[1],r:Math.sqrt((n[0]-i[0])*(n[0]-i[0])+(n[1]-i[1])*(n[1]-i[1]))}],function(t,i){if(r[i]!=="none"&&r[i]!=null){var u=cu(r[i],-l/2,-a/2,l,a,c.stroke,!0),f=t.r+t.offset,o=[n[0]+f*Math.cos(e.rotation),n[1]-f*Math.sin(e.rotation)];u.attr({rotation:t.rotate,position:o,silent:!0});this.group.add(u)}},this))}},axisTickLabel:function(){var n=this.axisModel,t=this.opt,i=ctu(this,n,t),r=ltu(this,n,t);htu(n,r,i)},axisName:function(){var i=this.opt,n=this.axisModel,r=kt(i.axisName,n.get("name")),f,t;if(r){var h=n.get("nameLocation"),y=i.nameDirection,c=n.getModel("nameTextStyle"),l=n.get("nameGap")||0,u=this.axisModel.axis.getExtent(),p=u[0]>u[1]?-1:1,it=[h==="start"?u[0]-p*l:h==="end"?u[1]+p*l:(u[0]+u[1])/2,ayi(h)?i.labelOffset+y*l:0],e,s=n.get("nameRotate");s!=null&&(s=s*ko/180);ayi(h)?e=npt(i.rotation,s!=null?s:i.rotation,y):(e=stu(i,h,s||0,u),f=i.axisNameAvailableWidth,f!=null&&(f=Math.abs(f/Math.sin(e.rotation)),isFinite(f)||(f=null)));var w=c.getFont(),a=n.get("nameTruncate",!0)||{},b=a.ellipsis,d=kt(i.nameTruncateMaxWidth,a.maxWidth,f),g=b!=null&&d!=null?koi(r,d,w,b,{minChar:2,placeholder:a.placeholder}):r,v=n.get("tooltip",!0),nt=n.mainType,tt={componentType:nt,name:r,$vars:["name"]};tt[nt+"Index"]=n.componentIndex;t=new k({anid:"name",__fullText:r,__truncatedText:g,position:it,rotation:e.rotation,silent:cyi(n),z2:1,tooltip:v&&v.show?o({content:r,formatter:function(){return r},formatterParams:tt},v):null});ii(t.style,c,{text:g,textFont:w,textFill:c.getTextColor()||n.get("axisLine.lineStyle.color"),textAlign:e.textAlign,textVerticalAlign:e.textVerticalAlign});n.get("triggerEvent")&&(t.eventData=hyi(n),t.eventData.targetType="axisName",t.eventData.name=r);this._dumbGroup.add(t);t.updateTransform();this.group.add(t);t.decomposeTransform()}}};npt=kf.innerTextLayout=function(n,t,i){var r=nat(t-n),u,f;return vw(r)?(f=i>0?"top":"bottom",u="center"):vw(r-ko)?(f=i>0?"bottom":"top",u="center"):(f="middle",u=r>0&&r<ko?i>0?"right":"left":i>0?"left":"right"),{rotation:r,textAlign:u,textVerticalAlign:f}};sl=t;nut=y;nu=wi({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(n,t,i,r){this.axisPointerClass&&btu(n);nu.superApply(this,"render",arguments);vyi(this,n,t,i,r,!0)},updateAxisPointer:function(n,t,i,r){vyi(this,n,t,i,r,!1)},remove:function(n,t){var i=this._axisPointer;i&&i.remove(t);nu.superApply(this,"remove",arguments)},dispose:function(n,t){yyi(this,t);nu.superApply(this,"dispose",arguments)}});tut=[];nu.registerAxisPointerClass=function(n,t){if(u&&tut[n])throw new Error("axisPointer "+n+" exists");tut[n]=t};nu.getAxisPointerClass=function(n){return n&&tut[n]};var dtu=["axisLine","axisTickLabel","axisName"],gtu=["splitArea","splitLine"],fpt=nu.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(n,i,r,u){var o;if(this.group.removeAll(),o=this._axisGroup,this._axisGroup=new e,this.group.add(this._axisGroup),n.get("show")){var s=n.getCoordSysModel(),h=upt(s,n),f=new kf(n,h);t(dtu,f.add,f);this._axisGroup.add(f.getGroup());t(gtu,function(t){n.get(t+".show")&&this["_"+t](n,s)},this);blt(o,this._axisGroup,n);fpt.superCall(this,"render",n,i,r,u)}},remove:function(){this._splitAreaColors=null},_splitLine:function(n,t){var c=n.axis,o,h,y,p;if(!c.scale.isBlank()){var a=n.getModel("splitLine"),v=a.getModel("lineStyle"),r=v.get("color");r=i(r)?r:[r];var u=t.coordinateSystem.getRect(),w=c.isHorizontal(),b=0,l=c.getTicksCoords({tickModel:a}),f=[],e=[],k=v.getLineStyle();for(o=0;o<l.length;o++)h=c.toGlobalCoord(l[o].coord),w?(f[0]=h,f[1]=u.y,e[0]=h,e[1]=u.y+u.height):(f[0]=u.x,f[1]=h,e[0]=u.x+u.width,e[1]=h),y=b++%r.length,p=l[o].tickValue,this._axisGroup.add(new uu(vc({anid:p!=null?"line_"+l[o].tickValue:null,shape:{x1:f[0],y1:f[1],x2:e[0],y2:e[1]},style:s({stroke:r[y]},k),silent:!0})))}},_splitArea:function(n,t){var e=n.axis,k,h,rt,r,d,c,l,y,w,a;if(!e.scale.isBlank()){var g=n.getModel("splitArea"),nt=g.getModel("areaStyle"),f=nt.get("color"),v=t.coordinateSystem.getRect(),u=e.getTicksCoords({tickModel:g,clamp:!0});if(u.length){var b=f.length,tt=this._splitAreaColors,it=p(),o=0;if(tt)for(r=0;r<u.length;r++)if(k=tt.get(u[r].tickValue),k!=null){o=(k+(b-1)*r)%b;break}for(h=e.toGlobalCoord(u[0].coord),rt=nt.getAreaStyle(),f=i(f)?f:[f],r=1;r<u.length;r++)d=e.toGlobalCoord(u[r].coord),e.isHorizontal()?(c=h,l=v.y,y=d-c,w=v.height,h=c+y):(c=v.x,l=h,y=v.width,w=d-l,h=l+w),a=u[r-1].tickValue,a!=null&&it.set(a,o),this._axisGroup.add(new et({anid:a!=null?"area_"+a:null,shape:{x:c,y:l,width:y,height:w},style:s({fill:f[o]},rt),silent:!0})),o=(o+1)%b;this._splitAreaColors=it}}}});fpt.extend({type:"xAxis"});fpt.extend({type:"yAxis"});wi({type:"grid",render:function(n){this.group.removeAll();n.get("show")&&this.group.add(new et({shape:n.coordinateSystem.getRect(),style:s({fill:n.get("backgroundColor")},n.getItemStyle()),silent:!0,z2:-1}))}});ur(function(n){n.xAxis&&n.yAxis&&!n.grid&&(n.grid={})});yt(ol("line","circle","line"));gt(lb("line"));su(kv.PROCESSOR.STATISTIC,utu("line"));ept=wt.extend({type:"series.__base_bar__",getInitialData:function(){return po(this.getSource(),this)},getMarkerPosition:function(n){var t=this.coordinateSystem;if(t){var i=t.dataToPoint(t.clampData(n)),r=this.getData(),u=r.getLayout("offset"),f=r.getLayout("size"),e=t.getBaseAxis().isHorizontal()?0:1;return i[e]+=u+f/2,i}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});ept.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return this.get("large")?this.get("progressive"):!1},getProgressiveThreshold:function(){var n=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>n&&(n=t),n}});var niu=uv([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),tiu={getBarItemStyle:function(n){var i=niu(this,n),t;return this.getBorderLineDash&&(t=this.getBorderLineDash(),t&&(i.lineDash=t)),i}},iiu=["itemStyle","barBorderWidth"];o(ut.prototype,tiu);gr({type:"bar",render:function(n,t,i){this._updateDrawMode(n);var r=n.get("coordinateSystem");return r==="cartesian2d"||r==="polar"?this._isLargeDraw?this._renderLarge(n,t,i):this._renderNormal(n,t,i):u&&console.warn("Only cartesian2d and polar supported for bar."),this.group},incrementalPrepareRender:function(n){this._clear();this._updateDrawMode(n)},incrementalRender:function(n,t){this._incrementalRenderLarge(n,t)},_updateDrawMode:function(n){var t=n.pipelineContext.large;(this._isLargeDraw==null||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(n){var f=this.group,t=n.getData(),e=this._data,i=n.coordinateSystem,o=i.getBaseAxis(),r,u;i.type==="cartesian2d"?r=o.isHorizontal():i.type==="polar"&&(r=o.dim==="angle");u=n.isAnimationEnabled()?n:null;t.diff(e).add(function(e){if(t.hasValue(e)){var o=t.getItemModel(e),h=spt[i.type](t,e,o),s=opt[i.type](t,e,o,h,r,u);t.setItemGraphicEl(e,s);f.add(s);dyi(s,t,e,o,h,n,r,i.type==="polar")}}).update(function(o,s){var h=e.getItemGraphicEl(s),c,l;if(!t.hasValue(o)){f.remove(h);return}c=t.getItemModel(o);l=spt[i.type](t,o,c);h?w(h,{shape:l},u,o):h=opt[i.type](t,o,c,l,r,u,!0);t.setItemGraphicEl(o,h);f.add(h);dyi(h,t,o,c,l,n,r,i.type==="polar")}).remove(function(n){var t=e.getItemGraphicEl(n);i.type==="cartesian2d"?t&&byi(n,u,t):t&&kyi(n,u,t)}).execute();this._data=t},_renderLarge:function(n){this._clear();npi(n,this.group)},_incrementalRenderLarge:function(n,t){npi(t,this.group,!0)},dispose:di,remove:function(n){this._clear(n)},_clear:function(n){var i=this.group,t=this._data;n&&n.get("animation")&&t&&!this._isLargeDraw?t.eachItemGraphicEl(function(t){t.type==="sector"?kyi(t.dataIndex,n,t):byi(t.dataIndex,n,t)}):i.removeAll();this._data=null}});opt={cartesian2d:function(n,t,i,r,u,f,e){var s=new et({shape:o({},r)});if(f){var l=s.shape,h=u?"height":"width",c={};l[h]=0;c[h]=r[h];vf[e?"updateProps":"initProps"](s,{shape:c},f,t)}return s},polar:function(n,t,i,r,u,f,e){var l=r.startAngle<r.endAngle,o=new so({shape:s({clockwise:l},r)});if(f){var a=o.shape,h=u?"r":"endAngle",c={};a[h]=u?0:r.startAngle;c[h]=r[h];vf[e?"updateProps":"initProps"](o,{shape:c},f,t)}return o}};spt={cartesian2d:function(n,t,i){var r=n.getItemLayout(t),u=riu(i,r),f=r.width>0?1:-1,e=r.height>0?1:-1;return{x:r.x+f*u/2,y:r.y+e*u/2,width:r.width-f*u,height:r.height-e*u}},polar:function(n,t){var i=n.getItemLayout(t);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle}}};gyi=nt.extend({type:"largeBar",shape:{points:[]},buildPath:function(n,t){for(var r=t.points,u=this.__startPoint,f=this.__valueIdx,i=0;i<r.length;i+=2)u[this.__valueIdx]=r[i+f],n.moveTo(u[0],u[1]),n.lineTo(r[i],r[i+1])}});gt(y(cai,"bar"));gt(lai);yt({seriesType:"bar",reset:function(n){n.getData().setVisual("legendSymbol","roundRect")}});var oy=function(n,t,r){t=i(t)&&{coordDimensions:t}||o({},t);var u=n.getSource(),e=rl(u,t),f=new ai(e,n);return f.initData(u,r),f},hpt={updateSelectedMap:function(n){this._targetList=i(n)?n.slice():[];this._selectTargetMap=ca(n||[],function(n,t){return n.set(t.name,t),n},p())},select:function(n,t){var i=t!=null?this._targetList[t]:this._selectTargetMap.get(n),r=this.get("selectedMode");r==="single"&&this._selectTargetMap.each(function(n){n.selected=!1});i&&(i.selected=!0)},unSelect:function(n,t){var i=t!=null?this._targetList[t]:this._selectTargetMap.get(n);i&&(i.selected=!1)},toggleSelected:function(n,t){var i=t!=null?this._targetList[t]:this._selectTargetMap.get(n);if(i!=null)return this[i.selected?"unSelect":"select"](n,t),i.selected},isSelected:function(n,t){var i=t!=null?this._targetList[t]:this._selectTargetMap.get(n);return i&&i.selected}},iut=nrt({type:"series.pie",init:function(n){iut.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()};this.updateSelectedMap(this._createSelectableList());this._defaultLabelLine(n)},mergeOption:function(n){iut.superCall(this,"mergeOption",n);this.updateSelectedMap(this._createSelectableList())},getInitialData:function(){return oy(this,["value"])},_createSelectableList:function(){for(var n=this.getRawData(),r=n.mapDimension("value"),i=[],t=0,u=n.count();t<u;t++)i.push({name:n.getName(t),value:n.get(r,t),selected:uhi(n,t,"selected")});return i},getDataParams:function(n){var t=this.getData(),i=iut.superCall(this,"getDataParams",n),r=[];return t.each(t.mapDimension("value"),function(n){r.push(n)}),i.percent=coi(r,n,t.hostModel.get("percentPrecision")),i.$vars.push("percent"),i},_defaultLabelLine:function(n){lc(n,"labelLine",["show"]);var t=n.labelLine,i=n.emphasis.labelLine;t.show=t.show&&n.label.show;i.show=i.show&&n.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,label:{rotate:!1,show:!0,position:"outer"},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationEasing:"cubicOut"}});st(iut,hpt);lpt=cpt.prototype;lpt.updateData=function(n,t,i){function v(){r.stopAnimation(!0);r.animateTo({shape:{r:f.r+u.get("hoverOffset")}},300,"elasticOut")}function y(){r.stopAnimation(!0);r.animateTo({shape:{r:f.r}},300,"elasticOut")}var r=this.childAt(0),u=n.hostModel,e=n.getItemModel(t),f=n.getItemLayout(t),h=o({},f),l,a,c;if(h.label=null,i?(r.setShape(h),l=u.getShallow("animationType"),l==="scale"?(r.shape.r=f.r0,sr(r,{shape:{r:f.r}},u,t)):(r.shape.endAngle=f.startAngle,w(r,{shape:{endAngle:f.endAngle}},u,t))):w(r,{shape:h},u,t),a=n.getItemVisual(t,"color"),r.useStyle(s({lineJoin:"bevel",fill:a},e.getModel("itemStyle").getItemStyle())),r.hoverStyle=e.getModel("emphasis.itemStyle").getItemStyle(),c=e.getShallow("cursor"),c&&r.attr("cursor",c),tpi(this,n.getItemLayout(t),u.isSelected(null,t),u.get("selectedOffset"),u.get("animation")),r.off("mouseover").off("mouseout").off("emphasis").off("normal"),e.get("hoverAnimation")&&u.isAnimationEnabled())r.on("mouseover",v).on("mouseout",y).on("emphasis",v).on("normal",y);this._updateLabel(n,t);pt(this)};lpt._updateLabel=function(n,t){var r=this.childAt(1),u=this.childAt(2),s=n.hostModel,e=n.getItemModel(t),v=n.getItemLayout(t),i=v.label,h=n.getItemVisual(t,"color"),f;w(r,{shape:{points:i.linePoints||[[i.x,i.y],[i.x,i.y],[i.x,i.y]]}},s,t);w(u,{style:{x:i.x,y:i.y}},s,t);u.attr({rotation:i.rotation,origin:[i.x,i.y],z2:10});var c=e.getModel("label"),l=e.getModel("emphasis.label"),o=e.getModel("labelLine"),a=e.getModel("emphasis.labelLine"),h=n.getItemVisual(t,"color");du(u.style,u.hoverStyle={},c,l,{labelFetcher:n.hostModel,labelDataIndex:t,defaultText:n.getName(t),autoColor:h,useInsideStyle:!!i.inside},{textAlign:i.textAlign,textVerticalAlign:i.verticalAlign,opacity:n.getItemVisual(t,"opacity")});u.ignore=u.normalIgnore=!c.get("show");u.hoverIgnore=!l.get("show");r.ignore=r.normalIgnore=!o.get("show");r.hoverIgnore=!a.get("show");r.setStyle({stroke:h,opacity:n.getItemVisual(t,"opacity")});r.setStyle(o.getModel("lineStyle").getLineStyle());r.hoverStyle=a.getModel("lineStyle").getLineStyle();f=o.get("smooth");f&&f===!0&&(f=.4);r.setShape({smooth:f})};ct(cpt,e);var vku=yi.extend({type:"pie",init:function(){var n=new e;this._sectorGroup=n},render:function(n,t,i,r){if(!r||r.from!==this.uid){var u=n.getData(),e=this._data,f=this.group,s=t.get("animation"),h=!e,c=n.get("animationType"),a=y(fiu,this.uid,n,s,i),v=n.get("selectedMode");if(u.diff(e).add(function(n){var t=new cpt(u,n);h&&c!=="scale"&&t.eachChild(function(n){n.stopAnimation(!0)});v&&t.on("click",a);u.setItemGraphicEl(n,t);f.add(t)}).update(function(n,t){var i=e.getItemGraphicEl(t);i.updateData(u,n);i.off("click");v&&i.on("click",a);f.add(i);u.setItemGraphicEl(n,i)}).remove(function(n){var t=e.getItemGraphicEl(n);f.remove(t)}).execute(),s&&h&&u.count()>0&&c!=="scale"){var o=u.getItemLayout(0),p=Math.max(i.getWidth(),i.getHeight())/2,w=l(f.removeClipPath,f);f.setClipPath(this._createClipPath(o.cx,o.cy,p,o.startAngle,o.clockwise,w,n))}else f.removeClipPath();this._data=u}},dispose:function(){},_createClipPath:function(n,t,i,r,u,f,e){var o=new so({shape:{cx:n,cy:t,r0:0,r:i,startAngle:r,endAngle:r,clockwise:u}});return sr(o,{shape:{endAngle:r+(u?1:-1)*Math.PI*2}},e,f),o},containPoint:function(n,t){var e=t.getData(),i=e.getItemLayout(0);if(i){var r=n[0]-i.cx,u=n[1]-i.cy,f=Math.sqrt(r*r+u*u);return f<=i.r&&f>=i.r0}}}),ipi=function(n,i){t(i,function(t){t.update="updateView";rt(t,function(i,r){var u={};return r.eachComponent({mainType:"series",subType:n,query:i},function(n){n[t.method]&&n[t.method](i.name,i.dataIndex);var r=n.getData();r.each(function(t){var i=r.getName(t);u[i]=n.isSelected(i)||!1})}),{name:i.name,selected:u}})})},rut=function(n){return{getTargetSeries:function(t){var r={},i=p();return t.eachSeriesByType(n,function(n){n.__paletteScope=r;i.set(n.uid,n)}),i},reset:function(n){var t=n.getRawData(),r={},i=n.getData();i.each(function(n){var t=i.getRawIndex(n);r[t]=n});t.each(function(u){var f=r[u],o=f!=null&&i.getItemVisual(f,"color",!0),s,e;o?t.setItemVisual(u,"color",o):(s=t.getItemModel(u),e=s.get("itemStyle.color")||n.getColorFromPalette(t.getName(u)||u+"",n.__paletteScope,t.count()),t.setItemVisual(u,"color",e),f!=null&&i.setItemVisual(f,"color",e))})}}};var oiu=function(n,t,i,r){var u=n.getData(),o=[],f,e,s=!1;u.each(function(i){var r=u.getItemLayout(i),d=u.getItemModel(i),g=d.getModel("label"),l=g.get("position")||d.get("emphasis.label.position"),tt=d.getModel("labelLine"),nt=tt.get("length"),it=tt.get("length2"),a=(r.startAngle+r.endAngle)/2,h=Math.cos(a),v=Math.sin(a),y,p,rt,w,c,b,k;if(f=r.cx,e=r.cy,c=l==="inside"||l==="inner",l==="center")y=r.cx,p=r.cy,w="center";else{if(b=(c?(r.r+r.r0)/2*h:r.r*h)+f,k=(c?(r.r+r.r0)/2*v:r.r*v)+e,y=b+h*3,p=k+v*3,!c){var ut=b+h*(nt+t-r.r),ft=k+v*(nt+t-r.r),et=ut+(h<0?-1:1)*it,ot=ft;y=et+(h<0?-5:5);p=ot;rt=[[b,k],[ut,ft],[et,ot]]}w=c?"center":h>0?"left":"right"}var ht=g.getFont(),st=g.get("rotate")?h<0?-a+Math.PI:-a:0,ct=n.getFormattedLabel(i,"normal")||u.getName(i),lt=ue(ct,ht,w,"top");s=!!st;r.label={x:y,y:p,position:l,height:lt.height,len:nt,len2:it,linePoints:rt,textAlign:w,verticalAlign:"middle",rotation:st,inside:c};c||o.push(r.label)});!s&&n.get("avoidLabelOverlap")&&eiu(o,f,e,t,i,r)},uut=Math.PI*2,upi=Math.PI/180,siu=function(n,t,r){t.eachSeriesByType(n,function(n){var t=n.getData(),e=t.mapDimension("value"),o=n.get("center"),s=n.get("radius"),w;i(s)||(s=[0,s]);i(o)||(o=[o,o]);var b=r.getWidth(),k=r.getHeight(),tt=Math.min(b,k),it=f(o[0],b),rt=f(o[1],k),d=f(s[0],tt/2),a=f(s[1],tt/2),v=-n.get("startAngle")*upi,h=n.get("minAngle")*upi,c=0;t.each(e,function(n){isNaN(n)||c++});var ut=t.getSum(e),y=Math.PI/(ut||c)*2,g=n.get("clockwise"),nt=n.get("roseType"),ot=n.get("stillShowZeroSum"),ft=t.getDataExtent(e);ft[0]=0;var p=uut,et=0,u=v,l=g?1:-1;t.each(e,function(n,i){var r,f;if(isNaN(n)){t.setItemLayout(i,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:g,cx:it,cy:rt,r0:d,r:nt?NaN:a});return}r=nt!=="area"?ut===0&&ot?y:n*y:uut/c;r<h?(r=h,p-=h):et+=n;f=u+l*r;t.setItemLayout(i,{angle:r,startAngle:u,endAngle:f,clockwise:g,cx:it,cy:rt,r0:d,r:nt?ri(n,ft,[d,a]):a});u=f});p<uut&&c&&(p<=.001?(w=uut/c,t.each(e,function(n,i){if(!isNaN(n)){var r=t.getItemLayout(i);r.angle=w;r.startAngle=v+l*i*w;r.endAngle=v+l*(i+1)*w}})):(y=p/et,u=v,t.each(e,function(n,i){if(!isNaN(n)){var r=t.getItemLayout(i),f=r.angle===h?h:n*y;r.startAngle=u;r.endAngle=u+l*f;u+=l*f}})));oiu(n,a,b,k)})},wb=function(n){return{seriesType:n,reset:function(n,t){var i=t.findComponents({mainType:"legend"}),r;i&&i.length&&(r=n.getData(),r.filterSelf(function(n){for(var u=r.getName(n),t=0;t<i.length;t++)if(!i[t].isSelected(u))return!1;return!0}))}}};for(ipi("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),yt(rut("pie")),gt(y(siu,"pie")),su(wb("pie")),wt.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(){return po(this.getSource(),this)},brushSelector:"point",getProgressive:function(){var n=this.option.progressive;return n==null?this.option.large?5e3:this.get("progressive"):n},getProgressiveThreshold:function(){var n=this.option.progressiveThreshold;return n==null?this.option.large?1e4:this.get("progressiveThreshold"):n},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8}}}),fut=4,eut=ce({shape:{points:null},symbolProxy:null,buildPath:function(n,t){var f=t.points,i=t.size,s=this.symbolProxy,r=s.shape,h=n.getContext?n.getContext():n,c=h&&i[0]<fut,u,e,o;if(!c)for(u=0;u<f.length;)(e=f[u++],o=f[u++],isNaN(e)||isNaN(o))||(r.x=e-i[0]/2,r.y=o-i[1]/2,r.width=i[0],r.height=i[1],s.buildPath(n,r,!0))},afterBrush:function(n){var e=this.shape,r=e.points,t=e.size,o=t[0]<fut,i,u,f;if(o){for(this.setTransform(n),i=0;i<r.length;)(u=r[i++],f=r[i++],isNaN(u)||isNaN(f))||n.fillRect(u-t[0]/2,f-t[1]/2,t[0],t[1]);this.restoreTransform(n)}},findDataIndex:function(n,t){for(var u=this.shape,r=u.points,f=u.size,e=Math.max(f[0],4),o=Math.max(f[1],4),i=r.length/2-1;i>=0;i--){var s=i*2,h=r[s]-e/2,c=r[s+1]-o/2;if(n>=h&&t>=c&&n<=h+e&&t<=c+o)return i}return-1}}),go=fpi.prototype,go.isPersistent=function(){return!this._incremental},go.updateData=function(n){this.group.removeAll();var t=new eut({rectHover:!0,cursor:"default"});t.setShape({points:n.getLayout("symbolPoints")});this._setCommon(t,n);this.group.add(t);this._incremental=null},go.updateLayout=function(n){if(!this._incremental){var t=n.getLayout("symbolPoints");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,r=n.startIndex*8;t=new Float32Array(t.buffer,r,i)}n.setShape("points",t)})}},go.incrementalPrepareUpdate=function(n){this.group.removeAll();this._clearIncremental();n.count()>2e6?(this._incremental||(this._incremental=new fu({silent:!0})),this.group.add(this._incremental)):this._incremental=null},go.incrementalUpdate=function(n,t){var i;this._incremental?(i=new eut,this._incremental.addDisplayable(i,!0)):(i=new eut({rectHover:!0,cursor:"default",startIndex:n.start,endIndex:n.end}),i.incremental=!0,this.group.add(i));i.setShape({points:t.getLayout("symbolPoints")});this._setCommon(i,t,!!this._incremental)},go._setCommon=function(n,t,i){var f=t.hostModel,r=t.getVisual("symbolSize"),e,u;if(n.setShape("size",r instanceof Array?r:[r,r]),n.symbolProxy=cu(t.getVisual("symbol"),0,0,0,0),n.setColor=n.symbolProxy.setColor,e=n.shape.size[0]<fut,n.useStyle(f.getModel("itemStyle").getItemStyle(e?["color","shadowBlur","shadowColor"]:["color"])),u=t.getVisual("color"),u&&n.setColor(u),!i){n.seriesIndex=f.seriesIndex;n.on("mousemove",function(t){n.dataIndex=null;var i=n.findDataIndex(t.offsetX,t.offsetY);i>=0&&(n.dataIndex=i+(n.startIndex||0))})}},go.remove=function(){this._clearIncremental();this._incremental=null;this.group.removeAll()},go._clearIncremental=function(){var n=this._incremental;n&&n.clearDisplaybles()},gr({type:"scatter",render:function(n){var t=n.getData(),i=this._updateSymbolDraw(t,n);i.updateData(t);this._finished=!0},incrementalPrepareRender:function(n){var t=n.getData(),i=this._updateSymbolDraw(t,n);i.incrementalPrepareUpdate(t);this._finished=!1},incrementalRender:function(n,t){this._symbolDraw.incrementalUpdate(n,t.getData());this._finished=n.end===t.getData().count()},updateTransform:function(n){var t=n.getData(),i;if(this.group.dirty(),!this._finished||t.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};i=lb().reset(n);i.progress&&i.progress({start:0,end:t.count()},t);this._symbolDraw.updateLayout(t)},_updateSymbolDraw:function(n,t){var i=this._symbolDraw,u=t.pipelineContext,r=u.large;return i&&r===this._isLargeDraw||(i&&i.remove(),i=this._symbolDraw=r?new fpi:new ry,this._isLargeDraw=r,this.group.removeAll()),this.group.add(i.group),i},remove:function(){this._symbolDraw&&this._symbolDraw.remove(!0);this._symbolDraw=null},dispose:function(){}}),yt(ol("scatter","circle")),gt(lb("scatter")),ct(epi,fi),pe.prototype.getIndicatorAxes=function(){return this._indicatorAxes},pe.prototype.dataToPoint=function(n,t){var i=this._indicatorAxes[t];return this.coordToPoint(i.dataToCoord(n),t)},pe.prototype.coordToPoint=function(n,t){var r=this._indicatorAxes[t],i=r.angle,u=this.cx+n*Math.cos(i),f=this.cy-n*Math.sin(i);return[u,f]},pe.prototype.pointToData=function(n){var i=n[0]-this.cx,r=n[1]-this.cy,u=Math.sqrt(i*i+r*r),t,e,o;i/=u;r/=u;var c=Math.atan2(-r,i),s=Infinity,f,h=-1;for(t=0;t<this._indicatorAxes.length;t++)e=this._indicatorAxes[t],o=Math.abs(c-e.angle),o<s&&(f=e,h=t,s=o);return[h,+(f&&f.coodToData(u))]},pe.prototype.resize=function(n,i){var u=n.get("center"),e=i.getWidth(),o=i.getHeight(),s=Math.min(e,o)/2,r;this.cx=f(u[0],e);this.cy=f(u[1],o);this.startAngle=n.get("startAngle")*Math.PI/180;r=n.get("radius");(typeof r=="string"||typeof r=="number")&&(r=[0,r]);this.r0=f(r[0],s);this.r=f(r[1],s);t(this._indicatorAxes,function(n,t){n.setExtent(this.r0,this.r);var i=this.startAngle+t*Math.PI*2/this._indicatorAxes.length;i=Math.atan2(Math.sin(i),Math.cos(i));n.angle=i},this)},pe.prototype.update=function(n){function u(n){var i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),t=n/i;return t===2?t=5:t*=2,t*i}var r=this._indicatorAxes,f=this._model,i;t(r,function(n){n.scale.setExtent(Infinity,-Infinity)});n.eachSeriesByType("radar",function(i){if(i.get("coordinateSystem")==="radar"&&n.getComponent("radar",i.get("radarIndex"))===f){var u=i.getData();t(r,function(n){n.scale.unionExtentFromData(u,u.mapDimension(n.dim))})}},this);i=f.get("splitNumber");t(r,function(n){var f=bai(n.scale,n.model),s,h,v,c,l;sh(n.scale,n.model);var a=n.model,r=n.scale,e=a.getMin(),o=a.getMax(),t=r.getInterval();if(e!=null&&o!=null)r.setExtent(+e,+o),r.setInterval((o-e)/i);else if(e!=null){do s=e+t*i,r.setExtent(+e,s),r.setInterval(t),t=u(t);while(s<f[1]&&isFinite(s)&&isFinite(f[1]))}else if(o!=null){do h=o-t*i,r.setExtent(h,+o),r.setInterval(t),t=u(t);while(h>f[0]&&isFinite(h)&&isFinite(f[0]))}else v=r.getTicks().length-1,v>i&&(t=u(t)),c=Math.round((f[0]+f[1])/2/t)*t,l=Math.round(i/2),r.setExtent(ki(c-l*t),ki(c+(i-l)*t)),r.setInterval(t)})},pe.dimensions=[],pe.create=function(n,t){var i=[];return n.eachComponent("radar",function(r){var u=new pe(r,n,t);i.push(u);r.coordinateSystem=u}),n.eachSeriesByType("radar",function(n){n.get("coordinateSystem")==="radar"&&(n.coordinateSystem=i[n.get("radarIndex")||0])}),i},ir.register("radar",pe),sy=bo.valueAxis,hiu=hu({type:"radar",optionUpdated:function(){var i=this.get("boundaryGap"),u=this.get("splitNumber"),f=this.get("scale"),e=this.get("axisLine"),h=this.get("axisTick"),l=this.get("axisLabel"),t=this.get("name"),a=this.get("name.show"),n=this.get("name.formatter"),y=this.get("nameGap"),p=this.get("triggerEvent"),w=r(this.get("indicator")||[],function(r){var b,k,w;return r.max!=null&&r.max>0&&!r.min?r.min=0:r.min!=null&&r.min<0&&!r.max&&(r.max=0),b=t,r.color!=null&&(b=s({color:r.color},t)),r=v(c(r),{boundaryGap:i,splitNumber:u,scale:f,axisLine:e,axisTick:h,axisLabel:l,name:r.text,nameLocation:"end",nameGap:y,nameTextStyle:b,triggerEvent:p},!1),a||(r.name=""),typeof n=="string"?(k=r.name,r.name=n.replace("{value}",k!=null?k:"")):typeof n=="function"&&(r.name=n(r.name,r)),w=o(new ut(r,null,this.ecModel),ul),w.mainType="radar",w.componentIndex=this.componentIndex,w},this);this.getIndicatorModels=function(){return w}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:v({lineStyle:{color:"#bbb"}},sy.axisLine),axisLabel:out(sy.axisLabel,!1),axisTick:out(sy.axisTick,!1),splitLine:out(sy.splitLine,!0),splitArea:out(sy.splitArea,!0),indicator:[]}}),opi=["axisLine","axisTickLabel","axisName"],wi({type:"radar",render:function(n){var t=this.group;t.removeAll();this._buildAxes(n);this._buildSplitLineAndArea(n)},_buildAxes:function(n){var i=n.coordinateSystem,u=i.getIndicatorAxes(),f=r(u,function(n){return new kf(n.model,{position:[i.cx,i.cy],rotation:n.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})});t(f,function(n){t(opi,n.add,n);this.group.add(n.getGroup())},this)},_buildSplitLineAndArea:function(n){function w(n,t,i){var r=i%t.length;return n[r]=n[r]||[],r}var y=n.coordinateSystem,p=y.getIndicatorAxes(),l,a,b,ot,k,f,c,d,h,st,ht;if(p.length){var ct=n.get("shape"),g=n.getModel("splitLine"),nt=n.getModel("splitArea"),tt=g.getModel("lineStyle"),it=nt.getModel("areaStyle"),rt=g.get("show"),ut=nt.get("show"),e=tt.get("color"),o=it.get("color");if(e=i(e)?e:[e],o=i(o)?o:[o],l=[],a=[],ct==="circle"){var v=p[0].getTicksCoords(),ft=y.cx,et=y.cy;for(f=0;f<v.length;f++)rt&&(h=w(l,e,f),l[h].push(new th({shape:{cx:ft,cy:et,r:v[f].coord}}))),ut&&f<v.length-1&&(h=w(a,o,f),a[h].push(new sei({shape:{cx:ft,cy:et,r0:v[f].coord,r:v[f+1].coord}})))}else for(ot=r(p,function(n,t){var i=n.getTicksCoords();return b=b==null?i.length-1:Math.min(i.length-1,b),r(i,function(n){return y.coordToPoint(n.coord,t)})}),k=[],f=0;f<=b;f++){for(c=[],d=0;d<p.length;d++)c.push(ot[d][f]);c[0]?c.push(c[0].slice()):u&&console.error("Can't draw value axis "+f);rt&&(h=w(l,e,f),l[h].push(new af({shape:{points:c}})));ut&&k&&(h=w(a,o,f-1),a[h].push(new ku({shape:{points:c.concat(k)}})));k=c.slice().reverse()}st=tt.getLineStyle();ht=it.getAreaStyle();t(a,function(n,t){this.group.add(le(n,{style:s({stroke:"none",fill:o[t%o.length]},ht),silent:!0}))},this);t(l,function(n,t){this.group.add(le(n,{style:s({fill:"none",stroke:e[t%e.length]},st),silent:!0}))},this)}}}),spi=wt.extend({type:"series.radar",dependencies:["radar"],init:function(){spi.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()}},getInitialData:function(){return oy(this,{generateCoord:"indicator_",generateCoordCount:Infinity})},formatTooltip:function(n){var t=this.getData(),u=this.coordinateSystem,f=u.getIndicatorAxes(),i=this.getData().getName(n);return dt(i===""?this.name:i)+"<br/>"+r(f,function(i){var r=t.get(t.mapDimension(i.dim),n);return dt(i.name+" : "+r)}).join("<br />")},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}}),gr({type:"radar",render:function(n){function l(n,t){var u=n.getItemVisual(t,"symbol")||"circle",f=n.getItemVisual(t,"color"),i,r;if(u!=="none")return i=ciu(n.getItemVisual(t,"symbolSize")),r=cu(u,-1,-1,2,2,f),r.attr({style:{strokeNoScale:!0},z2:100,scale:[i[0]/2,i[1]/2]}),r}function o(t,i,r,u,f,e){var o,s;for(r.removeAll(),o=0;o<i.length-1;o++)s=l(u,f),s&&(s.__dimIdx=o,t[o]?(s.attr("position",t[o]),vf[e?"initProps":"updateProps"](s,{position:i[o]},n,f)):s.attr("position",i[o]),r.add(s))}function h(n){return r(n,function(){return[u.cx,u.cy]})}var u=n.coordinateSystem,f=this.group,t=n.getData(),i=this._data;t.diff(i).add(function(i){var r=t.getItemLayout(i),u,c;if(r){var s=new ku,f=new af,l={shape:{points:r}};s.shape.points=h(r);f.shape.points=h(r);sr(s,l,n,i);sr(f,l,n,i);u=new e;c=new e;u.add(f);u.add(s);u.add(c);o(f.shape.points,r,c,t,i,!0);t.setItemGraphicEl(i,u)}}).update(function(r,u){var f=i.getItemGraphicEl(u),s=f.childAt(0),h=f.childAt(1),c=f.childAt(2),e={shape:{points:t.getItemLayout(r)}};e.shape.points&&(o(s.shape.points,e.shape.points,c,t,r,!1),w(s,e,n),w(h,e,n),t.setItemGraphicEl(r,f))}).remove(function(n){f.remove(i.getItemGraphicEl(n))}).execute();t.eachItemGraphicEl(function(n,i){function y(){u.attr("ignore",a)}function p(){u.attr("ignore",l)}var r=t.getItemModel(i),v=n.childAt(0),u=n.childAt(1),w=n.childAt(2),e=t.getItemVisual(i,"color");f.add(n);v.useStyle(s(r.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:e}));v.hoverStyle=r.getModel("emphasis.lineStyle").getLineStyle();var o=r.getModel("areaStyle"),h=r.getModel("emphasis.areaStyle"),l=o.isEmpty()&&o.parentModel.isEmpty(),a=h.isEmpty()&&h.parentModel.isEmpty();a=a&&l;u.ignore=l;u.useStyle(s(o.getAreaStyle(),{fill:e,opacity:.7}));u.hoverStyle=h.getAreaStyle();var b=r.getModel("itemStyle").getItemStyle(["color"]),k=r.getModel("emphasis.itemStyle").getItemStyle(),d=r.getModel("label"),g=r.getModel("emphasis.label");w.eachChild(function(n){n.setStyle(b);n.hoverStyle=c(k);du(n.style,n.hoverStyle,d,g,{labelFetcher:t.hostModel,labelDataIndex:i,labelDimIndex:n.__dimIdx,defaultText:t.get(t.dimensions[n.__dimIdx],i),autoColor:e,isRectText:!0})});n.off("mouseover").off("mouseout").off("normal").off("emphasis");n.on("emphasis",y).on("mouseover",y).on("normal",p).on("mouseout",p);pt(n)});this._data=t},remove:function(){this.group.removeAll();this._data=null},dispose:function(){}}),hpi=function(n){n.eachSeriesByType("radar",function(n){function e(n,r){t[r]=t[r]||[];t[r][i]=u.dataToPoint(n,i)}var r=n.getData(),t=[],u=n.coordinateSystem,f,i;if(u){for(f=u.getIndicatorAxes(),i=0;i<f.length;i++)r.each(r.mapDimension(f[i].dim),e);r.each(function(n){t[n][0]&&t[n].push(t[n][0].slice());r.setItemLayout(n,t[n])})}})},cpi=function(n){var r=n.polar,u;r&&(i(r)||(r=[r]),u=[],t(r,function(t){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),n.radar=n.radar||[],i(n.radar)||(n.radar=[n.radar]),n.radar.push(t)):u.push(t)}),n.polar=u);t(n.series,function(n){n&&n.type==="radar"&&n.polarIndex&&(n.radarIndex=n.polarIndex)})},yt(rut("radar")),yt(ol("radar","circle")),gt(hpi),su(wb("radar")),ur(cpi),apt=vt,st(vpt,hf),lh.prototype={constructor:lh,type:"view",dimensions:["x","y"],setBoundingRect:function(n,t,i,r){return this._rect=new b(n,t,i,r),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(n,t,i,r){this.transformTo(n,t,i,r);this._viewRect=new b(n,t,i,r)},transformTo:function(n,t,i,r){var f=this.getBoundingRect(),u=this._rawTransformable;u.transform=f.calculateTransform(new b(n,t,i,r));u.decomposeTransform();this._updateTransform()},setCenter:function(n){n&&(this._center=n,this._updateCenterAndZoom())},setZoom:function(n){n=n||1;var t=this.zoomLimit;t&&(t.max!=null&&(n=Math.min(t.max,n)),t.min!=null&&(n=Math.max(t.min,n)));this._zoom=n;this._updateCenterAndZoom()},getDefaultCenter:function(){var n=this.getBoundingRect(),t=n.x+n.width/2,i=n.y+n.height/2;return[t,i]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var r=this._rawTransformable.getLocalTransform(),i=this._roamTransformable,t=this.getDefaultCenter(),n=this.getCenter(),u=this.getZoom();n=vt([],n,r);t=vt([],t,r);i.origin=n;i.position=[t[0]-n[0],t[1]-n[1]];i.scale=[u,u];this._updateTransform()},_updateTransform:function(){var t=this._roamTransformable,n=this._rawTransformable;n.parent=t;t.updateTransform();n.updateTransform();bd(this.transform||(this.transform=[]),n.transform||cr());this._rawTransform=n.getLocalTransform();this.invTransform=this.invTransform||[];kd(this.invTransform,this.transform);this.decomposeTransform()},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var n=this.getBoundingRect().clone();return n.applyTransform(this.transform),n},dataToPoint:function(n,t,i){var r=t?this._rawTransform:this.transform;return i=i||[],r?apt(i,n,r):gi(i,n)},pointToData:function(n){var t=this.invTransform;return t?apt([],n,t):[n[0],n[1]]},convertToPixel:y(lpi,"dataToPoint"),convertFromPixel:y(lpi,"pointToData"),containPoint:function(n){return this.getViewRectAfterRoam().contain(n[0],n[1])}},st(lh,hf),sut=[126,25],ah=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],vh=0;vh<ah.length;vh++)for(hl=0;hl<ah[vh].length;hl++)ah[vh][hl][0]/=10.5,ah[vh][hl][1]/=-10.5/.75,ah[vh][hl][0]+=sut[0],ah[vh][hl][1]+=sut[1];var liu=function(n,t){n==="china"&&t.push(new cb("南海诸岛",r(ah,function(n){return{type:"polygon",exterior:n}}),sut))},aiu={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]},viu=function(n,t){var i,r;n==="china"&&(i=aiu[t.name],i&&(r=t.center,r[0]+=i[0]/10.5,r[1]+=-i[1]/(10.5/.75)))},yiu={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},piu=function(n,t){var i,r;n==="world"&&(i=yiu[t.name],i&&(r=t.center,r[0]=i[0],r[1]=i[1]))},wiu=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],biu=function(n,t){n==="china"&&t.name==="台湾"&&t.geometries.push({type:"polygon",exterior:wiu[0]})},api=pr(),kiu={load:function(n,i){var f=api(i).parsed,e,u,r;if(f)return f;e=i.specialAreas||{};u=i.geoJSON;try{r=u?brt(u):[]}catch(o){throw new Error("Invalid geoJson format\n"+o.message);}return t(r,function(t){var r=t.name,i;viu(n,t);piu(n,t);biu(n,t);i=e[r];i&&t.transformTo(i.left,i.top,i.width,i.height)}),liu(n,r),api(i).parsed={regions:r,boundingRect:diu(r)}}};cl=pr();vpi={load:function(n,t){var r=cl(t).originRoot,i;return r?{root:r,boundingRect:cl(t).boundingRect}:(i=ypi(t),cl(t).originRoot=i.root,cl(t).boundingRect=i.boundingRect,i)},makeGraphic:function(n,t,i){var r=cl(t),f=r.rootMap||(r.rootMap=p()),u=f.get(i),e,o;return u?u:(e=r.originRoot,o=r.boundingRect,r.originRootHostKey?u=ypi(t,o).root:(r.originRootHostKey=i,u=e),f.set(i,u))},removeGraphic:function(n,t,i){var r=cl(t),u=r.rootMap;u&&u.removeKey(i);i===r.originRootHostKey&&(r.originRootHostKey=null)}};ypt={geoJSON:kiu,svg:vpi};bb={load:function(n,i){var u=[],f=p(),e=p(),r,o=wpi(n);return t(o,function(o){var h=ypt[o.type].load(n,o),s;t(h.regions,function(n){var t=n.name;i&&i.hasOwnProperty(t)&&(n=n.cloneShallow(t=i[t]));u.push(n);f.set(t,n);e.set(t,n.center)});s=h.boundingRect;s&&(r?r.union(s):r=s.clone())}),{regions:u,regionsMap:f,nameCoordMap:e,boundingRect:r||new b(0,0,0,0)}},makeGraphic:ppi("makeGraphic"),removeGraphic:ppi("removeGraphic")};hy.prototype={constructor:hy,type:"geo",dimensions:["lng","lat"],containCoord:function(n){for(var i=this.regions,t=0;t<i.length;t++)if(i[t].contain(n))return!0;return!1},transformTo:function(n,t,i,r){var u=this.getBoundingRect(),o=this._invertLongitute,f,e;u=u.clone();o&&(u.y=-u.y-u.height);f=this._rawTransformable;f.transform=u.calculateTransform(new b(n,t,i,r));f.decomposeTransform();o&&(e=f.scale,e[1]=-e[1]);f.updateTransform();this._updateTransform()},getRegion:function(n){return this._regionsMap.get(n)},getRegionByCoord:function(n){for(var i=this.regions,t=0;t<i.length;t++)if(i[t].contain(n))return i[t]},addGeoCoord:function(n,t){this._nameCoordMap.set(n,t)},getGeoCoord:function(n){return this._nameCoordMap.get(n)},getBoundingRect:function(){return this._rect},dataToPoint:function(n,t,i){return typeof n=="string"&&(n=this.getGeoCoord(n)),n?lh.prototype.dataToPoint.call(this,n,t,i):void 0},convertToPixel:y(bpi,"dataToPoint"),convertFromPixel:y(bpi,"pointToData")};st(hy,lh);hut={dimensions:hy.prototype.dimensions,create:function(n,i){var f=[],u;return n.eachComponent("geo",function(n,t){var e=n.get("map"),u=n.get("aspectScale"),s=!0,o=yit.retrieveMap(e),r;o&&o[0]&&o[0].type==="svg"?(u==null&&(u=1),s=!1):u==null&&(u=.75);r=new hy(e+t,e,n.get("nameMap"),s);r.aspectScale=u;r.zoomLimit=n.get("scaleLimit");f.push(r);dpi(r,n);n.coordinateSystem=r;r.model=n;r.resize=kpi;r.resize(n,i)}),n.eachSeries(function(n){var i=n.get("coordinateSystem"),t;i==="geo"&&(t=n.get("geoIndex")||0,n.coordinateSystem=f[t])}),u={},n.eachSeriesByType("map",function(n){if(!n.getHostGeoModel()){var t=n.getMapType();u[t]=u[t]||[];u[t].push(n)}}),t(u,function(n,u){var o=r(n,function(n){return n.get("nameMap")}),e=new hy(u,u,cp(o));e.zoomLimit=kt.apply(null,r(n,function(n){return n.get("scaleLimit")}));f.push(e);e.resize=kpi;e.aspectScale=n[0].get("aspectScale");e.resize(n[0],i);t(n,function(n){n.coordinateSystem=e;dpi(e,n)})}),f},getFilledRegions:function(n,i,r){for(var o,u=(n||[]).slice(),e=p(),f=0;f<u.length;f++)e.set(u[f].name,u[f]);return o=bb.load(i,r),t(o.regions,function(n){var t=n.name;e.get(t)||u.push({name:t})}),u}};vvt("geo",hut);cut=wt.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],init:function(){cut.superApply(this,"init",arguments);this.updateSelectedMap(this._createSelectableList())},getInitialData:function(){return oy(this,["value"])},mergeOption:function(){cut.superApply(this,"mergeOption",arguments);this.updateSelectedMap(this._createSelectableList())},_createSelectableList:function(){for(var n=this.getRawData(),r=n.mapDimension("value"),i=[],t=0,u=n.count();t<u;t++)i.push({name:n.getName(t),value:n.get(r,t),selected:uhi(n,t,"selected")});return hut.getFilledRegions(i,this.getMapType(),this.option.nameMap)},getHostGeoModel:function(){var n=this.option.geoIndex;return n!=null?this.dependentModels.geo[n]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},_fillOption:function(){},getRawValue:function(n){var t=this.getData();return t.get(t.mapDimension("value"),n)},getRegionModel:function(n){var t=this.getData();return t.getItemModel(t.indexOfName(n))},formatTooltip:function(n){for(var e,o,r=this.getData(),s=uh(this.getRawValue(n)),u=r.getName(n),i=this.seriesGroup,f=[],t=0;t<i.length;t++)e=i[t].originalData.indexOfName(u),o=r.mapDimension("value"),isNaN(i[t].originalData.get(o,e))||f.push(dt(i[t].name));return f.join(", ")+"<br />"+dt(u+" : "+s)},getTooltipPosition:function(n){if(n!=null){var r=this.getData().getName(n),t=this.coordinateSystem,i=t.getRegion(r);return i&&t.dataToPoint(i.center)}},setZoom:function(n){this.option.zoom=n},setCenter:function(n){this.option.center=n},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}}}});st(cut,hpt);ppt='\0_ec_interaction_mutex';rt({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){});st(cy,ci);twi={axisPointer:1,tooltip:1,brush:1};vut.prototype={constructor:vut,draw:function(n,i,r,u,f){var l=n.mainType==="geo",o=n.getData&&n.getData(),s;l&&i.eachComponent({mainType:"series",subType:"map"},function(t){o||t.getHostGeoModel()!==n||(o=t.getData())});s=n.coordinateSystem;this._updateBackground(s);var h=this._regionsGroup,a=this.group,c=s.scale,v={position:s.position,scale:c};!h.childAt(0)||f?a.attr(v):w(a,v,n);h.removeAll();var b=["itemStyle"],d=["emphasis","itemStyle"],g=["label"],nt=["emphasis","label"],y=p();t(s.regions,function(i){var r=y.get(i.name)||y.set(i.name,new e),u=new pei({shape:{paths:[]}}),v,rt,ut,a,f,ft;r.add(u);var f=n.getRegionModel(i.name)||n,et=f.getModel(b),ot=f.getModel(d),p=iwi(et,c),st=iwi(ot,c),w=f.getModel(g),tt=f.getModel(nt),s;o&&(s=o.indexOfName(i.name),v=o.getItemVisual(s,"color",!0),v&&(p.fill=v));t(i.geometries,function(n){if(n.type==="polygon"){u.shape.paths.push(new ku({shape:{points:n.exterior}}));for(var t=0;t<(n.interiors?n.interiors.length:0);t++)u.shape.paths.push(new ku({shape:{points:n.interiors[t]}}))}});u.setStyle(p);u.style.strokeNoScale=!0;u.culling=!0;var ht=w.get("show"),ct=tt.get("show"),lt=o&&isNaN(o.get(o.mapDimension("value"),s)),it=o&&o.getItemLayout(s);(l||lt&&(ht||ct)||it&&it.showLabel)&&(rt=l?i.name:s,(!o||s>=0)&&(ut=n),a=new k({position:i.center.slice(),scale:[1/c[0],1/c[1]],z2:10,silent:!0}),du(a.style,a.hoverStyle={},w,tt,{labelFetcher:ut,labelDataIndex:rt,defaultText:i.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),r.add(a));o?o.setItemGraphicEl(s,r):(f=n.getRegionModel(i.name),u.eventData={componentType:"geo",componentIndex:n.componentIndex,geoIndex:n.componentIndex,name:i.name,region:f&&f.option||{}});ft=r.__regions||(r.__regions=[]);ft.push(i);pt(r,st,{hoverSilentOnTouch:!!n.get("selectedMode")});h.add(r)});this._updateController(n,i,r);oru(this,n,h,r,u);rwi(n,h)},remove:function(){this._regionsGroup.removeAll();this._backgroundGroup.removeAll();this._controller.dispose();this._mapName&&bb.removeGraphic(this._mapName,this.uid);this._mapName=null;this._controllerHost={}},_updateBackground:function(n){var i=n.map;this._mapName!==i&&t(bb.makeGraphic(i,this.uid),function(n){this._backgroundGroup.add(n)},this);this._mapName=i},_updateController:function(n,t,i){function s(){var t={type:"geoRoam",componentType:f};return t[f+"Id"]=n.id,t}var e=n.coordinateSystem,r=this._controller,u=this._controllerHost,f;u.zoomLimit=n.get("scaleLimit");u.zoom=e.getZoom();r.enable(n.get("roam")||!1);f=n.mainType;r.off("pan").on("pan",function(n){this._mouseDownFlag=!1;kpt(u,n.dx,n.dy);i.dispatchAction(o(s(),{dx:n.dx,dy:n.dy}))},this);r.off("zoom").on("zoom",function(n){if(this._mouseDownFlag=!1,dpt(u,n.scale,n.originX,n.originY),i.dispatchAction(o(s(),{zoom:n.scale,originX:n.originX,originY:n.originY})),this._updateGroup){var t=this.group.scale;this._regionsGroup.traverse(function(n){n.type==="text"&&n.attr("scale",[1/t[0],1/t[1]])})}},this);r.setPointerChecker(function(t,r,u){return e.getViewRectAfterRoam().contain(r,u)&&!aut(t,i,n)})}};gr({type:"map",render:function(n,t,i,r){var f,u;r&&r.type==="mapToggleSelect"&&r.from===this.uid||(f=this.group,f.removeAll(),n.getHostGeoModel())||(r&&r.type==="geoRoam"&&r.componentType==="series"&&r.seriesId===n.id?(u=this._mapDraw,u&&f.add(u.group)):n.needsDrawMap?(u=this._mapDraw||new vut(i,!0),f.add(u.group),u.draw(n,t,i,this,r),this._mapDraw=u):(this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null),n.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(n,t,i))},remove:function(){this._mapDraw&&this._mapDraw.remove();this._mapDraw=null;this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove();this._mapDraw=null},_renderSymbols:function(n){var t=n.originalData,i=this.group;t.each(t.mapDimension("value"),function(r,u){var e;if(!isNaN(r)&&(e=t.getItemLayout(u),e&&e.point)){var c=e.point,o=e.offset,f=new th({style:{fill:n.getData().getVisual("color")},shape:{cx:c[0]+o*9,cy:c[1],r:3},silent:!0,z2:o?8:10});if(!o){var l=n.mainSeries.getData(),a=t.getName(u),b=l.indexOfName(a),v=t.getItemModel(u),s=v.getModel("label"),y=v.getModel("emphasis.label"),k=l.getItemGraphicEl(b),p=vi(n.getFormattedLabel(u,"normal"),a),d=vi(n.getFormattedLabel(u,"emphasis"),p),w=function(){var n=ii({},y,{text:y.get("show")?d:null},{isRectText:!0,useInsideStyle:!1},!0);f.style.extendFrom(n);f.__mapOriginalZ2=f.z2;f.z2+=1},h=function(){ii(f.style,s,{text:s.get("show")?p:null,textPosition:s.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1});f.__mapOriginalZ2!=null&&(f.z2=f.__mapOriginalZ2,f.__mapOriginalZ2=null)};k.on("mouseover",w).on("mouseout",h).on("emphasis",w).on("normal",h);h()}i.add(f)}})}});rt({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(n,i){var r=n.componentType||"series";i.eachComponent({mainType:r,query:n},function(i){var f=i.coordinateSystem,u;f.type==="geo"&&(u=gpt(f,n,i.get("scaleLimit")),i.setCenter&&i.setCenter(u.center),i.setZoom&&i.setZoom(u.zoom),r==="series"&&t(i.seriesGroup,function(n){n.setCenter(u.center);n.setZoom(u.zoom)}))})});uwi=function(n){var i={};n.eachSeriesByType("map",function(r){var e=r.getMapType(),f,u;r.getHostGeoModel()||i[e]||(f={},t(r.seriesGroup,function(t){var r=t.coordinateSystem,i=t.originalData;t.get("showLegendSymbol")&&n.getComponent("legend")&&i.each(i.mapDimension("value"),function(n,t){var u=i.getName(t),o=r.getRegion(u),e,s;o&&!isNaN(n)&&(e=f[u]||0,s=r.dataToPoint(o.center),f[u]=e+1,i.setItemLayout(t,{point:s,offset:e}))})}),u=r.getData(),u.each(function(n){var i=u.getName(n),t=u.getItemLayout(n)||{};t.showLabel=!f[i];u.setItemLayout(n,t)}),i[e]=!0)})};fwi=function(n){n.eachSeriesByType("map",function(n){var t=n.get("color"),i=n.getModel("itemStyle"),r=i.get("areaColor"),u=i.get("color")||t[n.seriesIndex%t.length];n.getData().setVisual({areaColor:r,color:u})})};ewi=function(n){var i={};n.eachSeriesByType("map",function(n){var t=n.getHostGeoModel(),r=t?"o"+t.id:"i"+n.getMapType();(i[r]=i[r]||[]).push(n)});t(i,function(n){for(var i=sru(r(n,function(n){return n.getData()}),n[0].get("mapValueCalculation")),t=0;t<n.length;t++)n[t].originalData=n[t].getData();for(t=0;t<n.length;t++)n[t].seriesGroup=n,n[t].needsDrawMap=t===0&&!n[t].getHostGeoModel(),n[t].setData(i.cloneShallow()),n[t].mainSeries=n[0]})};owi=function(n){var i=[];t(n.series,function(n){n&&n.type==="map"&&(i.push(n),n.map=n.map||n.mapType,s(n,n.mapLocation))})};gt(uwi);yt(fwi);su(kv.PROCESSOR.STATISTIC,ewi);ur(owi);ipi("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var kb=t,db='\0__link_datas',yut='\0__link_mainData';put=function(n,t){this.name=n||"";this.depth=0;this.height=0;this.parentNode=null;this.dataIndex=-1;this.children=[];this.viewChildren=[];this.hostTree=t};put.prototype={constructor:put,isRemoved:function(){return this.dataIndex<0},eachNode:function(n,t,i){var u,f,e,r;for(typeof n=="function"&&(i=t,t=n,n=null),n=n||{},at(n)&&(n={order:n}),u=n.order||"preorder",f=this[n.attr||"children"],u==="preorder"&&(e=t.call(i,this)),r=0;!e&&r<f.length;r++)f[r].eachNode(n,t,i);u==="postorder"&&t.call(i,this)},updateDepthAndHeight:function(n){var r=0,t,i;for(this.depth=n,t=0;t<this.children.length;t++)i=this.children[t],i.updateDepthAndHeight(n+1),i.height>r&&(r=i.height);this.height=r+1},getNodeById:function(n){var i;if(this.getId()===n)return this;for(var t=0,r=this.children,u=r.length;t<u;t++)if(i=r[t].getNodeById(n),i)return i},contains:function(n){var i;if(n===this)return!0;for(var t=0,r=this.children,u=r.length;t<u;t++)if(i=r[t].contains(n),i)return i},getAncestors:function(n){for(var i=[],t=n?this:this.parentNode;t;)i.push(t),t=t.parentNode;return i.reverse(),i},getValue:function(n){var t=this.hostTree.data;return t.get(t.getDimension(n||"value"),this.dataIndex)},setLayout:function(n,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,n,t)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(n){if(!(this.dataIndex<0)){var t=this.hostTree,u=t.data.getItemModel(this.dataIndex),i=this.getLevelModel(),r;return i||this.children.length!==0&&(this.children.length===0||this.isExpand!==!1)||(r=this.getLeavesModel()),u.getModel(n,(i||r||t.hostModel).getModel(n))}},getLevelModel:function(){return(this.hostTree.levelModels||[])[this.depth]},getLeavesModel:function(){return this.hostTree.leavesModel},setVisual:function(n,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,n,t)},getVisual:function(n,t){return this.hostTree.data.getItemVisual(this.dataIndex,n,t)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(n){for(var t=n.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},isDescendantOf:function(n){return n!==this&&n.isAncestorOf(this)}};ll.prototype={constructor:ll,type:"tree",eachNode:function(n,t,i){this.root.eachNode(n,t,i)},getNodeByDataIndex:function(n){var t=this.data.getRawIndex(n);return this._nodes[t]},getNodeByName:function(n){return this.root.getNodeByName(n)},update:function(){for(var r=this.data,t=this._nodes,n=0,i=t.length;n<i;n++)t[n].dataIndex=-1;for(n=0,i=r.count();n<i;n++)t[r.getRawIndex(n)].dataIndex=n},clearLayouts:function(){this.data.clearItemLayouts()}};ll.createTree=function(n,t,r){function s(n,t){var c=n.value,r,o,h;if(e=Math.max(e,i(c)?c.length:1),f.push(n),r=new put(n.name,u),t?yru(r,t):u.root=r,u._nodes.push(r),o=n.children,o)for(h=0;h<o.length;h++)s(o[h],r)}var u=new ll(t,r.levels,r.leaves),f=[],e=1,h,o;return s(n),u.root.updateDepthAndHeight(0),h=rl(f,{coordDimensions:["value"],dimensionsCount:e}),o=new ai(h,t),o.initData(f),swi({mainData:o,struct:u,structAttr:"tree"}),u.update(),u};wt.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(n){var e={name:n.name,children:n.data},o=n.leaves||{},r={},t,i,u,f;return r.leaves=o,t=ll.createTree(e,this,r),i=0,t.eachNode("preorder",function(n){n.depth>i&&(i=n.depth)}),u=n.expandAndCollapse,f=u&&n.initialTreeDepth>=0?n.initialTreeDepth:i,t.root.eachNode("preorder",function(n){var t=n.hostTree.data.getRawDataItem(n.dataIndex);n.isExpand=t&&t.collapsed!=null?!t.collapsed:n.depth<=f}),t.data},getOrient:function(){var n=this.get("orient");return n==="horizontal"?n="LR":n==="vertical"&&(n="TB"),n},setZoom:function(n){this.option.zoom=n},setCenter:function(n){this.option.center=n},formatTooltip:function(n){for(var u=this.getData().tree,f=u.root.children[0],t=u.getNodeByDataIndex(n),i=t.getValue(),r=t.name;t&&t!==f;)r=t.parentNode.name+"."+r,t=t.parentNode;return dt(r+(isNaN(i)||i==null?"":" : "+i))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});gr({type:"tree",init:function(n,t){this._oldTree;this._mainGroup=new e;this._controller=new cy(t.getZr());this._controllerHost={target:this.group};this.group.add(this._mainGroup)},render:function(n,t,i){var r=n.getData(),u=n.layoutInfo,f=this._mainGroup,s=n.get("layout"),e,o;s==="radial"?f.attr("position",[u.x+u.width/2,u.y+u.height/2]):f.attr("position",[u.x,u.y]);this._updateViewCoordSys(n);this._updateController(n,t,i);e=this._data;o={expandAndCollapse:n.get("expandAndCollapse"),layout:s,orient:n.getOrient(),curvature:n.get("lineStyle.curveness"),symbolRotate:n.get("symbolRotate"),symbolOffset:n.get("symbolOffset"),hoverAnimation:n.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};r.diff(e).add(function(t){lwi(r,t)&&vwi(r,t,null,f,n,o)}).update(function(t,i){var u=e.getItemGraphicEl(i);if(!lwi(r,t)){u&&ywi(e,i,u,f,n,o);return}vwi(r,t,u,f,n,o)}).remove(function(t){var i=e.getItemGraphicEl(t);i&&ywi(e,t,i,f,n,o)}).execute();this._nodeScaleRatio=n.get("nodeScaleRatio");this._updateNodeAndLinkScale(n);o.expandAndCollapse===!0&&r.eachItemGraphicEl(function(t,r){t.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:n.id,dataIndex:r})})});this._data=r},_updateViewCoordSys:function(n){var u=n.getData(),f=[],t,i,r;u.each(function(n){var t=u.getItemLayout(n);!t||isNaN(t.x)||isNaN(t.y)||f.push([+t.x,+t.y])});t=[];i=[];kct(f,t,i);i[0]-t[0]==0&&(i[0]+=1,t[0]-=1);i[1]-t[1]==0&&(i[1]+=1,t[1]-=1);r=n.coordinateSystem=new lh;r.zoomLimit=n.get("scaleLimit");r.setBoundingRect(t[0],t[1],i[0]-t[0],i[1]-t[1]);r.setCenter(n.get("center"));r.setZoom(n.get("zoom"));this.group.attr({position:r.position,scale:r.scale});this._viewCoordSys=r},_updateController:function(n,t,i){var u=this._controller,r=this._controllerHost,f=this.group;u.setPointerChecker(function(t,r,u){var e=f.getBoundingRect();return e.applyTransform(f.transform),e.contain(r,u)&&!aut(t,i,n)});u.enable(n.get("roam"));r.zoomLimit=n.get("scaleLimit");r.zoom=n.coordinateSystem.getZoom();u.off("pan").off("zoom").on("pan",function(t){kpt(r,t.dx,t.dy);i.dispatchAction({seriesId:n.id,type:"treeRoam",dx:t.dx,dy:t.dy})},this).on("zoom",function(t){dpt(r,t.scale,t.originX,t.originY);i.dispatchAction({seriesId:n.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY});this._updateNodeAndLinkScale(n)},this)},_updateNodeAndLinkScale:function(n){var i=n.getData(),t=this._getNodeGlobalScale(n),r=[t,t];i.eachItemGraphicEl(function(n){n.attr("scale",r)})},_getNodeGlobalScale:function(n){var t=n.coordinateSystem;if(t.type!=="view")return 1;var r=this._nodeScaleRatio,i=t.scale,u=i&&i[0]||1,f=t.getZoom(),e=(f-1)*r+1;return e/u},dispose:function(){this._controller&&this._controller.dispose();this._controllerHost={}},remove:function(){this._mainGroup.removeAll();this._data=null}});rt({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(n,t){t.eachComponent({mainType:"series",subType:"tree",query:n},function(t){var r=n.dataIndex,u=t.getData().tree,i=u.getNodeByDataIndex(r);i.isExpand=!i.isExpand})});rt({type:"treeRoam",event:"treeRoam",update:"none"},function(n,t){t.eachComponent({mainType:"series",subType:"tree",query:n},function(t){var r=t.coordinateSystem,i=gpt(r,n);t.setCenter&&t.setCenter(i.center);t.setZoom&&t.setZoom(i.zoom)})});pwi=function(n,t){n.eachSeriesByType("tree",function(n){uuu(n,t)})};yt(ol("tree","circle"));gt(pwi);wt.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],_viewRoot:null,defaultOption:{progressive:0,hoverLayerThreshold:Infinity,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(n,t){var u={name:n.name,children:n.data},i,r;return bwi(u),i=n.levels||[],i=n.levels=fuu(i,t),r={},r.levels=i,ll.createTree(u,this,r).data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(n){var r=this.getData(),t=this.getRawValue(n),u=i(t)?uh(t[0]):uh(t),f=r.getName(n);return dt(f+": "+u)},getDataParams:function(n){var t=wt.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(n);return t.treePathInfo=fwt(i,this),t},setLayoutInfo:function(n){this.layoutInfo=this.layoutInfo||{};o(this.layoutInfo,n)},mapIdToIndex:function(n){var t=this._idIndexMap,i;return t||(t=this._idIndexMap=p(),this._idIndexMapCount=0),i=t.get(n),i==null&&t.set(n,i=this._idIndexMapCount++),i},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(n){n?this._viewRoot=n:n=this._viewRoot;var t=this.getRawData().tree.root;n&&(n===t||t.contains(n))||(this._viewRoot=t)}});var euu=8,kwi=8,ewt=5;owt.prototype={constructor:owt,render:function(n,t,i,r){var u=n.getModel("breadcrumb"),e=this.group;if(e.removeAll(),u.get("show")&&i){var o=u.getModel("itemStyle"),s=o.getModel("textStyle"),f={pos:{left:u.get("left"),right:u.get("right"),top:u.get("top"),bottom:u.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:u.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(i,f,s);this._renderContent(n,f,o,s,r);vtt(e,f.pos,f.box)}},_prepare:function(n,t,i){for(var r=n;r;r=r.parentNode){var u=r.getModel().get("name"),e=i.getTextRect(u),f=Math.max(e.width+euu*2,t.emptyItemWidth);t.totalWidth+=f+kwi;t.renderList.push({node:r,text:u,width:f})}},_renderContent:function(n,t,i,r,u){for(var c,l=0,a=t.emptyItemWidth,b=n.get("breadcrumb.height"),k=fpr(t.pos,t.box),v=t.totalWidth,o=t.renderList,f=o.length-1;f>=0;f--){var h=o[f],p=h.node,e=h.width,w=h.text;v>k.width&&(v-=e-a,e=a,w=null);c=new ku({shape:{points:ouu(l,0,e,b,f===o.length-1,f===0)},style:s(i.getItemStyle(),{lineJoin:"bevel",text:w,textFill:r.getTextColor(),textFont:r.getFont()}),z:10,onclick:y(u,p)});this.group.add(c);suu(c,n,p);l+=e+kwi}},remove:function(){this.group.removeAll()}};var wut=l,dwi=e,gwi=et,we=t,nbi=3,cuu=["label"],luu=["emphasis","label"],auu=["upperLabel"],vuu=["emphasis","upperLabel"],yuu=10,puu=1,wuu=2,swt=uv([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),tbi=function(n){var t=swt(n);return t.stroke=t.fill=t.lineWidth=null,t};for(gr({type:"treemap",init:function(){this._containerGroup;this._storage=ik();this._oldTree;this._breadcrumb;this._controller;this._state="ready"},render:function(n,t,i,r){var c=t.findComponents({mainType:"series",subType:"treemap",query:r});if(!(tt(c,n)<0)){this.seriesModel=n;this.api=i;this.ecModel=t;var f=tk(r,["treemapZoomToNode","treemapRootToNode"],n),u=r&&r.type,l=n.layoutInfo,a=!this._oldTree,e=this._storage,o=u==="treemapRootToNode"&&f&&e?{rootNodeGroup:e.nodeGroup[f.node.getRawIndex()],direction:r.direction}:null,s=this._giveContainerGroup(l),h=this._doRender(s,n,o);!a&&(!u||u==="treemapZoomToNode"||u==="treemapRootToNode")?this._doAnimation(s,h,n,o):h.renderFinally();this._resetController(i);this._renderBreadcrumb(n,i,f)}},_giveContainerGroup:function(n){var t=this._containerGroup;return t||(t=this._containerGroup=new dwi,this._initEvents(t),this.group.add(t)),t.attr("position",[n.x,n.y]),t},_doRender:function(n,t,i){function c(n,t,i,r,u){function e(n){return n.getId()}function f(f,e){var o=f!=null?n[f]:null,s=e!=null?t[e]:null,h=l(o,s,i,u);h&&c(o&&o.viewChildren||[],s&&s.viewChildren||[],h,r,u+1)}r?(t=n,we(n,function(n,t){n.isRemoved()||f(t,t)})):new vo(t,n,e,e).add(f).update(f).remove(y(f,null)).execute()}function a(n){var t=ik();return n&&we(n,function(n,i){var r=t[i];we(n,function(n){n&&(r.push(n),n.__tmWillDelete=1)})}),t}function v(){we(f,function(n){we(n,function(n){n.parent&&n.parent.remove(n)})});we(h,function(n){n.invisible=!0;n.dirty()})}var u=t.getData().tree,r=this._oldTree,e=ik(),o=ik(),s=this._storage,h=[],l=y(buu,t,o,s,i,e,h),f;return c(u.root?[u.root]:[],r&&r.root?[r.root]:[],n,u===r||!r,0),f=a(s),this._oldTree=u,this._storage=o,{lastsForAnimation:e,willDeleteEls:f,renderFinally:v}},_doAnimation:function(n,t,i,r){if(i.get("animation")){var f=i.get("animationDurationUpdate"),e=i.get("animationEasing"),u=huu();we(t.willDeleteEls,function(n,t){we(n,function(n){var i,o,s,h;n.invisible||(i=n.parent,r&&r.direction==="drillDown"?o=i===r.rootNodeGroup?{shape:{x:0,y:0,width:i.__tmNodeWidth,height:i.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}}:(s=0,h=0,i.__tmWillDelete||(s=i.__tmNodeWidth/2,h=i.__tmNodeHeight/2),o=t==="nodeGroup"?{position:[s,h],style:{opacity:0}}:{shape:{x:s,y:h,width:0,height:0},style:{opacity:0}}),o&&u.add(n,o,f,e))})});we(this._storage,function(n,i){we(n,function(n,r){var s=t.lastsForAnimation[i][r],h={};s&&(i==="nodeGroup"?s.old&&(h.position=n.position.slice(),n.attr("position",s.old)):(s.old&&(h.shape=o({},n.shape),n.setShape(s.old)),s.fadein?(n.setStyle("opacity",0),h.style={opacity:1}):n.style.opacity!==1&&(h.style={opacity:1})),u.add(n,h,f,e))})},this);this._state="animating";u.done(wut(function(){this._state="ready";t.renderFinally()},this)).start()}},_resetController:function(n){var t=this._controller,i;if(!t){t=this._controller=new cy(n.getZr());t.enable(this.seriesModel.get("roam"));t.on("pan",wut(this._onPan,this));t.on("zoom",wut(this._onZoom,this))}i=new b(0,0,n.getWidth(),n.getHeight());t.setPointerChecker(function(n,t,r){return i.contain(t,r)})},_clearController:function(){var n=this._controller;n&&(n.dispose(),n=null)},_onPan:function(n){var i,t;if(this._state!=="animating"&&(Math.abs(n.dx)>nbi||Math.abs(n.dy)>nbi)){if(i=this.seriesModel.getData().tree.root,!i)return;if(t=i.getLayout(),!t)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:t.x+n.dx,y:t.y+n.dy,width:t.width,height:t.height}})}},_onZoom:function(n){var u=n.originX,f=n.originY,e,i,r,o,t;if(this._state!=="animating"){if(e=this.seriesModel.getData().tree.root,!e)return;if(i=e.getLayout(),!i)return;r=new b(i.x,i.y,i.width,i.height);o=this.seriesModel.layoutInfo;u-=o.x;f-=o.y;t=cr();yu(t,t,[-u,-f]);pp(t,t,[n.scale,n.scale]);yu(t,t,[u,f]);r.applyTransform(t);this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:r.x,y:r.y,width:r.width,height:r.height}})}},_initEvents:function(n){n.on("click",function(n){var i,t,r;if(this._state==="ready"&&(i=this.seriesModel.get("nodeClick",!0),i)&&(t=this.findTarget(n.offsetX,n.offsetY),t))if(r=t.node,r.getLayout().isLeafRoot)this._rootToNode(t);else if(i==="zoomToNode")this._zoomToNode(t);else if(i==="link"){var u=r.hostTree.data.getItemModel(r.dataIndex),f=u.get("link",!0),e=u.get("target",!0)||"blank";f&&window.open(f,e)}},this)},_renderBreadcrumb:function(n,t,i){function r(t){this._state!=="animating"&&(uwt(n.getViewRoot(),t)?this._rootToNode({node:t}):this._zoomToNode({node:t}))}i||(i=n.get("leafDepth",!0)!=null?{node:n.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2),i||(i={node:n.getData().tree.root}));(this._breadcrumb||(this._breadcrumb=new owt(this.group))).render(n,t,i.node,wut(r,this))},remove:function(){this._clearController();this._containerGroup&&this._containerGroup.removeAll();this._storage=ik();this._state="ready";this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(n){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},_rootToNode:function(n){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},findTarget:function(n,t){var i,r=this.seriesModel.getViewRoot();return r.eachNode({attr:"viewChildren",order:"preorder"},function(r){var e=this._storage.background[r.getRawIndex()],u,f;if(e)if(u=e.transformCoordToLocal(n,t),f=e.shape,f.x<=u[0]&&u[0]<=f.x+f.width&&f.y<=u[1]&&u[1]<=f.y+f.height)i={node:r,offsetX:u[0],offsetY:u[1]};else return!1},this),i}}),ibi=function(){},hwt=["treemapZoomToNode","treemapRender","treemapMove"],but=0;but<hwt.length;but++)rt({type:hwt[but],update:"updateView"},ibi);rt({type:"treemapRootToNode",update:"updateView"},function(n,t){function i(t){var i=tk(n,["treemapZoomToNode","treemapRootToNode"],t),r;i&&(r=t.getViewRoot(),r&&(n.direction=uwt(r,i.node)?"rollUp":"drillDown"),t.resetViewRoot(i.node))}t.eachComponent({mainType:"series",subType:"treemap",query:n},i)});var rk=t,rbi=a,kut=-1,ht=function(n){var i=n.mappingMethod,u=n.type,t=this.option=c(n),r;this.type=u;this.mappingMethod=i;this._normalizeData=ebi[i];r=ly[u];this.applyVisual=r.applyVisual;this.getColorMapper=r.getColorMapper;this._doMap=r._doMap[i];i==="piecewise"?(cwt(t),duu(t)):i==="category"?t.categories?guu(t):cwt(t,!0):(g(i!=="linear"||t.dataExtent),cwt(t))};ht.prototype={constructor:ht,mapValueToVisual:function(n){var t=this._normalizeData(n);return this._doMap(t,n)},getNormalizer:function(){return l(this._normalizeData,this)}};ly=ht.visualHandlers={color:{applyVisual:gut("color"),getColorMapper:function(){var n=this.option;return l(n.mappingMethod==="category"?function(n,t){return t||(n=this._normalizeData(n)),nft.call(this,n)}:function(t,i,r){var u=!!r;return i||(t=this._normalizeData(t)),r=dp(t,n.parsedVisual,r),u?r:fo(r,"rgba")},this)},_doMap:{linear:function(n){return fo(dp(n,this.option.parsedVisual),"rgba")},category:nft,piecewise:function(n,t){var i=awt.call(this,t);return i==null&&(i=fo(dp(n,this.option.parsedVisual),"rgba")),i},fixed:al}},colorHue:dut(function(n,t){return da(n,t)}),colorSaturation:dut(function(n,t){return da(n,null,t)}),colorLightness:dut(function(n,t){return da(n,null,null,t)}),colorAlpha:dut(function(n,t){return gd(n,t)}),opacity:{applyVisual:gut("opacity"),_doMap:lwt([0,1])},liftZ:{applyVisual:gut("liftZ"),_doMap:{linear:al,category:al,piecewise:al,fixed:al}},symbol:{applyVisual:function(n,t,i){var r=this.mapValueToVisual(n),u;if(at(r))i("symbol",r);else if(rbi(r))for(u in r)r.hasOwnProperty(u)&&i(u,r[u])},_doMap:{linear:ubi,category:nft,piecewise:function(n,t){var i=awt.call(this,t);return i==null&&(i=ubi.call(this,n)),i},fixed:al}},symbolSize:{applyVisual:gut("symbolSize"),_doMap:lwt([0,1])}};ebi={linear:function(n){return ri(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var t=this.option.pieceList,i=ht.findPieceIndex(n,t,!0);if(i!=null)return ri(i,[0,t.length-1],[0,1],!0)},category:function(n){var t=this.option.categories?this.option.categoryMap[n]:n;return t==null?kut:t},fixed:di};ht.listVisualTypes=function(){var n=[];return t(ly,function(t,i){n.push(i)}),n};ht.addVisualHandler=function(n,t){ly[n]=t};ht.isValidType=function(n){return ly.hasOwnProperty(n)};ht.eachVisual=function(n,i,r){a(n)?t(n,i,r):i.call(r,n)};ht.mapVisual=function(n,t,r){var f,u=i(n)?[]:a(n)?{}:(f=!0,null);return ht.eachVisual(n,function(n,i){var e=t.call(r,n,i);f?u=e:u[i]=e}),u};ht.retrieveVisuals=function(n){var t={},i;return n&&rk(ly,function(r,u){n.hasOwnProperty(u)&&(t[u]=n[u],i=!0)}),i?t:null};ht.prepareVisualTypes=function(n){if(rbi(n)){var t=[];rk(n,function(n,i){t.push(i)});n=t}else if(i(n))n=n.slice();else return[];return n.sort(function(n,t){return t==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),n};ht.dependsOn=function(n,t){return t==="color"?!!(n&&n.indexOf(t)===0):n===t};ht.findPieceIndex=function(n,t,i){function s(t,i){var r=Math.abs(t-n);r<c&&(c=r,h=i)}for(var f,h,c=Infinity,r=0,o=t.length;r<o;r++)if(f=t[r].value,f!=null){if(f===n||typeof f=="string"&&f===n+"")return r;i&&s(f,r)}for(r=0,o=t.length;r<o;r++){var l=t[r],u=l.interval,e=l.close;if(u){if(u[0]===-Infinity){if(tft(e[1],n,u[1]))return r}else if(u[1]===Infinity){if(tft(e[0],u[0],n))return r}else if(tft(e[0],u[0],n)&&tft(e[1],n,u[1]))return r;i&&s(u[0],r);i&&s(u[1],r)}}if(i)return n===Infinity?t.length-1:n===-Infinity?0:h};var nfu=i,vwt="itemStyle",tfu={seriesType:"treemap",reset:function(n){var t=n.getData().tree,i=t.root,f=n.getModel(vwt),u;i.isRemoved()||(u=r(t.levelModels,function(n){return n?n.get(vwt):null}),obi(i,{},u,f,n.getViewRoot().getAncestors(),n))}};var uk=Math.max,ift=Math.min,hbi=kt,wwt=t,cbi=["itemStyle","borderWidth"],efu=["itemStyle","gapWidth"],ofu=["upperLabel","show"],sfu=["upperLabel","height"],hfu={seriesType:"treemap",reset:function(n,t,i,r){var w=i.getWidth(),k=i.getHeight(),c=n.option,e=li(n.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()}),d=c.size||[],g=f(hbi(e.width,d[0]),w),nt=f(hbi(e.height,d[1]),k),l=r&&r.type,tt=tk(r,["treemapZoomToNode","treemapRootToNode"],n),a=l==="treemapRender"||l==="treemapMove"?r.rootRect:null,u=n.getViewRoot(),y=wwi(u),h,s,it,v,p;l!=="treemapMove"&&(h=l==="treemapZoomToNode"?pfu(n,tt,u,g,nt):a?[a.width,a.height]:[g,nt],s=c.sort,s&&s!=="asc"&&s!=="desc"&&(s="desc"),it={squareRatio:c.squareRatio,sort:s,leafDepth:c.leafDepth},u.hostTree.clearLayouts(),v={x:0,y:0,width:h[0],height:h[1],area:h[0]*h[1]},u.setLayout(v),lbi(u,it,!1,0),v=u.getLayout(),wwt(y,function(n,t){var i=(y[t+1]||u).getValue();n.setLayout(o({dataExtent:[i,i],borderWidth:0,upperHeight:0},v))}));p=n.getData().tree.root;p.setLayout(wfu(e,a,tt),!0);n.setLayoutInfo(e);vbi(p,new b(-e.x,-e.y,w,k),y,u,0)}};yt(tfu);gt(hfu);vy=function(n){this._directed=n||!1;this.nodes=[];this.edges=[];this._nodesMap={};this._edgesMap={};this.data;this.edgeData};tu=vy.prototype;tu.type="graph";tu.isDirected=function(){return this._directed};tu.addNode=function(n,t){var r,i;if(n=n||""+t,r=this._nodesMap,r[ay(n)]){u&&console.error("Graph nodes have duplicate name or id");return}return i=new df(n,t),i.hostGraph=this,this.nodes.push(i),r[ay(n)]=i,i};tu.getNodeByIndex=function(n){var t=this.data.getRawIndex(n);return this.nodes[t]};tu.getNodeById=function(n){return this._nodesMap[ay(n)]};tu.addEdge=function(n,t,i){var f=this._nodesMap,e=this._edgesMap,u,r;if(typeof n=="number"&&(n=this.nodes[n]),typeof t=="number"&&(t=this.nodes[t]),df.isInstance(n)||(n=f[ay(n)]),df.isInstance(t)||(t=f[ay(t)]),n&&t)return(u=n.id+"-"+t.id,e[u])?void 0:(r=new fk(n,t,i),r.hostGraph=this,this._directed&&(n.outEdges.push(r),t.inEdges.push(r)),n.edges.push(r),n!==t&&t.edges.push(r),this.edges.push(r),e[u]=r,r)};tu.getEdgeByIndex=function(n){var t=this.edgeData.getRawIndex(n);return this.edges[t]};tu.getEdge=function(n,t){df.isInstance(n)&&(n=n.id);df.isInstance(t)&&(t=t.id);var i=this._edgesMap;return this._directed?i[n+"-"+t]:i[n+"-"+t]||i[t+"-"+n]};tu.eachNode=function(n,t){for(var r=this.nodes,u=r.length,i=0;i<u;i++)r[i].dataIndex>=0&&n.call(t,r[i],i)};tu.eachEdge=function(n,t){for(var r=this.edges,u=r.length,i=0;i<u;i++)r[i].dataIndex>=0&&r[i].node1.dataIndex>=0&&r[i].node2.dataIndex>=0&&n.call(t,r[i],i)};tu.breadthFirstTraverse=function(n,t,i,r){var c,e,o,h,u,s,f;if(df.isInstance(t)||(t=this._nodesMap[ay(t)]),t){for(c=i==="out"?"outEdges":i==="in"?"inEdges":"edges",u=0;u<this.nodes.length;u++)this.nodes[u].__visited=!1;if(!n.call(r,t,null))for(e=[t];e.length;)for(o=e.shift(),h=o[c],u=0;u<h.length;u++)if(s=h[u],f=s.node1===o?s.node2:s.node1,!f.__visited){if(n.call(r,f,o))return;e.push(f);f.__visited=!0}}};tu.update=function(){for(var f=this.data,i=this.edgeData,u=this.nodes,r=this.edges,n=0,t=u.length;n<t;n++)u[n].dataIndex=-1;for(n=0,t=f.count();n<t;n++)u[f.getRawIndex(n)].dataIndex=n;for(i.filterSelf(function(n){var t=r[i.getRawIndex(n)];return t.node1.dataIndex>=0&&t.node2.dataIndex>=0}),n=0,t=r.length;n<t;n++)r[n].dataIndex=-1;for(n=0,t=i.count();n<t;n++)r[i.getRawIndex(n)].dataIndex=n};tu.clone=function(){for(var t,i=new vy(this._directed),r=this.nodes,u=this.edges,n=0;n<r.length;n++)i.addNode(r[n].id,r[n].dataIndex);for(n=0;n<u.length;n++)t=u[n],i.addEdge(t.node1.id,t.node2.id,t.dataIndex);return i};df.prototype={constructor:df,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(n){if(!(this.dataIndex<0)){var t=this.hostGraph,i=t.data.getItemModel(this.dataIndex);return i.getModel(n)}}};fk.prototype.getModel=function(n){if(!(this.dataIndex<0)){var t=this.hostGraph,i=t.edgeData.getItemModel(this.dataIndex);return i.getModel(n)}};bwt=function(n,t){return{getValue:function(i){var r=this[n][t];return r.get(r.getDimension(i||"value"),this.dataIndex)},setVisual:function(i,r){this.dataIndex>=0&&this[n][t].setItemVisual(this.dataIndex,i,r)},getVisual:function(i,r){return this[n][t].getItemVisual(this.dataIndex,i,r)},setLayout:function(i,r){this.dataIndex>=0&&this[n][t].setItemLayout(this.dataIndex,i,r)},getLayout:function(){return this[n][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[n][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[n][t].getRawIndex(this.dataIndex)}}};st(df,bwt("hostGraph","data"));st(fk,bwt("hostGraph","edgeData"));vy.Node=df;vy.Edge=fk;hn(df);hn(fk);var pbi=function(n,t,i,r,u){for(var h,e,c,l,k,a,o=new vy(r),f=0;f<n.length;f++)o.addNode(kt(n[f].id,n[f].name,f),f);var v=[],y=[],p=0;for(f=0;f<t.length;f++){var s=t[f],w=s.source,b=s.target;o.addEdge(w,b,p)&&(y.push(s),v.push(kt(s.id,w+" > "+b)),p++)}return h=i.get("coordinateSystem"),h==="cartesian2d"||h==="polar"?e=po(n,i):(c=ir.get(h),l=c&&c.type!=="view"?c.dimensions||[]:[],tt(l,"value")<0&&l.concat(["value"]),k=rl(n,{coordDimensions:l}),e=new ai(k,i),e.initData(n)),a=new ai(["value"],i),a.initData(y,v),u&&u(e,a),swi({mainData:e,struct:o,structAttr:"graph",datas:{node:e,edge:a},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o},ek=nrt({type:"series.graph",init:function(n){ek.superApply(this,"init",arguments);this.legendDataProvider=function(){return this._categoriesData};this.fillDataTextStyle(n.edges||n.links);this._updateCategoriesData()},mergeOption:function(n){ek.superApply(this,"mergeOption",arguments);this.fillDataTextStyle(n.edges||n.links);this._updateCategoriesData()},mergeDefaultAndTheme:function(n){ek.superApply(this,"mergeDefaultAndTheme",arguments);lc(n,["edgeLabel"],["show"])},getInitialData:function(n,t){function f(n,r){function s(n){return n=this.parsePath(n),n&&n[0]==="label"?e:n&&n[0]==="emphasis"&&n[1]==="label"?o:this.parentModel}n.wrapMethod("getItemModel",function(n){var r=i._categoriesModels,u=n.getShallow("category"),t=r[u];return t&&(t.parentModel=n.parentModel,n.parentModel=t),n});var u=i.getModel("edgeLabel"),e=new ut({label:u.option},u.parentModel,t),f=i.getModel("emphasis.edgeLabel"),o=new ut({emphasis:{label:f.option}},f.parentModel,t);r.wrapMethod("getItemModel",function(n){return n.customizeGetParent(s),n})}var r=n.edges||n.links||[],u=n.data||n.nodes||[],i=this;if(u&&r)return pbi(u,r,this,!0,f).data},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(n,t,i){if(i==="edge"){var u=this.getData(),f=this.getDataParams(n,i),e=u.graph.getEdgeByIndex(n),o=u.getName(e.node1.dataIndex),s=u.getName(e.node2.dataIndex),r=[];return o!=null&&r.push(o),s!=null&&r.push(s),r=dt(r.join(" > ")),f.value&&(r+=" : "+dt(f.value)),r}return ek.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var t=r(this.option.categories||[],function(n){return n.value!=null?n:o({value:0},n)}),n=new ai(["value"],this);n.initData(t);this._categoriesData=n;this._categoriesModels=n.mapArray(function(t){return n.getItemModel(t,!0)})},setZoom:function(n){this.option.zoom=n},setCenter:function(n){this.option.center=n},isAnimationEnabled:function(){return ek.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle"},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,curveness:0,opacity:.5},emphasis:{label:{show:!0}}}}),wbi=uu.prototype,kwt=elt.prototype;bbi=ce({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(n,t){(dwt(t)?wbi:kwt).buildPath(n,t)},pointAt:function(n){return dwt(this.shape)?wbi.pointAt.call(this,n):kwt.pointAt.call(this,n)},tangentAt:function(n){var t=this.shape,i=dwt(t)?[t.x2-t.x1,t.y2-t.y1]:kwt.tangentAt.call(this,n);return va(i,i)}});rft=["fromSymbol","toSymbol"];ns=ok.prototype;ns.beforeUpdate=kfu;ns._createLine=function(n,i,r){var e=n.hostModel,o=n.getItemLayout(i),u=bfu(o),f;u.shape.percent=0;sr(u,{shape:{percent:1}},e,i);this.add(u);f=new k({name:"label"});this.add(f);t(rft,function(t){var r=dbi(t,n,i);this.add(r);this[kbi(t)]=n.getItemVisual(i,t)},this);this._updateCommonStl(n,i,r)};ns.updateData=function(n,i,r){var f=n.hostModel,e=this.childOfName("line"),o=n.getItemLayout(i),u={shape:{}};gwt(u.shape,o);w(e,u,f,i);t(rft,function(t){var r=n.getItemVisual(i,t),u=kbi(t),f;this[u]!==r&&(this.remove(this.childOfName(t)),f=dbi(t,n,i),this.add(f));this[u]=r},this);this._updateCommonStl(n,i,r)};ns._updateCommonStl=function(n,i,r){var a=n.hostModel,k=this.childOfName("line"),v=r&&r.lineStyle,d=r&&r.hoverLineStyle,c=r&&r.labelModel,u=r&&r.hoverLabelModel,e,l,y,h;(!r||n.hasItemOption)&&(e=n.getItemModel(i),v=e.getModel("lineStyle").getLineStyle(),d=e.getModel("emphasis.lineStyle").getLineStyle(),c=e.getModel("label"),u=e.getModel("emphasis.label"));l=n.getItemVisual(i,"color");y=uc(n.getItemVisual(i,"opacity"),v.opacity,1);k.useStyle(s({strokeNoScale:!0,fill:"none",stroke:l,opacity:y},v));k.hoverStyle=d;t(rft,function(n){var t=this.childOfName(n);t&&(t.setColor(l),t.setStyle({opacity:y}))},this);var p=c.getShallow("show"),w=u.getShallow("show"),f=this.childOfName("label"),g,o;(p||w)&&(g=l||"#000",o=a.getFormattedLabel(i,"normal",n.dataType),o==null&&(h=a.getRawValue(i),o=h==null?n.getName(i):isFinite(h)?ki(h):h));var nt=p?o:null,b=w?vi(a.getFormattedLabel(i,"emphasis",n.dataType),o):null,tt=f.style;(nt!=null||b!=null)&&(ii(f.style,c,{text:nt},{autoColor:g}),f.__textAlign=tt.textAlign,f.__verticalAlign=tt.textVerticalAlign,f.__position=c.get("position")||"middle");f.hoverStyle=b!=null?{text:b,textFill:u.getTextColor(!0),fontStyle:u.getShallow("fontStyle"),fontWeight:u.getShallow("fontWeight"),fontSize:u.getShallow("fontSize"),fontFamily:u.getShallow("fontFamily")}:{text:null};f.ignore=!p&&!w;pt(this)};ns.highlight=function(){this.trigger("emphasis")};ns.downplay=function(){this.trigger("normal")};ns.updateLayout=function(n,t){this.setLinePoints(n.getItemLayout(t))};ns.setLinePoints=function(n){var t=this.childOfName("line");gwt(t.shape,n);t.dirty()};ct(ok,e);yh=uft.prototype;yh.isPersistent=function(){return!0};yh.updateData=function(n){var t=this,u=t.group,i=t._lineData,r;t._lineData=n;i||u.removeAll();r=gbi(n);n.diff(i).add(function(i){dfu(t,n,i,r)}).update(function(u,f){gfu(t,i,n,f,u,r)}).remove(function(n){u.remove(i.getItemGraphicEl(n))}).execute()};yh.updateLayout=function(){var n=this._lineData;n&&n.eachItemGraphicEl(function(t,i){t.updateLayout(n,i)},this)};yh.incrementalPrepareUpdate=function(n){this._seriesScope=gbi(n);this._lineData=null;this.group.removeAll()};yh.incrementalUpdate=function(n,t){function f(n){n.isGroup||(n.incremental=n.useHoverLayer=!0)}for(var u,r,i=n.start;i<n.end;i++)u=t.getItemLayout(i),nbt(u)&&(r=new this._ctor(t,i,this._seriesScope),r.traverse(f),this.group.add(r),t.setItemGraphicEl(i,r))};yh.remove=function(){this._clearIncremental();this._incremental=null;this.group.removeAll()};yh._clearIncremental=function(){var n=this._incremental;n&&n.clearDisplaybles()};var tbt=[],ibt=[],rbt=[],yy=er,ubt=to,tki=Math.abs;var fbt=function(n,t){function o(n){var t=n.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),t}var r=[],e=pct,i=[[],[],[]],u=[[],[]],f=[];t/=2;n.eachEdge(function(n){var s=n.getLayout(),a=n.getVisual("fromSymbol"),v=n.getVisual("toSymbol"),h,l,c;s.__original||(s.__original=[sf(s[0]),sf(s[1])],s[2]&&s.__original.push(sf(s[2])));h=s.__original;s[2]!=null?(gi(i[0],h[0]),gi(i[1],h[2]),gi(i[2],h[1]),a&&a!=="none"&&(c=o(n.node1),l=iki(i,h[0],c*t),e(i[0][0],i[1][0],i[2][0],l,r),i[0][0]=r[3],i[1][0]=r[4],e(i[0][1],i[1][1],i[2][1],l,r),i[0][1]=r[3],i[1][1]=r[4]),v&&v!=="none"&&(c=o(n.node2),l=iki(i,h[1],c*t),e(i[0][0],i[1][0],i[2][0],l,r),i[1][0]=r[1],i[2][0]=r[2],e(i[0][1],i[1][1],i[2][1],l,r),i[1][1]=r[1],i[2][1]=r[2]),gi(s[0],i[0]),gi(s[1],i[2]),gi(s[2],i[1])):(gi(u[0],h[0]),gi(u[1],h[1]),no(f,u[1],u[0]),va(f,f),a&&a!=="none"&&(c=o(n.node1),ap(u[0],u[0],f,c*t)),v&&v!=="none"&&(c=o(n.node2),ap(u[1],u[1],f,-c*t)),gi(s[0],u[0]),gi(s[1],u[1]))})},vl=["itemStyle","opacity"],fft=["lineStyle","opacity"];gr({type:"graph",init:function(n,t){var r=new ry,u=new uft,i=this.group;this._controller=new cy(t.getZr());this._controllerHost={target:i};i.add(r.group);i.add(u.group);this._symbolDraw=r;this._lineDraw=u;this._firstRender=!0},render:function(n,t,i){var f=n.coordinateSystem,e,r,h,u,o;this._model=n;this._nodeScaleRatio=n.get("nodeScaleRatio");var l=this._symbolDraw,a=this._lineDraw,s=this.group;f.type==="view"&&(e={position:f.position,scale:f.scale},this._firstRender?s.attr(e):w(s,e,n));fbt(n.getGraph(),this._getNodeGlobalScale(n));r=n.getData();l.updateData(r);h=n.getEdgeData();a.updateData(h);this._updateNodeAndLinkScale();this._updateController(n,t,i);clearTimeout(this._layoutTimeout);u=n.forceLayout;o=n.get("force.layoutAnimation");u&&this._startForceLayoutIteration(u,o);r.eachItemGraphicEl(function(t,f){var s=r.getItemModel(f),e;if(t.off("drag").off("dragend"),e=s.get("draggable"),e)t.on("drag",function(){u&&(u.warmUp(),this._layouting||this._startForceLayoutIteration(u,o),u.setFixed(f),r.setItemLayout(f,t.position))},this).on("dragend",function(){u&&u.setUnfixed(f)},this);if(t.setDraggable(e&&u),t.off("mouseover",t.__focusNodeAdjacency),t.off("mouseout",t.__unfocusNodeAdjacency),s.get("focusNodeAdjacency")){t.on("mouseover",t.__focusNodeAdjacency=function(){i.dispatchAction({type:"focusNodeAdjacency",seriesId:n.id,dataIndex:t.dataIndex})});t.on("mouseout",t.__unfocusNodeAdjacency=function(){i.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n.id})})}},this);r.graph.eachEdge(function(t){var r=t.getGraphicEl();if(r.off("mouseover",r.__focusNodeAdjacency),r.off("mouseout",r.__unfocusNodeAdjacency),t.getModel().get("focusNodeAdjacency")){r.on("mouseover",r.__focusNodeAdjacency=function(){i.dispatchAction({type:"focusNodeAdjacency",seriesId:n.id,edgeDataIndex:t.dataIndex})});r.on("mouseout",r.__unfocusNodeAdjacency=function(){i.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n.id})})}});var v=n.get("layout")==="circular"&&n.get("circular.rotateLabel"),c=r.getLayout("cx"),y=r.getLayout("cy");r.eachItemGraphicEl(function(n,t){var u=n.getSymbolPath(),f,i,e,o;v?(f=r.getItemLayout(t),i=Math.atan2(f[1]-y,f[0]-c),i<0&&(i=Math.PI*2+i),e=f[0]<c,e&&(i=i-Math.PI),o=e?"left":"right",u.setStyle({textRotation:-i,textPosition:o,textOrigin:"center"}),u.hoverStyle&&(u.hoverStyle.textPosition=o)):u.setStyle({textRotation:0})});this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose();this._controllerHost={}},focusNodeAdjacency:function(n,i,r,u){var s=this._model.getData(),e=s.graph,h=u.dataIndex,c=u.edgeDataIndex,o=e.getNodeByIndex(h),f=e.getEdgeByIndex(c);(o||f)&&(e.eachNode(function(n){eft(n,vl,.1)}),e.eachEdge(function(n){eft(n,fft,.1)}),o&&(yl(o,vl),t(o.edges,function(n){n.dataIndex<0||(yl(n,fft),yl(n.node1,vl),yl(n.node2,vl))})),f&&(yl(f,fft),yl(f.node1,vl),yl(f.node2,vl)))},unfocusNodeAdjacency:function(){var n=this._model.getData().graph;n.eachNode(function(n){eft(n,vl)});n.eachEdge(function(n){eft(n,fft)})},_startForceLayoutIteration:function(n,t){var i=this;(function r(){n.step(function(n){i.updateLayout(i._model);(i._layouting=!n)&&(t?i._layoutTimeout=setTimeout(r,16):r())})})()},_updateController:function(n,t,i){var r=this._controller,u=this._controllerHost,f=this.group;if(r.setPointerChecker(function(t,r,u){var e=f.getBoundingRect();return e.applyTransform(f.transform),e.contain(r,u)&&!aut(t,i,n)}),n.coordinateSystem.type!=="view"){r.disable();return}r.enable(n.get("roam"));u.zoomLimit=n.get("scaleLimit");u.zoom=n.coordinateSystem.getZoom();r.off("pan").off("zoom").on("pan",function(t){kpt(u,t.dx,t.dy);i.dispatchAction({seriesId:n.id,type:"graphRoam",dx:t.dx,dy:t.dy})}).on("zoom",function(t){dpt(u,t.scale,t.originX,t.originY);i.dispatchAction({seriesId:n.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY});this._updateNodeAndLinkScale();fbt(n.getGraph(),this._getNodeGlobalScale(n));this._lineDraw.updateLayout()},this)},_updateNodeAndLinkScale:function(){var n=this._model,i=n.getData(),t=this._getNodeGlobalScale(n),r=[t,t];i.eachItemGraphicEl(function(n){n.attr("scale",r)})},_getNodeGlobalScale:function(n){var t=n.coordinateSystem;if(t.type!=="view")return 1;var r=this._nodeScaleRatio,i=t.scale,u=i&&i[0]||1,f=t.getZoom(),e=(f-1)*r+1;return e/u},updateLayout:function(n){fbt(n.getGraph(),this._getNodeGlobalScale(n));this._symbolDraw.updateLayout();this._lineDraw.updateLayout()},remove:function(){this._symbolDraw&&this._symbolDraw.remove();this._lineDraw&&this._lineDraw.remove()}});rt({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){});rt({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){});uki={type:"graphRoam",event:"graphRoam",update:"none"};rt(uki,function(n,t){t.eachComponent({mainType:"series",query:n},function(t){var r=t.coordinateSystem,i=gpt(r,n);t.setCenter&&t.setCenter(i.center);t.setZoom&&t.setZoom(i.zoom)})});fki=function(n){var t=n.findComponents({mainType:"legend"});t&&t.length&&n.eachSeriesByType("graph",function(n){var i=n.getCategoriesData(),u=n.getGraph(),r=u.data,f=i.mapArray(i.getName);r.filterSelf(function(n){var e=r.getItemModel(n),i=e.getShallow("category"),u;if(i!=null)for(typeof i=="number"&&(i=f[i]),u=0;u<t.length;u++)if(!t[u].isSelected(i))return!1;return!0})},this)};eki=function(n){var t={};n.eachSeriesByType("graph",function(n){var i=n.getCategoriesData(),r=n.getData(),u={};i.each(function(r){var f=i.getName(r),e,o;u["ec-"+f]=r;e=i.getItemModel(r);o=e.get("itemStyle.color")||n.getColorFromPalette(f,t);i.setItemVisual(r,"color",o)});i.count()&&r.each(function(n){var f=r.getItemModel(n),t=f.getShallow("category");t!=null&&(typeof t=="string"&&(t=u["ec-"+t]),r.getItemVisual(n,"color",!0)||r.setItemVisual(n,"color",i.getItemVisual(t,"color")))})})};oki=function(n){n.eachSeriesByType("graph",function(n){var e=n.getGraph(),t=n.getEdgeData(),i=oft(n.get("edgeSymbol")),r=oft(n.get("edgeSymbolSize")),u="lineStyle.color".split("."),f="lineStyle.opacity".split(".");t.setVisual("fromSymbol",i&&i[0]);t.setVisual("toSymbol",i&&i[1]);t.setVisual("fromSymbolSize",r&&r[0]);t.setVisual("toSymbolSize",r&&r[1]);t.setVisual("color",n.get(u));t.setVisual("opacity",n.get(f));t.each(function(n){var r=t.getItemModel(n),i=e.getEdgeByIndex(n),o=oft(r.getShallow("symbol",!0)),s=oft(r.getShallow("symbolSize",!0)),h=r.get(u),c=r.get(f);switch(h){case"source":h=i.node1.getVisual("color");break;case"target":h=i.node2.getVisual("color")}o[0]&&i.setVisual("fromSymbol",o[0]);o[1]&&i.setVisual("toSymbol",o[1]);s[0]&&i.setVisual("fromSymbolSize",s[0]);s[1]&&i.setVisual("toSymbolSize",s[1]);i.setVisual("color",h);i.setVisual("opacity",c)})})};cki=function(n){n.eachSeriesByType("graph",function(n){var c=n.get("layout"),f=n.coordinateSystem,i,u,r,o,s,e,h;if(f&&f.type!=="view"){for(i=n.getData(),u=[],t(f.dimensions,function(n){u=u.concat(i.mapDimension(n,!0))}),r=0;r<i.count();r++){for(o=[],s=!1,e=0;e<u.length;e++)h=i.get(u[e],r),isNaN(h)||(s=!0),o.push(h);s?i.setItemLayout(r,f.dataToPoint(o)):i.setItemLayout(r,[NaN,NaN])}hki(i.graph)}else c&&c!=="none"||ski(n)})};aki=function(n){n.eachSeriesByType("graph",function(n){n.get("layout")==="circular"&&lki(n)})};pl=ap;vki=function(n){n.eachSeriesByType("graph",function(n){var h=n.coordinateSystem;if(!h||h.type==="view")if(n.get("layout")==="force"){var c=n.preservedPoints||{},f=n.getGraph(),r=f.data,a=f.edgeData,o=n.getModel("force"),l=o.get("initLayout");n.preservedPoints?r.each(function(n){var t=r.getId(n);r.setItemLayout(n,c[t]||[NaN,NaN])}):l&&l!=="none"?l==="circular"&&lki(n):ski(n);var v=r.getDataExtent("value"),y=a.getDataExtent("value"),u=o.get("repulsion"),t=o.get("edgeLength");i(u)||(u=[u,u]);i(t)||(t=[t,t]);t=[t[1],t[0]];var e=r.mapArray("value",function(n,t){var i=r.getItemLayout(t),f=ri(n,v,u);return isNaN(f)&&(f=(u[0]+u[1])/2),{w:f,rep:f,fixed:r.getItemModel(t).get("fixed"),p:!i||isNaN(i[0])||isNaN(i[1])?null:i}}),p=a.mapArray("value",function(n,i){var r=f.getEdgeByIndex(i),u=ri(n,y,t);return isNaN(u)&&(u=(t[0]+t[1])/2),{n1:e[r.node1.dataIndex],n2:e[r.node2.dataIndex],d:u,curveness:r.getModel().get("lineStyle.curveness")||0}}),h=n.coordinateSystem,w=h.getBoundingRect(),s=neu(e,p,{rect:w,gravity:o.get("gravity")}),b=s.step;s.step=function(n){for(var t=0,i=e.length;t<i;t++)e[t].fixed&&gi(e[t].p,f.getNodeByIndex(t).getLayout());b(function(t,i,u){for(var e=0,a=t.length;e<a;e++)t[e].fixed||f.getNodeByIndex(e).setLayout(t[e].p),c[r.getId(e)]=t[e].p;for(e=0,a=i.length;e<a;e++){var s=i[e],v=f.getEdgeByIndex(e),h=s.n1.p,l=s.n2.p,o=v.getLayout();o=o?o.slice():[];o[0]=o[0]||[];o[1]=o[1]||[];gi(o[0],h);gi(o[1],l);+s.curveness&&(o[2]=[(h[0]+l[0])/2-(h[1]-l[1])*s.curveness,(h[1]+l[1])/2-(l[0]-h[0])*s.curveness]);v.setLayout(o)}n&&n(u)})};n.forceLayout=s;n.preservedPoints=c;s.step()}else n.forceLayout=null})};yki=function(n,t){var i=[];return n.eachSeriesByType("graph",function(n){var s=n.get("coordinateSystem"),o,u;if(!s||s==="view"){var h=n.getData(),c=h.mapArray(function(n){var t=h.getItemModel(n);return[+t.get("x"),+t.get("y")]}),r=[],f=[];kct(c,r,f);f[0]-r[0]==0&&(f[0]+=1,r[0]-=1);f[1]-r[1]==0&&(f[1]+=1,r[1]-=1);o=(f[0]-r[0])/(f[1]-r[1]);u=teu(n,t,o);isNaN(o)&&(r=[u.x,u.y],f=[u.x+u.width,u.y+u.height]);var l=f[0]-r[0],a=f[1]-r[1],v=u.width,y=u.height,e=n.coordinateSystem=new lh;e.zoomLimit=n.get("scaleLimit");e.setBoundingRect(r[0],r[1],l,a);e.setViewRect(u.x,u.y,v,y);e.setCenter(n.get("center"));e.setZoom(n.get("zoom"));i.push(e)}}),i};su(fki);yt(ol("graph","circle",null));yt(eki);yt(oki);gt(cki);gt(aki);gt(vki);vvt("graphView",{create:yki});ieu=wt.extend({type:"series.gauge",getInitialData:function(n){var t=n.data||[];return i(t)||(t=[t]),n.data=t,oy(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});pki=nt.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(n,t){var u=Math.cos,f=Math.sin,e=t.r,i=t.width,r=t.angle,o=t.x-u(r)*i*(i>=e/3?1:2),s=t.y-f(r)*i*(i>=e/3?1:2);r=t.angle-Math.PI/2;n.moveTo(o,s);n.lineTo(t.x+u(r)*i,t.y+f(r)*i);n.lineTo(t.x+u(t.angle)*e,t.y+f(t.angle)*e);n.lineTo(t.x-u(r)*i,t.y-f(r)*i);n.lineTo(o,s);return}});var ueu=Math.PI*2,yku=yi.extend({type:"gauge",render:function(n,t,i){this.group.removeAll();var r=n.get("axisLine.lineStyle.color"),u=reu(n,i);this._renderMain(n,t,i,r,u)},dispose:function(){},_renderMain:function(n,t,i,r,u){for(var o,v,y=this.group,p=n.getModel("axisLine"),l=p.getModel("lineStyle"),s=n.get("clockwise"),f=-n.get("startAngle")/180*Math.PI,e=-n.get("endAngle")/180*Math.PI,w=(e-f)%ueu,a=f,b=l.get("width"),h=0;h<r.length;h++){var k=Math.min(Math.max(r[h][0],0),1),e=f+w*k,c=new so({shape:{startAngle:a,endAngle:e,cx:u.cx,cy:u.cy,clockwise:s,r0:u.r-b,r:u.r},silent:!0});c.setStyle({fill:r[h][1]});c.setStyle(l.getLineStyle(["color","borderWidth","borderColor"]));y.add(c);a=e}o=function(n){if(n<=0)return r[0][1];for(var t=0;t<r.length;t++)if(r[t][0]>=n&&(t===0?0:r[t-1][0])<n)return r[t][1];return r[t-1][1]};s||(v=f,f=e,e=v);this._renderTicks(n,t,i,o,u,f,e,s);this._renderPointer(n,t,i,o,u,f,e,s);this._renderTitle(n,t,i,o,u);this._renderDetail(n,t,i,o,u)},_renderTicks:function(n,t,i,r,u,e,o){for(var h,c,rt,g,nt=this.group,y=u.cx,p=u.cy,s=u.r,ut=+n.get("min"),at=+n.get("max"),tt=n.getModel("splitLine"),w=n.getModel("axisTick"),b=n.getModel("axisLabel"),l=n.get("splitNumber"),it=w.get("splitNumber"),d=f(tt.get("length"),s),ft=f(w.get("length"),s),a=e,et=(o-e)/l,ot=et/it,st=tt.getModel("lineStyle").getLineStyle(),ht=w.getModel("lineStyle").getLineStyle(),v=0;v<=l;v++){if(h=Math.cos(a),c=Math.sin(a),tt.get("show")&&(rt=new uu({shape:{x1:h*s+y,y1:c*s+p,x2:h*(s-d)+y,y2:c*(s-d)+p},style:st,silent:!0}),st.stroke==="auto"&&rt.setStyle({stroke:r(v/l)}),nt.add(rt)),b.get("show")){var vt=wki(ki(v/l*(at-ut)+ut),b.get("formatter")),ct=b.get("distance"),yt=r(v/l);nt.add(new k({style:ii({},b,{text:vt,x:h*(s-d-ct)+y,y:c*(s-d-ct)+p,textVerticalAlign:c<-.4?"top":c>.4?"bottom":"middle",textAlign:h<-.4?"left":h>.4?"right":"center"},{autoColor:yt}),silent:!0}))}if(w.get("show")&&v!==l){for(g=0;g<=it;g++){var h=Math.cos(a),c=Math.sin(a),lt=new uu({shape:{x1:h*s+y,y1:c*s+p,x2:h*(s-ft)+y,y2:c*(s-ft)+p},silent:!0,style:ht});ht.stroke==="auto"&&lt.setStyle({stroke:r((v+g/it)/l)});nt.add(lt);a+=ot}a-=ot}else a+=et}},_renderPointer:function(n,t,i,r,u,e,o){var c=this.group,h=this._data;if(!n.get("pointer.show")){h&&h.eachItemGraphicEl(function(n){c.remove(n)});return}var l=[+n.get("min"),+n.get("max")],v=[e,o],s=n.getData(),a=s.mapDimension("value");s.diff(h).add(function(t){var i=new pki({shape:{angle:e}});sr(i,{shape:{angle:ri(s.get(a,t),l,v,!0)}},n);c.add(i);s.setItemGraphicEl(t,i)}).update(function(t,i){var r=h.getItemGraphicEl(i);w(r,{shape:{angle:ri(s.get(a,t),l,v,!0)}},n);c.add(r);s.setItemGraphicEl(t,r)}).remove(function(n){var t=h.getItemGraphicEl(n);c.remove(t)}).execute();s.eachItemGraphicEl(function(n,t){var i=s.getItemModel(t),e=i.getModel("pointer");n.setShape({x:u.cx,y:u.cy,width:f(e.get("width"),u.r),r:f(e.get("length"),u.r)});n.useStyle(i.getModel("itemStyle").getItemStyle());n.style.fill==="auto"&&n.setStyle("fill",r(ri(s.get(a,t),l,[0,1],!0)));pt(n,i.getModel("emphasis.itemStyle").getItemStyle())});this._data=s},_renderTitle:function(n,t,i,r,u){var o=n.getData(),h=o.mapDimension("value"),e=n.getModel("title");if(e.get("show")){var s=e.get("offsetCenter"),c=u.cx+f(s[0],u.r),l=u.cy+f(s[1],u.r),a=+n.get("min"),v=+n.get("max"),y=n.getData().get(h,0),p=r(ri(y,[a,v],[0,1],!0));this.group.add(new k({silent:!0,style:ii({},e,{x:c,y:l,text:o.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:p,forceRich:!0})}))}},_renderDetail:function(n,t,i,r,u){var e=n.getModel("detail"),a=+n.get("min"),v=+n.get("max");if(e.get("show")){var o=e.get("offsetCenter"),y=u.cx+f(o[0],u.r),p=u.cy+f(o[1],u.r),s=f(e.get("width"),u.r),h=f(e.get("height"),u.r),c=n.getData(),l=c.get(c.mapDimension("value"),0),w=r(ri(l,[a,v],[0,1],!0));this.group.add(new k({silent:!0,style:ii({},e,{x:y,y:p,text:wki(l,e.get("formatter")),textWidth:isNaN(s)?null:s,textHeight:isNaN(h)?null:h,textAlign:"center",textVerticalAlign:"middle"},{autoColor:w,forceRich:!0})}))}}}),bki=nrt({type:"series.funnel",init:function(n){bki.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()};this._defaultLabelLine(n)},getInitialData:function(){return oy(this,["value"])},_defaultLabelLine:function(n){lc(n,"labelLine",["show"]);var t=n.labelLine,i=n.emphasis.labelLine;t.show=t.show&&n.label.show;i.show=i.show&&n.emphasis.label.show},getDataParams:function(n){var t=this.getData(),i=bki.superCall(this,"getDataParams",n),r=t.mapDimension("value"),u=t.getSum(r);return i.percent=u?+(t.get(r,n)/u*100).toFixed(2):0,i.$vars.push("percent"),i},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}});obt=ebt.prototype;kki=["itemStyle","opacity"];obt.updateData=function(n,t,i){var r=this.childAt(0),e=n.hostModel,c=n.getItemModel(t),o=n.getItemLayout(t),u=n.getItemModel(t).get(kki),f,h;u=u==null?1:u;r.useStyle({});i?(r.setShape({points:o.points}),r.setStyle({opacity:0}),sr(r,{style:{opacity:u}},e,t)):w(r,{style:{opacity:u},shape:{points:o.points}},e,t);f=c.getModel("itemStyle");h=n.getItemVisual(t,"color");r.setStyle(s({lineJoin:"round",fill:h},f.getItemStyle(["opacity"])));r.hoverStyle=f.getModel("emphasis").getItemStyle();this._updateLabel(n,t);pt(this)};obt._updateLabel=function(n,t){var r=this.childAt(1),u=this.childAt(2),e=n.hostModel,f=n.getItemModel(t),a=n.getItemLayout(t),i=a.label,o=n.getItemVisual(t,"color");w(r,{shape:{points:i.linePoints||i.linePoints}},e,t);w(u,{style:{x:i.x,y:i.y}},e,t);u.attr({rotation:i.rotation,origin:[i.x,i.y],z2:10});var s=f.getModel("label"),h=f.getModel("emphasis.label"),c=f.getModel("labelLine"),l=f.getModel("emphasis.labelLine"),o=n.getItemVisual(t,"color");du(u.style,u.hoverStyle={},s,h,{labelFetcher:n.hostModel,labelDataIndex:t,defaultText:n.getName(t),autoColor:o,useInsideStyle:!!i.inside},{textAlign:i.textAlign,textVerticalAlign:i.verticalAlign});u.ignore=u.normalIgnore=!s.get("show");u.hoverIgnore=!h.get("show");r.ignore=r.normalIgnore=!c.get("show");r.hoverIgnore=!l.get("show");r.setStyle({stroke:o});r.setStyle(c.getModel("lineStyle").getLineStyle());r.hoverStyle=l.getModel("lineStyle").getLineStyle()};ct(ebt,e);feu=yi.extend({type:"funnel",render:function(n){var t=n.getData(),i=this._data,r=this.group;t.diff(i).add(function(n){var i=new ebt(t,n);t.setItemGraphicEl(n,i);r.add(i)}).update(function(n,u){var f=i.getItemGraphicEl(u);f.updateData(t,n);r.add(f);t.setItemGraphicEl(n,f)}).remove(function(n){var t=i.getItemGraphicEl(n);r.remove(t)}).execute();this._data=t},remove:function(){this.group.removeAll();this._data=null},dispose:function(){}});dki=function(n,t){n.eachSeriesByType("funnel",function(n){var r=n.getData(),p=r.mapDimension("value"),c=n.get("sort"),i=eeu(n,t),e=oeu(r,c),g=[f(n.get("minSize"),i.width),f(n.get("maxSize"),i.width)],w=r.getDataExtent(p),l=n.get("min"),a=n.get("max"),o,k,d;l==null&&(l=Math.min(w[0],0));a==null&&(a=w[1]);var nt=n.get("funnelAlign"),s=n.get("gap"),v=(i.height-s*(r.count()-1))/r.count(),h=i.y,b=function(n,t){var e=r.get(p,n)||0,f=ri(e,[l,a],g,!0),u;switch(nt){case"left":u=i.x;break;case"center":u=i.x+(i.width-f)/2;break;case"right":u=i.x+i.width-f}return[[u,t],[u+f,t]]};for(c==="ascending"&&(v=-v,s=-s,h+=i.height,e=e.reverse()),o=0;o<e.length;o++){var y=e[o],tt=e[o+1],it=r.getItemModel(y),u=it.get("itemStyle.height");u==null?u=v:(u=f(u,i.height),c==="ascending"&&(u=-u));k=b(y,h);d=b(tt,h+u);h+=u+s;r.setItemLayout(y,{points:k.concat(d.slice().reverse())})}seu(r)})};yt(rut("funnel"));gt(dki);su(wb("funnel"));gki=function(n){heu(n);ceu(n)};sk=function(n,t,i,r,u){fi.call(this,n,t,i);this.type=r||"value";this.axisIndex=u};sk.prototype={constructor:sk,model:null,isHorizontal:function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"}};ct(sk,fi);wl=function(n,t,i,r,u,f){var c,o,h,s,e;return t[0]=sft(t[0],i),t[1]=sft(t[1],i),n=n||0,c=i[1]-i[0],u!=null&&(u=sft(u,[0,c])),f!=null&&(f=Math.max(f,u!=null?u:0)),r==="all"&&(u=f=Math.abs(t[1]-t[0]),r=0),o=sbt(t,r),t[r]+=n,h=u||0,s=i.slice(),o.sign<0?s[0]+=h:s[1]-=h,t[r]=sft(t[r],s),e=sbt(t,r),u!=null&&(e.sign!==o.sign||e.span<u)&&(t[1-r]=t[r]+o.sign*u),e=sbt(t,r),f!=null&&e.span>f&&(t[1-r]=t[r]+e.sign*f),t};var hbt=t,ndi=Math.min,tdi=Math.max,idi=Math.floor,leu=Math.ceil,rdi=ki,aeu=Math.PI;cbt.prototype={type:"parallel",constructor:cbt,_init:function(n,t){var i=n.dimensions,r=n.parallelAxisIndex;hbt(i,function(n,i){var e=r[i],u=t.getComponent("parallelAxis",e),f=this._axesMap.set(n,new sk(n,ty(u),[0,0],u.get("type"),e)),o=f.type==="category";f.onBand=o&&u.get("boundaryGap");f.inverse=u.get("inverse");u.axis=f;f.model=u;f.coordinateSystem=u.coordinateSystem=this},this)},update:function(n){this._updateAxesFromSeries(this._model,n)},containPoint:function(n){var t=this._makeLayoutInfo(),i=t.axisBase,r=t.layoutBase,u=t.pixelDimIndex,f=n[1-u],e=n[u];return f>=i&&f<=i+t.axisLength&&e>=r&&e<=r+t.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(n,t){t.eachSeries(function(i){if(n.contains(i,t)){var r=i.getData();hbt(this.dimensions,function(n){var t=this._axesMap.get(n);t.scale.unionExtentFromData(r,r.mapDimension(n));sh(t.scale,t.model)},this)}},this)},resize:function(n,t){this._rect=li(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()});this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var i=this._model,o=this._rect,l=["x","y"],a=["width","height"],v=i.get("layout"),f=v==="horizontal"?0:1,s=o[a[f]],c=[0,s],r=this.dimensions.length,t=hft(i.get("axisExpandWidth"),c),h=hft(i.get("axisExpandCount")||0,[0,r]),b=i.get("axisExpandable")&&r>3&&r>h&&h>1&&t>0&&s>0,n=i.get("axisExpandWindow"),u,y,e,p,w;return n?(u=hft(n[1]-n[0],c),n[1]=n[0]+u):(u=hft(t*(h-1),c),y=i.get("axisExpandCenter")||idi(r/2),n=[t*y-u/2],n[1]=n[0]+u),e=(s-u)/(r-h),e<3&&(e=0),p=[idi(rdi(n[0]/t,1))+1,leu(rdi(n[1]/t,1))-1],w=e/t*n[0],{layout:v,pixelDimIndex:f,layoutBase:o[l[f]],layoutLength:s,axisBase:o[l[1-f]],axisLength:o[a[1-f]],axisExpandable:b,axisExpandWidth:t,axisCollapseWidth:e,axisExpandWindow:n,axisCount:r,winInnerIndices:p,axisExpandWindow0Pos:w}},_layoutAxes:function(){var i=this._rect,r=this._axesMap,u=this.dimensions,n=this._makeLayoutInfo(),t=n.layout;r.each(function(t){var i=[0,n.axisLength],r=t.inverse?1:0;t.setExtent(i[r],i[1-r])});hbt(u,function(r,u){var f=(n.axisExpandable?yeu:veu)(u,n),o={horizontal:{x:f.position,y:n.axisLength},vertical:{x:0,y:f.position}},c={horizontal:aeu/2,vertical:0},s=[o[t].x+i.x,o[t].y+i.y],h=c[t],e=cr();uo(e,e,h);yu(e,e,s);this._axesLayout[r]={position:s,rotation:h,transform:e,axisNameAvailableWidth:f.axisNameAvailableWidth,axisLabelShow:f.axisLabelShow,nameTruncateMaxWidth:f.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(n){return this._axesMap.get(n)},dataToPoint:function(n,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(n),t)},eachActiveState:function(n,i,r,u){var l,f,o,a,e,v,y;r==null&&(r=0);u==null&&(u=n.count());var p=this._axesMap,s=this.dimensions,h=[],c=[];for(t(s,function(t){h.push(n.mapDimension(t));c.push(p.get(t).model)}),l=this.hasAxisBrushed(),f=r;f<u;f++){if(l){for(o="active",a=n.getValues(h,f),e=0,v=s.length;e<v;e++)if(y=c[e].getActiveState(a[e]),y==="inactive"){o="inactive";break}}else o="normal";i(o,f)}},hasAxisBrushed:function(){for(var t=this.dimensions,r=this._axesMap,i=!1,n=0,u=t.length;n<u;n++)r.get(t[n]).model.getActiveState()!=="normal"&&(i=!0);return i},axisCoordToPoint:function(n,t){var i=this._axesLayout[t];return ve([n,0],i.transform)},getAxisLayout:function(n){return c(this._axesLayout[n])},getSlidedAxisExpandWindow:function(n){var r=this._makeLayoutInfo(),a=r.pixelDimIndex,t=r.axisExpandWindow.slice(),i=t[1]-t[0],h=[0,r.axisExpandWidth*(r.axisCount-1)],l;if(!this.containPoint(n))return{behavior:"none",axisExpandWindow:t};var f=n[a]-r.layoutBase-r.axisExpandWindow0Pos,u,o="slide",s=r.axisCollapseWidth,e=this._model.get("axisExpandSlideTriggerArea"),c=e[0]!=null;return s?(c&&s&&f<i*e[0]?(o="jump",u=f-i*e[2]):c&&s&&f>i*(1-e[0])?(o="jump",u=f-i*(1-e[2])):(u=f-i*e[1])>=0&&(u=f-i*(1-e[1]))<=0&&(u=0),u*=r.axisExpandWidth/s,u?wl(u,t,h,"all"):o="none"):(i=t[1]-t[0],l=h[1]*f/i,t=[tdi(0,l-i/2)],t[1]=ndi(h[1],t[0]+i),t[0]=t[1]-i),{axisExpandWindow:t,behavior:o}}};ir.register("parallel",{create:peu});lbt=it.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return uv([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(n){var i=this.activeIntervals=c(n),t;if(i)for(t=i.length-1;t>=0;t--)pc(i[t])},getActiveState:function(n){var t=this.activeIntervals,r,i,u;if(!t.length)return"normal";if(n==null||isNaN(n))return"inactive";if(t.length===1){if(r=t[0],r[0]<=n&&n<=r[1])return"active"}else for(i=0,u=t.length;i<u;i++)if(t[i][0]<=n&&n<=t[i][1])return"active";return"inactive"}});udi={type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};v(lbt.prototype,ul);uy("parallel",lbt,weu,udi);it.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){it.prototype.init.apply(this,arguments);this.mergeOption({})},mergeOption:function(n){var t=this.option;n&&v(t,n,!0);this._initDimensions()},contains:function(n,t){var i=n.get("parallelIndex");return i!=null&&t.getComponent("parallel",i)===this},setAxisExpand:function(n){t(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(t){n.hasOwnProperty(t)&&(this.option[t]=n[t])},this)},_initDimensions:function(){var n=this.dimensions=[],i=this.parallelAxisIndex=[],r=hi(this.dependentModels.parallelAxis,function(n){return(n.get("parallelIndex")||0)===this.componentIndex},this);t(r,function(t){n.push("dim"+t.get("dim"));i.push(t.componentIndex)})}});fdi={type:"axisAreaSelect",event:"axisAreaSelected"};rt(fdi,function(n,t){t.eachComponent({mainType:"parallelAxis",query:n},function(t){t.axis.model.setActiveIntervals(n.intervals)})});rt("parallelAxisExpand",function(n,t){t.eachComponent({mainType:"parallel",query:n},function(t){t.setAxisExpand(n)})});var ph=y,be=t,beu=r,hk=Math.min,py=Math.max,keu=Math.pow,deu=1e4,geu=6,nou=6,edi="globalPan",tou={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},iou={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},odi={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},rou=0;wy.prototype={constructor:wy,enableBrush:function(n){return u&&g(this._mounted),this._brushType&&fou(this),n.brushType&&uou(this,n),this},setPanels:function(n){if(n&&n.length){var i=this._panels={};t(n,function(n){i[n.panelId]=c(n)})}else this._panels=null;return this},mount:function(n){n=n||{};u&&(this._mounted=!0);this._enableGlobalPan=n.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({position:n.position||[0,0],rotation:n.rotation||0,scale:n.scale||[1,1]}),this._transform=t.getLocalTransform(),this},eachCover:function(n,t){be(this._covers,n,t)},updateCovers:function(n){function o(n,t){return(n.id!=null?n.id:h+t)+"-"+n.brushType}function l(n,t){return o(n.__brushOption,t)}function s(r,u){var o=n[r],s;u!=null&&t[u]===e?f[r]=t[u]:(s=f[r]=u!=null?(t[u].__brushOption=o,t[u]):hdi(i,sdi(i,o)),abt(i,s))}function a(n){t[n]!==e&&i.group.remove(t[n])}u&&g(this._mounted);n=r(n,function(n){return v(c(odi),n,!0)});var h='\0-brush-index-',t=this._covers,f=this._covers=[],i=this,e=this._creatingCover;return new vo(t,n,l,o).add(s).update(s).remove(a).execute(),this},unmount:function(){if(!u||this._mounted)return this.enableBrush(!1),pbt(this),this._zr.remove(this.group),u&&(this._mounted=!1),this},dispose:function(){this.unmount();this.off()}};st(wy,ci);ngi={mousedown:function(n){var t,i;this._dragging?tgi.call(this,n):n.target&&n.target.draggable||(gbt(n),t=this.group.transformCoordToLocal(n.offsetX,n.offsetY),this._creatingCover=null,i=this._creatingPanel=ybt(this,n,t),i&&(this._dragging=!0,this._track=[t.slice()]))},mousemove:function(n){var i=this.group.transformCoordToLocal(n.offsetX,n.offsetY),t;cou(this,n,i);this._dragging&&(gbt(n),t=ddi(this,n,i,!1),t&&bl(this,t))},mouseup:tgi};ck={lineX:igi(0),lineY:igi(1),rect:{createCover:function(n,t){return ydi(ph(bdi,function(n){return n},function(n){return n}),n,t,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(n){var t=vdi(n);return wdi(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(n,t,i,r){pdi(n,t,i,r)},updateCommon:wbt,contain:nkt},polygon:{createCover:function(n,t){var i=new e;return i.add(new af({name:"main",style:bbt(t),silent:!0})),i},getCreatingRange:function(n){return n},endCreating:function(n,t){t.remove(t.childAt(0));t.add(new ku({name:"main",draggable:!0,drift:ph(sou,n,t),ondragend:ph(bl,n,{isEnd:!0})}))},updateCoverShape:function(n,t,i){t.childAt(0).setShape({points:dbt(n,t,i)})},updateCommon:wbt,contain:nkt}};egi=["axisLine","axisTickLabel","axisName"];ogi=wi({type:"parallelAxis",init:function(n,t){ogi.superApply(this,"init",arguments);(this._brushController=new wy(t.getZr())).on("brush",l(this._onBrush,this))},render:function(n,i,r,u){var s,v;if(!lou(n,i,u)&&(this.axisModel=n,this.api=r,this.group.removeAll(),s=this._axisGroup,this._axisGroup=new e,this.group.add(this._axisGroup),n.get("show"))){var h=vou(n,i),y=h.coordinateSystem,c=n.getAreaSelectStyle(),l=c.width,p=n.axis.dim,w=y.getAxisLayout(p),a=o({strokeContainThreshold:l},w),f=new kf(n,a);t(egi,f.add,f);this._axisGroup.add(f.getGroup());this._refreshBrushController(a,c,n,h,l,r);v=u&&u.animation===!1?null:n;blt(s,this._axisGroup,v)}},_refreshBrushController:function(n,t,i,r,u,f){var o=i.axis.getExtent(),s=o[1]-o[0],h=Math.min(30,Math.abs(s)*.1),e=b.create({x:o[0],y:-u/2,width:s,height:u});e.x-=h;e.width+=2*h;this._brushController.mount({enableGlobalPan:!0,rotation:n.rotation,position:n.position}).setPanels([{panelId:"pl",clipPath:rgi(e),isTargetByCursor:fgi(e,f,r),getLinearBrushOtherExtent:ugi(e,0)}]).enableBrush({brushType:"lineX",brushStyle:t,removeOnClick:!0}).updateCovers(aou(i))},_onBrush:function(n,t){var i=this.axisModel,u=i.axis,f=r(n,function(n){return[u.coordToData(n.range[0],!0),u.coordToData(n.range[1],!0)]});(!i.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:i.id,intervals:f})},dispose:function(){this._brushController.dispose()}});sgi=5;wi({type:"parallel",render:function(n,i,r){this._model=n;this._api=r;this._handlers||(this._handlers={},t(hgi,function(n,t){r.getZr().on(t,this._handlers[t]=l(n,this))},this));nb(this,"_throttledDispatchExpand",n.get("axisExpandRate"),"fixRate")},dispose:function(n,i){t(this._handlers,function(n,t){i.getZr().off(t,n)});this._handlers=null},_throttledDispatchExpand:function(n){this._dispatchExpand(n)},_dispatchExpand:function(n){n&&this._api.dispatchAction(o({type:"parallelAxisExpand"},n))}});hgi={mousedown:function(n){ikt(this,"click")&&(this._mouseDownPoint=[n.offsetX,n.offsetY])},mouseup:function(n){var t=this._mouseDownPoint,i,u,r;if(ikt(this,"click")&&t){if(i=[n.offsetX,n.offsetY],u=Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2),u>sgi)return;r=this._model.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]);r.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:r.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(n){if(!this._mouseDownPoint&&ikt(this,"mousemove")){var i=this._model,r=i.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]),t=r.behavior;t==="jump"&&this._throttledDispatchExpand.debounceNextCall(i.get("axisExpandDebounce"));this._throttledDispatchExpand(t==="none"?null:{axisExpandWindow:r.axisExpandWindow,animation:t==="jump"?null:!1})}}};ur(gki);wt.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(){var n=this.getSource();return you(n,this),po(n,this)},getRawIndicesByActiveState:function(n){var r=this.coordinateSystem,t=this.getData(),i=[];return r.eachActiveState(t,function(r,u){n===r&&i.push(t.getRawIndex(u))}),i},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}});rkt=.3;wou=yi.extend({type:"parallel",init:function(){this._dataGroup=new e;this.group.add(this._dataGroup);this._data;this._initialized},render:function(n,t,i,r){function l(n){var t=lgi(u,f,n,s,e);ukt(t,u,n,h)}function a(t,i){var f=o.getItemGraphicEl(i),l=cgi(u,t,s,e),c;u.setItemGraphicEl(t,f);c=r&&r.animation===!1?null:n;w(f,{shape:{points:l}},c,t);ukt(f,u,t,h)}function v(n){var t=o.getItemGraphicEl(n);f.remove(t)}var f=this._dataGroup,u=n.getData(),o=this._data,e=n.coordinateSystem,s=e.dimensions,h=agi(n),c;u.diff(o).add(l).update(a).remove(v).execute();this._initialized||(this._initialized=!0,c=bou(e,n,function(){setTimeout(function(){f.removeClipPath()})}),f.setClipPath(c));this._data=u},incrementalPrepareRender:function(){this._initialized=!0;this._data=null;this._dataGroup.removeAll()},incrementalRender:function(n,t){for(var r,u=t.getData(),f=t.coordinateSystem,e=f.dimensions,o=agi(t),i=n.start;i<n.end;i++)r=lgi(u,this._dataGroup,i,e,f),r.incremental=!0,ukt(r,u,i,o)},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll();this._data=null}});vgi=["lineStyle","normal","opacity"];ygi={seriesType:"parallel",reset:function(n,t){function a(n,t){h.eachActiveState(t,function(n,i){var u=l[n],r;n==="normal"&&t.hasItemOption&&(r=t.getItemModel(i).get(vgi,!0),r!=null&&(u=r));t.setItemVisual(i,"opacity",u)},n.start,n.end)}var r=n.getModel("itemStyle"),u=n.getModel("lineStyle"),i=t.get("color"),f=u.get("color")||r.get("color")||i[n.seriesIndex%i.length],e=n.get("inactiveOpacity"),o=n.get("activeOpacity"),s=n.getModel("lineStyle").getLineStyle(),h=n.coordinateSystem,c=n.getData(),l={normal:s.opacity,active:o,inactive:e};return c.setVisual("color",f),{progress:a}}};yt(ygi);var dou=wt.extend({type:"series.sankey",layoutInfo:null,getInitialData:function(n){var t=n.edges||n.links,i=n.data||n.nodes,r;if(i&&t)return r=pbi(i,t,this,!0),r.data},setNodePosition:function(n,t){var i=this.option.data[n];i.localX=t[0];i.localY=t[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(n,t,i){if(i==="edge"){var r=this.getDataParams(n,i),u=r.data,f=u.source+" -- "+u.target;return r.value&&(f+=" : "+r.value),dt(f)}return dou.superCall(this,"formatTooltip",n,t)},optionUpdated:function(){var n=this.option;n.focusNodeAdjacency===!0&&(n.focusNodeAdjacency="allEdges")},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.6}},animationEasing:"linear",animationDuration:1e3}}),is=["itemStyle","opacity"],by=["lineStyle","opacity"];wgi=ce({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(n,t){var i=t.extent,r=t.orient;r==="vertical"?(n.moveTo(t.x1,t.y1),n.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),n.lineTo(t.x2+i,t.y2),n.bezierCurveTo(t.cpx2+i,t.cpy2,t.cpx1+i,t.cpy1,t.x1+i,t.y1)):(n.moveTo(t.x1,t.y1),n.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),n.lineTo(t.x2,t.y2+i),n.bezierCurveTo(t.cpx2,t.cpy2+i,t.cpx1,t.cpy1+i,t.x1,t.y1+i));n.closePath()}});gr({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(n,t,i){var u=this,c=n.getGraph(),r=this.group,o=n.layoutInfo,f=o.width,e=o.height,s=n.getData(),h=n.getData("edge"),l=n.get("orient");this._model=n;r.removeAll();r.attr("position",[o.x,o.y]);c.eachEdge(function(t){var i=new wgi;i.dataIndex=t.dataIndex;i.seriesIndex=n.seriesIndex;i.dataType="edge";var rt=t.getModel("lineStyle"),u=rt.get("curveness"),o=t.node1.getLayout(),ut=t.node1.getModel(),p=ut.get("localX"),w=ut.get("localY"),b=t.node2.getLayout(),ft=t.node2.getModel(),k=ft.get("localX"),d=ft.get("localY"),y=t.getLayout(),s,c,a,v,g,nt,tt,it;i.shape.extent=Math.max(1,y.dy);i.shape.orient=l;l==="vertical"?(s=(p!=null?p*f:o.x)+y.sy,c=(w!=null?w*e:o.y)+o.dy,a=(k!=null?k*f:b.x)+y.ty,v=d!=null?d*e:b.y,g=s,nt=c*(1-u)+v*u,tt=a,it=c*u+v*(1-u)):(s=(p!=null?p*f:o.x)+o.dx,c=(w!=null?w*e:o.y)+y.sy,a=k!=null?k*f:b.x,v=(d!=null?d*e:b.y)+y.ty,g=s*(1-u)+a*u,nt=c,tt=s*u+a*(1-u),it=v);i.setShape({x1:s,y1:c,x2:a,y2:v,cpx1:g,cpy1:nt,cpx2:tt,cpy2:it});i.setStyle(rt.getItemStyle());switch(i.style.fill){case"source":i.style.fill=t.node1.getVisual("color");break;case"target":i.style.fill=t.node2.getVisual("color")}pt(i,t.getModel("emphasis.lineStyle").getItemStyle());r.add(i);h.setItemGraphicEl(t.dataIndex,i)});c.eachNode(function(t){var o=t.getLayout(),u=t.getModel(),h=u.get("localX"),c=u.get("localY"),a=u.getModel("label"),v=u.getModel("emphasis.label"),i=new et({shape:{x:h!=null?h*f:o.x,y:c!=null?c*e:o.y,width:o.dx,height:o.dy},style:u.getModel("itemStyle").getItemStyle()}),l=t.getModel("emphasis.itemStyle").getItemStyle();du(i.style,l,a,v,{labelFetcher:n,labelDataIndex:t.dataIndex,defaultText:t.id,isRectText:!0});i.setStyle("fill",t.getVisual("color"));pt(i,l);r.add(i);s.setItemGraphicEl(t.dataIndex,i);i.dataType="node"});s.eachItemGraphicEl(function(t,r){var o=s.getItemModel(r);if(o.get("draggable")&&(t.drift=function(t,o){u._focusAdjacencyDisabled=!0;this.shape.x+=t;this.shape.y+=o;this.dirty();i.dispatchAction({type:"dragNode",seriesId:n.id,dataIndex:s.getRawIndex(r),localX:this.shape.x/f,localY:this.shape.y/e})},t.ondragend=function(){u._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move"),o.get("focusNodeAdjacency")){t.off("mouseover").on("mouseover",function(){u._focusAdjacencyDisabled||i.dispatchAction({type:"focusNodeAdjacency",seriesId:n.id,dataIndex:t.dataIndex})});t.off("mouseout").on("mouseout",function(){u._focusAdjacencyDisabled||i.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n.id})})}});h.eachItemGraphicEl(function(t,r){var f=h.getItemModel(r);if(f.get("focusNodeAdjacency")){t.off("mouseover").on("mouseover",function(){u._focusAdjacencyDisabled||i.dispatchAction({type:"focusNodeAdjacency",seriesId:n.id,edgeDataIndex:t.dataIndex})});t.off("mouseout").on("mouseout",function(){u._focusAdjacencyDisabled||i.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n.id})})}});!this._data&&n.get("animation")&&r.setClipPath(gou(r.getBoundingRect(),n,function(){r.removeClipPath()}));this._data=n.getData()},dispose:function(){},focusNodeAdjacency:function(n,i,r,u){var c=this._model.getData(),o=c.graph,h=u.dataIndex,a=c.getItemModel(h),l=u.edgeDataIndex,f,e,s;(h!=null||l!=null)&&(f=o.getNodeByIndex(h),e=o.getEdgeByIndex(l),o.eachNode(function(n){cft(n,is,.1)}),o.eachEdge(function(n){cft(n,by,.1)}),f&&(gf(f,is),s=a.get("focusNodeAdjacency"),s==="outEdges"?t(f.outEdges,function(n){n.dataIndex<0||(gf(n,by),gf(n.node2,is))}):s==="inEdges"?t(f.inEdges,function(n){n.dataIndex<0||(gf(n,by),gf(n.node1,is))}):s==="allEdges"&&t(f.edges,function(n){n.dataIndex<0||(gf(n,by),gf(n.node1,is),gf(n.node2,is))})),e&&(gf(e,by),gf(e.node1,is),gf(e.node2,is)))},unfocusNodeAdjacency:function(){var n=this._model.getGraph();n.eachNode(function(n){cft(n,is)});n.eachEdge(function(n){cft(n,by)})}});rt({type:"dragNode",event:"dragNode",update:"update"},function(n,t){t.eachComponent({mainType:"series",subType:"sankey",query:n},function(t){t.setNodePosition(n.dataIndex,[n.localX,n.localY])})});bgi=function(n,t){n.eachSeriesByType("sankey",function(n){var f=n.get("nodeWidth"),e=n.get("nodeGap"),i=nsu(n,t);n.layoutInfo=i;var o=i.width,s=i.height,u=n.getGraph(),r=u.nodes,h=u.edges;isu(r);var c=hi(r,function(n){return n.getLayout().value===0}),l=c.length!==0?0:n.get("layoutIterations"),a=n.get("orient");tsu(r,h,f,e,o,s,l,a)})};kgi=function(n){n.eachSeriesByType("sankey",function(n){var f=n.getGraph(),u=f.nodes,i,r;u.length&&(i=Infinity,r=-Infinity,t(u,function(n){var t=n.getLayout().value;t<i&&(i=t);t>r&&(r=t)}),t(u,function(t){var e=new ht({type:"color",mappingMethod:"linear",dataExtent:[i,r],visual:n.get("color")}),o=e.mapValueToVisual(t.getLayout().value),f,u;t.setVisual("color",o);f=t.getModel();u=f.get("itemStyle.color");u!=null&&t.setVisual("color",u)}))})};gt(bgi);yt(kgi);okt={_baseAxisDim:null,getInitialData:function(n,r){var f,e=r.getComponent("xAxis",this.get("xAxisIndex")),o=r.getComponent("yAxis",this.get("yAxisIndex")),y=e.get("type"),p=o.get("type"),s,h,c;y==="category"?(n.layout="horizontal",f=e.getOrdinalMeta(),s=!0):p==="category"?(n.layout="vertical",f=o.getOrdinalMeta(),s=!0):n.layout=n.layout||"horizontal";var l=["x","y"],u=n.layout==="horizontal"?0:1,w=this._baseAxisDim=l[u],b=l[1-u],a=[e,o],k=a[u].get("type"),d=a[1-u].get("type"),v=n.data;return v&&s&&(h=[],t(v,function(n,t){var r;n.value&&i(n.value)?(r=n.value.slice(),n.value.unshift(t)):i(n)?(r=n.slice(),n.unshift(t)):r=n;h.push(r)}),n.data=h),c=this.defaultValueDimensions,oy(this,{coordDimensions:[{name:w,type:irt(k),ordinalMeta:f,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:b,type:irt(d),dimsDef:c.slice()}],dimensionsCount:c.length+1})},getBaseAxis:function(){var n=this._baseAxisDim;return this.ecModel.getComponent(n+"Axis",this.get(n+"AxisIndex")).axis}};dgi=wt.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}});st(dgi,okt,!0);var ysu=["itemStyle"],psu=["emphasis","itemStyle"],pku=yi.extend({type:"boxplot",render:function(n){var t=n.getData(),i=this.group,r=this._data,u;this._data||i.removeAll();u=n.get("layout")==="horizontal"?1:0;t.diff(r).add(function(n){if(t.hasValue(n)){var f=t.getItemLayout(n),r=ggi(f,t,n,u,!0);t.setItemGraphicEl(n,r);i.add(r)}}).update(function(n,f){var e=r.getItemGraphicEl(f),o;if(!t.hasValue(n)){i.remove(e);return}o=t.getItemLayout(n);e?nni(o,e,t,n):e=ggi(o,t,n,u);i.add(e);t.setItemGraphicEl(n,e)}).remove(function(n){var t=r.getItemGraphicEl(n);t&&i.remove(t)}).execute();this._data=t},remove:function(){var t=this.group,n=this._data;this._data=null;n&&n.eachItemGraphicEl(function(n){n&&t.remove(n)})},dispose:di}),wsu=nt.extend({type:"boxplotBoxPath",shape:{},buildPath:function(n,t){var r=t.points,i=0;for(n.moveTo(r[i][0],r[i][1]),i++;i<4;i++)n.lineTo(r[i][0],r[i][1]);for(n.closePath();i<r.length;i++)n.moveTo(r[i][0],r[i][1]),i++,n.lineTo(r[i][0],r[i][1])}});var tni=["itemStyle","borderColor"],ksu=function(n){var t=n.get("color");n.eachRawSeriesByType("boxplot",function(i){var u=t[i.seriesIndex%t.length],r=i.getData();r.setVisual({legendSymbol:"roundRect",color:i.get(tni)||u});n.isSeriesFiltered(i)||r.each(function(n){var t=r.getItemModel(n);r.setItemVisual(n,{color:t.get(tni,!0)})})})},lk=t,dsu=function(n){var t=gsu(n);lk(t,function(n){var t=n.seriesModels;t.length&&(nhu(n),lk(t,function(t,i){thu(t,n.boxOffsetList[i],n.boxWidthList[i])}))})};yt(ksu);gt(dsu);ini=wt.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(n,t,i){var r=t.getItemLayout(n);return r&&i.rect(r.brushRect)}});st(ini,okt,!0);var rni=["itemStyle"],ihu=["emphasis","itemStyle"],uni=["color","color0","borderColor","borderColor0"],wku=yi.extend({type:"candlestick",render:function(n){this._updateDrawMode(n);this._isLargeDraw?this._renderLarge(n):this._renderNormal(n)},incrementalPrepareRender:function(n){this._clear();this._updateDrawMode(n)},incrementalRender:function(n,t){this._isLargeDraw?this._incrementalRenderLarge(n,t):this._incrementalRenderNormal(n,t)},_updateDrawMode:function(n){var t=n.pipelineContext.large;(this._isLargeDraw==null||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(n){var t=n.getData(),r=this._data,i=this.group,u=t.getLayout("isSimpleBox");this._data||i.removeAll();t.diff(r).add(function(r){if(t.hasValue(r)){var f,e=t.getItemLayout(r);f=skt(e,r,!0);sr(f,{shape:{points:e.ends}},n,r);hkt(f,t,r,u);i.add(f);t.setItemGraphicEl(r,f)}}).update(function(f,e){var o=r.getItemGraphicEl(e),s;if(!t.hasValue(f)){i.remove(o);return}s=t.getItemLayout(f);o?w(o,{shape:{points:s.ends}},n,f):o=skt(s,f);hkt(o,t,f,u);i.add(o);t.setItemGraphicEl(f,o)}).remove(function(n){var t=r.getItemGraphicEl(n);t&&i.remove(t)}).execute();this._data=t},_renderLarge:function(n){this._clear();fni(n,this.group)},_incrementalRenderNormal:function(n,t){for(var u=t.getData(),e=u.getLayout("isSimpleBox"),i,r,f;(i=n.next())!=null;)f=u.getItemLayout(i),r=skt(f,i),hkt(r,u,i,e),r.incremental=!0,this.group.add(r)},_incrementalRenderLarge:function(n,t){fni(t,this.group,!0)},remove:function(){this._clear()},_clear:function(){this.group.removeAll();this._data=null},dispose:di}),rhu=nt.extend({type:"normalCandlestickBox",shape:{},buildPath:function(n,t){var i=t.points;this.__simpleBox?(n.moveTo(i[4][0],i[4][1]),n.lineTo(i[6][0],i[6][1])):(n.moveTo(i[0][0],i[0][1]),n.lineTo(i[1][0],i[1][1]),n.lineTo(i[2][0],i[2][1]),n.lineTo(i[3][0],i[3][1]),n.closePath(),n.moveTo(i[4][0],i[4][1]),n.lineTo(i[5][0],i[5][1]),n.moveTo(i[6][0],i[6][1]),n.lineTo(i[7][0],i[7][1]))}});ckt=nt.extend({type:"largeCandlestickBox",shape:{},buildPath:function(n,t){for(var u,r=t.points,i=0;i<r.length;)this.__sign===r[i++]?(u=r[i++],n.moveTo(u,r[i++]),n.lineTo(u,r[i++])):i+=3}});var fhu=function(n){n&&i(n.series)&&t(n.series,function(n){a(n)&&n.type==="k"&&(n.type="candlestick")})},ehu=["itemStyle","borderColor"],ohu=["itemStyle","borderColor0"],shu=["itemStyle","color"],hhu=["itemStyle","color0"],chu={seriesType:"candlestick",plan:pv(),performRawSeries:!0,reset:function(n,t){function e(n,t){for(var u,f,e;(u=n.next())!=null;)f=t.getItemModel(u),e=t.getItemLayout(u).sign,t.setItemVisual(u,{color:i(e,f),borderColor:r(e,f)})}function i(n,t){return t.get(n>0?shu:hhu)}function r(n,t){return t.get(n>0?ehu:ohu)}var u=n.getData(),f=n.pipelineContext.large;if(u.setVisual({legendSymbol:"roundRect",colorP:i(1,n),colorN:i(-1,n),borderColorP:r(1,n),borderColorN:r(-1,n)}),!t.isSeriesFiltered(n))return!f&&{progress:e}}},lhu=typeof Float32Array!="undefined"?Float32Array:Array,ahu={seriesType:"candlestick",plan:pv(),reset:function(n){function v(n,u){function h(n,i){var u=[];return u[t]=i,u[r]=n,isNaN(i)||isNaN(n)?[NaN,NaN]:o.dataToPoint(u)}function tt(n,r,u){var f=r.slice(),e=r.slice();f[t]=ae(f[t]+i/2,1,!1);e[t]=ae(e[t]-i/2,1,!0);u?n.push(f,e):n.push(e,f)}function et(n,u,f){var e=h(n,f),o=h(u,f);return e[t]-=i/2,o[t]-=i/2,{x:e[0],y:e[1],width:r?i:o[0]-e[0],height:r?o[1]-e[1]:i}}function b(n){return n[t]=ae(n[t],1),n}for(var f;(f=n.next())!=null;){var v=u.get(s,f),y=u.get(c,f),p=u.get(e,f),g=u.get(l,f),nt=u.get(a,f),it=Math.min(y,p),rt=Math.max(y,p),k=h(it,v),d=h(rt,v),ut=h(g,v),ft=h(nt,v),w=[];tt(w,d,0);tt(w,k,1);w.push(b(ft),b(d),b(ut),b(k));u.setItemLayout(f,{sign:oni(u,f,y,p,e),initBaseline:y>p?d[r]:k[r],ends:w,brushRect:et(g,nt,v)})}}function y(n,i){for(var h=new lhu(n.count*5),v=0,u,y=[],p=[],f;(f=n.next())!=null;){var w=i.get(s,f),d=i.get(c,f),g=i.get(e,f),b=i.get(l,f),k=i.get(a,f);if(isNaN(w)||isNaN(b)||isNaN(k)){h[v++]=NaN;v+=4;continue}h[v++]=oni(i,f,d,g,e);y[t]=w;y[r]=b;u=o.dataToPoint(y,null,p);h[v++]=u?u[0]:NaN;h[v++]=u?u[1]:NaN;y[r]=k;u=o.dataToPoint(y,null,p);h[v++]=u?u[1]:NaN}i.setLayout("largePoints",h)}var o=n.coordinateSystem,f=n.getData(),i=vhu(n,f),t=0,r=1,h=["x","y"],s=f.mapDimension(h[t]),u=f.mapDimension(h[r],!0),c=u[0],e=u[1],l=u[2],a=u[3];if(f.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),s!=null&&!(u.length<4))return{progress:n.pipelineContext.large?y:v}}};ur(fhu);yt(chu);gt(ahu);wt.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(){return po(this.getSource(),this)},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});lkt=3;wh=akt.prototype;wh.stopEffectAnimation=function(){this.childAt(1).removeAll()};wh.startEffectAnimation=function(n){for(var t,r,f=n.symbolType,e=n.color,u=this.childAt(1),i=0;i<lkt;i++)t=cu(f,-1,-1,2,2,e),t.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]}),r=-i/lkt*n.period+n.effectOffset,t.animate("",!0).when(n.period,{scale:[n.rippleScale/2,n.rippleScale/2]}).delay(r).start(),t.animateStyle(!0).when(n.period,{opacity:0}).delay(r).start(),u.add(t);sni(u,n)};wh.updateEffectAnimation=function(n){for(var i,u=this._effectCfg,f=this.childAt(1),r=["symbolType","period","rippleScale"],t=0;t<r.length;t++)if(i=r[t],u[i]!==n[i]){this.stopEffectAnimation();this.startEffectAnimation(n);return}sni(f,n)};wh.highlight=function(){this.trigger("emphasis")};wh.downplay=function(){this.trigger("normal")};wh.updateData=function(n,t){var v=n.hostModel,e,s,i;this.childAt(0).updateData(n,t);var u=this.childAt(1),r=n.getItemModel(t),y=n.getItemVisual(t,"symbol"),o=yhu(n.getItemVisual(t,"symbolSize")),h=n.getItemVisual(t,"color");if(u.attr("scale",o),u.traverse(function(n){n.attr({fill:h})}),e=r.getShallow("symbolOffset"),e&&(s=u.position,s[0]=f(e[0],o[0]),s[1]=f(e[1],o[1])),u.rotation=(r.getShallow("symbolRotate")||0)*Math.PI/180||0,i={},i.showEffectOn=v.get("showEffectOn"),i.rippleScale=r.get("rippleEffect.scale"),i.brushType=r.get("rippleEffect.brushType"),i.period=r.get("rippleEffect.period")*1e3,i.effectOffset=t/n.count(),i.z=r.getShallow("z")||0,i.zlevel=r.getShallow("zlevel")||0,i.symbolType=y,i.color=h,this.off("mouseover").off("mouseout").off("emphasis").off("normal"),i.showEffectOn==="render")this._effectCfg?this.updateEffectAnimation(i):this.startEffectAnimation(i),this._effectCfg=i;else{this._effectCfg=null;this.stopEffectAnimation();var c=this.childAt(0),l=function(){c.highlight();i.showEffectOn!=="render"&&this.startEffectAnimation(i)},a=function(){c.downplay();i.showEffectOn!=="render"&&this.stopEffectAnimation()};this.on("mouseover",l,this).on("mouseout",a,this).on("emphasis",l,this).on("normal",a,this)}this._effectCfg=i};wh.fadeOut=function(n){this.off("mouseover").off("mouseout").off("emphasis").off("normal");n&&n()};ct(akt,e);gr({type:"effectScatter",init:function(){this._symbolDraw=new ry(akt)},render:function(n){var i=n.getData(),t=this._symbolDraw;t.updateData(i);this.group.add(t.group)},updateTransform:function(n){var t=n.getData(),i;this.group.dirty();i=lb().reset(n);i.progress&&i.progress({start:0,end:t.count()},t);this._symbolDraw.updateLayout(t)},_updateGroupTransform:function(n){var t=n.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=dii(t.getRoamTransform()),this.group.decomposeTransform())},remove:function(n,t){this._symbolDraw&&this._symbolDraw.remove(t)},dispose:function(){}});yt(ol("effectScatter","circle"));gt(lb("effectScatter"));hni=typeof Uint32Array=="undefined"?Array:Uint32Array;cni=typeof Float64Array=="undefined"?Array:Float64Array;vkt=wt.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(n){n.data=n.data||[];lni(n);var t=this._processFlatCoordsArray(n.data);this._flatCoords=t.flatCoords;this._flatCoordsOffset=t.flatCoordsOffset;t.flatCoords&&(n.data=new Float32Array(t.count));vkt.superApply(this,"init",arguments)},mergeOption:function(n){if(n.data=n.data||[],lni(n),n.data){var t=this._processFlatCoordsArray(n.data);this._flatCoords=t.flatCoords;this._flatCoordsOffset=t.flatCoordsOffset;t.flatCoords&&(n.data=new Float32Array(t.count))}vkt.superApply(this,"mergeOption",arguments)},appendData:function(n){var t=this._processFlatCoordsArray(n.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=est(this._flatCoords,t.flatCoords),this._flatCoordsOffset=est(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),n.data=new Float32Array(t.count));this.getRawData().appendData(n.data)},_getCoordsFromItemModel:function(n){var i=this.getData().getItemModel(n),t=i.option instanceof Array?i.option:i.getShallow("coords");if(u&&!(t instanceof Array&&t.length>0&&t[0]instanceof Array))throw new Error("Invalid coords "+JSON.stringify(t)+". Lines must have 2d coords array in data item.");return t},getLineCoordsCount:function(n){return this._flatCoordsOffset?this._flatCoordsOffset[n*2+1]:this._getCoordsFromItemModel(n).length},getLineCoords:function(n,t){var u,f,r,i;if(this._flatCoordsOffset){for(u=this._flatCoordsOffset[n*2],f=this._flatCoordsOffset[n*2+1],i=0;i<f;i++)t[i]=t[i]||[],t[i][0]=this._flatCoords[u+i*2],t[i][1]=this._flatCoords[u+i*2+1];return f}for(r=this._getCoordsFromItemModel(n),i=0;i<r.length;i++)t[i]=t[i]||[],t[i][0]=r[i][0],t[i][1]=r[i][1];return r.length},_processFlatCoordsArray:function(n){var c=0,t,s,h,a,v;if(this._flatCoords&&(c=this._flatCoords.length),typeof n[0]=="number"){var i=n.length,r=new hni(i),f=new cni(i),e=0,o=0,l=0;for(t=0;t<i;)for(l++,s=n[t++],r[o++]=e+c,r[o++]=s,h=0;h<s;h++)if(a=n[t++],v=n[t++],f[e++]=a,f[e++]=v,t>i&&u)throw new Error("Invalid data format.");return{flatCoordsOffset:new Uint32Array(r.buffer,0,o),flatCoords:f,count:l}}return{flatCoordsOffset:null,flatCoords:null,count:n.length}},getInitialData:function(n){var i,t;if(u&&(i=ir.get(n.coordinateSystem),!i))throw new Error("Unkown coordinate system "+n.coordinateSystem);return t=new ai(["value"],this),t.hasItemOption=!1,t.initData(n.data,[],function(n,i,r,u){if(n instanceof Array)return NaN;t.hasItemOption=!0;var f=n.value;if(f!=null)return f instanceof Array?f[u]:f}),t},formatTooltip:function(n){var e=this.getData(),t=e.getItemModel(n),r=t.get("name");if(r)return r;var u=t.get("fromName"),f=t.get("toName"),i=[];return u!=null&&i.push(u),f!=null&&i.push(f),dt(i.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var n=this.option.progressive;return n==null?this.option.large?1e4:this.get("progressive"):n},getProgressiveThreshold:function(){var n=this.option.progressiveThreshold;return n==null?this.option.large?2e4:this.get("progressiveThreshold"):n},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}});rs=ak.prototype;rs.createLine=function(n,t,i){return new ok(n,t,i)};rs._updateEffectSymbol=function(n,t){var s=n.getItemModel(t),f=s.getModel("effect"),u=f.get("symbolSize"),o=f.get("symbol"),e,r;(i(u)||(u=[u,u]),e=f.get("color")||n.getItemVisual(t,"color"),r=this.childAt(1),this._symbolType!==o&&(this.remove(r),r=cu(o,-.5,-.5,1,1,e),r.z2=100,r.culling=!0,this.add(r)),r)&&(r.setStyle("shadowColor",e),r.setStyle(f.getItemStyle(["color"])),r.attr("scale",u),r.setColor(e),r.attr("scale",u),this._symbolType=o,this._updateEffectAnimation(n,f,t))};rs._updateEffectAnimation=function(n,t,i){var r=this.childAt(1),e,s;if(r){var h=this,l=n.getItemLayout(i),u=t.get("period")*1e3,f=t.get("loop"),c=t.get("constantSpeed"),o=kt(t.get("delay"),function(t){return t/n.count()*u/3}),a=typeof o=="function";r.ignore=!0;this.updateAnimationPoints(r,l);c>0&&(u=this.getLineLength(r)/c*1e3);(u!==this._period||f!==this._loop)&&(r.stopAnimation(),e=o,a&&(e=o(i)),r.__t>0&&(e=-u*r.__t),r.__t=0,s=r.animate("",f).when(u,{__t:1}).delay(e).during(function(){h.updateSymbolPosition(r)}),f||s.done(function(){h.remove(r)}),s.start());this._period=u;this._loop=f}};rs.getLineLength=function(n){return hs(n.__p1,n.__cp1)+hs(n.__cp1,n.__p2)};rs.updateAnimationPoints=function(n,t){n.__p1=t[0];n.__p2=t[1];n.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]};rs.updateData=function(n,t,i){this.childAt(0).updateData(n,t,i);this._updateEffectSymbol(n,t)};rs.updateSymbolPosition=function(n){var t=n.__p1,i=n.__p2,r=n.__cp1,u=n.__t,f=n.position,e=er,o=yct,s,h;f[0]=e(t[0],r[0],i[0],u);f[1]=e(t[1],r[1],i[1],u);s=o(t[0],r[0],i[0],u);h=o(t[1],r[1],i[1],u);n.rotation=-Math.atan2(h,s)-Math.PI/2;n.ignore=!1};rs.updateLayout=function(n,t){this.childAt(0).updateLayout(n,t);var i=n.getItemModel(t).getModel("effect");this._updateEffectAnimation(n,i,t)};ct(ak,e);vk=aft.prototype;vk._createPolyline=function(n,t,i){var r=n.getItemLayout(t),u=new af({shape:{points:r}});this.add(u);this._updateCommonStl(n,t,i)};vk.updateData=function(n,t,i){var r=n.hostModel,u=this.childAt(0),f={shape:{points:n.getItemLayout(t)}};w(u,f,r,t);this._updateCommonStl(n,t,i)};vk._updateCommonStl=function(n,t,i){var r=this.childAt(0),u=n.getItemModel(t),o=n.getItemVisual(t,"color"),f=i&&i.lineStyle,e=i&&i.hoverLineStyle;(!i||n.hasItemOption)&&(f=u.getModel("lineStyle").getLineStyle(),e=u.getModel("emphasis.lineStyle").getLineStyle());r.useStyle(s({strokeNoScale:!0,fill:"none",stroke:o},f));r.hoverStyle=e;pt(this)};vk.updateLayout=function(n,t){var i=this.childAt(0);i.setShape("points",n.getItemLayout(t))};ct(aft,e);yk=ykt.prototype;yk.createLine=function(n,t,i){return new aft(n,t,i)};yk.updateAnimationPoints=function(n,t){var u,r,f,e,i;for(this._points=t,u=[0],r=0,i=1;i<t.length;i++)f=t[i-1],e=t[i],r+=hs(f,e),u.push(r);if(r!==0){for(i=0;i<u.length;i++)u[i]/=r;this._offsets=u;this._length=r}};yk.getLineLength=function(){return this._length};yk.updateSymbolPosition=function(n){var u=n.__t,i=this._points,r=this._offsets,f=i.length,e,o,t,s,h;if(r){if(e=this._lastFrame,u<this._lastFramePercent){for(o=Math.min(e+1,f-1),t=o;t>=0;t--)if(r[t]<=u)break;t=Math.min(t,f-2)}else{for(t=e;t<f;t++)if(r[t]>u)break;t=Math.min(t-1,f-2)}lii(n.position,i[t],i[t+1],(u-r[t])/(r[t+1]-r[t]));s=i[t+1][0]-i[t][0];h=i[t+1][1]-i[t][1];n.rotation=-Math.atan2(h,s)-Math.PI/2;this._lastFrame=t;this._lastFramePercent=u;n.ignore=!1}};ct(ykt,ak);pkt=ce({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(n,t){var r=t.segs,e=t.curveness,o,s,i,l,a;if(t.polyline){for(i=0;i<r.length;)if(o=r[i++],o>0)for(n.moveTo(r[i++],r[i++]),s=1;s<o;s++)n.lineTo(r[i++],r[i++])}else for(i=0;i<r.length;){var h=r[i++],c=r[i++],u=r[i++],f=r[i++];n.moveTo(h,c);e>0?(l=(h+u)/2-(c-f)*e,a=(c+f)/2-(u-h)*e,n.quadraticCurveTo(l,a,u,f)):n.lineTo(u,f)}},findDataIndex:function(){var o=this.shape,t=o.segs,s=o.curveness,h,r,u,c,f,e,i,n,l,a;if(o.polyline)for(i=0,n=0;n<t.length;){if(h=t[n++],h>0)for(r=t[n++],u=t[n++],c=1;c<h;c++)if(f=t[n++],e=t[n++],ds(r,u,f,e))return i;i++}else for(i=0,n=0;n<t.length;){var r=t[n++],u=t[n++],f=t[n++],e=t[n++];if(s>0){if(l=(r+f)/2-(u-e)*s,a=(u+e)/2-(f-r)*s,kfi(r,u,l,a,f,e))return i}else if(ds(r,u,f,e))return i;i++}return-1}});bh=ani.prototype;bh.isPersistent=function(){return!this._incremental};bh.updateData=function(n){this.group.removeAll();var t=new pkt({rectHover:!0,cursor:"default"});t.setShape({segs:n.getLayout("linesPoints")});this._setCommon(t,n);this.group.add(t);this._incremental=null};bh.incrementalPrepareUpdate=function(n){this.group.removeAll();this._clearIncremental();n.count()>5e5?(this._incremental||(this._incremental=new fu({silent:!0})),this.group.add(this._incremental)):this._incremental=null};bh.incrementalUpdate=function(n,t){var i=new pkt;i.setShape({segs:t.getLayout("linesPoints")});this._setCommon(i,t,!!this._incremental);this._incremental?this._incremental.addDisplayable(i,!0):(i.rectHover=!0,i.cursor="default",i.__startIndex=n.start,this.group.add(i))};bh.remove=function(){this._clearIncremental();this._incremental=null;this.group.removeAll()};bh._setCommon=function(n,t,i){var r=t.hostModel,u;if(n.setShape({polyline:r.get("polyline"),curveness:r.get("lineStyle.curveness")}),n.useStyle(r.getModel("lineStyle").getLineStyle()),n.style.strokeNoScale=!0,u=t.getVisual("color"),u&&n.setStyle("stroke",u),n.setStyle("fill"),!i){n.seriesIndex=r.seriesIndex;n.on("mousemove",function(t){n.dataIndex=null;var i=n.findDataIndex(t.offsetX,t.offsetY);i>0&&(n.dataIndex=i+n.__startIndex)})}};bh._clearIncremental=function(){var n=this._incremental;n&&n.clearDisplaybles()};wkt={seriesType:"lines",plan:pv(),reset:function(n){function u(u,f){var s=[],h,w,b,l,c,a,v,e,y,p;if(r){if(w=u.end-u.start,i){for(b=0,e=u.start;e<u.end;e++)b+=n.getLineCoordsCount(e);h=new Float32Array(w+b*2)}else h=new Float32Array(w*4);for(l=0,c=[],e=u.start;e<u.end;e++)for(a=n.getLineCoords(e,s),i&&(h[l++]=a),v=0;v<a;v++)c=t.dataToPoint(s[v],!1,c),h[l++]=c[0],h[l++]=c[1];f.setLayout("linesPoints",h)}else for(e=u.start;e<u.end;e++){var k=f.getItemModel(e),a=n.getLineCoords(e,s),o=[];if(i)for(y=0;y<a;y++)o.push(t.dataToPoint(s[y]));else o[0]=t.dataToPoint(s[0]),o[1]=t.dataToPoint(s[1]),p=k.get("lineStyle.curveness"),+p&&(o[2]=[(o[0][0]+o[1][0])/2-(o[0][1]-o[1][1])*p,(o[0][1]+o[1][1])/2-(o[1][0]-o[0][0])*p]);f.setItemLayout(e,o)}}var t=n.coordinateSystem,i=n.get("polyline"),r=n.pipelineContext.large;return{progress:u}}};gr({type:"lines",init:function(){},render:function(n,t,i){var s=n.getData(),c=this._updateLineDraw(s,n),r=n.get("zlevel"),h=n.get("effect.trailLength"),f=i.getZr(),e=f.painter.getType()==="svg",o;e||f.painter.getLayer(r).clear(!0);this._lastZlevel==null||e||f.configLayer(this._lastZlevel,{motionBlur:!1});this._showEffect(n)&&h&&(u&&(o=!1,t.eachSeries(function(t){t!==n&&t.get("zlevel")===r&&(o=!0)}),o&&console.warn("Lines with trail effect should have an individual zlevel")),e||f.configLayer(r,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(h/10+.9,1),0)}));c.updateData(s);this._lastZlevel=r;this._finished=!0},incrementalPrepareRender:function(n,t,i){var r=n.getData(),u=this._updateLineDraw(r,n);u.incrementalPrepareUpdate(r);this._clearLayer(i);this._finished=!1},incrementalRender:function(n,t){this._lineDraw.incrementalUpdate(n,t.getData());this._finished=n.end===t.getData().count()},updateTransform:function(n,t,i){var u=n.getData(),f=n.pipelineContext,r;if(!this._finished||f.large||f.progressiveRender)return{update:!0};r=wkt.reset(n);r.progress&&r.progress({start:0,end:u.count()},u);this._lineDraw.updateLayout();this._clearLayer(i)},_updateLineDraw:function(n,t){var i=this._lineDraw,r=this._showEffect(t),e=!!t.get("polyline"),o=t.pipelineContext,f=o.large;return u&&r&&f&&console.warn("Large lines not support effect"),i&&r===this._hasEffet&&e===this._isPolyline&&f===this._isLargeDraw||(i&&i.remove(),i=this._lineDraw=f?new ani:new uft(e?r?ykt:aft:r?ak:ok),this._hasEffet=r,this._isPolyline=e,this._isLargeDraw=f,this.group.removeAll()),this.group.add(i.group),i},_showEffect:function(n){return!!n.get("effect.show")},_clearLayer:function(n){var t=n.getZr(),i=t.painter.getType()==="svg";i||this._lastZlevel==null||t.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(n,t){this._lineDraw&&this._lineDraw.remove();this._lineDraw=null;this._clearLayer(t)},dispose:function(){}});bkt="lineStyle.opacity".split(".");vni={seriesType:"lines",reset:function(n){function u(n,t){var u=n.getItemModel(t),i=vft(u.getShallow("symbol",!0)),r=vft(u.getShallow("symbolSize",!0)),f=u.get(bkt);i[0]&&n.setItemVisual(t,"fromSymbol",i[0]);i[1]&&n.setItemVisual(t,"toSymbol",i[1]);r[0]&&n.setItemVisual(t,"fromSymbolSize",r[0]);r[1]&&n.setItemVisual(t,"toSymbolSize",r[1]);n.setItemVisual(t,"opacity",f)}var i=vft(n.get("symbol")),r=vft(n.get("symbolSize")),t=n.getData();return t.setVisual("fromSymbol",i&&i[0]),t.setVisual("toSymbol",i&&i[1]),t.setVisual("fromSymbolSize",r&&r[0]),t.setVisual("toSymbolSize",r&&r[1]),t.setVisual("opacity",n.get(bkt)),{dataEach:t.hasItemOption?u:null}}};gt(wkt);yt(vni);wt.extend({type:"series.heatmap",getInitialData:function(){return po(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var n=ir.get(this.get("coordinateSystem"));if(n&&n.dimensions)return n.dimensions[0]==="lng"&&n.dimensions[1]==="lat"},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}});yni=256;pni.prototype={update:function(n,t,i,r,u,f){var k=this._getBrush(),d=this._getGradient(n,u,"inRange"),g=this._getGradient(n,u,"outOfRange"),p=this.pointSize+this.blurSize,e=this.canvas,a=e.getContext("2d"),nt=n.length,v,o,c,l;for(e.width=t,e.height=i,v=0;v<nt;++v){var y=n[v],tt=y[0],it=y[1],rt=y[2],o=r(rt);a.globalAlpha=o;a.drawImage(k,tt-p,it-p)}if(!e.width||!e.height)return e;for(var w=a.getImageData(0,0,e.width,e.height),h=w.data,s=0,ut=h.length,b=this.minOpacity,ft=this.maxOpacity,et=ft-b;s<ut;)o=h[s+3]/256,c=Math.floor(o*(yni-1))*4,o>0?(l=f(o)?d:g,o>0&&(o=o*et+b),h[s++]=l[c],h[s++]=l[c+1],h[s++]=l[c+2],h[s++]=l[c+3]*o*256):s+=4;return a.putImageData(w,0,0),e},_getBrush:function(){var i=this._brushCanvas||(this._brushCanvas=rc()),r=this.pointSize+this.blurSize,t=r*2,n;return i.width=t,i.height=t,n=i.getContext("2d"),n.clearRect(0,0,t,t),n.shadowOffsetX=t,n.shadowBlur=this.blurSize,n.shadowColor="#000",n.beginPath(),n.arc(-r,r,this.pointSize,0,Math.PI*2,!0),n.closePath(),n.fill(),i},_getGradient:function(n,t,i){for(var o=this._gradientPixels,r=o[i]||(o[i]=new Uint8ClampedArray(1024)),u=[0,0,0,0],f=0,e=0;e<256;e++)t[i](e/255,!0,u),r[f++]=u[0],r[f++]=u[1],r[f++]=u[2],r[f++]=u[3];return r}};gr({type:"heatmap",render:function(n,t,i){var f,r;if(t.eachComponent("visualMap",function(t){t.eachTargetSeries(function(i){i===n&&(f=t)})}),u&&!f)throw new Error("Heatmap must use with visualMap");this.group.removeAll();this._incrementalDisplayable=null;r=n.coordinateSystem;r.type==="cartesian2d"||r.type==="calendar"?this._renderOnCartesianAndCalendar(n,i,0,n.getData().count()):bhu(r)&&this._renderOnGeo(r,n,f,i)},incrementalPrepareRender:function(){this.group.removeAll()},incrementalRender:function(n,t,i,r){var u=t.coordinateSystem;u&&this._renderOnCartesianAndCalendar(t,r,n.start,n.end,!0)},_renderOnCartesianAndCalendar:function(n,t,i,r,f){var c=n.coordinateSystem,b,k,v,y,s,h,g,a,w,nt;if(c.type==="cartesian2d"){if(v=c.getAxis("x"),y=c.getAxis("y"),u){if(!(v.type==="category"&&y.type==="category"))throw new Error("Heatmap on cartesian must have two category axes");if(!(v.onBand&&y.onBand))throw new Error("Heatmap on cartesian must have two axes with boundaryGap true");}b=v.getBandWidth();k=y.getBandWidth()}var ht=this.group,e=n.getData(),tt="itemStyle",it="emphasis.itemStyle",rt="label",ut="emphasis.label",d=n.getModel(tt).getItemStyle(["color"]),p=n.getModel(it).getItemStyle(),ft=n.getModel(rt),ot=n.getModel(ut),st=c.type,l=st==="cartesian2d"?[e.mapDimension("x"),e.mapDimension("y"),e.mapDimension("value")]:[e.mapDimension("time"),e.mapDimension("value")];for(s=i;s<r;s++){if(st==="cartesian2d"){if(isNaN(e.get(l[2],s)))continue;g=c.dataToPoint([e.get(l[0],s),e.get(l[1],s)]);h=new et({shape:{x:g[0]-b/2,y:g[1]-k/2,width:b,height:k},style:{fill:e.getItemVisual(s,"color"),opacity:e.getItemVisual(s,"opacity")}})}else{if(isNaN(e.get(l[1],s)))continue;h=new et({z2:1,shape:c.dataToRect([e.get(l[0],s)]).contentShape,style:{fill:e.getItemVisual(s,"color"),opacity:e.getItemVisual(s,"opacity")}})}a=e.getItemModel(s);e.hasItemOption&&(d=a.getModel(tt).getItemStyle(["color"]),p=a.getModel(it).getItemStyle(),ft=a.getModel(rt),ot=a.getModel(ut));w=n.getRawValue(s);nt="-";w&&w[2]!=null&&(nt=w[2]);du(d,p,ft,ot,{labelFetcher:n,labelDataIndex:s,defaultText:nt,isRectText:!0});h.setStyle(d);pt(h,e.hasItemOption?p:o({},p));h.incremental=f;f&&(h.useHoverLayer=!0);ht.add(h);e.setItemGraphicEl(s,h)}},_renderOnGeo:function(n,t,i,r){var h=i.targetVisuals.inRange,p=i.targetVisuals.outOfRange,e=t.getData(),f=this._hmLayer||this._hmLayer||new pni,u,c,y;f.blurSize=t.get("blurSize");f.pointSize=t.get("pointSize");f.minOpacity=t.get("minOpacity");f.maxOpacity=t.get("maxOpacity");u=n.getViewRect().clone();c=n.getRoamTransform();u.applyTransform(c);var o=Math.max(u.x,0),s=Math.max(u.y,0),w=Math.min(u.width+u.x,r.getWidth()),b=Math.min(u.height+u.y,r.getHeight()),l=w-o,a=b-s,k=[e.mapDimension("lng"),e.mapDimension("lat"),e.mapDimension("value")],d=e.mapArray(k,function(t,i,r){var u=n.dataToPoint([t,i]);return u[0]-=o,u[1]-=s,u.push(r),u}),v=i.getExtent(),g=i.type==="visualMap.continuous"?whu(v,i.option.range):phu(v,i.getPieceList(),i.option.selected);f.update(d,l,a,h.color.getNormalizer(),{inRange:h.color.getColorMapper(),outOfRange:p.color.getColorMapper()},g);y=new nr({style:{width:l,height:a,x:o,y:s,image:f.canvas},silent:!0});this.group.add(y)},dispose:function(){}});var khu=ept.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(n){return n.stack=null,khu.superApply(this,"getInitialData",arguments)}}),dhu=["itemStyle","borderWidth"],wni=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],kkt=new th,bku=gr({type:"pictorialBar",render:function(n,t,i){var e=this.group,r=n.getData(),o=this._data,s=n.coordinateSystem,c=s.getBaseAxis(),h=!!c.isHorizontal(),f=s.grid.getRect(),u={ecSize:{width:i.getWidth(),height:i.getHeight()},seriesModel:n,coordSys:s,coordSysExtent:[[f.x,f.x+f.width],[f.y,f.y+f.height]],isHorizontal:h,valueDim:wni[+h],categoryDim:wni[1-h]};return r.diff(o).add(function(n){if(r.hasValue(n)){var f=itr(r,n),i=bni(r,n,f,u),t=rtr(r,u,i);r.setItemGraphicEl(n,t);e.add(t);etr(t,u,i)}}).update(function(n,t){var i=o.getItemGraphicEl(t);if(!r.hasValue(n)){e.remove(i);return}var s=itr(r,n),f=bni(r,n,s,u),h=ftr(r,f);i&&h!==i.__pictorialShapeStr&&(e.remove(i),r.setItemGraphicEl(n,null),i=null);i?fcu(i,u,f):i=rtr(r,u,f,!0);r.setItemGraphicEl(n,i);i.__pictorialSymbolMeta=f;e.add(i);etr(i,u,f)}).remove(function(n){var t=o.getItemGraphicEl(n);t&&utr(o,n,t.__pictorialSymbolMeta.animationModel,t)}).execute(),this._data=r,this.group},dispose:di,remove:function(n){var i=this.group,t=this._data;n.get("animation")?t&&t.eachItemGraphicEl(function(i){utr(t,i.dataIndex,n,i)}):i.removeAll()}});gt(y(cai,"pictorialBar"));yt(ol("pictorialBar","roundRect"));wk=function(n,t,i,r,u){fi.call(this,n,t,i);this.type=r||"value";this.position=u||"bottom";this.orient=null};wk.prototype={constructor:wk,model:null,isHorizontal:function(){var n=this.position;return n==="top"||n==="bottom"},pointToData:function(n,t){return this.coordinateSystem.pointToData(n,t)[0]},toGlobalCoord:null,toLocalCoord:null};ct(wk,fi);yft.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:yft,_init:function(n){var i=this.dimension,t=new wk(i,ty(n),[0,0],n.get("type"),n.get("position")),r=t.type==="category";t.onBand=r&&n.get("boundaryGap");t.inverse=n.get("inverse");t.orient=n.get("orient");n.axis=t;t.model=n;t.coordinateSystem=this;this._axis=t},update:function(n){n.eachSeries(function(n){if(n.coordinateSystem===this){var i=n.getData();t(i.mapDimension(this.dimension,!0),function(n){this._axis.scale.unionExtentFromData(i,n)},this);sh(this._axis.scale,this._axis.model)}},this)},resize:function(n,t){this._rect=li({left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")},{width:t.getWidth(),height:t.getHeight()});this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var n=this._rect,t=this._axis,i=t.isHorizontal(),r=i?[0,n.width]:[0,n.height],u=t.reverse?1:0;t.setExtent(r[u],r[1-u]);this._updateAxisTransform(t,i?n.x:n.y)},_updateAxisTransform:function(n,t){var i=n.getExtent(),r=i[0]+i[1],u=n.isHorizontal();n.toGlobalCoord=u?function(n){return n+t}:function(n){return r-n+t};n.toLocalCoord=u?function(n){return n-t}:function(n){return r-n+t}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(n){var t=this.getRect(),i=this.getAxis(),r=i.orient;return r==="horizontal"?i.contain(i.toLocalCoord(n[0]))&&n[1]>=t.y&&n[1]<=t.y+t.height:i.contain(i.toLocalCoord(n[1]))&&n[0]>=t.y&&n[0]<=t.y+t.height},pointToData:function(n){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(n[t.orient==="horizontal"?0:1]))]},dataToPoint:function(n){var i=this.getAxis(),t=this.getRect(),r=[],u=i.orient==="horizontal"?0:1;return n instanceof Array&&(n=n[0]),r[u]=i.toGlobalCoord(i.dataToCoord(+n)),r[1-u]=u===0?t.y+t.height/2:t.x+t.width/2,r}};ir.register("single",{create:ecu,dimensions:yft.prototype.dimensions});var ocu=["axisLine","axisTickLabel","axisName"],str="splitLine",scu=nu.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(n,i,r,u){var e=this.group,o,f;e.removeAll();o=ndt(n);f=new kf(n,o);t(ocu,f.add,f);e.add(f.getGroup());n.get(str+".show")&&this["_"+str](n);scu.superCall(this,"render",n,i,r,u)},_splitLine:function(n){var s=n.axis,o,h,t;if(!s.scale.isBlank()){var a=n.getModel("splitLine"),c=a.getModel("lineStyle"),l=c.get("width"),i=c.get("color");i=i instanceof Array?i:[i];var r=n.coordinateSystem.getRect(),y=s.isHorizontal(),e=[],p=0,v=s.getTicksCoords({tickModel:a}),u=[],f=[];for(t=0;t<v.length;++t)o=s.toGlobalCoord(v[t].coord),y?(u[0]=o,u[1]=r.y,f[0]=o,f[1]=r.y+r.height):(u[0]=r.x,u[1]=o,f[0]=r.x+r.width,f[1]=o),h=p++%i.length,e[h]=e[h]||[],e[h].push(new uu(vc({shape:{x1:u[0],y1:u[1],x2:f[0],y2:f[1]},style:{lineWidth:l},silent:!0})));for(t=0;t<e.length;++t)this.group.add(le(e[t],{style:{stroke:i[t%i.length],lineDash:c.getLineDash(l),lineWidth:l},silent:!0}))}}}),htr=it.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});v(htr.prototype,ul);uy("single",htr,hcu,{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:2,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:2}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var ctr=function(n,t){var c=[],l=n.seriesIndex,e,o,u,s,h,f;return l==null||!(e=t.getSeriesByIndex(l))?{point:[]}:(o=e.getData(),u=on(o,n),u==null||u<0||i(u))?{point:[]}:(s=o.getItemGraphicEl(u),h=e.coordinateSystem,e.getTooltipPosition?c=e.getTooltipPosition(u)||[]:h&&h.dataToPoint?c=h.dataToPoint(o.getValues(r(h.dimensions,function(n){return o.mapDimension(n)}),u,!0))||[]:s&&(f=s.getBoundingRect().clone(),f.applyTransform(s.transform),c=[f.x+f.width/2,f.y+f.height/2]),{point:c,el:s})},ke=t,ltr=y,atr=pr(),ccu=function(n,t,i){var w=n.currTrigger,r=[n.x,n.y],s=n,c=n.dispatchAction||l(i.dispatchAction,i),u=t.getComponent("axisPointer").coordSysAxesInfo,h;if(u){pft(r)&&(r=ctr({seriesIndex:s.seriesIndex,dataIndex:s.dataIndex},t).point);var a=pft(r),v=s.axesInfo,f=u.axesInfo,b=w==="leave"||pft(r),e={},o={},y={list:[],map:{}},p={showPointer:ltr(acu,o),showTooltip:ltr(vcu,y)};return ke(u.coordSysMap,function(n,t){var i=a||n.containPoint(r);ke(u.coordSysAxesInfo[t],function(n){var f=n.axis,u=bcu(v,n),t;!b&&i&&(!v||u)&&(t=u&&u.value,t!=null||a||(t=f.pointToData(r)),t!=null&&vtr(n,t,p,!1,e))})}),h={},ke(f,function(n,t){var i=n.linkGroup;i&&!o[t]&&ke(i.axesInfo,function(t,r){var f=o[r],u;t!==n&&f&&(u=f.value,i.mapper&&(u=n.axis.scale.parse(i.mapper(u,ytr(t),ytr(n)))),h[n.key]=u)})}),ke(h,function(n,t){vtr(f[t],n,p,!0,e)}),ycu(o,f,e),pcu(y,r,n,c),wcu(f,c,i),e}};var kku=hu({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}}),us=pr(),kcu=t;var btr=wi({type:"axisPointer",render:function(n,t,i){var r=t.getComponent("tooltip"),u=n.get("triggerOn")||r&&r.get("triggerOn")||"mousemove|click";ptr("axisPointer",i,function(n,t,i){u!=="none"&&(n==="leave"||u.indexOf(n)>=0)&&i({type:"updateAxisPointer",currTrigger:n,x:t&&t.offsetX,y:t&&t.offsetY})})},remove:function(n,t){tdt(t.getZr(),"axisPointer");btr.superApply(this._model,"remove",arguments)},dispose:function(n,t){tdt("axisPointer",t);btr.superApply(this._model,"dispose",arguments)}}),kl=pr(),ktr=c,idt=l;dl.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(n,t,i,r){var s=t.get("value"),h=t.get("status"),u,o,f,c,a,l;if(this._axisModel=n,this._axisPointerModel=t,this._api=i,r||this._lastValue!==s||this._lastStatus!==h){if(this._lastValue=s,this._lastStatus=h,u=this._group,o=this._handle,!h||h==="hide"){u&&u.hide();o&&o.hide();return}u&&u.show();o&&o.show();f={};this.makeElOption(f,s,n,t,i);c=f.graphicKey;c!==this._lastGraphicKey&&this.clear(i);this._lastGraphicKey=c;a=this._moveAnimation=this.determineAnimation(n,t);u?(l=y(dtr,t,a),this.updatePointerEl(u,f,l,t),this.updateLabelEl(u,f,l,t)):(u=this._group=new e,this.createPointerEl(u,f,n,t),this.createLabelEl(u,f,n,t),i.getZr().add(u));tir(u,t,!0);this._renderHandle(s)}},remove:function(n){this.clear(n)},dispose:function(n){this.clear(n)},determineAnimation:function(n,t){var i=t.get("animation"),r=n.axis,e=r.type==="category",o=t.get("snap"),u,s,f;return!o&&!e?!1:i==="auto"||i==null?(u=this.animationThreshold,e&&r.getBandWidth()>u)?!0:o?(s=ipt(n).seriesDataCount,f=r.getExtent(),Math.abs(f[0]-f[1])/s>u):!1:i===!0},makeElOption:function(){},createPointerEl:function(n,t){var i=t.pointer,r;i&&(r=kl(n).pointerEl=new vf[i.type](ktr(t.pointer)),n.add(r))},createLabelEl:function(n,t,i,r){if(t.label){var u=kl(n).labelEl=new et(ktr(t.label));n.add(u);nir(u,r)}},updatePointerEl:function(n,t,i){var r=kl(n).pointerEl;r&&(r.setStyle(t.pointer.style),i(r,{shape:t.pointer.shape}))},updateLabelEl:function(n,t,i,r){var u=kl(n).labelEl;u&&(u.setStyle(t.label.style),i(u,{shape:t.label.shape,position:t.label.position}),nir(u,r))},_renderHandle:function(n){var s,h,r;if(!this._dragging&&this.updateHandleTransform){var f=this._axisPointerModel,e=this._api.getZr(),t=this._handle,u=f.getModel("handle"),o=f.get("status");if(!u.get("show")||!o||o==="hide"){t&&e.remove(t);this._handle=null;return}this._handle||(s=!0,t=this._handle=lw(u.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(n){te(n.event)},onmousedown:idt(this._onHandleDragMove,this,0,0),drift:idt(this._onHandleDragMove,this),ondragend:idt(this._onHandleDragEnd,this)}),e.add(t));tir(t,f,!1);h=["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];t.setStyle(u.getItemStyle(null,h));r=u.get("size");i(r)||(r=[r,r]);t.attr("scale",[r[0]/2,r[1]/2]);nb(this,"_doDispatchAxisPointer",u.get("throttle")||0,"fixRate");this._moveHandleToValue(n,s)}},_moveHandleToValue:function(n,t){dtr(this._axisPointerModel,!t&&this._moveAnimation,this._handle,rdt(this.getHandleTransform(n,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(n,t){var i=this._handle,r;i&&(this._dragging=!0,r=this.updateHandleTransform(rdt(i),[n,t],this._axisModel,this._axisPointerModel),this._payloadInfo=r,i.stopAnimation(),i.attr(rdt(r)),kl(i).lastProp=null,this._doDispatchAxisPointer())},_doDispatchAxisPointer:function(){var i=this._handle,n,t;i&&(n=this._payloadInfo,t=this._axisModel,this._api.dispatchAction({type:"updateAxisPointer",x:n.cursorPoint[0],y:n.cursorPoint[1],tooltipOption:n.tooltipOption,axesInfo:[{axisDim:t.axis.dim,axisIndex:t.componentIndex}]}))},_onHandleDragEnd:function(){var n,t;(this._dragging=!1,n=this._handle,n)&&(t=this._axisPointerModel.get("value"),this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"}))},getHandleTransform:null,updateHandleTransform:null,clear:function(n){this._lastValue=null;this._lastStatus=null;var t=n.getZr(),i=this._group,r=this._handle;t&&i&&(this._lastGraphicKey=null,i&&t.remove(i),r&&t.remove(r),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(n,t,i){return i=i||0,{x:n[i],y:n[1-i],width:t[i],height:t[1-i]}}};dl.prototype.constructor=dl;ew(dl);oir=dl.extend({makeElOption:function(n,t,i,r,u){var f=i.axis,h=f.grid,o=r.get("type"),l=sir(h,f).getOtherAxis(f).getGlobalExtent(),a=f.toGlobalCoord(f.dataToCoord(t,!0)),s,e,c;o&&o!=="none"&&(s=udt(r),e=hir[o](f,a,l,s),e.style=s,n.graphicKey=e.type,n.pointer=e);c=upt(h.model,i);uir(t,n,c,i,r,u)},getHandleTransform:function(n,t,i){var r=upt(t.axis.grid.model,t,{labelInside:!1});return r.labelMargin=i.get("handle.margin"),{position:fdt(t.axis,n,r),rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(n,t,i){var f=i.axis,l=f.grid,s=f.getGlobalExtent(!0),h=sir(l,f).getOtherAxis(f).getGlobalExtent(),r=f.dim==="x"?0:1,u=n.position,e,o,c;return u[r]+=t[r],u[r]=Math.min(s[1],u[r]),u[r]=Math.max(s[0],u[r]),e=(h[1]+h[0])/2,o=[e,e],o[r]=u[r],c=[{verticalAlign:"middle"},{align:"center"}],{position:u,rotation:n.rotation,cursorPoint:o,tooltipOption:c[r]}}});hir={line:function(n,t,i,r){var u=edt([t,i[0]],[t,i[1]],cir(n));return vc({shape:u,style:r}),{type:"Line",shape:u}},shadow:function(n,t,i){var r=Math.max(1,n.getBandWidth()),u=i[1]-i[0];return{type:"Rect",shape:fir([t-r/2,i[0]],[r,u],cir(n))}}};nu.registerAxisPointerClass("CartesianAxisPointer",oir);ur(function(n){if(n){n.axisPointer&&n.axisPointer.length!==0||(n.axisPointer={});var t=n.axisPointer.link;t&&!i(t)&&(n.axisPointer.link=[t])}});su(kv.PROCESSOR.STATISTIC,function(n,t){n.getComponent("axisPointer").coordSysAxesInfo=atu(n,t)});rt({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},ccu);var lir=["x","y"],rlu=["width","height"],ulu=dl.extend({makeElOption:function(n,t,i,r,u){var e=i.axis,h=e.coordinateSystem,l=odt(h,1-wft(e)),a=h.dataToPoint(t)[0],o=r.get("type"),s,f,c;o&&o!=="none"&&(s=udt(r),f=flu[o](e,a,l,s),f.style=s,n.graphicKey=f.type,n.pointer=f);c=ndt(i);uir(t,n,c,i,r,u)},getHandleTransform:function(n,t,i){var r=ndt(t,{labelInside:!1});return r.labelMargin=i.get("handle.margin"),{position:fdt(t.axis,n,r),rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(n,t,i){var f=i.axis,e=f.coordinateSystem,r=wft(f),o=odt(e,r),u=n.position;u[r]+=t[r];u[r]=Math.min(o[1],u[r]);u[r]=Math.max(o[0],u[r]);var s=odt(e,1-r),h=(s[1]+s[0])/2,c=[h,h];return c[r]=u[r],{position:u,rotation:n.rotation,cursorPoint:c,tooltipOption:{verticalAlign:"middle"}}}}),flu={line:function(n,t,i,r){var u=edt([t,i[0]],[t,i[1]],wft(n));return vc({shape:u,style:r}),{type:"Line",shape:u}},shadow:function(n,t,i){var r=n.getBandWidth(),u=i[1]-i[0];return{type:"Rect",shape:fir([t-r/2,i[0]],[r,u],wft(n))}}};nu.registerAxisPointerClass("SingleAxisPointer",ulu);wi({type:"single"});bft=2;air=wt.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(){air.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()}},fixData:function(n){for(var c,t,a,o,f,p,u=n.length,w=fkt().key(function(n){return n[2]}).entries(n),i=r(w,function(n){return{name:n.key,dataList:n.values}}),l=i.length,s=-1,h=-1,e=0;e<l;++e)c=i[e].dataList.length,c>s&&(s=c,h=e);for(t=0;t<l;++t)if(t!==h)for(a=i[t].name,o=0;o<s;++o){var v=i[h].dataList[o][0],b=i[t].dataList.length,y=-1;for(f=0;f<b;++f)if(p=i[t].dataList[f][0],p===v){y=f;break}y===-1&&(n[u]=[],n[u][0]=v,n[u][1]=0,n[u][2]=a,u++)}return n},getInitialData:function(n,t){for(var o,u,s=t.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0],h=s.get("type"),c=hi(n.data,function(n){return n[2]!==undefined}),i=this.fixData(c||[]),l=[],f=this.nameMap=p(),e=0,r=0;r<i.length;++r)l.push(i[r][bft]),f.get(i[r][bft])||(f.set(i[r][bft],e),e++);return o=rl(i,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:irt(h)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),u=new ai(o,this),u.initData(i),u},getLayerSeries:function(){function h(t,i){return n.get(e,t)-n.get(e,i)}for(var i,n=this.getData(),o=n.count(),f=[],t=0;t<o;++t)f[t]=t;var s=fkt().key(function(t){return n.get("name",t)}).entries(f),u=r(s,function(n){return{name:n.key,indices:n.values}}),e=n.mapDimension("single");for(i=0;i<u.length;++i)u[i].indices.sort(h);return u},getAxisTooltipData:function(n,t){var r,u,e,o;i(n)||(n=n?[n]:[]);var a=this.getData(),f=this.getLayerSeries(),s=[],v=f.length,h;for(r=0;r<v;++r){var c=Number.MAX_VALUE,l=-1,y=f[r].indices.length;for(u=0;u<y;++u)e=a.get(n[0],f[r].indices[u]),o=Math.abs(e-t),o<=c&&(h=e,c=o,l=f[r].indices[u]);s.push(l)}return{dataIndices:s,nestestValue:h}},formatTooltip:function(n){var i=this.getData(),r=i.getName(n),t=i.get(i.mapDimension("value"),n);return(isNaN(t)||t==null)&&(t="-"),dt(r+" : "+t)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}});gr({type:"themeRiver",init:function(){this._layers=[]},render:function(n){function h(n){return n.name}function f(f,s,h){var it=this._layers,a,l,ot,st;if(f==="remove"){i.remove(it[s]);return}var b=[],d=[],rt,v=u[s].indices;for(a=0;a<v.length;a++){var g=t.getItemLayout(v[a]),ut=g.x,ft=g.y0,ht=g.y;b.push([ut,ft]);d.push([ut,ft+ht]);rt=t.getItemVisual(v[a],"color")}var c,p,y=t.getItemLayout(v[0]),nt=t.getItemModel(v[a-1]),tt=nt.getModel("label"),et=tt.get("margin");f==="add"?(l=r[s]=new e,c=new wyt({shape:{points:b,stackedOnPoints:d,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),p=new k({style:{x:y.x-et,y:y.y0+y.y/2}}),l.add(c),l.add(p),i.add(l),c.setClipPath(elu(c.getBoundingRect(),n,function(){c.removeClipPath()}))):(l=it[h],c=l.childAt(0),p=l.childAt(1),i.add(l),r[s]=l,w(c,{shape:{points:b,stackedOnPoints:d}},n),w(p,{style:{x:y.x-et,y:y.y0+y.y/2}},n));ot=nt.getModel("emphasis.itemStyle");st=nt.getModel("itemStyle");ii(p.style,tt,{text:tt.get("show")?n.getFormattedLabel(v[a-1],"normal")||t.getName(v[a-1]):null,textVerticalAlign:"middle"});c.setStyle(o({fill:rt},st.getItemStyle(["color"])));pt(c,ot.getItemStyle())}var t=n.getData(),i=this.group,u=n.getLayerSeries(),s=t.getLayout("layoutInfo"),a=s.rect,v=s.boundaryGap,c,r;i.attr("position",[0,a.y+v[0]]);c=new vo(this._layersSeries||[],u,h,h);r={};c.add(l(f,this,"add")).update(l(f,this,"update")).remove(l(f,this,"remove")).execute();this._layersSeries=u;this._layers=r},dispose:function(){}});vir=function(n){n.eachSeriesByType("themeRiver",function(n){var r=n.getData(),e=n.coordinateSystem,u={},i=e.getRect(),t,o,s,h;u.rect=i;t=n.get("boundaryGap");o=e.getAxis();u.boundaryGap=t;o.orient==="horizontal"?(t[0]=f(t[0],i.height),t[1]=f(t[1],i.height),s=i.height-t[0]-t[1],yir(r,n,s)):(t[0]=f(t[0],i.width),t[1]=f(t[1],i.width),h=i.width-t[0]-t[1],yir(r,n,h));r.setLayout("layoutInfo",u)})};pir=function(n){n.eachSeriesByType("themeRiver",function(n){var t=n.getData(),i=n.getRawData(),r=n.get("color"),u=p();t.each(function(n){u.set(t.getRawIndex(n),n)});i.each(function(f){var s=i.getName(f),o=r[(n.nameMap.get(s)-1)%r.length],e;i.setItemVisual(f,"color",o);e=u.get(f);e!=null&&t.setItemVisual(e,"color",o)})})};gt(vir);yt(pir);su(wb("themeRiver"));wt.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(n){var i={name:n.name,children:n.data},r,t;return wir(i),r=n.levels||[],t={},t.levels=r,ll.createTree(i,this,t).data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(n){var t=wt.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(n);return t.treePathInfo=fwt(i,this),t},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0,emphasis:{}},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1,emphasis:{},highlight:{opacity:1},downplay:{opacity:.9}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(n){n?this._viewRoot=n:n=this._viewRoot;var t=this.getRawData().tree.root;n&&(n===t||t.contains(n))||(this._viewRoot=t)}});var kft={NONE:"none",DESCENDANT:"descendant",ANCESTOR:"ancestor",SELF:"self"},slu=2,hlu=4;kh=dft.prototype;kh.updateData=function(n,t,i,r,u){var f,l,h,c,a,y,e,b,p,k;this.node=t;t.piece=this;r=r||this._seriesModel;u=u||this._ecModel;f=this.childAt(0);f.dataIndex=t.dataIndex;l=t.getModel();h=t.getLayout();h||console.log(t.getLayout());c=o({},h);c.label=null;a=clu(t,r,u);y=l.getModel("itemStyle").getItemStyle();i==="normal"?e=y:(b=l.getModel(i+".itemStyle").getItemStyle(),e=v(b,y));e=s({lineJoin:"bevel",fill:e.fill||a},e);n?(f.setShape(c),f.shape.r=h.r0,w(f,{shape:{r:h.r}},r,t.dataIndex),f.useStyle(e)):typeof e.fill=="object"&&e.fill.type||typeof f.style.fill=="object"&&f.style.fill.type?(w(f,{shape:c},r),f.useStyle(e)):w(f,{shape:c,style:e},r);this._updateLabel(r,a,i);p=l.getShallow("cursor");p&&f.attr("cursor",p);n&&(k=r.getShallow("highlightPolicy"),this._initEvents(f,t,r,k));this._seriesModel=r||this._seriesModel;this._ecModel=u||this._ecModel};kh.onEmphasis=function(n){var t=this;this.node.hostTree.root.eachNode(function(i){i.piece&&(t.node===i?i.piece.updateData(!1,i,"emphasis"):alu(i,t.node,n)?i.piece.childAt(0).trigger("highlight"):n!==kft.NONE&&i.piece.childAt(0).trigger("downplay"))})};kh.onNormal=function(){this.node.hostTree.root.eachNode(function(n){n.piece&&n.piece.updateData(!1,n,"normal")})};kh.onHighlight=function(){this.updateData(!1,this.node,"highlight")};kh.onDownplay=function(){this.updateData(!1,this.node,"downplay")};kh._updateLabel=function(n,t,i){function s(n){var t=p.get(n);return t==null?a.get(n):t}var y=this.node.getModel(),a=y.getModel("label"),p=i==="normal"||i==="emphasis"?a:y.getModel(i+".label"),g=y.getModel("emphasis.label"),v=kt(n.getFormattedLabel(this.node.dataIndex,"normal",null,null,"label"),this.node.name),r,e,b,h,k,d,l,u;s("show")===!1&&(v="");r=this.node.getLayout();e=p.get("minAngle");e==null&&(e=a.get("minAngle"));e=e/180*Math.PI;b=r.endAngle-r.startAngle;e!=null&&Math.abs(b)<e&&(v="");h=this.childAt(1);du(h.style,h.hoverStyle||{},a,g,{defaultText:p.getShallow("show")?v:null,autoColor:t,useInsideStyle:!0});var o=(r.startAngle+r.endAngle)/2,nt=Math.cos(o),tt=Math.sin(o),c,it=s("position"),w=s("distance")||0,f=s("align");it==="outside"?(c=r.r+w,f=o>Math.PI/2?"right":"left"):f&&f!=="center"?f==="left"?(c=r.r0+w,o>Math.PI/2&&(f="right")):f==="right"&&(c=r.r-w,o>Math.PI/2&&(f="left")):(c=(r.r+r.r0)/2,f="center");h.attr("style",{text:v,textAlign:f,textVerticalAlign:s("verticalAlign")||"middle",opacity:s("opacity")});k=c*nt+r.cx;d=c*tt+r.cy;h.attr("position",[k,d]);l=s("rotate");u=0;l==="radial"?(u=-o,u<-Math.PI/2&&(u+=Math.PI)):l==="tangential"?(u=Math.PI/2-o,u>Math.PI/2?u-=Math.PI:u<-Math.PI/2&&(u+=Math.PI)):typeof l=="number"&&(u=l*Math.PI/180);h.attr("rotation",u)};kh._initEvents=function(n,t,i,r){n.off("mouseover").off("mouseout").off("emphasis").off("normal");var u=this,f=function(){u.onEmphasis(r)},e=function(){u.onNormal()},o=function(){u.onDownplay()},s=function(){u.onHighlight()};if(i.isAnimationEnabled())n.on("mouseover",f).on("mouseout",e).on("emphasis",f).on("normal",e).on("downplay",o).on("highlight",s)};ct(dft,e);var vlu="sunburstRootToNode",dku=yi.extend({type:"sunburst",init:function(){},render:function(n,t,i,r){function p(n,t){function r(n){return n.getId()}function i(i,r){var u=i==null?null:n[i],f=r==null?null:t[r];w(u,f)}(n.length!==0||t.length!==0)&&new vo(t,n,r,r).add(i).update(i).remove(y(i,null)).execute()}function w(i,r){if(v||!i||i.getValue()||(i=null),i!==f&&r!==f)if(r&&r.piece)i?(r.piece.updateData(!1,i,"normal",n,t),s.setItemGraphicEl(i.dataIndex,r.piece)):b(r);else if(i){var u=new dft(i,n,t);o.add(u);s.setItemGraphicEl(i.dataIndex,u)}}function b(n){n&&n.piece&&(o.remove(n.piece),n.piece=null)}function k(i,r){if(r.depth>0){u.virtualPiece?u.virtualPiece.updateData(!1,i,"normal",n,t):(u.virtualPiece=new dft(i,n,t),o.add(u.virtualPiece));r.piece._onclickEvent&&r.piece.off("click",r.piece._onclickEvent);var f=function(){u._rootToNode(r.parentNode)};r.piece._onclickEvent=f;u.virtualPiece.on("click",f)}else u.virtualPiece&&(o.remove(u.virtualPiece),u.virtualPiece=null)}var u=this,l,a,e;this.seriesModel=n;this.api=i;this.ecModel=t;var s=n.getData(),f=s.tree.root,c=n.getViewRoot(),o=this.group,v=n.get("renderLabelForZeroData"),h=[];if(c.eachNode(function(n){h.push(n)}),l=this._oldChildren||[],p(h,l),k(f,c),r&&r.highlight&&r.highlight.piece){a=n.getShallow("highlightPolicy");r.highlight.piece.onEmphasis(a)}else r&&r.unhighlight&&(e=this.virtualPiece,!e&&f.children.length&&(e=f.children[0].piece),e&&e.onNormal());this._initEvents();this._oldChildren=h},dispose:function(){},_initEvents:function(){var n=this,t=function(t){var i=!1,r=n.seriesModel.getViewRoot();r.eachNode(function(r){var u,f,e,o;!i&&r.piece&&r.piece.childAt(0)===t.target&&(u=r.getModel().get("nodeClick"),u==="rootToNode"?n._rootToNode(r):u==="link"&&(f=r.getModel(),e=f.get("link"),e&&(o=f.get("target",!0)||"_blank",window.open(e,o))),i=!0)})};this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent);this.group.on("click",t);this.group._onclickEvent=t},_rootToNode:function(n){n!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:vlu,from:this.uid,seriesId:this.seriesModel.id,targetNode:n})},containPoint:function(n,t){var e=t.getData(),i=e.getItemLayout(0);if(i){var r=n[0]-i.cx,u=n[1]-i.cy,f=Math.sqrt(r*r+u*u);return f<=i.r&&f>=i.r0}}}),bir="sunburstRootToNode";rt({type:bir,update:"updateView"},function(n,t){function i(t){var i=tk(n,[bir],t),r;i&&(r=t.getViewRoot(),r&&(n.direction=uwt(r,i.node)?"rollUp":"drillDown"),t.resetViewRoot(i.node))}t.eachComponent({mainType:"series",subType:"sunburst",query:n},i)});sdt="sunburstHighlight";rt({type:sdt,update:"updateView"},function(n,t){function i(t){var i=tk(n,[sdt],t);i&&(n.highlight=i.node)}t.eachComponent({mainType:"series",subType:"sunburst",query:n},i)});kir="sunburstUnhighlight";rt({type:kir,update:"updateView"},function(n,t){function i(){n.unhighlight=!0}t.eachComponent({mainType:"series",subType:"sunburst",query:n},i)});hdt=Math.PI/180;dir=function(n,r,u){r.eachSeriesByType(n,function(n){var e=n.get("center"),o=n.get("radius"),l;i(o)||(o=[0,o]);i(e)||(e=[e,e]);var p=u.getWidth(),w=u.getHeight(),h=Math.min(p,w),b=f(e[0],p),k=f(e[1],w),s=f(o[0],h/2),ft=f(o[1],h/2),c=-n.get("startAngle")*hdt,d=n.get("minAngle")*hdt,g=n.getData().tree.root,r=n.getViewRoot(),et=r.depth,nt=n.get("sort");nt!=null&&gir(r,nt);l=0;t(r.children,function(n){isNaN(n.getValue())||l++});var tt=r.getValue(),it=Math.PI/(tt||l)*2,a=r.depth>0,ot=r.height-(a?-1:1),v=(ft-s)/(ot||1),y=n.get("clockwise"),st=n.get("stillShowZeroSum"),ht=y?1:-1,rt=function(n,i){var u,c,r,o;if(n){if(u=i,n!==g){c=n.getValue();r=tt===0&&st?it:c*it;r<d&&(r=d);u=i+ht*r;var l=n.depth-et-(a?-1:1),p=s+v*l,w=s+v*(l+1),e=n.getModel();e.get("r0")!=null&&(p=f(e.get("r0"),h/2));e.get("r")!=null&&(w=f(e.get("r"),h/2));n.setLayout({angle:r,startAngle:i,endAngle:u,clockwise:y,cx:b,cy:k,r0:p,r:w})}return n.children&&n.children.length&&(o=0,t(n.children,function(n){o+=rt(n,i+o)})),u-i}};if(a){var ct=s,lt=s+v,ut=Math.PI*2;g.setLayout({angle:ut,startAngle:c,endAngle:c+ut,clockwise:y,cx:b,cy:k,r0:ct,r:lt})}rt(r,c)})};yt(y(rut,"sunburst"));gt(y(dir,"sunburst"));su(y(wb,"sunburst"));nrr=function(n){var t=n.grid.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return n.dataToPoint(t)},size:l(plu,n)}}};trr=function(n){var t=n.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:n.getZoom()},api:{coord:function(t){return n.dataToPoint(t)},size:l(wlu,n)}}};irr=function(n){var t=n.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return n.dataToPoint(t)},size:l(blu,n)}}};var dlu=function(n){var i=n.getRadiusAxis(),r=n.getAngleAxis(),t=i.getExtent();return t[0]>t[1]&&t.reverse(),{coordSys:{type:"polar",cx:n.cx,cy:n.cy,r:t[1],r0:t[0]},api:{coord:l(function(t){var u=i.dataToRadius(t[0]),f=r.dataToAngle(t[1]),e=n.coordToPoint([u,f]);return e.push(u,f*Math.PI/180),e}),size:l(klu,n)}}},glu=function(n){var t=n.getRect(),i=n.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:n.getCellWidth(),cellHeight:n.getCellHeight(),rangeInfo:{start:i.start,end:i.end,weeks:i.weeks,dayCount:i.allDay}},api:{coord:function(t,i){return n.dataToPoint(t,i)}}}},nau=["itemStyle"],tau=["emphasis","itemStyle"],iau=["label"],rau=["emphasis","label"],uau='e\0\0',rrr={cartesian2d:nrr,geo:trr,singleAxis:irr,polar:dlu,calendar:glu};wt.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0},getInitialData:function(){return po(this.getSource(),this)},getDataParams:function(n,t,i){var r=wt.prototype.getDataParams.apply(this,arguments);return i&&(r.info=i.info),r}});yi.extend({type:"custom",_data:null,render:function(n,t,i,r){var f=this._data,u=n.getData(),e=this.group,o=frr(n,u,t,i);u.diff(f).add(function(t){cdt(null,t,o(t,r),n,e,u)}).update(function(t,i){var s=f.getItemGraphicEl(i);cdt(s,t,o(t,r),n,e,u)}).remove(function(n){var t=f.getItemGraphicEl(n);t&&e.remove(t)}).execute();this._data=u},incrementalPrepareRender:function(){this.group.removeAll();this._data=null},incrementalRender:function(n,t,i,r,u){function h(n){n.isGroup||(n.incremental=!0,n.useHoverLayer=!0)}for(var o,e=t.getData(),s=frr(t,e,i,r),f=n.start;f<n.end;f++)o=cdt(null,f,s(f,u),t,this.group,e),o.traverse(h)},dispose:di,filterForExposedEvent:function(n,t,i){var r=t.element;if(r==null||i.name===r)return!0;while((i=i.parent)&&i!==this.group)if(i.name===r)return!0;return!1}});ur(function(n){var t=n.graphic;i(t)?n.graphic=t[0]&&t[0].elements?[n.graphic[0]]:[{elements:t}]:t&&!t.elements&&(n.graphic=[{elements:[t]}])});crr=hu({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(){var n=this.option.elements;this.option.elements=null;crr.superApply(this,"mergeOption",arguments);this.option.elements=n},optionUpdated:function(n,i){var e=this.option,c=(i?e:n).elements,r=e.elements=i?[]:e.elements,s=[],o,h,f;for(this._flatten(c,s),o=lct(r,s),ifi(o),h=this._elOptionsToUpdate=[],t(o,function(n,t){var i=n.option;(u&&g(a(i)||n.exist,"Empty graphic option definition"),i)&&(h.push(i),vau(n,i),yau(r,t,i),pau(r[t],i))},this),f=r.length-1;f>=0;f--)r[f]==null?r.splice(f,1):delete r[f].$action},_flatten:function(n,i,r){t(n,function(n){if(n){r&&(n.parentOption=r);i.push(n);var t=n.children;n.type==="group"&&t&&this._flatten(t,i,n);delete n.children}},this)},useElOptionsToUpdate:function(){var n=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,n}});wi({type:"graphic",init:function(){this._elMap=p();this._lastGraphicModel},render:function(n,t,i){n!==this._lastGraphicModel&&this._clear();this._lastGraphicModel=n;this._updateElements(n);this._relocate(n,i)},_updateElements:function(n){var r=n.useElOptionsToUpdate(),i,f;r&&(i=this._elMap,f=this.group,t(r,function(t){var s=t.$action,h=t.id,e=i.get(h),a=t.parentId,l=a!=null?i.get(a):f,r=t.style,c,o;t.type==="text"&&r&&(t.hv&&t.hv[1]&&(r.textVerticalAlign=r.textBaseline=null),!r.hasOwnProperty("textFill")&&r.fill&&(r.textFill=r.fill),!r.hasOwnProperty("textStroke")&&r.stroke&&(r.textStroke=r.stroke));c=aau(t);u&&e&&g(l===e.parent,"Changing parent is not supported.");s&&s!=="merge"?s==="replace"?(gft(e,i),lrr(h,l,c,i)):s==="remove"&&gft(e,i):e?e.attr(c):lrr(h,l,c,i);o=i.get(h);o&&(o.__ecGraphicWidth=t.width,o.__ecGraphicHeight=t.height,wau(o,n,t))}))},_relocate:function(n,t){for(var i,r,u,o,e=n.option.elements,s=this.group,h=this._elMap,f=e.length-1;f>=0;f--)(i=e[f],r=h.get(i.id),r)&&(u=r.parent,o=u===s?{width:t.getWidth(),height:t.getHeight()}:{width:u.__ecGraphicWidth||0,height:u.__ecGraphicHeight||0},vtt(r,i,o,null,{hv:i.hv,boundingMode:i.bounding}))},_clear:function(){var n=this._elMap;n.each(function(t){gft(t,n)});this._elMap=p()},dispose:function(){this._clear()}});adt=hu({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(n,t,i){this.mergeDefaultAndTheme(n,i);n.selected=n.selected||{}},mergeOption:function(n){adt.superCall(this,"mergeOption",n)},optionUpdated:function(){var n,i,t,r;if(this._updateData(this.ecModel),n=this._data,n[0]&&this.get("selectedMode")==="single"){for(i=!1,t=0;t<n.length;t++)if(r=n[t].get("name"),this.isSelected(r)){this.select(r);i=!0;break}i||this.select(n[0].get("name"))}},_updateData:function(n){var t=[],i=[],u,f;n.eachRawSeries(function(r){var o=r.name,f,e,u;i.push(o);r.legendDataProvider?(e=r.legendDataProvider(),u=e.mapArray(e.getName),n.isSeriesFiltered(r)||(i=i.concat(u)),u.length?t=t.concat(u):f=!0):f=!0;f&&act(r)&&t.push(r.name)});this._availableNames=i;u=this.get("data")||t;f=r(u,function(n){return(typeof n=="string"||typeof n=="number")&&(n={name:n}),new ut(n,this,this.ecModel)},this);this._data=f},getData:function(){return this._data},select:function(n){var i=this.option.selected,u=this.get("selectedMode"),r;u==="single"&&(r=this._data,t(r,function(n){i[n.get("name")]=!1}));i[n]=!0},unSelect:function(n){this.get("selectedMode")!=="single"&&(this.option.selected[n]=!1)},toggleSelected:function(n){var t=this.option.selected;t.hasOwnProperty(n)||(t[n]=!0);this[t[n]?"unSelect":"select"](n)},isSelected:function(n){var t=this.option.selected;return!(t.hasOwnProperty(n)&&!t[n])&&tt(this._availableNames,n)>=0},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",textStyle:{color:"#333"},selectedMode:!0,tooltip:{show:!1}}});rt("legendToggleSelect","legendselectchanged",y(vdt,"toggleSelected"));rt("legendSelect","legendselected",y(vdt,"select"));rt("legendUnSelect","legendunselected",y(vdt,"unSelect"));var np=y,kau=t,ydt=e,dau=wi({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new ydt);this._backgroundEl},getContentGroup:function(){return this._contentGroup},render:function(n,t,i){var r;if(this.resetInner(),n.get("show",!0)){r=n.get("align");r&&r!=="auto"||(r=n.get("left")==="right"&&n.get("orient")==="vertical"?"right":"left");this.renderInner(r,n,t,i);var f=n.getBoxLayoutParams(),e={width:i.getWidth(),height:i.getHeight()},o=n.get("padding"),c=li(f,e,o),u=this.layoutInner(n,r,c),h=li(s({width:u.width,height:u.height},f),e,o);this.group.attr("position",[h.x-u.x,h.y-u.y]);this.group.add(this._backgroundEl=vrr(u,n))}},resetInner:function(){this.getContentGroup().removeAll();this._backgroundEl&&this.group.remove(this._backgroundEl)},renderInner:function(n,t,i,r){var s=this.getContentGroup(),f=p(),o=t.get("selectedMode"),e=[];i.eachRawSeries(function(n){n.get("legendHoverLink")||e.push(n.id)});kau(t.getData(),function(h,c){var l=h.get("name"),a,y,v;if(!this.newlineDisabled&&(l===""||l==="\n")){s.add(new ydt({newline:!0}));return}if(a=i.getSeriesByName(l)[0],!f.get(l)){if(a){y=a.getData();v=y.getVisual("color");typeof v=="function"&&(v=v(a.getDataParams(0)));var p=y.getVisual("legendSymbol")||"roundRect",w=y.getVisual("symbol"),b=this._createItem(l,c,h,t,p,w,n,v,o);b.on("click",np(yrr,l,r)).on("mouseover",np(prr,a.name,null,r,e)).on("mouseout",np(wrr,a.name,null,r,e));f.set(l,!0)}else i.eachRawSeries(function(i){var u,s;if(!f.get(l)&&i.legendDataProvider){if(u=i.legendDataProvider(),s=u.indexOfName(l),s<0)return;var a=u.getItemVisual(s,"color"),v=this._createItem(l,c,h,t,"roundRect",null,n,a,o);v.on("click",np(yrr,l,r)).on("mouseover",np(prr,null,l,r,e)).on("mouseout",np(wrr,null,l,r,e));f.set(l,!0)}},this);u&&(f.get(l)||console.warn(l+" series not exists. Legend data should be same with series name or data name."))}},this)},_createItem:function(n,t,i,r,u,f,e,s,h){var p=r.get("itemWidth"),v=r.get("itemHeight"),w=r.get("inactiveColor"),y=r.get("symbolKeepAspect"),b=r.isSelected(n),c=new ydt,tt=i.getModel("textStyle"),it=i.get("icon"),d=i.getModel("tooltip"),rt=d.parentModel,l,nt;u=it||u;c.add(cu(u,0,0,p,v,b?s:w,y==null?!0:y));!it&&f&&(f!==u||f==="none")&&(l=v*.8,f==="none"&&(f="circle"),c.add(cu(f,(p-l)/2,(v-l)/2,l,l,b?s:w,y==null?!0:y)));var ut=e==="left"?p+5:-5,ft=e,a=r.get("formatter"),g=n;return typeof a=="string"&&a?g=a.replace("{name}",n!=null?n:""):typeof a=="function"&&(g=a(n)),c.add(new k({style:ii({},tt,{text:g,x:ut,y:v/2,textFill:b?tt.getTextColor():w,textAlign:ft,textVerticalAlign:"middle"})})),nt=new et({shape:c.getBoundingRect(),invisible:!0,tooltip:d.get("show")?o({content:n,formatter:rt.get("formatter",!0)||function(){return n},formatterParams:{componentType:"legend",legendIndex:r.componentIndex,name:n,$vars:["name"]}},d.option):null}),c.add(nt),c.eachChild(function(n){n.silent=!0}),nt.silent=!h,this.getContentGroup().add(c),pt(c),c.__legendDataIndex=t,c},layoutInner:function(n,t,i){var r=this.getContentGroup(),u;return pw(n.get("orient"),r,n.get("itemGap"),i.width,i.height),u=r.getBoundingRect(),r.attr("position",[-u.x,-u.y]),this.group.getBoundingRect()}});brr=function(n){var t=n.findComponents({mainType:"legend"});t&&t.length&&n.filterSeries(function(n){for(var i=0;i<t.length;i++)if(!t[i].isSelected(n.name))return!1;return!0})};su(brr);it.registerSubTypeDefaulter("legend",function(){return"plain"});pdt=adt.extend({type:"legend.scroll",setScrollDataIndex:function(n){this.option.scrollDataIndex=n},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(n,t,i,r){var u=av(n);pdt.superCall(this,"init",n,t,i,r);krr(this,n,u)},mergeOption:function(n,t){pdt.superCall(this,"mergeOption",n,t);krr(this,this.option,n)},getOrient:function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}}});var drr=e,net=["width","height"],grr=["x","y"],wdt=dau.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){wdt.superCall(this,"init");this._currentIndex=0;this.group.add(this._containerGroup=new drr);this._containerGroup.add(this.getContentGroup());this.group.add(this._controllerGroup=new drr);this._showController},resetInner:function(){wdt.superCall(this,"resetInner");this._controllerGroup.removeAll();this._containerGroup.removeClipPath();this._containerGroup.__rectSize=null},renderInner:function(n,t,r,u){function h(n,i){var o=n+"DataIndex",r=lw(t.get("pageIcons",!0)[t.getOrient().name][i],{onclick:l(s._pageGo,s,o,t,u)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});r.name=n;e.add(r)}var s=this,e,f,o;wdt.superCall(this,"renderInner",n,t,r,u);e=this._controllerGroup;f=t.get("pageIconSize",!0);i(f)||(f=[f,f]);h("pagePrev",0);o=t.getModel("pageTextStyle");e.add(new k({name:"pageText",style:{textFill:o.getTextColor(),font:o.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0}));h("pageNext",1)},layoutInner:function(n,t,i){var h=this.getContentGroup(),l=this._containerGroup,a=this._controllerGroup,u=n.getOrient().index,r=net[u],e=net[1-u],b=grr[1-u],nt,o,c,p;pw(n.get("orient"),h,n.get("itemGap"),u?i.width:null,u?null:i.height);pw("horizontal",a,n.get("pageButtonItemGap",!0));var s=h.getBoundingRect(),f=a.getBoundingRect(),v=this._showController=s[r]>i[r],k=[-s.x,-s.y];k[u]=h.position[u];var d=[0,0],y=[-f.x,-f.y],g=vi(n.get("pageButtonGap",!0),n.get("itemGap",!0));return v&&(nt=n.get("pageButtonPosition",!0),nt==="end"?y[u]+=i[r]-f[r]:d[u]+=f[r]+g),y[1-u]+=s[e]/2-f[e]/2,h.attr("position",k),l.attr("position",d),a.attr("position",y),o=this.group.getBoundingRect(),o={x:0,y:0},o[r]=v?i[r]:s[r],o[e]=Math.max(s[e],f[e]),o[b]=Math.min(0,f[b]+y[1-u]),l.__rectSize=i[r],v?(c={x:0,y:0},c[r]=Math.max(i[r]-f[r]-g,0),c[e]=o[e],l.setClipPath(new et({shape:c})),l.__rectSize=c[r]):a.eachChild(function(n){n.attr({invisible:!0,silent:!0})}),p=this._getPageInfo(n),p.pageIndex!=null&&w(h,{position:p.contentPosition},v?n:!1),this._updatePageInfoView(n,p),o},_pageGo:function(n,t,i){var r=this._getPageInfo(t)[n];r!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:r,legendId:t.id})},_updatePageInfoView:function(n,i){var u=this._controllerGroup;t(["pagePrev","pageNext"],function(t){var f=i[t+"DataIndex"]!=null,r=u.childOfName(t);r&&(r.setStyle("fill",f?n.get("pageIconColor",!0):n.get("pageIconInactiveColor",!0)),r.cursor=f?"pointer":"default")});var f=u.childOfName("pageText"),r=n.get("pageFormatter"),e=i.pageIndex,o=e!=null?e+1:0,s=i.pageCount;f&&r&&f.setStyle("text",at(r)?r.replace("{current}",o).replace("{total}",s):r({current:o,total:s}))},_getPageInfo:function(n){function d(n){var i=n.getBoundingRect().clone();return i[t]+=n.position[f],i}var tt=n.get("scrollDataIndex",!0),e=this.getContentGroup(),o=e.getBoundingRect(),l=this._containerGroup.__rectSize,f=n.getOrient().index,u=net[f],g=net[1-f],t=grr[f],y=e.position.slice(),a,p,w,s,h,b,k,i,r,c,nt,v;if(this._showController?e.eachChild(function(n){n.__legendDataIndex===tt&&(s=n)}):s=e.childAt(0),h=l?Math.ceil(o[u]/l):0,s&&(b=s.getBoundingRect(),k=s.position[f]+b[t],y[f]=-k-o[t],a=Math.floor(h*(k+b[t]+l/2)/o[u]),a=o[u]&&h?Math.max(0,Math.min(h-1,a)):-1,i={x:0,y:0},i[u]=l,i[g]=o[g],i[t]=-y[f]-o[t],c=e.children(),e.eachChild(function(n,f){var e=d(n);e.intersect(i)&&(r==null&&(r=f),w=n.__legendDataIndex);f===c.length-1&&e[t]+e[u]<=i[t]+i[u]&&(w=null)}),r!=null))if(nt=c[r],v=d(nt),i[t]=v[t]+v[u]-i[u],r<=0&&v[t]>=i[t])p=null;else{while(r>0&&d(c[r-1]).intersect(i))r--;p=c[r].__legendDataIndex}return{contentPosition:y,pageIndex:a,pageCount:h,pagePrevDataIndex:p,pageNextDataIndex:w}}});rt("legendScroll","legendscroll",function(n,t){var i=n.scrollDataIndex;i!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:n},function(n){n.setScrollDataIndex(i)})});hu({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var nur=t,gau=woi,nvu=["","-webkit-","-moz-","-o-"],tvu="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;";bdt.prototype={constructor:bdt,_enterable:!0,update:function(){var n=this._container,i=n.currentStyle||document.defaultView.getComputedStyle(n),t=n.style;t.position!=="absolute"&&i.position!=="absolute"&&(t.position="relative")},show:function(n){clearTimeout(this._hideTimeout);var t=this.el;t.style.cssText=tvu+uvu(n)+";left:"+this._x+"px;top:"+this._y+"px;"+(n.get("extraCssText")||"");t.style.display=t.innerHTML?"block":"none";t.style.pointerEvents=this._enterable?"auto":"none";this._show=!0},setContent:function(n){this.el.innerHTML=n==null?"":n},setEnterable:function(n){this._enterable=n},getSize:function(){var n=this.el;return[n.clientWidth,n.clientHeight]},moveTo:function(n,t){var i=this._zr,r,u;i&&i.painter&&(r=i.painter.getViewportRootOffset())&&(n+=r.offsetLeft,t+=r.offsetTop);u=this.el.style;u.left=n+"px";u.top=t+"px";this._x=n;this._y=t},hide:function(){this.el.style.display="none";this._show=!1},hideLater:function(n){!this._show||this._inContent&&this._enterable||(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(l(this.hide,this),n)):this.hide())},isShow:function(){return this._show},getOuterSize:function(){var t=this.el.clientWidth,i=this.el.clientHeight,n;return document.defaultView&&document.defaultView.getComputedStyle&&(n=document.defaultView.getComputedStyle(this.el),n&&(t+=parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10)+parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),i+=parseInt(n.paddingTop,10)+parseInt(n.paddingBottom,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))),{width:t,height:i}}};kdt.prototype={constructor:kdt,_enterable:!0,update:function(){},show:function(){this._hideTimeout&&clearTimeout(this._hideTimeout);this.el.attr("show",!0);this._show=!0},setContent:function(n,t,i){var s,f,r;this.el&&this._zr.remove(this.el);for(var h={},u=n,o="{marker",e=u.indexOf(o);e>=0;)s=u.indexOf("|}"),f=u.substr(e+o.length,s-e-o.length),h["marker"+f]=f.indexOf("sub")>-1?{textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:t[f],textOffset:[3,0]}:{textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:t[f]},u=u.substr(s+1),e=u.indexOf("{marker");this.el=new k({style:{rich:h,text:n,textLineHeight:20,textBackgroundColor:i.get("backgroundColor"),textBorderRadius:i.get("borderRadius"),textFill:i.get("textStyle.color"),textPadding:i.get("padding")},z:i.get("z")});this._zr.add(this.el);r=this;this.el.on("mouseover",function(){r._enterable&&(clearTimeout(r._hideTimeout),r._show=!0);r._inContent=!0});this.el.on("mouseout",function(){r._enterable&&r._show&&r.hideLater(r._hideDelay);r._inContent=!1})},setEnterable:function(n){this._enterable=n},getSize:function(){var n=this.el.getBoundingRect();return[n.width,n.height]},moveTo:function(n,t){this.el&&this.el.attr("position",[n,t])},hide:function(){this.el.hide();this._show=!1},hideLater:function(n){!this._show||this._inContent&&this._enterable||(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(l(this.hide,this),n)):this.hide())},isShow:function(){return this._show},getOuterSize:function(){return this.getSize()}};var tur=l,bk=t,iur=f,fvu=new et({shape:{x:-1,y:-1,width:2,height:2}});wi({type:"tooltip",init:function(n,t){var r,u,i;d.node||(r=n.getComponent("tooltip"),u=r.get("renderMode"),this._renderMode=ffi(u),this._renderMode==="html"?(i=new bdt(t.getDom(),t),this._newLine="<br/>"):(i=new kdt(t),this._newLine="\n"),this._tooltipContent=i)},render:function(n,t,i){if(!d.node){this.group.removeAll();this._tooltipModel=n;this._ecModel=t;this._api=i;this._lastDataByCoordSys=null;this._alwaysShowContent=n.get("alwaysShowContent");var r=this._tooltipContent;r.update();r.setEnterable(n.get("enterable"));this._initGlobalListener();this._keepShow()}},_initGlobalListener:function(){var t=this._tooltipModel,n=t.get("triggerOn");ptr("itemTooltip",this._api,tur(function(t,i,r){n!=="none"&&(n.indexOf(t)>=0?this._tryShow(i,r):t==="leave"&&this._hide(r))},this))},_keepShow:function(){var t=this._tooltipModel,i=this._ecModel,r=this._api,n;this._lastX!=null&&this._lastY!=null&&t.get("triggerOn")!=="none"&&(n=this,clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){n.manuallyShowTip(t,i,r,{x:n._lastX,y:n._lastY})}))},manuallyShowTip:function(n,t,i,r){var u,o,f;if(r.from!==this.uid&&!d.node)if(u=rur(r,i),this._ticket="",o=r.dataByCoordSys,r.tooltip&&r.x!=null&&r.y!=null)f=fvu,f.position=[r.x,r.y],f.update(),f.tooltip=r.tooltip,this._tryShow({offsetX:r.x,offsetY:r.y,target:f},u);else if(o)this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,event:{},dataByCoordSys:r.dataByCoordSys,tooltipOption:r.tooltipOption},u);else if(r.seriesIndex!=null){if(this._manuallyAxisShowTip(n,t,i,r))return;var e=ctr(r,t),s=e.point[0],h=e.point[1];s!=null&&h!=null&&this._tryShow({offsetX:s,offsetY:h,position:r.position,target:e.el,event:{}},u)}else r.x!=null&&r.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:r.x,y:r.y}),this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,target:i.getZr().findHover(r.x,r.y).target,event:{}},u))},manuallyHideTip:function(n,t,i,r){var u=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&u.hideLater(this._tooltipModel.get("hideDelay"));this._lastX=this._lastY=null;r.from!==this.uid&&this._hide(rur(r,i))},_manuallyAxisShowTip:function(n,t,i,r){var f=r.seriesIndex,e=r.dataIndex,s=t.getComponent("axisPointer").coordSysAxesInfo,u,o,n;if(f!=null&&e!=null&&s!=null)return(u=t.getSeriesByIndex(f),!u)?void 0:(o=u.getData(),n=ddt([o.getItemModel(e),u,(u.coordinateSystem||{}).model,n]),n.get("trigger")!=="axis")?void 0:(i.dispatchAction({type:"updateAxisPointer",seriesIndex:f,dataIndex:e,position:r.position}),!0)},_tryShow:function(n,t){var i=n.target,u=this._tooltipModel,r;u&&(this._lastX=n.offsetX,this._lastY=n.offsetY,r=n.dataByCoordSys,r&&r.length?this._showAxisTooltip(r,n):i&&i.dataIndex!=null?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(n,i,t)):i&&i.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(n,i,t)):(this._lastDataByCoordSys=null,this._hide(t)))},_showOrMove:function(n,t){var i=n.get("showDelay");t=l(t,this);clearTimeout(this._showTimout);i>0?this._showTimout=setTimeout(t,i):t()},_showAxisTooltip:function(n,i){var f=this._ecModel,y=this._tooltipModel,u=[i.offsetX,i.offsetY],r=[],e=[],o=ddt([i.tooltipOption,y]),c=this._renderMode,s=this._newLine,l={},h;bk(n,function(n){bk(n.dataByAxis,function(n){var i=f.getComponent(n.axisDim+"Axis",n.axisIndex),u=n.value,o=[],h,y;i&&u!=null&&(h=rir(u,i.axis,f,n.seriesDataIndices,n.valueLabelOpt),t(n.seriesDataIndices,function(t){var y=f.getSeriesByIndex(t.seriesIndex),w=t.dataIndexInside,r=y&&y.getDataParams(w),s,p,b;r.axisDim=n.axisDim;r.axisIndex=n.axisIndex;r.axisType=n.axisType;r.axisId=n.axisId;r.axisValue=uyt(i.axis,u);r.axisValueLabel=h;r&&(e.push(r),s=y.formatTooltip(w,!0,null,c),a(s)?(p=s.html,b=s.markers,v(l,b)):p=s,o.push(p))}),y=h,c!=="html"?r.push(o.join(s)):r.push((y?dt(y)+s:"")+o.join(s)))})},this);r.reverse();r=r.join(this._newLine+this._newLine);h=i.position;this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(n)?this._updatePosition(o,h,u[0],u[1],this._tooltipContent,e):this._showTooltipContent(o,r,e,Math.random(),u[0],u[1],h,undefined,l)})},_showSeriesItemTooltip:function(n,t,i){var b=this._ecModel,c=t.seriesIndex,e=b.getSeriesByIndex(c),u=t.dataModel||e,r=t.dataIndex,l=t.dataType,v=u.getData(),o=ddt([v.getItemModel(r),u,e&&(e.coordinateSystem||{}).model,this._tooltipModel]),y=o.get("trigger"),p,f,s,h,w;(y==null||y==="item")&&(p=u.getDataParams(r,l),f=u.formatTooltip(r,!1,l,this._renderMode),a(f)?(s=f.html,h=f.markers):(s=f,h=null),w="item_"+u.name+"_"+r,this._showOrMove(o,function(){this._showTooltipContent(o,s,p,w,n.offsetX,n.offsetY,n.position,n.target,h)}),i({type:"showTip",dataIndexInside:r,dataIndex:v.getRawIndex(r),seriesIndex:c,from:this.uid}))},_showComponentItemTooltip:function(n,t,i){var r=t.tooltip,f;typeof r=="string"&&(f=r,r={content:f,formatter:f});var u=new ut(r,this._tooltipModel,this._ecModel),e=u.get("content"),o=Math.random();this._showOrMove(u,function(){this._showTooltipContent(u,e,u.get("formatterParams")||{},o,n.offsetX,n.offsetY,n.position,t)});i({type:"showTip",from:this.uid})},_showTooltipContent:function(n,t,i,r,u,f,e,o,s){var h,c,l,a;(this._ticket="",n.get("showContent")&&n.get("show"))&&(h=this._tooltipContent,c=n.get("formatter"),e=e||n.get("position"),l=t,c&&typeof c=="string"?l=uat(c,i,!0):typeof c=="function"&&(a=tur(function(t,r){t===this._ticket&&(h.setContent(r,s,n),this._updatePosition(n,e,u,f,h,i,o))},this),this._ticket=r,l=c(i,r,a)),h.setContent(l,s,n),h.show(n),this._updatePosition(n,e,u,f,h,i,o))},_updatePosition:function(n,t,r,u,f,e,o){var c=this._api.getWidth(),l=this._api.getHeight(),w,s;t=t||n.get("position");var h=f.getSize(),v=n.get("align"),y=n.get("verticalAlign"),p=o&&o.getBoundingRect().clone();o&&p.applyTransform(o.transform);typeof t=="function"&&(t=t([r,u],e,f.el,p,{viewSize:[c,l],contentSize:h.slice()}));i(t)?(r=iur(t[0],c),u=iur(t[1],l)):a(t)?(t.width=h[0],t.height=h[1],w=li(t,{width:c,height:l}),r=w.x,u=w.y,v=null,y=null):typeof t=="string"&&o?(s=svu(t,p,h),r=s[0],u=s[1]):(s=evu(r,u,f,c,l,v?null:20,y?null:20),r=s[0],u=s[1]);v&&(r-=uur(v)?h[0]/2:v==="right"?h[0]:0);y&&(u-=uur(y)?h[1]/2:y==="bottom"?h[1]:0);n.get("confine")&&(s=ovu(r,u,f,c,l),r=s[0],u=s[1]);f.moveTo(r,u)},_updateContentNotChangedOnAxis:function(n){var i=this._lastDataByCoordSys,t=!!i&&i.length===n.length;return t&&bk(i,function(i,r){var u=i.dataByAxis||{},e=n[r]||{},f=e.dataByAxis||[];t&=u.length===f.length;t&&bk(u,function(n,i){var r=f[i]||{},u=n.seriesDataIndices||[],e=r.seriesDataIndices||[];t&=n.value===r.value&&n.axisType===r.axisType&&n.axisId===r.axisId&&u.length===e.length;t&&bk(u,function(n,i){var r=e[i];t&=n.seriesIndex===r.seriesIndex&&n.dataIndex===r.dataIndex})})}),this._lastDataByCoordSys=n,!!t},_hide:function(n){this._lastDataByCoordSys=null;n({type:"hideTip",from:this.uid})},dispose:function(n,t){d.node||(this._tooltipContent.hide(),tdt("itemTooltip",t))}});rt({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){});rt({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){});tet.prototype={constructor:tet,pointToData:function(n,t){return this.polar.pointToData(n,t)[this.dim==="radius"?0:1]},dataToRadius:fi.prototype.dataToCoord,radiusToData:fi.prototype.coordToData};ct(tet,fi);eur=pr();iet.prototype={constructor:iet,pointToData:function(n,t){return this.polar.pointToData(n,t)[this.dim==="radius"?0:1]},dataToAngle:fi.prototype.dataToCoord,angleToData:fi.prototype.coordToData,calculateCategoryInterval:function(){var n=this,c=n.getLabelModel(),o=n.scale,u=o.getExtent(),s=o.count();if(u[1]-u[0]<1)return 0;var f=u[0],l=n.dataToCoord(f+1)-n.dataToCoord(f),a=Math.abs(l),v=ue(f,c.getFont(),"center","top"),y=Math.max(v.height,7),e=y/a;isNaN(e)&&(e=Infinity);var t=Math.max(0,Math.floor(e)),i=eur(n.model),r=i.lastAutoInterval,h=i.lastTickCount;return r!=null&&h!=null&&Math.abs(r-t)<=1&&Math.abs(h-s)<=1&&r>t?t=r:(i.lastTickCount=s,i.lastAutoInterval=t),t}};ct(iet,fi);kk=function(n){this.name=n||"";this.cx=0;this.cy=0;this._radiusAxis=new tet;this._angleAxis=new iet;this._radiusAxis.polar=this._angleAxis.polar=this};kk.prototype={type:"polar",axisPointerEnabled:!0,constructor:kk,dimensions:["radius","angle"],model:null,containPoint:function(n){var t=this.pointToCoord(n);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},containData:function(n){return this._radiusAxis.containData(n[0])&&this._angleAxis.containData(n[1])},getAxis:function(n){return this["_"+n+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(n){var t=[],i=this._angleAxis,r=this._radiusAxis;return i.scale.type===n&&t.push(i),r.scale.type===n&&t.push(r),t},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(n){var t=this._angleAxis;return n===t?this._radiusAxis:t},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(n){var t=n!=null&&n!=="auto"?this.getAxis(n):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},dataToPoint:function(n,t){return this.coordToPoint([this._radiusAxis.dataToRadius(n[0],t),this._angleAxis.dataToAngle(n[1],t)])},pointToData:function(n,t){var i=this.pointToCoord(n);return[this._radiusAxis.radiusToData(i[0],t),this._angleAxis.angleToData(i[1],t)]},pointToCoord:function(n){var i=n[0]-this.cx,r=n[1]-this.cy,s=this.getAngleAxis(),u=s.getExtent(),f=Math.min(u[0],u[1]),o=Math.max(u[0],u[1]),e,t,h;for(s.inverse?f=o-360:o=f+360,e=Math.sqrt(i*i+r*r),i/=e,r/=e,t=Math.atan2(-r,i)/Math.PI*180,h=t<f?1:-1;t<f||t>o;)t+=h*360;return[e,t]},coordToPoint:function(n){var t=n[0],i=n[1]/180*Math.PI,r=Math.cos(i)*t+this.cx,u=-Math.sin(i)*t+this.cy;return[r,u]}};ret=it.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});v(ret.prototype,ul);ngt={angle:{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}},radius:{splitNumber:5}};uy("angle",ret,our,ngt.angle);uy("radius",ret,our,ngt.radius);hu({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(n){var t,i=this.ecModel;return i.eachComponent(n,function(n){n.getCoordSysModel()===this&&(t=n)},this),t},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}});hur={dimensions:kk.prototype.dimensions,create:function(n,t){var i=[];return n.eachComponent("polar",function(n,r){var u=new kk(r);u.update=avu;var f=u.getRadiusAxis(),e=u.getAngleAxis(),o=n.findAxisModel("radiusAxis"),s=n.findAxisModel("angleAxis");sur(f,o);sur(e,s);lvu(u,n,t);i.push(u);n.coordinateSystem=u;u.model=n}),n.eachSeries(function(t){if(t.get("coordinateSystem")==="polar"){var i=n.queryComponents({mainType:"polar",index:t.get("polarIndex"),id:t.get("polarId")})[0];if(u&&!i)throw new Error('Polar "'+kt(t.get("polarIndex"),t.get("polarId"),0)+'" not found');t.coordinateSystem=i.coordinateSystem}}),i}};ir.register("polar",hur);cur=["axisLine","axisLabel","axisTick","splitLine","splitArea"];nu.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(n){if(this.group.removeAll(),n.get("show")){var i=n.axis,u=i.polar,o=u.getRadiusAxis().getExtent(),f=i.getTicksCoords(),e=r(i.getViewLabels(),function(n){var n=c(n);return n.coord=i.dataToCoord(n.tickValue),n});aur(e);aur(f);t(cur,function(t){n.get(t+".show")&&(!i.scale.isBlank()||t==="axisLine")&&this["_"+t](n,u,f,o,e)},this)}},_axisLine:function(n,t,i,r){var f=n.getModel("axisLine.lineStyle"),u=new th({shape:{cx:t.cx,cy:t.cy,r:r[tgt(t)]},style:f.getLineStyle(),z2:1,silent:!0});u.style.fill=null;this.group.add(u)},_axisTick:function(n,t,i,u){var f=n.getModel("axisTick"),o=(f.get("inside")?-1:1)*f.get("length"),e=u[tgt(t)],h=r(i,function(n){return new uu({shape:lur(t,[e,e+o],n.coord)})});this.group.add(le(h,{style:s(f.getModel("lineStyle").getLineStyle(),{stroke:n.get("axisLine.lineStyle.color")})}))},_axisLabel:function(n,i,r,u,f){var e=n.getCategories(!0),o=n.getModel("axisLabel"),s=o.get("margin");t(f,function(t){var f=o,h=t.tickValue,c=u[tgt(i)],r=i.coordToPoint([c+s,t.coord]),a=i.cx,v=i.cy,y=Math.abs(r[0]-a)/c<.3?"center":r[0]>a?"left":"right",p=Math.abs(r[1]-v)/c<.3?"middle":r[1]>v?"top":"bottom",l;e&&e[h]&&e[h].textStyle&&(f=new ut(e[h].textStyle,o,o.ecModel));l=new k({silent:!0});this.group.add(l);ii(l.style,f,{x:r[0],y:r[1],textFill:f.getTextColor()||n.get("axisLine.lineStyle.color"),text:t.formattedLabel,textAlign:y,textVerticalAlign:p})},this)},_splitLine:function(n,t,i,r){var c=n.getModel("splitLine"),h=c.getModel("lineStyle"),f=h.get("color"),l=0,e,o,u;for(f=f instanceof Array?f:[f],e=[],u=0;u<i.length;u++)o=l++%f.length,e[o]=e[o]||[],e[o].push(new uu({shape:lur(t,r,i[u].coord)}));for(u=0;u<e.length;u++)this.group.add(le(e[u],{style:s({stroke:f[u%f.length]},h.getLineStyle()),silent:!0,z:n.get("z")}))},_splitArea:function(n,t,i,r){var o,u;if(i.length){var a=n.getModel("splitArea"),c=a.getModel("areaStyle"),f=c.get("color"),v=0;f=f instanceof Array?f:[f];var e=[],h=Math.PI/180,l=-i[0].coord*h,y=Math.min(r[0],r[1]),p=Math.max(r[0],r[1]),w=n.get("clockwise");for(u=1;u<i.length;u++)o=v++%f.length,e[o]=e[o]||[],e[o].push(new so({shape:{cx:t.cx,cy:t.cy,r0:y,r:p,startAngle:l,endAngle:-i[u].coord*h,clockwise:w},silent:!0})),l=-i[u].coord*h;for(u=0;u<e.length;u++)this.group.add(le(e[u],{style:s({fill:f[u%f.length]},c.getAreaStyle()),silent:!0}))}}});vur=["axisLine","axisTickLabel","axisName"];yur=["splitLine","splitArea"];nu.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(n){if(this.group.removeAll(),n.get("show")){var i=n.axis,r=i.polar,e=r.getAngleAxis(),o=i.getTicksCoords(),f=e.getExtent()[0],s=i.getExtent(),h=vvu(r,n,f),u=new kf(n,h);t(vur,u.add,u);this.group.add(u.getGroup());t(yur,function(t){n.get(t+".show")&&!i.scale.isBlank()&&this["_"+t](n,r,f,s,o)},this)}},_splitLine:function(n,t,i,r,u){var l=n.getModel("splitLine"),c=l.getModel("lineStyle"),e=c.get("color"),a=0,o,h,f;for(e=e instanceof Array?e:[e],o=[],f=0;f<u.length;f++)h=a++%e.length,o[h]=o[h]||[],o[h].push(new th({shape:{cx:t.cx,cy:t.cy,r:u[f].coord},silent:!0}));for(f=0;f<o.length;f++)this.group.add(le(o[f],{style:s({stroke:e[f%e.length],fill:null},c.getLineStyle()),silent:!0}))},_splitArea:function(n,t,i,r,u){var o,c,h,f;if(u.length){var a=n.getModel("splitArea"),l=a.getModel("areaStyle"),e=l.get("color"),v=0;for(e=e instanceof Array?e:[e],o=[],c=u[0].coord,f=1;f<u.length;f++)h=v++%e.length,o[h]=o[h]||[],o[h].push(new so({shape:{cx:t.cx,cy:t.cy,r0:c,r:u[f].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),c=u[f].coord;for(f=0;f<o.length;f++)this.group.add(le(o[f],{style:s({fill:e[f%e.length]},l.getAreaStyle()),silent:!0}))}}});pur=dl.extend({makeElOption:function(n,t,i,r,u){var f=i.axis,e,h,o,l,a;f.dim==="angle"&&(this.animationThreshold=Math.PI/18);var s=f.polar,v=s.getOtherAxis(f),y=v.getExtent(),c;c=f["dataTo"+ltt(f.dim)](t);e=r.get("type");e&&e!=="none"&&(h=udt(r),o=wur[e](f,s,c,y,h),o.style=h,n.graphicKey=o.type,n.pointer=o);l=r.get("label.margin");a=yvu(t,i,r,s,l);iir(n,i,r,u,a)}});wur={line:function(n,t,i,r){return n.dim==="angle"?{type:"Line",shape:edt(t.coordToPoint([r[0],i]),t.coordToPoint([r[1],i]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:i}}},shadow:function(n,t,i,r){var u=Math.max(1,n.getBandWidth()),f=Math.PI/180;return n.dim==="angle"?{type:"Sector",shape:eir(t.cx,t.cy,r[0],r[1],(-i-u/2)*f,(-i+u/2)*f)}:{type:"Sector",shape:eir(t.cx,t.cy,i-u/2,i+u/2,0,Math.PI*2)}}};nu.registerAxisPointerClass("PolarAxisPointer",pur);gt(y(hvu,"bar"));wi({type:"polar"});bur=it.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(n){it.prototype.init.apply(this,arguments);lc(n,"label",["show"])},optionUpdated:function(){var n=this.option,t=this;n.regions=hut.getFilledRegions(n.regions,n.map,n.nameMap);this._optionModelMap=ca(n.regions||[],function(n,i){return i.name&&n.set(i.name,new ut(i,t)),n},p());this.updateSelectedMap(n.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(n){return this._optionModelMap.get(n)||new ut(null,this,this.ecModel)},getFormattedLabel:function(n,t){var u=this.getRegionModel(n),i=u.get("label."+t+".formatter"),r={name:n};return typeof i=="function"?(r.status=t,i(r)):typeof i=="string"?i.replace("{a}",n!=null?n:""):void 0},setZoom:function(n){this.option.zoom=n},setCenter:function(n){this.option.center=n}});st(bur,hpt);wi({type:"geo",init:function(n,t){var i=new vut(t,!0);this._mapDraw=i;this.group.add(i.group)},render:function(n,t,i,r){if(!r||r.type!=="geoToggleSelect"||r.from!==this.uid){var u=this._mapDraw;n.get("show")?u.draw(n,t,i,this,r):this._mapDraw.group.removeAll();this.group.silent=n.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}});igt("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"});igt("select",{type:"geoSelect",event:"geoselected"});igt("unSelect",{type:"geoUnSelect",event:"geounselected"});kur=["rect","polygon","keep","clear"];dur=function(n,r){var f=n&&n.brush,o,u;if(i(f)||(f=f?[f]:[]),f.length){o=[];t(f,function(n){var t=n.hasOwnProperty("toolbox")?n.toolbox:[];t instanceof Array&&(o=o.concat(t))});u=n&&n.toolbox;i(u)&&(u=u[0]);u||(u={feature:{}},n.toolbox=[u]);var s=u.feature||(u.feature={}),h=s.brush||(s.brush={}),e=h.type||(h.type=[]);e.push.apply(e,o);pvu(e);r&&!e.length&&e.push.apply(e,kur)}};rgt=t;uet={lineX:tfr(0),lineY:tfr(1),rect:{point:function(n,t,i){return n&&i.boundingRect.contain(n[0],n[1])},rect:function(n,t,i){return n&&i.boundingRect.intersect(n)}},polygon:{point:function(n,t,i){return n&&i.boundingRect.contain(n[0],n[1])&&fl(i.range,n[0],n[1])},rect:function(n,t,i){var f=i.range;if(!n||f.length<=1)return!1;var r=n.x,u=n.y,e=n.width,o=n.height,s=f[0];if(fl(f,r,u)||fl(f,r+e,u)||fl(f,r,u+o)||fl(f,r+e,u+o)||b.create(n).contain(s[0],s[1])||fet(r,u,r+e,u,f)||fet(r,u,r,u+o,f)||fet(r+e,u,r+e,u+o,f)||fet(r,u+o,r+e,u+o,f))return!0}}};var dh=t,eet=tt,oet=y,egt=["dataToPoint","pointToData"],gvu=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];gl=set.prototype;gl.setOutputRanges=function(n,t){this.matchOutputRanges(n,t,function(n,t,i){if((n.coordRanges||(n.coordRanges=[])).push(t),!n.coordRange){n.coordRange=t;var r=sgt[n.brushType](0,i,t);n.__rangeOffset={offset:hgt[n.brushType](r.values,n.range,[1,1]),xyMinMax:r.xyMinMax}}})};gl.matchOutputRanges=function(n,i,r){dh(n,function(n){var u=this.findTargetInfo(n,i);u&&u!==!0&&t(u.coordSyses,function(t){var u=sgt[n.brushType](1,t,n.range);r(n,u.values,t,i)})},this)};gl.setInputRanges=function(n,t){dh(n,function(n){var i=this.findTargetInfo(n,t),r,f;u&&(g(!i||i===!0||n.coordRange,"coordRange must be specified when coord index specified."),g(!i||i!==!0||n.range,"range must be specified in global brush."));n.range=n.range||[];i&&i!==!0&&(n.panelId=i.panelId,r=sgt[n.brushType](0,i.coordSys,n.coordRange),f=n.__rangeOffset,n.range=f?hgt[n.brushType](r.values,f.offset,tyu(r.xyMinMax,f.xyMinMax)):r.values)},this)};gl.makePanelOpts=function(n,t){return r(this._targetInfoList,function(i){var r=i.getPanelRect();return{panelId:i.panelId,defaultBrushType:t&&t(i),clipPath:rgi(r),isTargetByCursor:fgi(r,n,i.coordSysModel),getLinearBrushOtherExtent:ugi(r)}})};gl.controlSeries=function(n,t,i){var r=this.findTargetInfo(n,i);return r===!0||r&&eet(r.coordSyses,t.coordinateSystem)>=0};gl.findTargetInfo=function(n,t){for(var r,u,f=this._targetInfoList,e=ifr(t,n),i=0;i<f.length;i++)if(r=f[i],u=n.panelId,u){if(r.panelId===u)return r}else for(i=0;i<rfr.length;i++)if(rfr[i](e,r))return r;return!0};var nyu={grid:function(n,t){var r=n.xAxisModels,u=n.yAxisModels,o=n.gridModels,i=p(),f={},e={};(r||u||o)&&(dh(r,function(n){var t=n.axis.grid.model;i.set(t.id,t);f[t.id]=!0}),dh(u,function(n){var t=n.axis.grid.model;i.set(t.id,t);e[t.id]=!0}),dh(o,function(n){i.set(n.id,n);f[n.id]=!0;e[n.id]=!0}),i.each(function(n){var o=n.coordinateSystem,i=[];dh(o.getCartesians(),function(n){(eet(r,n.getAxis("x").model)>=0||eet(u,n.getAxis("y").model)>=0)&&i.push(n)});t.push({panelId:"grid--"+n.id,gridModel:n,coordSysModel:n,coordSys:i[0],coordSyses:i,getPanelRect:ufr.grid,xAxisDeclared:f[n.id],yAxisDeclared:e[n.id]})}))},geo:function(n,t){dh(n.geoModels,function(n){var i=n.coordinateSystem;t.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:i,coordSyses:[i],getPanelRect:ufr.geo})})}},rfr=[function(n,t){var r=n.xAxisModel,u=n.yAxisModel,i=n.gridModel;return!i&&r&&(i=r.axis.grid.model),!i&&u&&(i=u.axis.grid.model),i&&i===t.gridModel},function(n,t){var i=n.geoModel;return i&&i===t.geoModel}],ufr={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var n=this.coordSys,t=n.getBoundingRect().clone();return t.applyTransform(yc(n)),t}},sgt={lineX:oet(ffr,0),lineY:oet(ffr,1),rect:function(n,t,i){var r=t[egt[n]]([i[0][0],i[1][0]]),u=t[egt[n]]([i[0][1],i[1][1]]),f=[ogt([r[0],u[0]]),ogt([r[1],u[1]])];return{values:f,xyMinMax:f}},polygon:function(n,t,i){var u=[[Infinity,-Infinity],[Infinity,-Infinity]],f=r(i,function(i){var r=t[egt[n]](i);return u[0][0]=Math.min(u[0][0],r[0]),u[1][0]=Math.min(u[1][0],r[1]),u[0][1]=Math.max(u[0][1],r[0]),u[1][1]=Math.max(u[1][1],r[1]),r});return{values:f,xyMinMax:u}}};hgt={lineX:oet(efr,0),lineY:oet(efr,1),rect:function(n,t,i){return[[n[0][0]-i[0]*t[0][0],n[0][1]-i[0]*t[0][1]],[n[1][0]-i[1]*t[1][0],n[1][1]-i[1]*t[1][1]]]},polygon:function(n,t,i){return r(n,function(n,r){return[n[0]-i[0]*t[r][0],n[1]-i[1]*t[r][1]]})}};var sfr=["inBrush","outOfBrush"],cgt="__ecBrushSelect",lgt="__ecInBrushSelectEvent",hfr=kv.VISUAL.BRUSH;gt(hfr,function(n,t,i){n.eachComponent({mainType:"brush"},function(t){i&&i.type==="takeGlobalCursor"&&t.setBrushOption(i.key==="brush"?i.brushOption:{brushType:!1});var r=t.brushTargetManager=new set(t.option,n);r.setInputRanges(t.areas,n)})});yt(hfr,function(n,u,f){var e=[],o,h;n.eachComponent({mainType:"brush"},function(u,f){function l(n){return v==="all"||k[n]}function w(n){return!!n.length}function tt(n,t){var i=n.coordinateSystem;p|=i.hasAxisBrushed();l(t)&&i.eachActiveState(n.getData(),function(n,t){n==="active"&&(y[t]=1)})}function it(i,r,f){var e=lfr(i),o;e&&!uyu(u,r)&&(t(g,function(t){e[t.brushType]&&u.brushTargetManager.controlSeries(t,i,n)&&f.push(t);p|=w(f)}),l(r)&&w(f)&&(o=i.getData(),o.each(function(n){cfr(e,f,o,n)&&(y[n]=1)})))}var b={brushId:u.id,brushIndex:f,brushName:u.name,areas:c(u.areas),selected:[]},g,nt;e.push(b);var a=u.option,v=a.brushLink,k=[],y=[],d=[],p=0;f||(o=a.throttleType,h=a.throttleDelay);g=r(u.areas,function(n){return fyu(s({boundingRect:afr[n.brushType](n)},n))});nt=ugt(u.option,sfr,function(n){n.mappingMethod="fixed"});i(v)&&t(v,function(n){k[n]=1});n.eachSeries(function(n,t){var i=d[t]=[];n.subType==="parallel"?tt(n,t,i):it(n,t,i)});n.eachSeries(function(n,t){var r={seriesId:n.id,seriesIndex:t,seriesName:n.name,dataIndex:[]};b.selected.push(r);var f=lfr(n),u=d[t],i=n.getData(),e=l(t)?function(n){return y[n]?(r.dataIndex.push(i.getRawIndex(n)),"inBrush"):"outOfBrush"}:function(n){return cfr(f,u,i,n)?(r.dataIndex.push(i.getRawIndex(n)),"inBrush"):"outOfBrush"};(l(t)?p:w(u))&&wvu(sfr,nt,i,e)})});iyu(u,o,h,e,f)});afr={lineX:di,lineY:di,rect:function(n){return vfr(n.range)},polygon:function(n){for(var i,t,u=n.range,r=0,f=u.length;r<f;r++)t=t||[[Infinity,-Infinity],[Infinity,-Infinity]],i=u[r],i[0]<t[0][0]&&(t[0][0]=i[0]),i[0]>t[0][1]&&(t[0][1]=i[0]),i[1]<t[1][0]&&(t[1][0]=i[1]),i[1]>t[1][1]&&(t[1][1]=i[1]);return t&&vfr(t)}};yfr=["#ddd"];eyu=hu({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(n,t){var i=this.option,r;t||nfr(i,n,["inBrush","outOfBrush"]);r=i.inBrush=i.inBrush||{};i.outOfBrush=i.outOfBrush||{color:yfr};r.hasOwnProperty("liftZ")||(r.liftZ=5)},setAreas:function(n){(u&&(g(i(n)),t(n,function(n){g(n.brushType,"Illegal areas")})),n)&&(this.areas=r(n,function(n){return pfr(this.option,n)},this))},setBrushOption:function(n){this.brushOption=pfr(this.option,n);this.brushType=this.brushOption.brushType}});wi({type:"brush",init:function(n,t){this.ecModel=n;this.api=t;this.model;(this._brushController=new wy(t.getZr())).on("brush",l(this._onBrush,this)).mount()},render:function(n){return this.model=n,agt.apply(this,arguments)},updateTransform:agt,updateView:agt,dispose:function(){this._brushController.dispose()},_onBrush:function(n,t){var i=this.model.id;this.model.brushTargetManager.setOutputRanges(n,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:i,areas:c(n),$from:i})}});rt({type:"brush",event:"brush"},function(n,t){t.eachComponent({mainType:"brush",query:n},function(t){t.setAreas(n.areas)})});rt({type:"brushSelect",event:"brushSelected",update:"none"},function(){});vgt={};bfr=eh.toolbox.brush;ygt.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:c(bfr.title)};gk=ygt.prototype;gk.render=gk.updateView=function(n,i){var r,u,f;i.eachComponent({mainType:"brush"},function(n){r=n.brushType;u=n.brushOption.brushMode||"single";f|=n.areas.length});this._brushType=r;this._brushMode=u;t(n.get("type",!0),function(t){n.setIconStatus(t,(t==="keep"?u==="multiple":t==="clear"?f:t===r)?"emphasis":"normal")})};gk.getIcons=function(){var n=this.model,i=n.get("icon",!0),r={};return t(n.get("type",!0),function(n){i[n]&&(r[n]=i[n])}),r};gk.onclick=function(n,t,i){var r=this._brushType,u=this._brushMode;i==="clear"?(t.dispatchAction({type:"axisAreaSelect",intervals:[]}),t.dispatchAction({type:"brush",command:"clear",areas:[]})):t.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:i==="keep"?r:r===i?!1:i,brushMode:i==="keep"?u==="multiple"?"single":"multiple":u}})};tp("brush",ygt);ur(dur);het=864e5;fs.prototype={constructor:fs,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(n){var u,t,i,r;return n=yw(n),u=n.getFullYear(),t=n.getMonth()+1,t=t<10?"0"+t:t,i=n.getDate(),i=i<10?"0"+i:i,r=n.getDay(),r=Math.abs((r+7-this.getFirstDayOfWeek())%7),{y:u,m:t,d:i,day:r,time:n.getTime(),formatedDate:u+"-"+t+"-"+i,date:n}},getNextNDay:function(n,t){return(t=t||0,t===0)?this.getDateInfo(n):(n=new Date(this.getDateInfo(n).time),n.setDate(n.getDate()+t),this.getDateInfo(n))},update:function(n,i){function c(n,t){return n[t]!=null&&n[t]!=="auto"}var s,h;this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay");this._orient=this._model.get("orient");this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0;this._rangeInfo=this._getRangeInfo(this._initRangeOption());var u=this._rangeInfo.weeks||1,f=["width","height"],r=this._model.get("cellSize").slice(),e=this._model.getBoxLayoutParams(),o=this._orient==="horizontal"?[u,7]:[7,u];t([0,1],function(n){c(r,n)&&(e[f[n]]=r[n]*o[n])});s={width:i.getWidth(),height:i.getHeight()};h=this._rect=li(e,s);t([0,1],function(n){c(r,n)||(r[n]=h[f[n]]/o[n])});this._sw=r[0];this._sh=r[1]},dataToPoint:function(n,t){var f,e;i(n)&&(n=n[0]);t==null&&(t=!0);var r=this.getDateInfo(n),u=this._rangeInfo,o=r.formatedDate;return t&&!(r.time>=u.start.time&&r.time<u.end.time+het)?[NaN,NaN]:(f=r.day,e=this._getRangeInfo([u.start.time,o]).nthWeek,this._orient==="vertical")?[this._rect.x+f*this._sw+this._sw/2,this._rect.y+e*this._sh+this._sh/2]:[this._rect.x+e*this._sw+this._sw/2,this._rect.y+f*this._sh+this._sh/2]},pointToData:function(n){var t=this.pointToDate(n);return t&&t.time},dataToRect:function(n,t){var i=this.dataToPoint(n,t);return{contentShape:{x:i[0]-(this._sw-this._lineWidth)/2,y:i[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:i,tl:[i[0]-this._sw/2,i[1]-this._sh/2],tr:[i[0]+this._sw/2,i[1]-this._sh/2],br:[i[0]+this._sw/2,i[1]+this._sh/2],bl:[i[0]-this._sw/2,i[1]+this._sh/2]}},pointToDate:function(n){var t=Math.floor((n[0]-this._rect.x)/this._sw)+1,i=Math.floor((n[1]-this._rect.y)/this._sh)+1,r=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(i,t-1,r):this._getDateByWeeksAndDay(t,i-1,r)},convertToPixel:y(kfr,"dataToPoint"),convertFromPixel:y(kfr,"pointToData"),_initRangeOption:function(){var t=this._model.get("range"),n=t,u,r,e,f;return i(n)&&n.length===1&&(n=n[0]),/^\d{4}$/.test(n)&&(t=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)&&(u=this.getDateInfo(n),r=u.date,r.setMonth(r.getMonth()+1),e=this.getNextNDay(r,-1),t=[u.formatedDate,e.formatedDate]),/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(t=[n,n]),f=this._getRangeInfo(t),f.start.time>f.end.time&&t.reverse(),t},_getRangeInfo:function(n){var u,f,r,s;n=[this.getDateInfo(n[0]),this.getDateInfo(n[1])];n[0].time>n[1].time&&(u=!0,n.reverse());var i=Math.floor(n[1].time/het)-Math.floor(n[0].time/het)+1,t=new Date(n[0].time),e=t.getDate(),o=n[1].date.getDate();if(t.setDate(e+i-1),t.getDate()!==o)for(f=t.getTime()-n[1].time>0?1:-1;t.getDate()!==o&&(t.getTime()-n[1].time)*f>0;)i-=f,t.setDate(e+i-1);return r=Math.floor((i+n[0].day+6)/7),s=u?-r+1:r-1,u&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:i,weeks:r,nthWeek:s,fweek:n[0].day,lweek:n[1].day}},_getDateByWeeksAndDay:function(n,t,i){var r=this._getRangeInfo(i),f,u;return n>r.weeks||n===0&&t<r.fweek||n===r.weeks&&t>r.lweek?!1:(f=(n-1)*7-r.fweek+t,u=new Date(r.start.time),u.setDate(r.start.d+f),this.getDateInfo(u))}};fs.dimensions=fs.prototype.dimensions;fs.getDimensionsInfo=fs.prototype.getDimensionsInfo;fs.create=function(n,t){var i=[];return n.eachComponent("calendar",function(r){var u=new fs(r,n,t);i.push(u);r.coordinateSystem=u}),n.eachSeries(function(n){n.get("coordinateSystem")==="calendar"&&(n.coordinateSystem=i[n.get("calendarIndex")||0])}),i};ir.register("calendar",fs);pgt=it.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(n){var t=av(n);pgt.superApply(this,"init",arguments);dfr(n,t)},mergeOption:function(n){pgt.superApply(this,"mergeOption",arguments);dfr(this.option,n)}});gfr={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]};ner={EN:["S","M","T","W","T","F","S"],CN:["日","一","二","三","四","五","六"]};wi({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(n){var t=this.group;t.removeAll();var u=n.coordinateSystem,i=u.getRangeInfo(),r=u.getOrient();this._renderDayRect(n,i,t);this._renderLines(n,i,r,t);this._renderYearText(n,i,r,t);this._renderMonthText(n,r,t);this._renderWeekText(n,i,r,t)},_renderDayRect:function(n,t,i){for(var f,e,r=n.coordinateSystem,o=n.getModel("itemStyle").getItemStyle(),s=r.getCellWidth(),h=r.getCellHeight(),u=t.start.time;u<=t.end.time;u=r.getNextNDay(u,1).time)f=r.dataToRect([u],!1).tl,e=new et({shape:{x:f[0],y:f[1],width:s,height:h},cursor:"default",style:o}),i.add(e)},_renderLines:function(n,t,i,r){function a(t){u._firstDayOfMonth.push(e.getDateInfo(t));u._firstDayPoints.push(e.dataToRect([t],!1).tl);var f=u._getLinePointsOfOneWeek(n,t,i);u._tlpoints.push(f[0]);u._blpoints.push(f[f.length-1]);h&&u._drawSplitline(f,o,r)}var u=this,e=n.coordinateSystem,o=n.getModel("splitLine.lineStyle").getLineStyle(),h=n.get("splitLine.show"),l=o.lineWidth,f,c,s;for(this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[],f=t.start,c=0;f.time<=t.end.time;c++)a(f.formatedDate),c===0&&(f=e.getDateInfo(t.start.y+"-"+t.start.m)),s=f.date,s.setMonth(s.getMonth()+1),f=e.getDateInfo(s);a(e.getNextNDay(t.end.time,1).formatedDate);h&&this._drawSplitline(u._getEdgesPoints(u._tlpoints,l,i),o,r);h&&this._drawSplitline(u._getEdgesPoints(u._blpoints,l,i),o,r)},_getEdgesPoints:function(n,t,i){var r=[n[0].slice(),n[n.length-1].slice()],u=i==="horizontal"?0:1;return r[0][u]=r[0][u]-t/2,r[1][u]=r[1][u]+t/2,r},_drawSplitline:function(n,t,i){var r=new af({z2:20,shape:{points:n},style:t});i.add(r)},_getLinePointsOfOneWeek:function(n,t,i){var e=n.coordinateSystem,r,u,f,o;for(t=e.getDateInfo(t),r=[],u=0;u<7;u++)f=e.getNextNDay(t.time,u),o=e.dataToRect([f.time],!1),r[2*f.day]=o.tl,r[2*f.day+1]=o[i==="horizontal"?"bl":"tr"];return r},_formatterLabel:function(n,t){return typeof n=="string"&&n?boi(n,t):typeof n=="function"?n(t):t.nameMap},_yearTextPositionControl:function(n,t,i,r,u){var f,e;return t=t.slice(),f=["center","bottom"],r==="bottom"?(t[1]+=u,f=["center","top"]):r==="left"?t[0]-=u:r==="right"?(t[0]+=u,f=["center","top"]):t[1]-=u,e=0,(r==="left"||r==="right")&&(e=Math.PI/2),{rotation:e,position:t,style:{textAlign:f[0],textVerticalAlign:f[1]}}},_renderYearText:function(n,t,i,r){var f=n.getModel("yearLabel"),c,e;if(f.get("show")){c=f.get("margin");e=f.get("position");e||(e=i!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(u[0][0]+u[1][0])/2,a=(u[0][1]+u[1][1])/2,o=i==="horizontal"?0:1,v={top:[l,u[o][1]],bottom:[l,u[1-o][1]],left:[u[1-o][0],a],right:[u[o][0],a]},h=t.start.y;+t.end.y>+t.start.y&&(h=h+"-"+t.end.y);var y=f.get("formatter"),p={start:t.start.y,end:t.end.y,nameMap:h},w=this._formatterLabel(y,p),s=new k({z2:30});ii(s.style,f,{text:w});s.attr(this._yearTextPositionControl(s,v[e],i,e,c));r.add(s)}},_monthTextPositionControl:function(n,t,i,r,u){var f="left",e="top",o=n[0],s=n[1];return i==="horizontal"?(s=s+u,t&&(f="center"),r==="start"&&(e="bottom")):(o=o+u,t&&(e="middle"),r==="start"&&(f="right")),{x:o,y:s,textAlign:f,textVerticalAlign:e}},_renderMonthText:function(n,t,i){var r=n.getModel("monthLabel"),a,h,v,u,y,f,p;if(r.get("show")){var e=r.get("nameMap"),s=r.get("margin"),c=r.get("position"),b=r.get("align"),l=[this._tlpoints,this._blpoints];for(at(e)&&(e=gfr[e.toUpperCase()]||[]),a=c==="start"?0:1,h=t==="horizontal"?0:1,s=c==="start"?-s:s,v=b==="center",u=0;u<l[a].length-1;u++){y=l[a][u].slice();f=this._firstDayOfMonth[u];v&&(p=this._firstDayPoints[u],y[h]=(p[h]+l[0][u+1][h])/2);var d=r.get("formatter"),g=e[+f.m-1],nt={yyyy:f.y,yy:(f.y+"").slice(2),MM:f.m,M:+f.m,nameMap:g},tt=this._formatterLabel(d,nt),w=new k({z2:30});o(ii(w.style,r,{text:tt}),this._monthTextPositionControl(y,v,t,c,s));i.add(w)}}},_weekTextPositionControl:function(n,t,i,r,u){var s="center",h="middle",e=n[0],o=n[1],f=i==="start";return t==="horizontal"?(e=e+r+(f?1:-1)*u[0]/2,s=f?"right":"left"):(o=o+r+(f?1:-1)*u[1]/2,h=f?"bottom":"top"),{x:e,y:o,textAlign:s,textVerticalAlign:h}},_renderWeekText:function(n,t,i,r){var s=n.getModel("dayLabel"),l,a,e,v;if(s.get("show")){var u=n.coordinateSystem,y=s.get("position"),c=s.get("nameMap"),h=s.get("margin"),w=u.getFirstDayOfWeek();for(at(c)&&(c=ner[c.toUpperCase()]||[]),l=u.getNextNDay(t.end.time,7-t.lweek).time,a=[u.getCellWidth(),u.getCellHeight()],h=f(h,a[i==="horizontal"?0:1]),y==="start"&&(l=u.getNextNDay(t.start.time,-(7+t.fweek)).time,h=-h),e=0;e<7;e++){var b=u.getNextNDay(l,e),d=u.dataToRect([b.time],!1).center,p=e;p=Math.abs((e+w)%7);v=new k({z2:30});o(ii(v.style,s,{text:c[p]}),this._weekTextPositionControl(d,i,y,h,a));r.add(v)}}}});hu({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}});wi({type:"title",render:function(n,t,i){var f,l,r,p,o,w,b;if(this.group.removeAll(),n.get("show")){var s=this.group,d=n.getModel("textStyle"),g=n.getModel("subtextStyle"),e=n.get("textAlign"),u=n.get("textBaseline"),h=new k({style:ii({},d,{text:n.get("text"),textFill:d.getTextColor()},{disableBox:!0}),z2:10}),tt=h.getBoundingRect(),nt=n.get("subtext"),c=new k({style:ii({},g,{text:nt,textFill:g.getTextColor(),y:tt.height+n.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),a=n.get("link"),v=n.get("sublink"),y=n.get("triggerEvent",!0);if(h.silent=!a&&!y,c.silent=!v&&!y,a)h.on("click",function(){window.open(a,"_"+n.get("target"))});if(v)c.on("click",function(){window.open(v,"_"+n.get("subtarget"))});h.eventData=c.eventData=y?{componentType:"title",componentIndex:n.componentIndex}:null;s.add(h);nt&&s.add(c);f=s.getBoundingRect();l=n.getBoxLayoutParams();l.width=f.width;l.height=f.height;r=li(l,{width:i.getWidth(),height:i.getHeight()},n.get("padding"));e||(e=n.get("left")||n.get("right"),e==="middle"&&(e="center"),e==="right"?r.x+=r.width:e==="center"&&(r.x+=r.width/2));u||(u=n.get("top")||n.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?r.y+=r.height:u==="middle"&&(r.y+=r.height/2),u=u||"top");s.attr("position",[r.x,r.y]);p={textAlign:e,textVerticalAlign:u};h.setStyle(p);c.setStyle(p);f=s.getBoundingRect();o=r.margin;w=n.getItemStyle(["color","opacity"]);w.fill=n.get("backgroundColor");b=new et({shape:{x:f.x-o[3],y:f.y-o[0],width:f.width+o[1]+o[3],height:f.height+o[0]+o[2],r:n.get("borderRadius")},style:w,silent:!0});olt(b);s.add(b)}}});it.registerSubTypeDefaulter("dataZoom",function(){return"slider"});ter=["x","y","z","radius","angle","single"];ier=["cartesian2d","polar","singleAxis"];wgt=syu(ter,["axisIndex","axis","index","id"]);var gh=t,rer=pc,bgt=function(n,t,i,r){this._dimName=n;this._axisIndex=t;this._valueWindow;this._percentWindow;this._dataExtent;this._minMaxSpan;this.ecModel=r;this._dataZoomModel=i};bgt.prototype={constructor:bgt,hostedBy:function(n){return this._dataZoomModel===n},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var n=[],t=this.ecModel;return t.eachSeries(function(i){if(oyu(i.get("coordinateSystem"))){var r=this._dimName,u=t.queryComponents({mainType:r+"Axis",index:i.get(r+"AxisIndex"),id:i.get(r+"AxisId")})[0];this._axisIndex===(u&&u.componentIndex)&&n.push(i)}},this),n},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var n=this._dimName,u=this.ecModel,f=this.getAxisModel(),e=n==="x"||n==="y",i,t,r;return e?(t="gridIndex",i=n==="x"?"y":"x"):(t="polarIndex",i=n==="angle"?"radius":"angle"),u.eachComponent(i+"Axis",function(n){(n.get(t)||0)===(f.get(t)||0)&&(r=n)}),r},getMinMaxSpan:function(){return c(this._minMaxSpan)},calculateDataWindow:function(n){var u=this._dataExtent,e=this.getAxisModel(),f=e.axis.scale,o=this._dataZoomModel.getRangePropMode(),i=[0,100],r=[n.start,n.end],t=[];return gh(["startValue","endValue"],function(i){t.push(n[i]!=null?f.parse(n[i]):null)}),gh([0,1],function(n){var s=t[n],e=r[n];o[n]==="percent"?(e==null&&(e=i[n]),s=f.parse(ri(e,i,u,!0))):e=ri(s,u,i,!0);t[n]=s;r[n]=e}),{valueWindow:rer(t),percentWindow:rer(r)}},reset:function(n){var i,t;n===this._dataZoomModel&&(i=this.getTargetSeriesModels(),this._dataExtent=cyu(this,this._dimName,i),t=this.calculateDataWindow(n.option),this._valueWindow=t.valueWindow,this._percentWindow=t.percentWindow,ayu(this),uer(this))},restore:function(n){n===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,uer(this,!0))},filterData:function(n){function f(n){return n>=t[0]&&n<=t[1]}if(n===this._dataZoomModel){var r=this._dimName,u=this.getTargetSeriesModels(),i=n.get("filterMode"),t=this._valueWindow;i!=="none"&&gh(u,function(n){var u=n.getData(),e=u.mapDimension(r,!0);e.length&&(i==="weakFilter"?u.filterSelf(function(n){for(var f,o,s,i=0;i<e.length;i++){var r=u.get(e[i],n),h=!isNaN(r),c=r<t[0],l=r>t[1];if(h&&!c&&!l)return!0;h&&(s=!0);c&&(f=!0);l&&(o=!0)}return s&&f&&o}):gh(e,function(r){if(i==="empty")n.setData(u.map(r,function(n){return f(n)?n:NaN}));else{var e={};e[r]=t;u.selectRange(e)}}),gh(e,function(n){u.setApproximateExtent(t,n)}))})}}};var ip=t,na=wgt,kgt=hu({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(n,t,i){this._dataIntervalByAxis={};this._dataInfo={};this._axisProxies={};this.textStyleModel;this._autoThrottle=!0;this._rangePropMode=["percent","percent"];var r=fer(n);this.mergeDefaultAndTheme(n,i);this.doInit(r)},mergeOption:function(n){var t=fer(n);v(this.option,n,!0);this.doInit(t)},doInit:function(n){var t=this.option;d.canvasSupported||(t.realtime=!1);this._setDefaultThrottle(n);eer(this,n);ip([["start","startValue"],["end","endValue"]],function(n,i){this._rangePropMode[i]==="value"&&(t[n[0]]=null)},this);this.textStyleModel=this.getModel("textStyle");this._resetTarget();this._giveAxisProxies()},_giveAxisProxies:function(){var n=this._axisProxies;this.eachTargetAxis(function(t,i,r,u){var f=this.dependentModels[t.axis][i],e=f.__dzAxisProxy||(f.__dzAxisProxy=new bgt(t.name,i,this,u));n[t.name+"_"+i]=e},this)},_resetTarget:function(){var n=this.option,t=this._judgeAutoMode();na(function(t){var i=t.axisIndex;n[i]=tr(n[i])},this);t==="axisIndex"?this._autoSetAxisIndex():t==="orient"&&this._autoSetOrient()},_judgeAutoMode:function(){var n=this.option,t=!1,i;return(na(function(i){n[i.axisIndex]!=null&&(t=!0)},this),i=n.orient,i==null&&t)?"orient":t?void 0:(i==null&&(n.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var n=!0,r=this.get("orient",!0),t=this.option,f=this.dependentModels,i;n&&(i=r==="vertical"?"y":"x",f[i+"Axis"].length?(t[i+"AxisIndex"]=[0],n=!1):ip(f.singleAxis,function(i){n&&i.get("orient",!0)===r&&(t.singleAxisIndex=[i.componentIndex],n=!1)}));n&&na(function(i){var r,f,u,e;if(n){if(r=[],f=this.dependentModels[i.axis],f.length&&!r.length)for(u=0,e=f.length;u<e;u++)f[u].get("type")==="category"&&r.push(u);t[i.axisIndex]=r;r.length&&(n=!1)}},this);n&&this.ecModel.eachSeries(function(n){this._isSeriesHasAllAxesTypeOf(n,"value")&&na(function(i){var f=t[i.axisIndex],r=n.get(i.axisIndex),e=n.get(i.axisId),o=n.ecModel.queryComponents({mainType:i.axis,index:r,id:e})[0];if(u&&!o)throw new Error(i.axis+' "'+kt(r,e,0)+'" not found');r=o.componentIndex;tt(f,r)<0&&f.push(r)})},this)},_autoSetOrient:function(){var n;this.eachTargetAxis(function(t){n||(n=t.name)},this);this.option.orient=n==="y"?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(n,t){var i=!0;return na(function(r){var f=n.get(r.axisIndex),u=this.dependentModels[r.axis][f];u&&u.get("type")===t||(i=!1)},this),i},_setDefaultThrottle:function(n){if(n.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var n;return na(function(t){if(n==null){var i=this.get(t.axisIndex);i.length&&(n=this.dependentModels[t.axis][i[0]])}},this),n},eachTargetAxis:function(n,t){var i=this.ecModel;na(function(r){ip(this.get(r.axisIndex),function(u){n.call(t,r,u,this,i)},this)},this)},getAxisProxy:function(n,t){return this._axisProxies[n+"_"+t]},getAxisModel:function(n,t){var i=this.getAxisProxy(n,t);return i&&i.getAxisModel()},setRawRange:function(n,t){var i=this.option;ip([["start","startValue"],["end","endValue"]],function(t){(n[t[0]]!=null||n[t[1]]!=null)&&(i[t[0]]=n[t[0]],i[t[1]]=n[t[1]])},this);t||eer(this,n)},getPercentRange:function(){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataPercentWindow()},getValueRange:function(n,t){if(n==null&&t==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(n,t).getDataValueWindow()},findRepresentativeAxisProxy:function(n){var t,i;if(n)return n.__dzAxisProxy;t=this._axisProxies;for(i in t)if(t.hasOwnProperty(i)&&t[i].hostedBy(this))return t[i];for(i in t)if(t.hasOwnProperty(i)&&!t[i].hostedBy(this))return t[i]},getRangePropMode:function(){return this._rangePropMode.slice()}});var dgt=wf.extend({type:"dataZoom",render:function(n,t,i){this.dataZoomModel=n;this.ecModel=t;this.api=i},getTargetCoordInfo:function(){function r(n,t,i,r){for(var u,f=0;f<i.length;f++)if(i[f].model===n){u=i[f];break}u||i.push(u={model:n,axisModels:[],coordIndex:r});u.axisModels.push(t)}var t=this.dataZoomModel,i=this.ecModel,n={};return t.eachTargetAxis(function(t,u){var e=i.getComponent(t.axis,u),f;e&&(f=e.getCoordSysModel(),f&&r(f,e,n[f.mainType]||(n[f.mainType]=[]),f.componentIndex))},this),n}}),gku=kgt.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}}),cet=et,ta=ri,ggt=pc,es=l,nnt=t,oer=7,vyu=1,tnt=30,nd="horizontal",ser="vertical",yyu=5,pyu=["line","bar","candlestick","scatter"],int=dgt.extend({type:"dataZoom.slider",init:function(n,t){this._displayables={};this._orient;this._range;this._handleEnds;this._size;this._handleWidth;this._handleHeight;this._location;this._dragging;this._dataShadowInfo;this.api=t},render:function(n,t,i,r){if(int.superApply(this,"render",arguments),nb(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=n.get("orient"),this.dataZoomModel.get("show")===!1){this.group.removeAll();return}r&&r.type==="dataZoom"&&r.from===this.uid||this._buildView();this._updateView()},remove:function(){int.superApply(this,"remove",arguments);yhi(this,"_dispatchZoomAction")},dispose:function(){int.superApply(this,"dispose",arguments);yhi(this,"_dispatchZoomAction")},_buildView:function(){var n=this.group,t;n.removeAll();this._resetLocation();this._resetInterval();t=this._displayables.barGroup=new e;this._renderBackground();this._renderHandle();this._renderDataShadow();n.add(t);this._positionGroup()},_resetLocation:function(){var f=this.dataZoomModel,e=this.api,n=this._findCoordRect(),r={width:e.getWidth(),height:e.getHeight()},o=this._orient===nd?{right:r.width-n.x-n.width,top:r.height-tnt-oer,width:n.width,height:tnt}:{right:oer,top:n.y,width:tnt,height:n.height},u=av(f.option),i;t(["right","top","width","height"],function(n){u[n]==="ph"&&(u[n]=o[n])});i=li(u,r,f.padding);this._location={x:i.x,y:i.y};this._size=[i.width,i.height];this._orient===ser&&this._size.reverse()},_positionGroup:function(){var u=this.group,f=this._location,t=this._orient,e=this.dataZoomModel.getFirstTargetAxisModel(),i=e&&e.get("inverse"),o=this._displayables.barGroup,n=(this._dataShadowInfo||{}).otherAxisInverse,r;o.attr(t===nd&&!i?{scale:n?[1,1]:[1,-1]}:t===nd&&i?{scale:n?[-1,1]:[-1,-1]}:t===ser&&!i?{scale:n?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:n?[-1,-1]:[-1,1],rotation:Math.PI/2});r=u.getBoundingRect([o]);u.attr("position",[f.x-r.x,f.y-r.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var i=this.dataZoomModel,n=this._size,t=this._displayables.barGroup;t.add(new cet({silent:!0,shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:i.get("backgroundColor")},z2:-40}));t.add(new cet({shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:"transparent"},z2:0,onclick:l(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var o=this._dataShadowInfo=this._prepareDataShadowInfo(),n,l,e;if(o){var u=this._size,h=o.series,f=h.getRawData(),c=h.getShadowDim?h.getShadowDim():o.otherDim;if(c!=null){n=f.getDataExtent(c);l=(n[1]-n[0])*.3;n=[n[0]-l,n[1]+l];var p=[0,u[1]],w=[0,u[0]],t=[[u[0],0],[0,0]],i=[],v=w[1]/(f.count()-1),r=0,y=Math.round(f.count()/u[0]),a;f.each([c],function(u,f){if(y>0&&f%y){r+=v;return}var e=u==null||isNaN(u)||u==="",o=e?0:ta(u,n,p,!0);e&&!a&&f?(t.push([t[t.length-1][0],0]),i.push([i[i.length-1][0],0])):!e&&a&&(t.push([r,0]),i.push([r,0]));t.push([r,o]);i.push([r,o]);r+=v;a=e});e=this.dataZoomModel;this._displayables.barGroup.add(new ku({shape:{points:t},style:s({fill:e.get("dataBackgroundColor")},e.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20}));this._displayables.barGroup.add(new af({shape:{points:i},style:e.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var n=this.dataZoomModel,r=n.get("showDataShadow"),i,u;if(r!==!1)return u=this.ecModel,n.eachTargetAxis(function(f,e){var o=n.getAxisProxy(f.name,e).getTargetSeriesModels();t(o,function(n){if(!i&&(r===!0||!(tt(pyu,n.get("type"))<0))){var o=u.getComponent(f.axis,e).axis,t=wyu(f.name),s,h=n.coordinateSystem;t!=null&&h.getOtherAxis&&(s=h.getOtherAxis(o).inverse);t=n.getData().mapDimension(t);i={thisAxis:o,series:n,thisDim:f.name,otherDim:t,otherAxisInverse:s}}},this)},this),i},_renderHandle:function(){var t=this._displayables,u=t.handles=[],e=t.handleLabels=[],i=this._displayables.barGroup,r=this._size,n=this.dataZoomModel;i.add(t.filler=new cet({draggable:!0,cursor:her(this._orient),drift:es(this._onDragMove,this,"all"),onmousemove:function(n){te(n.event)},ondragstart:es(this._showDataInfo,this,!0),ondragend:es(this._onDragEnd,this),onmouseover:es(this._showDataInfo,this,!0),onmouseout:es(this._showDataInfo,this,!1),style:{fill:n.get("fillerColor"),textPosition:"inside"}}));i.add(new cet(olt({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{stroke:n.get("dataBackgroundColor")||n.get("borderColor"),lineWidth:vyu,fill:"rgba(0,0,0,0)"}})));nnt([0,1],function(t){var r=lw(n.get("handleIcon"),{cursor:her(this._orient),draggable:!0,drift:es(this._onDragMove,this,t),onmousemove:function(n){te(n.event)},ondragend:es(this._onDragEnd,this),onmouseover:es(this._showDataInfo,this,!0),onmouseout:es(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),h=r.getBoundingRect(),o,s;this._handleHeight=f(n.get("handleSize"),this._size[1]);this._handleWidth=h.width/h.height*this._handleHeight;r.setStyle(n.getModel("handleStyle").getItemStyle());o=n.get("handleColor");o!=null&&(r.style.fill=o);i.add(u[t]=r);s=n.textStyleModel;this.group.add(e[t]=new k({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:s.getTextColor(),textFont:s.getFont()},z2:10}))},this)},_resetInterval:function(){var n=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[ta(n[0],[0,100],t,!0),ta(n[1],[0,100],t,!0)]},_updateInterval:function(n,t){var s=this.dataZoomModel,e=this._handleEnds,i=this._getViewExtent(),r=s.findRepresentativeAxisProxy().getMinMaxSpan(),u=[0,100],f,o;return wl(t,e,i,s.get("zoomLock")?"all":n,r.minSpan!=null?ta(r.minSpan,u,i,!0):null,r.maxSpan!=null?ta(r.maxSpan,u,i,!0):null),f=this._range,o=this._range=ggt([ta(e[0],i,u,!0),ta(e[1],i,u,!0)]),!f||f[0]!==o[0]||f[1]!==o[1]},_updateView:function(n){var i=this._displayables,r=this._handleEnds,t=ggt(r.slice()),u=this._size;nnt([0,1],function(n){var f=i.handles[n],t=this._handleHeight;f.attr({scale:[t/2,t/2],position:[r[n],u[1]/2-t/2]})},this);i.filler.setShape({x:t[0],y:0,width:t[1]-t[0],height:u[1]});this._updateDataInfo(n)},_updateDataInfo:function(n){function c(n){var t=yc(r.handles[n].parent,this.group),i=wlt(n===0?"right":"left",t),e=this._handleWidth/2+yyu,o=ve([h[n]+(n===0?-e:e),this._size[1]/2],t);l[n].setStyle({x:o[0],y:o[1],textVerticalAlign:u===nd?"middle":i,textAlign:u===nd?i:"center",text:f[n]})}var i=this.dataZoomModel,r=this._displayables,l=r.handleLabels,u=this._orient,f=["",""],t,h;if(i.get("showDetail")&&(t=i.findRepresentativeAxisProxy(),t)){var e=t.getAxisModel().axis,o=this._range,s=n?t.calculateDataWindow({start:o[0],end:o[1]}).valueWindow:t.getDataValueWindow();f=[this._formatLabel(s[0],e),this._formatLabel(s[1],e)]}h=ggt(this._handleEnds.slice());c.call(this,0);c.call(this,1)},_formatLabel:function(n,t){var f=this.dataZoomModel,i=f.get("labelFormatter"),r=f.get("labelPrecision"),u;return(r==null||r==="auto")&&(r=t.getPixelPrecision()),u=n==null||isNaN(n)?"":t.type==="category"||t.type==="time"?t.scale.getLabel(Math.round(n)):n.toFixed(Math.min(r,20)),ar(i)?i(n,u):at(i)?i.replace("{value}",u):u},_showDataInfo:function(n){n=this._dragging||n;var t=this._displayables.handleLabels;t[0].attr("invisible",!n);t[1].attr("invisible",!n)},_onDragMove:function(n,t,i){this._dragging=!0;var u=this._displayables.barGroup.getLocalTransform(),f=ve([t,i],u,!0),e=this._updateInterval(n,f[0]),r=this.dataZoomModel.get("realtime");this._updateView(!r);e&&r&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1;this._showDataInfo(!1);var n=this.dataZoomModel.get("realtime");n||this._dispatchZoomAction()},_onClickPanelClick:function(n){var i=this._size,t=this._displayables.barGroup.transformCoordToLocal(n.offsetX,n.offsetY);if(!(t[0]<0)&&!(t[0]>i[0])&&!(t[1]<0)&&!(t[1]>i[1])){var r=this._handleEnds,u=(r[0]+r[1])/2,f=this._updateInterval("all",t[0]-u);this._updateView();f&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var n=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:n[0],end:n[1]})},_findCoordRect:function(){var n,t,i;return nnt(this.getTargetCoordInfo(),function(t){if(!n&&t.length){var i=t[0].model.coordinateSystem;n=i.getRect&&i.getRect()}}),n||(t=this.api.getWidth(),i=this.api.getHeight(),n={x:t*.2,y:i*.2,width:t*.6,height:i*.6}),n}});kgt.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});rnt='\0_ec_dataZoom_roams';var tpu=l,ver=dgt.extend({type:"dataZoom.inside",init:function(){this._range},render:function(n,i,u){ver.superApply(this,"render",arguments);this._range=n.getPercentRange();t(this.getTargetCoordInfo(),function(i,f){var e=r(i,function(n){return cer(n.model)});t(i,function(i){var r=i.model,o={};t(["pan","zoom","scrollMove"],function(n){o[n]=tpu(ipu[n],this,i,f)},this);byu(u,{coordId:cer(r),allCoordIds:e,containsPoint:function(n,t,i){return r.coordinateSystem.containPoint([t,i])},dataZoomId:n.id,dataZoomModel:n,getRange:o})},this)},this)},dispose:function(){kyu(this.api,this.dataZoomModel.id);ver.superApply(this,"dispose",arguments);this._range=null}}),ipu={zoom:function(n,t,i,r){var o=this._range,u=o.slice(),h=n.axisModels[0],s;if(h){var f=aet[t](null,[r.originX,r.originY],h,i,n),e=(f.signal>0?f.pixelStart+f.pixelLength-f.pixel:f.pixel-f.pixelStart)/f.pixelLength*(u[1]-u[0])+u[0],c=Math.max(1/r.scale,0);return u[0]=(u[0]-e)*c+e,u[1]=(u[1]-e)*c+e,s=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan(),wl(0,u,[0,100],0,s.minSpan,s.maxSpan),this._range=u,o[0]!==u[0]||o[1]!==u[1]?u:void 0}},pan:yer(function(n,t,i,r,u,f){var e=aet[r]([f.oldX,f.oldY],[f.newX,f.newY],t,u,i);return e.signal*(n[1]-n[0])*e.pixel/e.pixelLength}),scrollMove:yer(function(n,t,i,r,u,f){var e=aet[r]([0,0],[f.scrollDelta,f.scrollDelta],t,u,i);return e.signal*(n[1]-n[0])*f.scrollDelta})};aet={grid:function(n,t,i,r,u){var o=i.axis,f={},e=u.model.coordinateSystem.getRect();return n=n||[0,0],o.dim==="x"?(f.pixel=t[0]-n[0],f.pixelLength=e.width,f.pixelStart=e.x,f.signal=o.inverse?1:-1):(f.pixel=t[1]-n[1],f.pixelLength=e.height,f.pixelStart=e.y,f.signal=o.inverse?-1:1),f},polar:function(n,t,i,r,u){var h=i.axis,f={},e=u.model.coordinateSystem,o=e.getRadiusAxis().getExtent(),s=e.getAngleAxis().getExtent();return n=n?e.pointToCoord(n):[0,0],t=e.pointToCoord(t),i.mainType==="radiusAxis"?(f.pixel=t[0]-n[0],f.pixelLength=o[1]-o[0],f.pixelStart=o[0],f.signal=h.inverse?1:-1):(f.pixel=t[1]-n[1],f.pixelLength=s[1]-s[0],f.pixelStart=s[0],f.signal=h.inverse?-1:1),f},singleAxis:function(n,t,i,r,u){var o=i.axis,e=u.model.coordinateSystem.getRect(),f={};return n=n||[0,0],o.orient==="horizontal"?(f.pixel=t[0]-n[0],f.pixelLength=e.width,f.pixelStart=e.x,f.signal=o.inverse?1:-1):(f.pixel=t[1]-n[1],f.pixelLength=e.height,f.pixelStart=e.y,f.signal=o.inverse?-1:1),f}};su({getTargetSeries:function(n){var i=p();return n.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(n,r,u){var f=u.getAxisProxy(n.name,r);t(f.getTargetSeriesModels(),function(n){i.set(n.uid,n)})})}),i},modifyOutputEnd:!0,overallReset:function(n,t){n.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(n,i,r){r.getAxisProxy(n.name,i).reset(r,t)});n.eachTargetAxis(function(n,i,r){r.getAxisProxy(n.name,i).filterData(r,t)})});n.eachComponent("dataZoom",function(n){var t=n.findRepresentativeAxisProxy(),i=t.getDataPercentWindow(),r=t.getDataValueWindow();n.setRawRange({start:i[0],end:i[1],startValue:r[0],endValue:r[1]},!0)})}});rt("dataZoom",function(n,i){var u=hyu(l(i.eachComponent,i,"dataZoom"),wgt,function(n,t){return n.get(t.axisIndex)}),r=[];i.eachComponent({mainType:"dataZoom",query:n},function(n){r.push.apply(r,u(n).nodes)});t(r,function(t){t.setRawRange({start:n.start,end:n.end,startValue:n.startValue,endValue:n.endValue})})});unt=t;fnt=function(n){var t=n&&n.visualMap;i(t)||(t=t?[t]:[]);unt(t,function(n){if(n){rp(n,"splitList")&&!rp(n,"pieces")&&(n.pieces=n.splitList,delete n.splitList);var t=n.pieces;t&&i(t)&&unt(t,function(n){a(n)&&(rp(n,"start")&&!rp(n,"min")&&(n.min=n.start),rp(n,"end")&&!rp(n,"max")&&(n.max=n.end))})}})};it.registerSubTypeDefaulter("visualMap",function(n){return!n.categories&&(!(n.pieces?n.pieces.length>0:n.splitNumber>0)||n.calculable)?"continuous":"piecewise"});ent=kv.VISUAL.COMPONENT;yt(ent,{createOnAllSeries:!0,reset:function(n,t){var i=[];return t.eachComponent("visualMap",function(t){var r=n.pipelineContext;!t.isTargetSeries(n)||r&&r.large||i.push(bvu(t.stateList,t.targetVisuals,l(t.getValueState,t),t.getDataDimension(n.getData())))}),i}});yt(ent,{createOnAllSeries:!0,reset:function(n,t){var i=n.getData(),r=[];t.eachComponent("visualMap",function(t){if(t.isTargetSeries(n)){var u=t.getVisualMeta(l(rpu,null,n,t))||{stops:[],outerColors:[]},e=t.getDataDimension(i),f=i.getDimensionInfo(e);f!=null&&(u.dimension=f.index,r.push(u))}});n.getData().setVisual("visualMeta",r)}});var ont={get:function(n,t,r){var u=c((upu[n]||{})[t]);return r?i(u)?u[u.length-1]:u:u}},upu={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},per=ht.mapVisual,fpu=ht.eachVisual,epu=i,snt=t,opu=pc,spu=ri,hnt=di,vet=hu({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-Infinity,Infinity],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(n,t,i){this._dataExtent;this.targetVisuals={};this.controllerVisuals={};this.textStyleModel;this.itemSize;this.mergeDefaultAndTheme(n,i)},optionUpdated:function(n,t){var i=this.option;d.canvasSupported||(i.realtime=!1);t||nfr(i,n,this.replacableOptionKeys);this.textStyleModel=this.getModel("textStyle");this.resetItemSize();this.completeVisualOption()},resetVisual:function(n){var t=this.stateList;n=l(n,this);this.controllerVisuals=ugt(this.option.controller,t,n);this.targetVisuals=ugt(this.option.target,t,n)},getTargetSeriesIndices:function(){var n=this.option.seriesIndex,t=[];return n==null||n==="all"?this.ecModel.eachSeries(function(n,i){t.push(i)}):t=tr(n),t},eachTargetSeries:function(n,i){t(this.getTargetSeriesIndices(),function(t){n.call(i,this.ecModel.getSeriesByIndex(t))},this)},isTargetSeries:function(n){var t=!1;return this.eachTargetSeries(function(i){i===n&&(t=!0)}),t},formatValueText:function(n,t,r){function s(n){return n===o[0]?"min":n===o[1]?"max":(+n).toFixed(Math.min(c,20))}var h=this.option,c=h.precision,o=this.dataBound,e=h.formatter,f,u;return(r=r||["<",">"],i(n)&&(n=n.slice(),f=!0),u=t?n:f?[s(n[0]),s(n[1])]:s(n),at(e))?e.replace("{value}",f?u[0]:u).replace("{value2}",f?u[1]:u):ar(e)?f?e(n[0],n[1]):e(n):f?n[0]===o[0]?r[0]+" "+u[1]:n[1]===o[1]?r[1]+" "+u[0]:u[0]+" - "+u[1]:u},resetExtent:function(){var n=this.option,t=opu([n.min,n.max]);this._dataExtent=t},getDataDimension:function(n){var i=this.option.dimension,e=n.dimensions,r,t,u,f;if(i!=null||e.length){if(i!=null)return n.getDimension(i);for(r=n.dimensions,t=r.length-1;t>=0;t--)if(u=r[t],f=n.getDimensionInfo(u),!f.isCalculationCoord)return u}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){function f(i){epu(n.color)&&!i.inRange&&(i.inRange={color:n.color.slice().reverse()});i.inRange=i.inRange||{color:e.get("gradientColor")};snt(this.stateList,function(n){var r=i[n],u;at(r)&&(u=ont.get(r,"active",t),u?(i[n]={},i[n][r]=u):delete i[n])},this)}function o(n,i,r){var f=n[i],u=n[r];f&&!u&&(u=n[r]={},snt(f,function(n,i){if(ht.isValidType(i)){var r=ont.get(i,"inactive",t);r!=null&&(u[i]=r,i!=="color"||u.hasOwnProperty("opacity")||u.hasOwnProperty("colorAlpha")||(u.opacity=[0,0]))}}))}function s(n){var i=(n.inRange||{}).symbol||(n.outOfRange||{}).symbol,r=(n.inRange||{}).symbolSize||(n.outOfRange||{}).symbolSize,u=this.get("inactiveColor");snt(this.stateList,function(f){var o=this.itemSize,e=n[f],s,h;e||(e=n[f]={color:t?u:[u]});e.symbol==null&&(e.symbol=i&&c(i)||(t?"roundRect":["roundRect"]));e.symbolSize==null&&(e.symbolSize=r&&c(r)||(t?o[0]:[o[0],o[0]]));e.symbol=per(e.symbol,function(n){return n==="none"||n==="square"?"roundRect":n});s=e.symbolSize;s!=null&&(h=-Infinity,fpu(s,function(n){n>h&&(h=n)}),e.symbolSize=per(s,function(n){return spu(n,[0,h],[0,o[0]],!0)}))},this)}var e=this.ecModel,n=this.option,u={inRange:n.inRange,outOfRange:n.outOfRange},i=n.target||(n.target={}),r=n.controller||(n.controller={}),t;v(i,u);v(r,u);t=this.isCategory();f.call(this,i);f.call(this,r);o.call(this,i,"inRange","outOfRange");s.call(this,r)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:hnt,getValueState:hnt,getVisualMeta:hnt}),wer=[20,140],ber=vet.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(){ber.superApply(this,"optionUpdated",arguments);this.resetExtent();this.resetVisual(function(n){n.mappingMethod="linear";n.dataExtent=this.getExtent()});this._resetRange()},resetItemSize:function(){ber.superApply(this,"resetItemSize",arguments);var n=this.itemSize;this._orient==="horizontal"&&n.reverse();(n[0]==null||isNaN(n[0]))&&(n[0]=wer[0]);(n[1]==null||isNaN(n[1]))&&(n[1]=wer[1])},_resetRange:function(){var t=this.getExtent(),n=this.option.range;!n||n.auto?(t.auto=1,this.option.range=t):i(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],t[0]),n[1]=Math.min(n[1],t[1]))},completeVisualOption:function(){vet.prototype.completeVisualOption.apply(this,arguments);t(this.stateList,function(n){var t=this.option.controller[n].symbolSize;t&&t[0]!==t[1]&&(t[0]=0)},this)},setSelected:function(n){this.option.range=n.slice();this._resetRange()},getSelected:function(){var t=this.getExtent(),n=pc((this.get("range")||[]).slice());return n[0]>t[1]&&(n[0]=t[1]),n[1]>t[1]&&(n[1]=t[1]),n[0]<t[0]&&(n[0]=t[0]),n[1]<t[0]&&(n[1]=t[0]),n},getValueState:function(n){var t=this.option.range,i=this.getExtent();return(t[0]<=i[0]||t[0]<=n)&&(t[1]>=i[1]||n<=t[1])?"inRange":"outOfRange"},findTargetDataIndices:function(n){var t=[];return this.eachTargetSeries(function(i){var r=[],u=i.getData();u.each(this.getDataDimension(u),function(t,i){n[0]<=t&&t<=n[1]&&r.push(i)},this);t.push({seriesId:i.id,dataIndex:r})},this),t},getVisualMeta:function(n){function e(t,r){i.push({value:t,color:n(t,r)})}for(var u=ker(this,"outOfRange",this.getExtent()),t=ker(this,"inRange",this.option.range.slice()),i=[],o=0,r=0,c=t.length,h=u.length,f,s;r<h&&(!t.length||u[r]<=t[0]);r++)u[r]<t[o]&&e(u[r],"outOfRange");for(f=1;o<c;o++,f=0)f&&i.length&&e(t[o],"outOfRange"),e(t[o],"inRange");for(f=1;r<h;r++)(!t.length||t[t.length-1]<u[r])&&(f&&(i.length&&e(i[i.length-1].value,"outOfRange"),f=0),e(u[r],"outOfRange"));return s=i.length,{stops:i,outerColors:[s?i[0].color:"transparent",s?i[s-1].color:"transparent"]}}});cnt=wi({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(n,t){this.ecModel=n;this.api=t;this.visualMapModel},render:function(n){if(this.visualMapModel=n,n.get("show")===!1){this.group.removeAll();return}this.doRender.apply(this,arguments)},renderBackground:function(n){var i=this.visualMapModel,t=wc(i.get("padding")||0),r=n.getBoundingRect();n.add(new et({z2:-1,silent:!0,shape:{x:r.x-t[3],y:r.y-t[0],width:r.width+t[3]+t[1],height:r.height+t[0]+t[2]},style:{fill:i.get("backgroundColor"),stroke:i.get("borderColor"),lineWidth:i.get("borderWidth")}}))},getControllerVisual:function(n,i,r){function c(n){return u[n]}function l(n,t){u[n]=t}var o,e,s;r=r||{};var h=r.forceState,f=this.visualMapModel,u={};return i==="symbol"&&(u.symbol=f.get("itemSymbol")),i==="color"&&(o=f.get("contentColor"),u.color=o),e=f.controllerVisuals[h||f.getValueState(n)],s=ht.prepareVisualTypes(e),t(s,function(t){var u=e[t];r.convertOpacityToAlpha&&t==="opacity"&&(t="colorAlpha",u=e.__alphaForOpacity);ht.dependsOn(t,i)&&u&&u.applyVisual(n,c,l)}),u[i]},positionGroup:function(n){var i=this.visualMapModel,t=this.api;vtt(n,i.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})},doRender:di});var os=ri,hpu=t,pet=Math.min,td=Math.max,cpu=12,ger=6,lpu=cnt.extend({type:"visualMap.continuous",init:function(){lpu.superApply(this,"init",arguments);this._shapes={};this._dataInterval=[];this._handleEnds=[];this._orient;this._useHandle;this._hoverLinkDataIndices=[];this._dragging;this._hovering},doRender:function(n,t,i,r){r&&r.type==="selectDataRange"&&r.from===this.uid||this._buildView()},_buildView:function(){var t,n,i;this.group.removeAll();t=this.visualMapModel;n=this.group;this._orient=t.get("orient");this._useHandle=t.get("calculable");this._resetInterval();this._renderBar(n);i=t.get("text");this._renderEndsText(n,i,0);this._renderEndsText(n,i,1);this._updateView(!0);this.renderBackground(n);this._updateView();this._enableHoverLinkToSeries();this._enableHoverLinkFromSeries();this.positionGroup(n)},_renderEndsText:function(n,t,i){var r;if(t){r=t[1-i];r=r!=null?r+"":"";var u=this.visualMapModel,f=u.get("textGap"),e=u.itemSize,o=this._shapes.barGroup,s=this._applyTransform([e[0]/2,i===0?-f:e[1]+f],o),h=this._applyTransform(i===0?"bottom":"top",o),c=this._orient,l=this.visualMapModel.textStyleModel;this.group.add(new k({style:{x:s[0],y:s[1],textVerticalAlign:c==="horizontal"?"middle":h,textAlign:c==="horizontal"?h:"center",text:r,textFont:l.getFont(),textFill:l.getTextColor()}}))}},_renderBar:function(n){var f=this.visualMapModel,t=this._shapes,r=f.itemSize,e=this._orient,h=this._useHandle,o=der(f,this.api,r),i=t.barGroup=this._createBarGroup(o),s,u;i.add(t.outOfRange=wet());i.add(t.inRange=wet(null,h?tor(this._orient):null,l(this._dragHandle,this,"all",!1),l(this._dragHandle,this,"all",!0)));s=f.textStyleModel.getTextRect("国");u=td(s.width,s.height);h&&(t.handleThumbs=[],t.handleLabels=[],t.handleLabelPoints=[],this._createHandle(i,0,r,u,e,o),this._createHandle(i,1,r,u,e,o));this._createIndicator(i,r,u,e);n.add(i)},_createHandle:function(n,t,i,r,u){var h=l(this._dragHandle,this,t,!1),c=l(this._dragHandle,this,t,!0),e=wet(apu(t,r),tor(this._orient),h,c),o,s,a,f;e.position[0]=i[0];n.add(e);o=this.visualMapModel.textStyleModel;s=new k({draggable:!0,drift:h,onmousemove:function(n){te(n.event)},ondragend:c,style:{x:0,y:0,text:"",textFont:o.getFont(),textFill:o.getTextColor()}});this.group.add(s);a=[u==="horizontal"?r/2:r*1.5,u==="horizontal"?t===0?-(r*1.5):r*1.5:t===0?-r/2:r/2];f=this._shapes;f.handleThumbs[t]=e;f.handleLabelPoints[t]=a;f.handleLabels[t]=s},_createIndicator:function(n,t,i,r){var u=wet([[0,0]],"move"),e,o,s,f;u.position[0]=t[0];u.attr({invisible:!0,silent:!0});n.add(u);e=this.visualMapModel.textStyleModel;o=new k({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:e.getFont(),textFill:e.getTextColor()}});this.group.add(o);s=[r==="horizontal"?i/2:ger+3,0];f=this._shapes;f.indicator=u;f.indicatorLabel=o;f.indicatorLabelPoint=s},_dragHandle:function(n,t,i,r){if(this._useHandle){if(this._dragging=!t,!t){var u=this._applyTransform([i,r],this._shapes.barGroup,!0);this._updateInterval(n,u[1]);this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()});t?this._hovering||this._clearHoverLinkToSeries():nor(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[n],!1)}},_resetInterval:function(){var n=this.visualMapModel,t=this._dataInterval=n.getSelected(),i=n.getExtent(),r=[0,n.itemSize[1]];this._handleEnds=[os(t[0],i,r,!0),os(t[1],i,r,!0)]},_updateInterval:function(n,t){var u;t=t||0;var f=this.visualMapModel,i=this._handleEnds,r=[0,f.itemSize[1]];wl(t,i,r,n,0);u=f.getExtent();this._dataInterval=[os(i[0],r,u,!0),os(i[1],r,u,!0)]},_updateView:function(n){var u=this.visualMapModel,i=u.getExtent(),f=this._shapes,e=[0,u.itemSize[1]],o=n?e:this._handleEnds,t=this._createBarVisual(this._dataInterval,i,o,"inRange"),r=this._createBarVisual(i,i,e,"outOfRange");f.inRange.setStyle({fill:t.barColor,opacity:t.opacity}).setShape("points",t.barPoints);f.outOfRange.setStyle({fill:r.barColor,opacity:r.opacity}).setShape("points",r.barPoints);this._updateHandle(o,t)},_createBarVisual:function(n,t,i,r){var f={forceState:r,convertOpacityToAlpha:!0},u=this._makeColorGradient(n,f),e=[this.getControllerVisual(n[0],"symbolSize",f),this.getControllerVisual(n[1],"symbolSize",f)],o=this._createBarPoints(i,e);return{barColor:new rh(0,0,0,1,u),barPoints:o,handlesColor:[u[0].color,u[u.length-1].color]}},_makeColorGradient:function(n,t){var u=100,r=[],e=(n[1]-n[0])/u,i,f;for(r.push({color:this.getControllerVisual(n[0],"color",t),offset:0}),i=1;i<u;i++){if(f=n[0]+e*i,f>n[1])break;r.push({color:this.getControllerVisual(f,"color",t),offset:i/u})}return r.push({color:this.getControllerVisual(n[1],"color",t),offset:1}),r},_createBarPoints:function(n,t){var i=this.visualMapModel.itemSize;return[[i[0]-t[0],n[0]],[i[0],n[0]],[i[0],n[1]],[i[0]-t[1],n[1]]]},_createBarGroup:function(n){var t=this._orient,i=this.visualMapModel.get("inverse");return new e(t==="horizontal"&&!i?{scale:n==="bottom"?[1,1]:[-1,1],rotation:Math.PI/2}:t==="horizontal"&&i?{scale:n==="bottom"?[-1,1]:[1,1],rotation:-Math.PI/2}:t==="vertical"&&!i?{scale:n==="left"?[1,-1]:[-1,-1]}:{scale:n==="left"?[1,1]:[-1,1]})},_updateHandle:function(n,t){if(this._useHandle){var i=this._shapes,r=this.visualMapModel,u=i.handleThumbs,f=i.handleLabels;hpu([0,1],function(e){var o=u[e],s;o.setStyle("fill",t.handlesColor[e]);o.position[1]=n[e];s=ve(i.handleLabelPoints[e],yc(o,this.group));f[e].setStyle({x:s[0],y:s[1],text:r.formatValueText(this._dataInterval[e]),textVerticalAlign:"middle",textAlign:this._applyTransform(this._orient==="horizontal"?e===0?"bottom":"top":"left",i.barGroup)})},this)}},_showIndicator:function(n,t,i,r){var e=this.visualMapModel,p=e.getExtent(),l=e.itemSize,w=[0,l[1]],a=os(n,p,w,!0),f=this._shapes,u=f.indicator,v,y,o,s,h,c;u&&(u.position[1]=a,u.attr("invisible",!1),u.setShape("points",vpu(!!i,r,a,l[1])),v={convertOpacityToAlpha:!0},y=this.getControllerVisual(n,"color",v),u.setStyle("fill",y),o=ve(f.indicatorLabelPoint,yc(u,this.group)),s=f.indicatorLabel,s.attr("invisible",!1),h=this._applyTransform("left",f.barGroup),c=this._orient,s.setStyle({text:(i?i:"")+e.formatValueText(t),textVerticalAlign:c==="horizontal"?h:"middle",textAlign:c==="horizontal"?"center":h,x:o[0],y:o[1]}))},_enableHoverLinkToSeries:function(){var n=this;this._shapes.barGroup.on("mousemove",function(t){if(n._hovering=!0,!n._dragging){var r=n.visualMapModel.itemSize,i=n._applyTransform([t.offsetX,t.offsetY],n._shapes.barGroup,!0,!0);i[1]=pet(td(0,i[1]),r[1]);n._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=r[0])}}).on("mouseout",function(){n._hovering=!1;n._dragging||n._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var n=this.api.getZr();if(this.visualMapModel.option.hoverLink){n.on("mouseover",this._hoverLinkFromSeriesMouseOver,this);n.on("mouseout",this._hideIndicator,this)}else this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(n,t){var u=this.visualMapModel,a=u.itemSize,i,f,l,h,c;if(u.option.hoverLink){i=[0,a[1]];f=u.getExtent();n=pet(td(i[0],n),i[1]);var e=ypu(u,f,i),o=[n-e,n+e],s=os(n,i,f,!0),r=[os(o[0],i,f,!0),os(o[1],i,f,!0)];o[0]<i[0]&&(r[0]=-Infinity);o[1]>i[1]&&(r[1]=Infinity);t&&(r[0]===-Infinity?this._showIndicator(s,r[1],"< ",e):r[1]===Infinity?this._showIndicator(s,r[0],"> ",e):this._showIndicator(s,s,"≈ ",e));l=this._hoverLinkDataIndices;h=[];(t||nor(u))&&(h=this._hoverLinkDataIndices=u.findTargetDataIndices(r));c=lar(l,h);this._dispatchHighDown("downplay",yet(c[0]));this._dispatchHighDown("highlight",yet(c[1]))}},_hoverLinkFromSeriesMouseOver:function(n){var t=n.target,f=this.visualMapModel,r,u,i;t&&t.dataIndex!=null&&(r=this.ecModel.getSeriesByIndex(t.seriesIndex),f.isTargetSeries(r))&&(u=r.getData(t.dataType),i=u.get(f.getDataDimension(u),t.dataIndex,!0),isNaN(i)||this._showIndicator(i,i))},_hideIndicator:function(){var n=this._shapes;n.indicator&&n.indicator.attr("invisible",!0);n.indicatorLabel&&n.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var n=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",yet(n));n.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var n=this.api.getZr();n.off("mouseover",this._hoverLinkFromSeriesMouseOver);n.off("mouseout",this._hideIndicator)},_applyTransform:function(n,t,r,u){var f=yc(t,u?null:this.group);return vf[i(n)?"applyTransform":"transformDirection"](n,f,r)},_dispatchHighDown:function(n,t){t&&t.length&&this.api.dispatchAction({type:n,batch:t})},dispose:function(){this._clearHoverLinkFromSeries();this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries();this._clearHoverLinkToSeries()}});ior={type:"selectDataRange",event:"dataRangeSelected",update:"update"};rt(ior,function(n,t){t.eachComponent({mainType:"visualMap",query:n},function(t){t.setSelected(n.selected)})});ur(fnt);ror=vet.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(n,t){var i,u;ror.superApply(this,"optionUpdated",arguments);this._pieceList=[];this.resetExtent();i=this._mode=this._determineMode();uor[this._mode].call(this);this._resetSelected(n,t);u=this.option.categories;this.resetVisual(function(n,t){i==="categories"?(n.mappingMethod="category",n.categories=c(u)):(n.dataExtent=this.getExtent(),n.mappingMethod="piecewise",n.pieceList=r(this._pieceList,function(n){var n=c(n);return t!=="inRange"&&(n.visual=null),n}))})},completeVisualOption:function(){function r(n,t,i){return n&&n[t]&&(a(n[t])?n[t].hasOwnProperty(i):n[t]===i)}var n=this.option,i={},u=ht.listVisualTypes(),f=this.isCategory();t(n.pieces,function(n){t(u,function(t){n.hasOwnProperty(t)&&(i[t]=1)})});t(i,function(i,u){var e=0;t(this.stateList,function(t){e|=r(n,t,u)||r(n.target,t,u)},this);e||t(this.stateList,function(t){(n[t]||(n[t]={}))[u]=ont.get(u,t==="inRange"?"active":"inactive",f)})},this);vet.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(n,i){var u=this.option,e=this._pieceList,r=(i?u:n).selected||{},f;u.selected=r;t(e,function(n){var t=this.getSelectedMapKey(n);r.hasOwnProperty(t)||(r[t]=!0)},this);u.selectedMode==="single"&&(f=!1,t(e,function(n){var t=this.getSelectedMapKey(n);r[t]&&(f?r[t]=!1:f=!0)},this))},getSelectedMapKey:function(n){return this._mode==="categories"?n.value+"":n.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var n=this.option;return n.pieces&&n.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(n){this.option.selected=c(n)},getValueState:function(n){var t=ht.findPieceIndex(n,this._pieceList);return t!=null?this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange":"outOfRange"},findTargetDataIndices:function(n){var t=[];return this.eachTargetSeries(function(i){var r=[],u=i.getData();u.each(this.getDataDimension(u),function(t,i){var u=ht.findPieceIndex(t,this._pieceList);u===n&&r.push(i)},this);t.push({seriesId:i.id,dataIndex:r})},this),t},getRepresentValue:function(n){var i,t;return this.isCategory()?i=n.value:n.value!=null?i=n.value:(t=n.interval||[],i=t[0]===-Infinity&&t[1]===Infinity?0:(t[0]+t[1])/2),i},getVisualMeta:function(n){function s(t,i){var u=o.getRepresentValue({interval:t}),r;i||(i=o.getValueState(u));r=n(u,i);t[0]===-Infinity?f[0]=r:t[1]===Infinity?f[1]=r:e.push({value:t[0],color:r},{value:t[1],color:r})}var i,r,u;if(!this.isCategory()){var e=[],f=[],o=this;return i=this._pieceList.slice(),i.length?(r=i[0].interval[0],r!==-Infinity&&i.unshift({interval:[-Infinity,r]}),r=i[i.length-1].interval[1],r!==Infinity&&i.push({interval:[r,Infinity]})):i.push({interval:[-Infinity,Infinity]}),u=-Infinity,t(i,function(n){var t=n.interval;t&&(t[0]>u&&s([u,t[0]],"outOfRange"),s(t.slice()),u=t[1])},this),{stops:e,outerColors:f}}}});uor={splitNumber:function(){var r=this.option,e=this._pieceList,o=Math.min(r.precision,20),u=this.getExtent(),f=r.splitNumber,n,i,s,h,c;for(f=Math.max(parseInt(f,10),1),r.splitNumber=f,n=(u[1]-u[0])/f;+n.toFixed(o)!==n&&o<5;)o++;for(r.precision=o,n=+n.toFixed(o),i=0,r.minOpen&&e.push({index:i++,interval:[-Infinity,u[0]],close:[0,0]}),s=u[0],h=i+f;i<h;s+=n)c=i===f-1?u[1]:s+n,e.push({index:i++,interval:[s,c],close:[1,1]});r.maxOpen&&e.push({index:i++,interval:[u[1],Infinity],close:[0,0]});iat(e);t(e,function(n){n.text=this.formatValueText(n.interval)},this)},categories:function(){var n=this.option;t(n.categories,function(n){this._pieceList.push({text:this.formatValueText(n,!0),value:n})},this);eor(n,this._pieceList)},pieces:function(){var i=this.option,n=this._pieceList;t(i.pieces,function(t,i){var e,h,f,l,o;if(a(t)||(t={value:t}),e={text:"",index:i},t.label!=null&&(e.text=t.label),t.hasOwnProperty("value"))h=e.value=t.value,e.interval=[h,h],e.close=[1,1];else{var r=e.interval=[],s=e.close=[0,0],v=[1,0,1],y=[-Infinity,Infinity],c=[];for(f=0;f<2;f++){for(l=[["gte","gt","min"],["lte","lt","max"]][f],o=0;o<3&&r[f]==null;o++)r[f]=t[l[o]],s[f]=v[o],c[f]=o===2;r[f]==null&&(r[f]=y[f])}c[0]&&r[1]===Infinity&&(s[0]=0);c[1]&&r[0]===-Infinity&&(s[1]=0);u&&r[0]>r[1]&&console.warn("Piece "+i+"is illegal: "+r+" lower bound should not greater then uppper bound.");r[0]===r[1]&&s[0]&&s[1]&&(e.value=r[0])}e.visual=ht.retrieveVisuals(t);n.push(e)},this);eor(i,n);iat(n);t(n,function(n){var t=n.close,i=[["<","≤"][t[1]],[">","≥"][t[0]]];n.text=n.text||this.formatValueText(n.value!=null?n.value:n.interval,!1,i)},this)}};ppu=cnt.extend({type:"visualMap.piecewise",doRender:function(){function y(t){var h=t.piece,u=new e,c,y;u.onclick=l(this._onItemClick,this,h);this._enableHoverLink(u,t.indexInModelPieceList);c=i.getRepresentValue(h);this._createItemSymbol(u,c,[0,0,r[0],r[1]]);o&&(y=this.visualMapModel.getValueState(c),u.add(new k({style:{x:f==="right"?-s:r[0]+s,y:r[1]/2,text:h.text,textVerticalAlign:"middle",textAlign:f,textFont:a,textFill:v,opacity:y==="outOfRange"?.5:1}})));n.add(u)}var n=this.group;n.removeAll();var i=this.visualMapModel,s=i.get("textGap"),h=i.textStyleModel,a=h.getFont(),v=h.getTextColor(),f=this._getItemAlign(),r=i.itemSize,c=this._getViewData(),u=c.endsText,o=kt(i.get("showLabel",!0),!u);u&&this._renderEndsText(n,u[0],r,o,f);t(c.viewPieceList,y,this);u&&this._renderEndsText(n,u[1],r,o,f);pw(i.get("orient"),n,i.get("itemGap"));this.renderBackground(n);this.positionGroup(n)},_enableHoverLink:function(n,t){function i(n){var i=this.visualMapModel;i.option.hoverLink&&this.api.dispatchAction({type:n,batch:yet(i.findTargetDataIndices(t))})}n.on("mouseover",l(i,this,"highlight")).on("mouseout",l(i,this,"downplay"))},_getItemAlign:function(){var t=this.visualMapModel,i=t.option,n;return i.orient==="vertical"?der(t,this.api,t.itemSize):(n=i.align,n&&n!=="auto"||(n="left"),n)},_renderEndsText:function(n,t,i,r,u){if(t){var f=new e,o=this.visualMapModel.textStyleModel;f.add(new k({style:{x:r?u==="right"?i[0]:0:i[0]/2,y:i[1]/2,textVerticalAlign:"middle",textAlign:r?u:"center",text:t,textFont:o.getFont(),textFill:o.getTextColor()}}));n.add(f)}},_getViewData:function(){var n=this.visualMapModel,i=r(n.getPieceList(),function(n,t){return{piece:n,indexInModelPieceList:t}}),t=n.get("text"),f=n.get("orient"),u=n.get("inverse");return(f==="horizontal"?u:!u)?i.reverse():t&&(t=t.slice().reverse()),{viewPieceList:i,endsText:t}},_createItemSymbol:function(n,t,i){n.add(cu(this.getControllerVisual(t,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(t,"color")))},_onItemClick:function(n){var u=this.visualMapModel,f=u.option,i=c(f.selected),r=u.getSelectedMapKey(n);f.selectedMode==="single"?(i[r]=!0,t(i,function(n,t){i[t]=t===r})):i[r]=!i[r];this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})}});ur(fnt);lnt=uh;bet=dt;id=hu({type:"marker",dependencies:["series","grid","polar","geo"],init:function(n,t,i,r){if(u&&this.type==="marker")throw new Error("Marker component is abstract component. Use markLine, markPoint, markArea instead.");this.mergeDefaultAndTheme(n,i);this.mergeOption(n,i,r.createdBySelf,!0)},isAnimationEnabled:function(){if(d.node)return!1;var n=this.__hostSeries;return this.getShallow("animation")&&n&&n.isAnimationEnabled()},mergeOption:function(n,i,r,u){var e=this.constructor,f=this.mainType+"Model";r||i.eachSeries(function(n){var r=n.get(this.mainType,!0),s=n[f];if(!r||!r.data){n[f]=null;return}s?s.mergeOption(r,i,!0):(u&&ket(r),t(r.data,function(n){n instanceof Array?(ket(n[0]),ket(n[1])):ket(n)}),s=new e(r,this,i),o(s,{mainType:this.mainType,seriesIndex:n.seriesIndex,name:n.name,createdBySelf:!0}),s.__hostSeries=n);n[f]=s},this)},formatTooltip:function(n){var e=this.getData(),t=this.getRawValue(n),o=i(t)?r(t,lnt).join(", "):lnt(t),f=e.getName(n),u=bet(this.name);return(t!=null||f)&&(u+="<br />"),f&&(u+=bet(f),t!=null&&(u+=" : ")),t!=null&&(u+=bet(o)),u},getData:function(){return this._data},setData:function(n){this._data=n}});st(id,uit);id.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});ant=tt;det=y;get={min:det(vnt,"min"),max:det(vnt,"max"),average:det(vnt,"average")};not=wi({type:"marker",init:function(){this.markerGroupMap=p()},render:function(n,t,i){var r=this.markerGroupMap,u;r.each(function(n){n.__keep=!1});u=this.type+"Model";t.eachSeries(function(n){var r=n[u];r&&this.renderSeries(n,r,t,i)},this);r.each(function(n){n.__keep||this.group.remove(n.group)},this)},renderSeries:function(){}});not.extend({type:"markPoint",updateTransform:function(n,t,i){t.eachSeries(function(n){var t=n.markPointModel;t&&(hor(t.getData(),n,i),this.markerGroupMap.get(n.id).updateLayout(t))},this)},renderSeries:function(n,t,i,r){var s=n.coordinateSystem,e=n.id,h=n.getData(),o=this.markerGroupMap,f=o.get(e)||o.set(e,new ry),u=dpu(s,n,t);t.setData(u);hor(t.getData(),n,r);u.each(function(n){var r=u.getItemModel(n),i=r.getShallow("symbolSize");typeof i=="function"&&(i=i(t.getRawValue(n),t.getDataParams(n)));u.setItemVisual(n,{symbolSize:i,color:r.get("itemStyle.color")||h.getVisual("color"),symbol:r.getShallow("symbol")})});f.updateData(u);this.group.add(f.group);u.eachItemGraphicEl(function(n){n.traverse(function(n){n.dataModel=t})});f.__keep=!0;f.group.silent=t.get("silent")||n.get("silent")}});ur(function(n){n.markPoint=n.markPoint||{}});id.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end"},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}});cor=function(n,t,r,u){var w=n.getData(),e=u.type,b,s,f,a,p;if(!i(u)&&(e==="min"||e==="max"||e==="average"||e==="median"||u.xAxis!=null||u.yAxis!=null)){u.yAxis!=null||u.xAxis!=null?(s=u.yAxis!=null?"y":"x",b=t.getAxis(s),f=kt(u.yAxis,u.xAxis)):(a=oor(u,w,t,n),s=a.valueDataDim,b=a.valueAxis,f=ynt(w,s,e));var y=s==="x"?0:1,k=1-y,h=c(u),l={};h.type=null;h.coord=[];l.coord=[];h.coord[k]=-Infinity;l.coord[k]=Infinity;p=r.get("precision");p>=0&&typeof f=="number"&&(f=+f.toFixed(Math.min(p,20)));h.coord[y]=l.coord[y]=f;u=[h,l,{type:e,valueIndex:u.valueIndex,value:f}]}return u=[rd(n,u[0]),rd(n,u[1]),o({},u[2])],u[2].type=u[2].type||"",v(u[2],u[0]),v(u[2],u[1]),u};not.extend({type:"markLine",updateTransform:function(n,t,i){t.eachSeries(function(n){var t=n.markLineModel;if(t){var u=t.getData(),r=t.__from,f=t.__to;r.each(function(t){pnt(r,t,!0,n,i);pnt(f,t,!1,n,i)});u.each(function(n){u.setItemLayout(n,[r.getItemLayout(n),f.getItemLayout(n)])});this.markerGroupMap.get(n.id).updateLayout()}},this)},renderSeries:function(n,t,r,u){function y(t,i,r){var f=t.getItemModel(i);pnt(t,i,r,n,u);t.setItemVisual(i,{symbolSize:f.get("symbolSize")||s[r?0:1],symbol:f.get("symbol",!0)||o[r?0:1],color:f.get("itemStyle.color")||w.getVisual("color")})}var p=n.coordinateSystem,a=n.id,w=n.getData(),v=this.markerGroupMap,l=v.get(a)||v.set(a,new uft),o,s;this.group.add(l.group);var h=nwu(p,n,t),e=h.from,c=h.to,f=h.line;t.__from=e;t.__to=c;t.setData(f);o=t.get("symbol");s=t.get("symbolSize");i(o)||(o=[o,o]);typeof s=="number"&&(s=[s,s]);h.from.each(function(n){y(e,n,!0);y(c,n,!1)});f.each(function(n){var t=f.getItemModel(n).get("lineStyle.color");f.setItemVisual(n,{color:t||e.getItemVisual(n,"color")});f.setItemLayout(n,[e.getItemLayout(n),c.getItemLayout(n)]);f.setItemVisual(n,{fromSymbolSize:e.getItemVisual(n,"symbolSize"),fromSymbol:e.getItemVisual(n,"symbol"),toSymbolSize:c.getItemVisual(n,"symbolSize"),toSymbol:c.getItemVisual(n,"symbol")})});l.updateData(f);h.line.eachItemGraphicEl(function(n){n.traverse(function(n){n.dataModel=t})});l.__keep=!0;l.group.silent=t.get("silent")||n.get("silent")}});ur(function(n){n.markLine=n.markLine||{}});id.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});aor=function(n,t,i,r){var f=rd(n,r[0]),e=rd(n,r[1]),o=kt,s=f.coord,h=e.coord,u;return s[0]=o(s[0],-Infinity),s[1]=o(s[1],-Infinity),h[0]=o(h[0],Infinity),h[1]=o(h[1],Infinity),u=cp([{},f,e]),u.coord=[f.coord,e.coord],u.x0=f.x,u.y0=f.y,u.x1=e.x,u.y1=e.y,u};wnt=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];not.extend({type:"markArea",updateTransform:function(n,t,i){t.eachSeries(function(n){var u=n.markAreaModel,t;u&&(t=u.getData(),t.each(function(u){var f=r(wnt,function(r){return yor(t,u,r,n,i)}),e;t.setItemLayout(u,f);e=t.getItemGraphicEl(u);e.setShape("points",f)}))},this)},renderSeries:function(n,t,i,u){var l=n.coordinateSystem,h=n.id,a=n.getData(),c=this.markerGroupMap,o=c.get(h)||c.set(h,{group:new e}),f;this.group.add(o.group);o.__keep=!0;f=iwu(l,n,t);t.setData(f);f.each(function(t){f.setItemLayout(t,r(wnt,function(i){return yor(f,t,i,n,u)}));f.setItemVisual(t,{color:a.getVisual("color")})});f.diff(o.__data).add(function(n){var t=new ku({shape:{points:f.getItemLayout(n)}});f.setItemGraphicEl(n,t);o.group.add(t)}).update(function(n,i){var r=o.__data.getItemGraphicEl(i);w(r,{shape:{points:f.getItemLayout(n)}},t,n);o.group.add(r);f.setItemGraphicEl(n,r)}).remove(function(n){var t=o.__data.getItemGraphicEl(n);o.group.remove(t)}).execute();f.eachItemGraphicEl(function(n,i){var r=f.getItemModel(i),e=r.getModel("label"),o=r.getModel("emphasis.label"),u=f.getItemVisual(i,"color");n.useStyle(s(r.getModel("itemStyle").getItemStyle(),{fill:gd(u,.4),stroke:u}));n.hoverStyle=r.getModel("emphasis.itemStyle").getItemStyle();du(n.style,n.hoverStyle,e,o,{labelFetcher:t,labelDataIndex:i,defaultText:f.getName(i)||"",isRectText:!0,autoColor:u});pt(n,{});n.dataModel=t});o.__data=f;o.group.silent=t.get("silent")||n.get("silent")}});ur(function(n){n.markArea=n.markArea||{}});por=function(n){var r=n&&n.timeline;i(r)||(r=r?[r]:[]);t(r,function(n){n&&rwu(n)})};it.registerSubTypeDefaulter("timeline",function(){return"slider"});rt({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(n,t){var i=t.getComponent("timeline");return i&&n.currentIndex!=null&&(i.setCurrentIndex(n.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.setPlayState(!1)),t.resetOption("timeline"),s({currentIndex:i.option.currentIndex},n)});rt({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(n,t){var i=t.getComponent("timeline");i&&n.playState!=null&&i.setPlayState(n.playState)});bnt=it.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(n,t,i){this._data;this._names;this.mergeDefaultAndTheme(n,i);this._initData()},mergeOption:function(){bnt.superApply(this,"mergeOption",arguments);this._initData()},setCurrentIndex:function(n){n==null&&(n=this.option.currentIndex);var t=this._data.count();this.option.loop?n=(n%t+t)%t:(n>=t&&(n=t-1),n<0&&(n=0));this.option.currentIndex=n},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(n){this.option.autoPlay=!!n},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var r=this.option,n=r.data||[],u=r.axisType,f=this._names=[],i,e,o;u==="category"&&(i=[],t(n,function(n,t){var r=fw(n),u;a(n)?(u=c(n),u.value=t):u=t;i.push(u);!at(r)&&(r==null||isNaN(r))&&(r="");f.push(r+"")}),n=i);e={category:"ordinal",time:"time"}[u]||"number";o=this._data=new ai([{name:"value",type:e}],this);o.initData(n,f)},getData:function(){return this._data},getCategories:function(){if(this.get("axisType")==="category")return this._names.slice()}});bor=bnt.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}});st(bor,uit);kor=wf.extend({type:"timeline"});fd=function(n,t,i,r){fi.call(this,n,t,i);this.type=r||"value";this.model=null};fd.prototype={constructor:fd,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return this.model.get("orient")==="horizontal"}};ct(fd,fi);var nc=l,knt=t,dnt=Math.PI;kor.extend({type:"timeline.slider",init:function(n,t){this.api=t;this._axis;this._viewRect;this._timer;this._currentPointer;this._mainGroup;this._labelGroup},render:function(n,t,i){if(this.model=n,this.api=i,this.ecModel=t,this.group.removeAll(),n.get("show",!0)){var r=this._layout(n,i),f=this._createGroup("mainGroup"),e=this._createGroup("labelGroup"),u=this._axis=this._createAxis(r,n);n.formatTooltip=function(n){return dt(u.scale.getLabel(n))};knt(["AxisLine","AxisTick","Control","CurrentPointer"],function(t){this["_render"+t](r,f,u,n)},this);this._renderAxisLabel(r,e,u,n);this._position(r,n)}this._doPlayStop()},remove:function(){this._clearTimer();this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(n,t){var i=n.get("label.position"),r=n.get("orient"),u=uwu(n,t);i==null||i==="auto"?i=r==="horizontal"?u.y+u.height/2<t.getHeight()/2?"-":"+":u.x+u.width/2<t.getWidth()/2?"+":"-":isNaN(i)&&(i={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[r][i]);var tt={horizontal:"center",vertical:i>=0||i==="+"?"left":"right"},it={horizontal:i>=0||i==="+"?"top":"bottom",vertical:"middle"},rt={horizontal:0,vertical:dnt/2},w=r==="vertical"?u.height:u.width,f=n.getModel("controlStyle"),s=f.get("show",!0),h=s?f.get("itemSize"):0,b=s?f.get("itemGap"):0,o=h+b,l=n.get("label.rotate")||0;l=l*dnt/180;var a,v,y,p,k=f.get("position",!0),d=s&&f.get("showPlayBtn",!0),g=s&&f.get("showPrevBtn",!0),nt=s&&f.get("showNextBtn",!0),c=0,e=w;return k==="left"||k==="bottom"?(d&&(a=[0,0],c+=o),g&&(v=[c,0],c+=o),nt&&(y=[e-h,0],e-=o)):(d&&(a=[e-h,0],e-=o),g&&(v=[0,0],c+=o),nt&&(y=[e-h,0],e-=o)),p=[c,e],n.get("inverse")&&p.reverse(),{viewRect:u,mainLength:w,orient:r,rotation:rt[r],labelRotation:l,labelPosOpt:i,labelAlign:n.get("label.align")||tt[r],labelBaseline:n.get("label.verticalAlign")||n.get("label.baseline")||it[r],playPosition:a,prevBtnPosition:v,nextBtnPosition:y,axisExtent:p,controlSize:h,controlGap:b}},_position:function(n){function p(n){var t=n.position;n.origin=[r[0][0]-t[0],r[1][0]-t[1]]}function c(n){return[[n.x,n.x+n.width],[n.y,n.y+n.height]]}function l(n,t,i,r,u){n[r]+=i[r][u]-t[r][u]}var u=this._mainGroup,f=this._labelGroup,t=n.viewRect,o,s;if(n.orient==="vertical"){var i=cr(),a=t.x,v=t.y+t.height;yu(i,i,[-a,-v]);uo(i,i,-dnt/2);yu(i,i,[a,v]);t=t.clone();t.applyTransform(i)}var r=c(t),y=c(u.getBoundingRect()),w=c(f.getBoundingRect()),e=u.position,h=f.position;h[0]=e[0]=r[0][0];o=n.labelPosOpt;isNaN(o)?(s=o==="+"?0:1,l(e,y,r,1,s),l(h,w,r,1,1-s)):(s=o>=0?0:1,l(e,y,r,1,s),h[1]=e[1]+o);u.attr("position",e);f.attr("position",h);u.rotation=f.rotation=n.rotation;p(u);p(f)},_createAxis:function(n,t){var f=t.getData(),e=t.get("axisType"),i=ty(t,e),r,u;return i.getTicks=function(){return f.mapArray(["value"],function(n){return n})},r=f.getDataExtent("value"),i.setExtent(r[0],r[1]),i.niceTicks(),u=new fd("value",i,n.axisExtent,e),u.model=t,u},_createGroup:function(n){var t=this["_"+n]=new e;return this.group.add(t),t},_renderAxisLine:function(n,t,i,r){var u=i.getExtent();r.get("lineStyle.show")&&t.add(new uu({shape:{x1:u[0],y1:0,x2:u[1],y2:0},style:o({lineCap:"round"},r.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(n,t,i,r){var u=r.getData(),f=i.scale.getTicks();knt(f,function(n){var o=i.dataToCoord(n),e=u.getItemModel(n),s=e.getModel("itemStyle"),h=e.getModel("emphasis.itemStyle"),c={position:[o,0],onclick:nc(this._changeTimeline,this,n)},f=dor(e,s,t,c);pt(f,h.getItemStyle());e.get("tooltip")?(f.dataIndex=n,f.dataModel=r):f.dataIndex=f.dataModel=null},this)},_renderAxisLabel:function(n,t,i,r){var e=i.getLabelModel(),u,f;e.get("show")&&(u=r.getData(),f=i.getViewLabels(),knt(f,function(r){var e=r.tickValue,o=u.getItemModel(e),s=o.getModel("label"),h=o.getModel("emphasis.label"),c=i.dataToCoord(r.tickValue),f=new k({position:[c,0],rotation:n.labelRotation-n.rotation,onclick:nc(this._changeTimeline,this,e),silent:!1});ii(f.style,s,{text:r.formattedLabel,textAlign:n.labelAlign,textVerticalAlign:n.labelBaseline});t.add(f);pt(f,ii({},h))},this))},_renderControl:function(n,t,i,r){function f(n,i,f,e){if(n){var a={position:n,origin:[u/2,0],rotation:e?-s:0,rectHover:!0,style:h,onclick:f},o=fwu(r,i,l,a);t.add(o);pt(o,c)}}var u=n.controlSize,s=n.rotation,h=r.getModel("controlStyle").getItemStyle(),c=r.getModel("emphasis.controlStyle").getItemStyle(),l=[0,-u/2,u,u],e=r.getPlayState(),o=r.get("inverse",!0);f(n.nextBtnPosition,"controlStyle.nextIcon",nc(this._changeTimeline,this,o?"-":"+"));f(n.prevBtnPosition,"controlStyle.prevIcon",nc(this._changeTimeline,this,o?"+":"-"));f(n.playPosition,"controlStyle."+(e?"stopIcon":"playIcon"),nc(this._handlePlayClick,this,!e),!0)},_renderCurrentPointer:function(n,t,i,r){var o=r.getData(),f=r.getCurrentIndex(),e=o.getItemModel(f).getModel("checkpointStyle"),u=this,s={onCreate:function(n){n.draggable=!0;n.drift=nc(u._handlePointerDrag,u);n.ondragend=nc(u._handlePointerDragend,u);gor(n,f,i,r,!0)},onUpdate:function(n){gor(n,f,i,r)}};this._currentPointer=dor(e,e,this._mainGroup,{},this._currentPointer,s)},_handlePlayClick:function(n){this._clearTimer();this.api.dispatchAction({type:"timelinePlayChange",playState:n,from:this.uid})},_handlePointerDrag:function(n,t,i){this._clearTimer();this._pointerChangeTimeline([i.offsetX,i.offsetY])},_handlePointerDragend:function(n){this._pointerChangeTimeline([n.offsetX,n.offsetY],!0)},_pointerChangeTimeline:function(n,t){var i=this._toAxisCoord(n)[0],e=this._axis,r=pc(e.getExtent().slice()),u,f;i>r[1]&&(i=r[1]);i<r[0]&&(i=r[0]);this._currentPointer.position[0]=i;this._currentPointer.dirty();u=this._findNearestTick(i);f=this.model;(t||u!==f.getCurrentIndex()&&f.get("realtime"))&&this._changeTimeline(u)},_doPlayStop:function(){function n(){var n=this.model;this._changeTimeline(n.getCurrentIndex()+(n.get("rewind",!0)?-1:1))}this._clearTimer();this.model.getPlayState()&&(this._timer=setTimeout(nc(n,this),this.model.get("playInterval")))},_toAxisCoord:function(n){var t=this._mainGroup.getLocalTransform();return ve(n,t,!0)},_findNearestTick:function(n){var r=this.model.getData(),t=Infinity,i,u=this._axis;return r.each(["value"],function(r,f){var o=u.dataToCoord(r),e=Math.abs(o-n);e<t&&(t=e,i=f)}),i},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(n){var t=this.model.getCurrentIndex();n==="+"?n=t+1:n==="-"&&(n=t-1);this.api.dispatchAction({type:"timelineChange",currentIndex:n,from:this.uid})}});ur(por);nsr=hu({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){nsr.superApply(this,"optionUpdated",arguments);t(this.option.feature,function(n,t){var i=wfr(t);i&&v(n,i.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}}}});wi({type:"toolbox",render:function(n,i,r,u){function s(t,f){var s=o[t],v=o[f],p=h[s],l=new ut(p,n,n.ecModel),e,y;if(s&&!v){if(ewu(s))e={model:l,onclick:l.option.onclick,featureName:s};else{if(y=wfr(s),!y)return;e=new y(l,i,r)}c[s]=e}else{if(e=c[v],!e)return;e.model=l;e.ecModel=i;e.api=r}if(!s&&v){e.dispose&&e.dispose(i,r);return}if(!l.get("show")||e.unusable){e.remove&&e.remove(i,r);return}a(l,e,s);l.setIconStatus=function(n,t){var i=this.option,r=this.iconPaths;i.iconStatus=i.iconStatus||{};i.iconStatus[n]=t;r[n]&&r[n].trigger(t)};e.render&&e.render(l,i,r,u)}function a(u,o,s){var w=u.getModel("iconStyle"),a=u.getModel("emphasis.iconStyle"),h=o.getIcons?o.getIcons():u.get("icon"),c=u.get("title")||{},v,y,p;typeof h=="string"&&(v=h,y=c,h={},c={},h[s]=v,c[s]=y);p=u.iconPaths={};t(h,function(t,s){var h=lw(t,{},{x:-e/2,y:-e/2,width:e,height:e});if(h.setStyle(w.getItemStyle()),h.hoverStyle=a.getItemStyle(),pt(h),n.get("showTitle")){h.__title=c[s];h.on("mouseover",function(){var n=a.getItemStyle();h.setStyle({text:c[s],textPosition:n.textPosition||"bottom",textFill:n.fill||n.stroke||"#000",textAlign:n.textAlign||"center"})}).on("mouseout",function(){h.setStyle({textFill:null})})}h.trigger(u.get("iconStatus."+s)||"normal");f.add(h);h.on("click",l(o.onclick,o,i,r,s));p[s]=h})}var f=this.group;if(f.removeAll(),n.get("show")){var e=+n.get("itemSize"),h=n.get("feature")||{},c=this._features||(this._features={}),o=[];t(h,function(n,t){o.push(t)});new vo(this._featureNames||[],o).add(s).update(s).remove(y(s,null)).execute();this._featureNames=o;bau(f,n,r);f.add(vrr(f.getBoundingRect(),n));f.eachChild(function(n){var o=n.__title,t=n.hoverStyle,u;if(t&&o){var i=ue(o,fui(t)),s=n.position[0]+f.position[0],c=n.position[1]+f.position[1]+e,h=!1;c+i.height>r.getHeight()&&(t.textPosition="top",h=!0);u=h?-5-i.height:e+8;s+i.width/2>r.getWidth()?(t.textPosition=["100%",u],t.textAlign="right"):s-i.width/2<0&&(t.textPosition=[0,u],t.textAlign="left")}})}},updateView:function(n,i,r,u){t(this._features,function(n){n.updateView&&n.updateView(n.model,i,r,u)})},remove:function(n,i){t(this._features,function(t){t.remove&&t.remove(n,i)});this.group.removeAll()},dispose:function(n,i){t(this._features,function(t){t.dispose&&t.dispose(n,i)})}});gnt=eh.toolbox.saveAsImage;rot.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:gnt.title,type:"png",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:gnt.lang.slice()};rot.prototype.unusable=!d.canvasSupported;tsr=rot.prototype;tsr.onclick=function(n,t){var i=this.model,o=i.get("name")||n.get("title.0.text")||"echarts",r=document.createElement("a"),e=i.get("type",!0)||"png",u,s,l;if(r.download=o+"."+e,r.target="_blank",u=t.getConnectedDataURL({type:e,backgroundColor:i.get("backgroundColor",!0)||n.get("backgroundColor")||"#fff",excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),r.href=u,typeof MouseEvent!="function"||d.browser.ie||d.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var h=atob(u.split(",")[1]),f=h.length,c=new Uint8Array(f);f--;)c[f]=h.charCodeAt(f);l=new Blob([c]);window.navigator.msSaveOrOpenBlob(l,o+"."+e)}else{var a=i.get("lang"),v='<body style="margin:0;"><img src="'+u+'" style="max-width:100%;" title="'+(a&&a[0]||"")+'" /><\/body>',y=window.open();y.document.write(v)}else s=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}),r.dispatchEvent(s)};tp("saveAsImage",rot);isr=eh.toolbox.magicType;nti.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z",tiled:"M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z"},title:c(isr.title),option:{},seriesIndex:{}};tti=nti.prototype;tti.getIcons=function(){var n=this.model,i=n.get("icon"),r={};return t(n.get("type"),function(n){i[n]&&(r[n]=i[n])}),r};iti={line:function(n,t,i,r){if(n==="bar")return v({id:t,type:"line",data:i.get("data"),stack:i.get("stack"),markPoint:i.get("markPoint"),markLine:i.get("markLine")},r.get("option.line")||{},!0)},bar:function(n,t,i,r){if(n==="line")return v({id:t,type:"bar",data:i.get("data"),stack:i.get("stack"),markPoint:i.get("markPoint"),markLine:i.get("markLine")},r.get("option.bar")||{},!0)},stack:function(n,t,i,r){if(n==="line"||n==="bar")return v({id:t,stack:"__ec_magicType_stack__"},r.get("option.stack")||{},!0)},tiled:function(n,t,i,r){if(n==="line"||n==="bar")return v({id:t,stack:""},r.get("option.tiled")||{},!0)}};rsr=[["line","bar"],["stack","tiled"]];tti.onclick=function(n,i,r){var f=this.model,e=f.get("seriesIndex."+r),u,o;iti[r]&&(u={series:[]},o=function(t){var a=t.subType,v=t.id,h=iti[r](a,v,t,f),e,c,l;if(h&&(s(h,t.option),u.series.push(h)),e=t.coordinateSystem,e&&e.type==="cartesian2d"&&(r==="line"||r==="bar")&&(c=e.getAxesByScale("ordinal")[0],c)){var y=c.dim,i=y+"Axis",p=n.queryComponents({mainType:i,index:t.get(name+"Index"),id:t.get(name+"Id")})[0],o=p.componentIndex;for(u[i]=u[i]||[],l=0;l<=o;l++)u[i][o]=u[i][o]||{};u[i][o].boundaryGap=r==="bar"}},t(rsr,function(n){tt(n,r)>=0&&t(n,function(n){f.setIconStatus(n,"normal")})}),f.setIconStatus(r,"emphasis"),n.eachComponent({mainType:"series",query:e==null?null:{seriesIndex:e}},o),i.dispatchAction({type:"changeMagicType",currentType:r,newOption:u}))};rt({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,t){t.mergeOption(n.newOption)});tp("magicType",nti);var usr=eh.toolbox.dataView,uot=new Array(60).join("-"),ra="\t";eot=new RegExp("["+ra+"]+","g");ed.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:c(usr.title),lang:c(usr.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};ed.prototype.onclick=function(n,t){function y(){h.removeChild(u);d._dom=null}var h=t.getDom(),i=this.model,u,e,c,f,r,o,k,s,d;this._dom&&h.removeChild(this._dom);u=document.createElement("div");u.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;";u.style.backgroundColor=i.get("backgroundColor")||"#fff";e=document.createElement("h4");c=i.get("lang")||[];e.innerHTML=c[0]||i.get("title");e.style.cssText="margin: 10px 20px;";e.style.color=i.get("textColor");f=document.createElement("div");r=document.createElement("textarea");f.style.cssText="display:block;width:100%;overflow:auto;";var p=i.get("optionToContent"),w=i.get("contentToOption"),b=cwu(n);typeof p=="function"?(o=p(t.getOption()),typeof o=="string"?f.innerHTML=o:la(o)&&f.appendChild(o)):(f.appendChild(r),r.readOnly=i.get("readOnly"),r.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",r.style.color=i.get("textColor"),r.style.borderColor=i.get("textareaBorderColor"),r.style.backgroundColor=i.get("textareaColor"),r.value=b.value);k=b.meta;s=document.createElement("div");s.style.cssText="position:absolute;bottom:0;left:0;right:0;";var l="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",a=document.createElement("div"),v=document.createElement("div");l+=";background-color:"+i.get("buttonColor");l+=";color:"+i.get("buttonTextColor");d=this;wd(a,"click",y);wd(v,"click",function(){var n;try{n=typeof w=="function"?w(f,t.getOption()):ywu(r.value,k)}catch(i){y();throw new Error("Data view format error "+i);}n&&t.dispatchAction({type:"changeDataView",newOption:n});y()});a.innerHTML=c[1];v.innerHTML=c[2];v.style.cssText=l;a.style.cssText=l;i.get("readOnly")||s.appendChild(v);s.appendChild(a);wd(r,"keydown",function(n){if((n.keyCode||n.which)===9){var t=this.value,i=this.selectionStart,r=this.selectionEnd;this.value=t.substring(0,i)+ra+t.substring(r);this.selectionStart=this.selectionEnd=i+1;te(n)}});u.appendChild(e);u.appendChild(f);u.appendChild(s);f.style.height=h.clientHeight-80+"px";h.appendChild(u);this._dom=u};ed.prototype.remove=function(n,t){this._dom&&t.getDom().removeChild(this._dom)};ed.prototype.dispose=function(n,t){this.remove(n,t)};tp("dataView",ed);rt({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,i){var r=[];t(n.newOption.series,function(n){var t=i.getSeriesByName(n.name)[0],u;t?(u=t.get("data"),r.push({name:n.name,data:pwu(n.data,u)})):r.push(o({type:"scatter"},n))});i.mergeOption(s({series:r},n.newOption))});rti=t;oot='\0_ec_hist_store';kgt.extend({type:"dataZoom.select"});dgt.extend({type:"dataZoom.select"});var gwu=eh.toolbox.dataZoom,fsr=t,nbu='\0_ec_\0toolbox-dataZoom_';fti.defaultOption={show:!0,icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:c(gwu.title)};ua=fti.prototype;ua.render=function(n,t,i,r){this.model=n;this.ecModel=t;this.api=i;ibu(n,t,this,r,i);tbu(n,t)};ua.onclick=function(n,t,i){esr[i].call(this)};ua.remove=function(){this._brushController.unmount()};ua.dispose=function(){this._brushController.dispose()};esr={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(bwu(this.ecModel))}};ua._onBrush=function(n,t){function u(n,t,u){var s=t.getAxis(n),h=s.model,f=e(n,h,i),o=f.findRepresentativeAxisProxy(h).getMinMaxSpan();(o.minValueSpan!=null||o.maxValueSpan!=null)&&(u=wl(0,u.slice(),s.scale.getExtent(),0,o.minValueSpan,o.maxValueSpan));f&&(r[f.id]={dataZoomId:f.id,startValue:u[0],endValue:u[1]})}function e(n,t,i){var r;return i.eachComponent({mainType:"dataZoom",subType:"select"},function(i){var u=i.getAxisModel(n,t.componentIndex);u&&(r=i)}),r}var r,i,f;t.isEnd&&n.length&&(r={},i=this.ecModel,this._brushController.updateCovers([]),f=new set(osr(this.model.option),i,{include:["grid"]}),f.matchOutputRanges(n,i,function(n,t,i){if(i.type==="cartesian2d"){var r=n.brushType;r==="rect"?(u("x",i,t[0]),u("y",i,t[1])):u({lineX:"x",lineY:"y"}[r],i,t)}}),wwu(i,r),this._dispatchZoomAction(r))};ua._dispatchZoomAction=function(n){var t=[];fsr(n,function(n){t.push(c(n))});t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})};tp("dataZoom",fti);ur(function(n){function f(n,t){if(t){var f=n+"Index",u=t[f];u==null||u==="all"||i(u)||(u=u===!1||u==="none"?[]:[u]);e(n,function(t,i){if(u==null||u==="all"||tt(u,i)!==-1){var e={type:"select",$fromToolbox:!0,id:nbu+n+i};e[f]=i;r.push(e)}})}}function e(t,r){var u=n[t];i(u)||(u=u?[u]:[]);fsr(u,r)}var r,t,u;n&&(r=n.dataZoom||(n.dataZoom=[]),i(r)||(n.dataZoom=r=[r]),t=n.toolbox,t&&(i(t)&&(t=t[0]),t&&t.feature&&(u=t.feature.dataZoom,f("xAxis",u),f("yAxis",u))))});ssr=eh.toolbox.restore;eti.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:ssr.title};hsr=eti.prototype;hsr.onclick=function(n,t){kwu(n);t.dispatchAction({type:"restore",from:this.uid})};tp("restore",eti);rt({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,t){t.resetOption("recreate")});var csr="urn:schemas-microsoft-com:vml",lsr=typeof window=="undefined"?null:window,asr=!1,lu=lsr&&lsr.document;if(lu&&!d.canvasSupported)try{lu.namespaces.zrvml||lu.namespaces.add("zrvml",csr);sti=function(n){return lu.createElement("<zrvml:"+n+' class="zrvml">')}}catch(ndu){sti=function(n){return lu.createElement("<"+n+' xmlns="'+csr+'" class="zrvml">')}}var fa=kr.CMD,ot=Math.round,od=Math.sqrt,ubu=Math.abs,vsr=Math.cos,ysr=Math.sin,hti=Math.max;if(!d.canvasSupported){var si=",",cti="progid:DXImageTransform.Microsoft",ti=21600,iu=ti/2,fbu=1e5,ebu=1e3,lti=function(n){n.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;";n.coordsize=ti+","+ti;n.coordorigin="0,0"},obu=function(n){return String(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;")},psr=function(n,t,i){return"rgb("+[n,t,i].join(",")+")"},de=function(n,t){t&&n&&t.parentNode!==n&&n.appendChild(t)},sd=function(n,t){t&&n&&t.parentNode===n&&n.removeChild(t)},ati=function(n,t,i){return(parseFloat(n)||0)*fbu+(parseFloat(t)||0)*ebu+i},wsr=function(n,t){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*t:parseFloat(n):n},bsr=function(n,t,i){var r=wu(t);i=+i;isNaN(i)&&(i=1);r&&(n.color=psr(r[0],r[1],r[2]),n.opacity=i*r[3])},sbu=function(n){var t=wu(n);return[psr(t[0],t[1],t[2]),t[3]]},hbu=function(n,t,i){var r=t.fill,rt,ut,k,y,e,g,nt;if(r!=null)if(r instanceof he){var h,f=0,tt=[0,0],p=0,it=1,c=i.getBoundingRect(),l=c.width,a=c.height;if(r.type==="linear"){h="gradient";var o=i.transform,u=[r.x*l,r.y*a],v=[r.x2*l,r.y2*a];o&&(vt(u,u,o),vt(v,v,o));rt=v[0]-u[0];ut=v[1]-u[1];f=Math.atan2(rt,ut)*180/Math.PI;f<0&&(f+=360);f<1e-6&&(f=0)}else{h="gradientradial";var u=[r.x*l,r.y*a],o=i.transform,ft=i.scale,w=l,b=a;tt=[(u[0]-c.x)/w,(u[1]-c.y)/b];o&&vt(u,u,o);w/=ft[0]*ti;b/=ft[1]*ti;k=hti(w,b);p=0/k;it=2*r.r/k-p}y=r.colorStops.slice();y.sort(function(n,t){return n.offset-t.offset});var d=y.length,s=[],et=[];for(e=0;e<d;e++)g=y[e],nt=sbu(g.color),et.push(g.offset*it+p+" "+nt[0]),(e===0||e===d-1)&&s.push(nt);if(d>=2){var ot=s[0][0],st=s[1][0],ht=s[0][1]*t.opacity,ct=s[1][1]*t.opacity;n.type=h;n.method="none";n.focus="100%";n.angle=f;n.color=ot;n.color2=st;n.colors=et.join(",");n.opacity=ct;n.opacity2=ht}h==="radial"&&(n.focusposition=tt.join(","))}else bsr(n,r,t.opacity)},cbu=function(n,t){t.lineDash!=null&&(n.dashstyle=t.lineDash.join(" "));t.stroke==null||t.stroke instanceof he||bsr(n,t.stroke,t.opacity)},sot=function(n,t,i,r){var f=t=="fill",u=n.getElementsByTagName(t)[0];i[t]!=null&&i[t]!=="none"&&(f||!f&&i.lineWidth)?(n[f?"filled":"stroked"]="true",i[t]instanceof he&&sd(n,u),u||(u=oti(t)),f?hbu(u,i,r):cbu(u,i),de(n,u)):(n[f?"filled":"stroked"]="false",sd(n,u))},au=[[],[],[]],lbu=function(n,t){for(var wt=fa.M,bt=fa.C,kt=fa.L,dt=fa.A,pt=fa.Q,a=[],s,b,lt,h,c,r=n.data,gt=n.len(),u,f,nt,tt,i=0;i<gt;){lt=r[i++];b="";s=0;switch(lt){case wt:b=" m ";s=1;h=r[i++];c=r[i++];au[0][0]=h;au[0][1]=c;break;case kt:b=" l ";s=1;h=r[i++];c=r[i++];au[0][0]=h;au[0][1]=c;break;case pt:case bt:b=" c ";s=3;var e=r[i++],o=r[i++],it=r[i++],rt=r[i++],ut,ft;lt===pt?(ut=it,ft=rt,it=(it+2*e)/3,rt=(rt+2*o)/3,e=(h+2*e)/3,o=(c+2*o)/3):(ut=r[i++],ft=r[i++]);au[0][0]=e;au[0][1]=o;au[1][0]=it;au[1][1]=rt;au[2][0]=ut;au[2][1]=ft;h=ut;c=ft;break;case dt:var k=0,d=0,v=1,y=1,at=0;t&&(k=t[4],d=t[5],v=od(t[0]*t[0]+t[1]*t[1]),y=od(t[2]*t[2]+t[3]*t[3]),at=Math.atan2(-t[1]/y,t[0]/v));var p=r[i++],l=r[i++],et=r[i++],st=r[i++],ht=r[i++]+at,yt=r[i++]+ht+at;i++;var w=r[i++],g=p+vsr(ht)*et,ct=l+ysr(ht)*st,e=p+vsr(yt)*et,o=l+ysr(yt)*st,ni=w?" wa ":" at ";Math.abs(g-e)<.0001&&(Math.abs(yt-ht)>.01?w&&(g+=270/ti):Math.abs(ct-l)<.0001?w&&g<p||!w&&g>p?o-=270/ti:o+=270/ti:w&&ct<l||!w&&ct>l?e+=270/ti:e-=270/ti);a.push(ni,ot(((p-et)*v+k)*ti-iu),si,ot(((l-st)*y+d)*ti-iu),si,ot(((p+et)*v+k)*ti-iu),si,ot(((l+st)*y+d)*ti-iu),si,ot((g*v+k)*ti-iu),si,ot((ct*y+d)*ti-iu),si,ot((e*v+k)*ti-iu),si,ot((o*y+d)*ti-iu));h=e;c=o;break;case fa.R:u=au[0];f=au[1];u[0]=r[i++];u[1]=r[i++];f[0]=u[0]+r[i++];f[1]=u[1]+r[i++];t&&(vt(u,u,t),vt(f,f,t));u[0]=ot(u[0]*ti-iu);f[0]=ot(f[0]*ti-iu);u[1]=ot(u[1]*ti-iu);f[1]=ot(f[1]*ti-iu);a.push(" m ",u[0],si,u[1]," l ",f[0],si,u[1]," l ",f[0],si,f[1]," l ",u[0],si,f[1]);break;case fa.Z:a.push(" x ")}if(s>0)for(a.push(b),nt=0;nt<s;nt++)tt=au[nt],t&&vt(tt,tt,t),a.push(ot(tt[0]*ti-iu),si,ot(tt[1]*ti-iu),nt<s-1?si:"")}return a.join("")};nt.prototype.brushVML=function(n){var i=this.style,t=this._vmlEl,f,o,u;t||(t=oti("shape"),lti(t),this._vmlEl=t);sot(t,"fill",i,this);sot(t,"stroke",i,this);var r=this.transform,s=r!=null,e=t.getElementsByTagName("stroke")[0];e&&(f=i.lineWidth,s&&!i.strokeNoScale&&(o=r[0]*r[3]-r[1]*r[2],f*=od(ubu(o))),e.weight=f+"px");u=this.path||(this.path=new kr);this.__dirtyPath&&(u.beginPath(),this.buildPath(u,this.shape),u.toStatic(),this.__dirtyPath=!1);t.path=lbu(u,this.transform);t.style.zIndex=ati(this.zlevel,this.z,this.z2);de(n,t);i.text!=null?this.drawRectText(n,this.getBoundingRect()):this.removeRectText(n)};nt.prototype.onRemove=function(n){sd(n,this._vmlEl);this.removeRectText(n)};nt.prototype.onAdd=function(n){de(n,this._vmlEl);this.appendRectText(n)};ksr=function(n){return typeof n=="object"&&n.tagName&&n.tagName.toUpperCase()==="IMG"};nr.prototype.brushVML=function(n){var r=this.style,u=r.image,s,h,nt,y,i,p,b,ft,et,st,ht;if(ksr(u)){if(nt=u.src,nt===this._imageSrc)s=this._imageWidth,h=this._imageHeight;else{var w=u.runtimeStyle,pt=w.width,wt=w.height;w.width="auto";w.height="auto";s=u.width;h=u.height;w.width=pt;w.height=wt;this._imageSrc=nt;this._imageWidth=s;this._imageHeight=h}u=nt}else u===this._imageSrc&&(s=this._imageWidth,h=this._imageHeight);if(u){var c=r.x||0,l=r.y||0,a=r.width,v=r.height,k=r.sWidth,d=r.sHeight,ct=r.sx||0,lt=r.sy||0,bt=k&&d,f=this._vmlEl;f||(f=lu.createElement("div"),lti(f),this._vmlEl=f);var g=f.style,at=!1,t,e=1,o=1;if(this.transform&&(t=this.transform,e=od(t[0]*t[0]+t[1]*t[1]),o=od(t[2]*t[2]+t[3]*t[3]),at=t[1]||t[2]),at){var tt=[c,l],it=[c+a,l],rt=[c,l+v],ut=[c+a,l+v];vt(tt,tt,t);vt(it,it,t);vt(rt,rt,t);vt(ut,ut,t);var kt=hti(tt[0],it[0],rt[0],ut[0]),dt=hti(tt[1],it[1],rt[1],ut[1]),yt=[];yt.push("M11=",t[0]/e,si,"M12=",t[2]/o,si,"M21=",t[1]/e,si,"M22=",t[3]/o,si,"Dx=",ot(c*e+t[4]),si,"Dy=",ot(l*o+t[5]));g.padding="0 "+ot(kt)+"px "+ot(dt)+"px 0";g.filter=cti+".Matrix("+yt.join("")+", SizingMethod=clip)"}else t&&(c=c*e+t[4],l=l*o+t[5]),g.filter="",g.left=ot(c)+"px",g.top=ot(l)+"px";y=this._imageEl;i=this._cropEl;y||(y=lu.createElement("div"),this._imageEl=y);p=y.style;bt?(s&&h?(p.width=ot(e*s*a/k)+"px",p.height=ot(o*h*v/d)+"px"):(b=new Image,ft=this,b.onload=function(){b.onload=null;s=b.width;h=b.height;p.width=ot(e*s*a/k)+"px";p.height=ot(o*h*v/d)+"px";ft._imageWidth=s;ft._imageHeight=h;ft._imageSrc=u},b.src=u),i||(i=lu.createElement("div"),i.style.overflow="hidden",this._cropEl=i),et=i.style,et.width=ot((a+ct*a/k)*e),et.height=ot((v+lt*v/d)*o),et.filter=cti+".Matrix(Dx="+-ct*a/k*e+",Dy="+-lt*v/d*o+")",i.parentNode||f.appendChild(i),y.parentNode!=i&&i.appendChild(y)):(p.width=ot(e*a)+"px",p.height=ot(o*v)+"px",f.appendChild(y),i&&i.parentNode&&(f.removeChild(i),this._cropEl=null));st="";ht=r.opacity;ht<1&&(st+=".Alpha(opacity="+ot(ht*100)+") ");st+=cti+".AlphaImageLoader(src="+u+", SizingMethod=scale)";p.filter=st;f.style.zIndex=ati(this.zlevel,this.z,this.z2);de(n,f);r.text!=null&&this.drawRectText(n,this.getBoundingRect())}};nr.prototype.onRemove=function(n){sd(n,this._vmlEl);this._vmlEl=null;this._cropEl=null;this._imageEl=null;this.removeRectText(n)};nr.prototype.onAdd=function(n){de(n,this._vmlEl);this.appendRectText(n)};var vti="normal",yti={},pti=0,abu=100,vbu=document.createElement("div"),ybu=function(n){var i=yti[n],t,r;if(!i){pti>abu&&(pti=0,yti={});t=vbu.style;try{t.font=n;r=t.fontFamily.split(",")[0]}catch(u){}i={style:t.fontStyle||vti,variant:t.fontVariant||vti,weight:t.fontWeight||vti,size:parseFloat(t.fontSize||12)|0,family:r||"Microsoft YaHei"};yti[n]=i;pti++}return i},tc;ulr("measureText",function(n,t){var i=lu;tc||(tc=i.createElement("div"),tc.style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",lu.body.appendChild(tc));try{tc.style.font=t}catch(r){}return tc.innerHTML="",tc.appendChild(i.createTextNode(n)),{width:tc.offsetWidth}});var wti=new b,pbu=function(n,t,i,r){var f=this.style,e,it,g,rt,ut,nt,o,y,et,p,w,u,b,l,s,k,d;if(this.__dirty&&iw(f,!0),e=f.text,e!=null&&(e+=""),e){if(f.rich){for(it=wht(e,f),e=[],g=0;g<it.lines.length;g++){for(rt=it.lines[g].tokens,ut=[],nt=0;nt<rt.length;nt++)ut.push(rt[nt].text);e.push(ut.join(""))}e=e.join("\n")}var c,h,a=f.textAlign,tt=f.textVerticalAlign,v=ybu(f.font),ft=v.style+" "+v.variant+" "+v.weight+" "+v.size+'px "'+v.family+'"';i=i||ue(e,ft,a,tt);o=this.transform;o&&!r&&(wti.copy(t),wti.applyTransform(o),t=wti);r?(c=t.x,h=t.y):(y=f.textPosition,et=f.textDistance,y instanceof Array?(c=t.x+wsr(y[0],t.width),h=t.y+wsr(y[1],t.height),a=a||"left"):(p=pht(y,t,et),c=p.x,h=p.y,a=a||p.textAlign,tt=tt||p.textVerticalAlign));c=nw(c,i.width,a);h=tw(h,i.height,tt);h+=i.height/2;w=oti;u=this._textVmlEl;u?(s=u.firstChild,b=s.nextSibling,l=b.nextSibling):(u=w("line"),b=w("path"),l=w("textpath"),s=w("skew"),l.style["v-text-align"]="left",lti(u),b.textpathok=!0,l.on=!0,u.from="0 0",u.to="1000 0.05",de(u,s),de(u,b),de(u,l),this._textVmlEl=u);k=[c,h];d=u.style;o&&r?(vt(k,k,o),s.on=!0,s.matrix=o[0].toFixed(3)+si+o[2].toFixed(3)+si+o[1].toFixed(3)+si+o[3].toFixed(3)+",0,0",s.offset=(ot(k[0])||0)+","+(ot(k[1])||0),s.origin="0 0",d.left="0px",d.top="0px"):(s.on=!1,d.left=ot(c)+"px",d.top=ot(h)+"px");l.string=obu(e);try{l.style.font=ft}catch(st){}sot(u,"fill",{fill:f.textFill,opacity:f.opacity},this);sot(u,"stroke",{stroke:f.textStroke,opacity:f.opacity,lineDash:f.lineDash},this);u.style.zIndex=ati(this.zlevel,this.z,this.z2);de(n,u)}},wbu=function(n){sd(n,this._textVmlEl);this._textVmlEl=null},bbu=function(n){de(n,this._textVmlEl)},dsr=[rw,vr,nr,nt,k];for(hot=0;hot<dsr.length;hot++)cot=dsr[hot].prototype,cot.drawRectText=pbu,cot.removeRectText=wbu,cot.appendRectText=bbu;k.prototype.brushVML=function(n){var t=this.style;t.text!=null?this.drawRectText(n,{x:t.x||0,y:t.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(n)};k.prototype.onRemove=function(n){this.removeRectText(n)};k.prototype.onAdd=function(n){this.appendRectText(n)}}lot.prototype={constructor:lot,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},refresh:function(){var n=this.storage.getDisplayList(!0,!0);this._paintList(n)},_paintList:function(n){for(var t,i=this._vmlRoot,r=0;r<n.length;r++){if(t=n[r],t.invisible||t.ignore){if(!t.__alreadyNotVisible)t.onRemove(i);t.__alreadyNotVisible=!0}else{if(t.__alreadyNotVisible)t.onAdd(i);t.__alreadyNotVisible=!1;t.__dirty&&(t.beforeBrush&&t.beforeBrush(),(t.brushVML||t.brush).call(t,i),t.afterBrush&&t.afterBrush())}t.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(i),this._firstPaint=!1)},resize:function(n,t){var n=n==null?this._getWidth():n,t=t==null?this._getHeight():t,i;(this._width!=n||this._height!=t)&&(this._width=n,this._height=t,i=this._vmlViewport.style,i.width=n+"px",i.height=t+"px")},dispose:function(){this.root.innerHTML="";this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var t=this.root,n=t.currentStyle;return(t.clientWidth||up(n.width))-up(n.paddingLeft)-up(n.paddingRight)|0},_getHeight:function(){var t=this.root,n=t.currentStyle;return(t.clientHeight||up(n.height))-up(n.paddingTop)-up(n.paddingBottom)|0}};t(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(n){lot.prototype[n]=kbu(n)});hct("vml",lot);gsr="http://www.w3.org/2000/svg";var oa=kr.CMD,dbu=Array.prototype.join,sa="none",bti=Math.round,nhr=Math.sin,thr=Math.cos,kti=Math.PI,aot=Math.PI*2,gbu=180/kti,ihr=.0001;fp={};fp.brush=function(n){var u=n.style,t=n.__svgEl,i,r;t||(t=ea("path"),n.__svgEl=t);n.path||n.createPathProxy();i=n.path;n.__dirtyPath&&(i.beginPath(),n.buildPath(i,n.shape),n.__dirtyPath=!1,r=rku(i),r.indexOf("NaN")<0&&lt(t,"d",r));rhr(t,u,!1,n);vot(t,n.transform);u.text!=null&&wot(n,n.getBoundingRect())};yot={};yot.brush=function(n){var r=n.style,i=r.image,u;if(i instanceof HTMLImageElement&&(u=i.src,i=u),i){var f=r.x||0,e=r.y||0,o=r.width,s=r.height,t=n.__svgEl;t||(t=ea("image"),n.__svgEl=t);i!==n.__imageSrc&&(iku(t,"href",i),n.__imageSrc=i);lt(t,"width",o);lt(t,"height",s);lt(t,"x",f);lt(t,"y",e);vot(t,n.transform);r.text!=null&&wot(n,n.getBoundingRect())}};var pot={},gti=new b,wot=function(n,t,i){var r=n.style,c,o,p,l,b,d,u,nt,rt,w,g,v,y,et,f,e;if(n.__dirty&&iw(r,!0),c=r.text,c!=null){c+="";o=n.__textSvgEl;o||(o=ea("text"),n.__textSvgEl=o);var s,h,tt=r.textPosition,ot=r.textDistance,it=r.textAlign||"left";typeof r.fontSize=="number"&&(r.fontSize+="px");p=r.font||[r.fontStyle||"",r.fontWeight||"",r.fontSize||"",r.fontFamily||""].join(" ")||tv;l=uhr(r.textVerticalAlign);i=ue(c,p,it,l);b=i.lineHeight;tt instanceof Array?(s=t.x+tt[0],h=t.y+tt[1]):(d=pht(tt,t,ot),s=d.x,h=d.y,l=uhr(d.textVerticalAlign),it=d.textAlign);lt(o,"alignment-baseline",l);p&&(o.style.font=p);u=r.textPadding;lt(o,"x",s);lt(o,"y",h);rhr(o,r,!0,n);n instanceof k||n.style.transformText?vot(o,n.transform):(n.transform?(gti.copy(t),gti.applyTransform(n.transform),t=gti):(g=n.transformCoordToGlobal(t.x,t.y),t.x=g[0],t.y=g[1],n.transform=pa(cr())),nt=r.textOrigin,nt==="center"?(s=i.width/2+s,h=i.height/2+h):nt&&(s=nt[0]+s,h=nt[1]+h),rt=-r.textRotation||0,w=cr(),uo(w,w,rt),g=[n.transform[4],n.transform[5]],yu(w,w,g),vot(o,w));var ut=c.split("\n"),ft=ut.length,a=it;if(a==="left"?(a="start",u&&(s+=u[3])):a==="right"?(a="end",u&&(s-=u[1])):a==="center"&&(a="middle",u&&(s+=(u[3]-u[1])/2)),v=0,l==="after-edge"?(v=-i.height+b,u&&(v-=u[2])):l==="middle"?(v=(-i.height+b)/2,u&&(h+=(u[0]-u[2])/2)):u&&(v+=u[0]),n.__text!==c||n.__textFont!==p){for(y=n.__tspanList||[],n.__tspanList=y,f=0;f<ft;f++)e=y[f],e?e.innerHTML="":(e=y[f]=ea("tspan"),o.appendChild(e),lt(e,"alignment-baseline",l),lt(e,"text-anchor",a)),lt(e,"x",s),lt(e,"y",h+f*b+v),e.appendChild(document.createTextNode(ut[f]));for(;f<y.length;f++)o.removeChild(y[f]);y.length=ft;n.__text=c;n.__textFont=p}else if(n.__tspanList.length)for(et=n.__tspanList.length,f=0;f<et;++f)e=n.__tspanList[f],e&&(lt(e,"x",s),lt(e,"y",h+f*b+v))}};pot.drawRectText=wot;pot.brush=function(n){var t=n.style;t.text!=null&&(t.textPosition=[0,0],wot(n,{x:t.x||0,y:t.y||0,width:0,height:0},n.getBoundingRect()))};fhr.prototype={diff:function(n,t,i){function v(){for(var a,v,i=-1*o;i<=o;i+=2){var s,h=r[i-1],c=r[i+1],l=(c?c.newPos:0)-i;if(h&&(r[i-1]=undefined),a=h&&h.newPos+1<f,v=c&&0<=l&&l<e,!a&&!v){r[i]=undefined;continue}if(!a||v&&h.newPos<c.newPos?(s=fku(c),u.pushComponent(s.components,undefined,!0)):(s=h,s.newPos++,u.pushComponent(s.components,!0,undefined)),l=u.extractCommon(s,t,n,i),s.newPos+1>=f&&l+1>=e)return uku(u,s.components,t,n);r[i]=s}o++}var u,h,s,c;i||(i=function(n,t){return n===t});this.equals=i;u=this;n=n.slice();t=t.slice();var f=t.length,e=n.length,o=1,l=f+e,r=[{newPos:-1,components:[]}],a=this.extractCommon(r[0],t,n,0);if(r[0].newPos+1>=f&&a+1>=e){for(h=[],s=0;s<t.length;s++)h.push(s);return[{indices:h,count:t.length}]}while(o<=l)if(c=v(),c)return c},pushComponent:function(n,t,i){var r=n[n.length-1];r&&r.added===t&&r.removed===i?n[n.length-1]={count:r.count+1,added:t,removed:i}:n.push({count:1,added:t,removed:i})},extractCommon:function(n,t,i,r){for(var o=t.length,s=i.length,u=n.newPos,f=u-r,e=0;u+1<o&&f+1<s&&this.equals(t[u+1],i[f+1]);)u++,f++,e++;return e&&n.components.push({count:e}),n.newPos=u,f},tokenize:function(n){return n.slice()},join:function(n){return n.slice()}};var eku=new fhr,oku=function(n,t,i){return eku.diff(n,t,i)},sku="0",ehr="1";bt.prototype.createElement=ea;bt.prototype.getDefs=function(n){var i=this._svgRoot,t=this._svgRoot.getElementsByTagName("defs");return t.length===0?n?(t=i.insertBefore(this.createElement("defs"),i.firstChild),t.contains||(t.contains=function(n){var r=t.children,i;if(!r)return!1;for(i=r.length-1;i>=0;--i)if(r[i]===n)return!0;return!1}),t):null:t[0]};bt.prototype.update=function(n,t){var r,i;n&&(r=this.getDefs(!1),n[this._domName]&&r.contains(n[this._domName])?typeof t=="function"&&t(n):(i=this.add(n),i&&(n[this._domName]=i)))};bt.prototype.addDom=function(n){var t=this.getDefs(!0);t.appendChild(n)};bt.prototype.removeDom=function(n){var t=this.getDefs(!1);t&&n[this._domName]&&(t.removeChild(n[this._domName]),n[this._domName]=null)};bt.prototype.getDoms=function(){var i=this.getDefs(!1),n;return i?(n=[],t(this._tagNames,function(t){var r=i.getElementsByTagName(t);n=n.concat([].slice.call(r))}),n):[]};bt.prototype.markAllUnused=function(){var n=this.getDoms(),i=this;t(n,function(n){n[i._markLabel]=sku})};bt.prototype.markUsed=function(n){n&&(n[this._markLabel]=ehr)};bt.prototype.removeUnused=function(){var n=this.getDefs(!1),i,r;n&&(i=this.getDoms(),r=this,t(i,function(t){t[r._markLabel]!==ehr&&n.removeChild(t)}))};bt.prototype.getSvgProxy=function(n){return n instanceof nt?fp:n instanceof nr?yot:n instanceof k?pot:fp};bt.prototype.getTextSvgElement=function(n){return n.__textSvgEl};bt.prototype.getSvgElement=function(n){return n.__svgEl};ct(ha,bt);ha.prototype.addWithoutUpdate=function(n,i){if(i&&i.style){var r=this;t(["fill","stroke"],function(t){var u,e,f,o;i.style[t]&&(i.style[t].type==="linear"||i.style[t].type==="radial")&&(u=i.style[t],e=r.getDefs(!0),u._dom?(f=u._dom,e.contains(u._dom)||r.addDom(f)):f=r.add(u),r.markUsed(i),o=f.getAttribute("id"),n.setAttribute(t,"url(#"+o+")"))})}};ha.prototype.add=function(n){var t;if(n.type==="linear")t=this.createElement("linearGradient");else if(n.type==="radial")t=this.createElement("radialGradient");else return eo("Illegal gradient type."),null;return n.id=n.id||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-gradient-"+n.id),this.updateDom(n,t),this.addDom(t),t};ha.prototype.update=function(n){var t=this;bt.prototype.update.call(this,n,function(){var i=n.type,r=n._dom.tagName;i==="linear"&&r==="linearGradient"||i==="radial"&&r==="radialGradient"?t.updateDom(n,n._dom):(t.removeDom(n),t.add(n))})};ha.prototype.updateDom=function(n,t){var r,i,f,u;if(n.type==="linear")t.setAttribute("x1",n.x),t.setAttribute("y1",n.y),t.setAttribute("x2",n.x2),t.setAttribute("y2",n.y2);else if(n.type==="radial")t.setAttribute("cx",n.x),t.setAttribute("cy",n.y),t.setAttribute("r",n.r);else{eo("Illegal gradient type.");return}for(n.global?t.setAttribute("gradientUnits","userSpaceOnUse"):t.setAttribute("gradientUnits","objectBoundingBox"),t.innerHTML="",r=n.colorStops,i=0,f=r.length;i<f;++i)u=this.createElement("stop"),u.setAttribute("offset",r[i].offset*100+"%"),u.setAttribute("stop-color",r[i].color),t.appendChild(u);n._dom=t};ha.prototype.markUsed=function(n){if(n.style){var t=n.style.fill;t&&t._dom&&bt.prototype.markUsed.call(this,t._dom);t=n.style.stroke;t&&t._dom&&bt.prototype.markUsed.call(this,t._dom)}};ct(hd,bt);hd.prototype.update=function(n){var i=this.getSvgElement(n),t;i&&this.updateDom(i,n.__clipPaths,!1);t=this.getTextSvgElement(n);t&&this.updateDom(t,n.__clipPaths,!0);this.markUsed(n)};hd.prototype.updateDom=function(n,t,i){var s,h,c;if(t&&t.length>0){var o=this.getDefs(!0),r=t[0],u,f,e=i?"_textDom":"_dom";r[e]?(f=r[e].getAttribute("id"),u=r[e],o.contains(u)||o.appendChild(u)):(f="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,u=this.createElement("clipPath"),u.setAttribute("id",f),o.appendChild(u),r[e]=u);s=this.getSvgProxy(r);r.transform&&r.parent.invTransform&&!i?(h=Array.prototype.slice.call(r.transform),cs(r.transform,r.parent.invTransform,r.transform),s.brush(r),r.transform=h):s.brush(r);c=this.getSvgElement(r);u.innerHTML="";u.appendChild(c.cloneNode());n.setAttribute("clip-path","url(#"+f+")");t.length>1&&this.updateDom(u,t.slice(1),i)}else n&&n.setAttribute("clip-path","none")};hd.prototype.markUsed=function(n){var i=this;n.__clipPaths&&n.__clipPaths.length>0&&t(n.__clipPaths,function(n){n._dom&&bt.prototype.markUsed.call(i,n._dom);n._textDom&&bt.prototype.markUsed.call(i,n._textDom)})};ct(ic,bt);ic.prototype.addWithoutUpdate=function(n,t){var i,r,u,f;t&&ohr(t.style)&&(i=t.style,i._shadowDom?(r=i._shadowDom,u=this.getDefs(!0),u.contains(i._shadowDom)||this.addDom(r)):r=this.add(t),this.markUsed(t),f=r.getAttribute("id"),n.style.filter="url(#"+f+")")};ic.prototype.add=function(n){var t=this.createElement("filter"),i=n.style;return i._shadowDomId=i._shadowDomId||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-shadow-"+i._shadowDomId),this.updateDom(n,t),this.addDom(t),t};ic.prototype.update=function(n,t){var i=t.style,r;ohr(i)?(r=this,bt.prototype.update.call(this,t,function(n){r.updateDom(t,n._shadowDom)})):this.remove(n,i)};ic.prototype.remove=function(n,t){t._shadowDomId!=null&&(this.removeDom(t),n.style.filter="")};ic.prototype.updateDom=function(n,t){var r=t.getElementsByTagName("feDropShadow");r=r.length===0?this.createElement("feDropShadow"):r[0];var i=n.style,s=n.scale?n.scale[0]||1:1,h=n.scale?n.scale[1]||1:1,f,e,u,o;if(i.shadowBlur||i.shadowOffsetX||i.shadowOffsetY)f=i.shadowOffsetX||0,e=i.shadowOffsetY||0,u=i.shadowBlur,o=i.shadowColor;else if(i.textShadowBlur)f=i.textShadowOffsetX||0,e=i.textShadowOffsetY||0,u=i.textShadowBlur,o=i.textShadowColor;else{this.removeDom(t,i);return}r.setAttribute("dx",f/s);r.setAttribute("dy",e/h);r.setAttribute("flood-color",o);var c=u/2/s,l=u/2/h,a=c+" "+l;r.setAttribute("stdDeviation",a);t.setAttribute("x","-100%");t.setAttribute("y","-100%");t.setAttribute("width",Math.ceil(u*100)+"%");t.setAttribute("height",Math.ceil(u*100)+"%");t.appendChild(r);i._shadowDom=t};ic.prototype.markUsed=function(n){var t=n.style;t&&t._shadowDom&&bt.prototype.markUsed.call(this,t._shadowDom)};cd=function(n,t,i,r){var u,f;this.root=n;this.storage=t;this._opts=i=o({},i||{});u=ea("svg");u.setAttribute("xmlns","http://www.w3.org/2000/svg");u.setAttribute("version","1.1");u.setAttribute("baseProfile","full");u.style.cssText="user-select:none;position:absolute;left:0;top:0;";this.gradientManager=new ha(r,u);this.clipPathManager=new hd(r,u);this.shadowManager=new ic(r,u);f=document.createElement("div");f.style.cssText="overflow:hidden;position:relative";this._svgRoot=u;this._viewport=f;n.appendChild(f);f.appendChild(u);this.resize(i.width,i.height);this._visibleList=[]};cd.prototype={constructor:cd,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},refresh:function(){var n=this.storage.getDisplayList(!0);this._paintList(n)},setBackgroundColor:function(n){this._viewport.style.background=n},_paintList:function(n){var c,e,f,u,t;this.gradientManager.markAllUnused();this.clipPathManager.markAllUnused();this.shadowManager.markAllUnused();for(var o=this._svgRoot,l=this._visibleList,v=n.length,h=[],i=0;i<v;i++){var t=n[i],a=hku(t),r=got(t)||dot(t);t.invisible||(t.__dirty&&(a&&a.brush(t),this.clipPathManager.update(t),t.style&&(this.gradientManager.update(t.style.fill),this.gradientManager.update(t.style.stroke),this.shadowManager.update(r,t)),t.__dirty=!1),h.push(t))}for(c=oku(l,h),i=0;i<c.length;i++)if(f=c[i],f.removed)for(u=0;u<f.count;u++){var t=l[f.indices[u]],r=got(t),s=dot(t);chr(o,r);chr(o,s)}for(i=0;i<c.length;i++)if(f=c[i],f.added)for(u=0;u<f.count;u++){var t=h[f.indices[u]],r=got(t),s=dot(t);e?kot(o,r,e):hhr(o,r);r?kot(o,s,r):e?kot(o,s,e):hhr(o,s);kot(o,s,r);e=s||r||e;this.gradientManager.addWithoutUpdate(r,t);this.shadowManager.addWithoutUpdate(e,t);this.clipPathManager.markUsed(t)}else if(!f.removed)for(u=0;u<f.count;u++)t=h[f.indices[u]],e=r=dot(t)||got(t)||e,this.gradientManager.markUsed(t),this.gradientManager.addWithoutUpdate(r,t),this.shadowManager.markUsed(t),this.shadowManager.addWithoutUpdate(r,t),this.clipPathManager.markUsed(t);this.gradientManager.removeUnused();this.clipPathManager.removeUnused();this.shadowManager.removeUnused();this._visibleList=h},_getDefs:function(n){var i=this._svgRoot,t=this._svgRoot.getElementsByTagName("defs");return t.length===0?n?(t=i.insertBefore(ea("defs"),i.firstChild),t.contains||(t.contains=function(n){var r=t.children,i;if(!r)return!1;for(i=r.length-1;i>=0;--i)if(r[i]===n)return!0;return!1}),t):null:t[0]},resize:function(n,t){var i=this._viewport,r,u,f;i.style.display="none";r=this._opts;n!=null&&(r.width=n);t!=null&&(r.height=t);n=this._getSize(0);t=this._getSize(1);i.style.display="";(this._width!==n||this._height!==t)&&(this._width=n,this._height=t,u=i.style,u.width=n+"px",u.height=t+"px",f=this._svgRoot,f.setAttribute("width",n),f.setAttribute("height",t))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(n){var u=this._opts,t=["width","height"][n],f=["clientWidth","clientHeight"][n],e=["paddingLeft","paddingTop"][n],o=["paddingRight","paddingBottom"][n],i,r;return u[t]!=null&&u[t]!=="auto"?parseFloat(u[t]):(i=this.root,r=document.defaultView.getComputedStyle(i),(i[f]||bot(r[t])||bot(i.style[t]))-(bot(r[e])||0)-(bot(r[o])||0)|0)},dispose:function(){this.root.innerHTML="";this._svgRoot=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},pathToDataUrl:function(){this.refresh();var n=this._svgRoot.outerHTML;return"data:image/svg+xml;charset=UTF-8,"+n}};t(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(n){cd.prototype[n]=cku(n)});hct("svg",cd);n.version=cci;n.dependencies=rvt;n.PRIORITY=kv;n.init=vkr;n.connect=ykr;n.disConnect=oli;n.disconnect=sli;n.dispose=pkr;n.getInstanceByDom=lvt;n.getInstanceById=wkr;n.registerTheme=avt;n.registerPreprocessor=ur;n.registerProcessor=su;n.registerPostUpdate=bkr;n.registerAction=rt;n.registerCoordinateSystem=vvt;n.getCoordinateSystemDimensions=kkr;n.registerLayout=gt;n.registerVisual=yt;n.registerLoading=hli;n.extendComponentModel=hu;n.extendComponentView=wi;n.extendSeriesModel=nrt;n.extendChartView=gr;n.setCanvasCreator=dkr;n.registerMap=gkr;n.getMap=ndr;n.dataTool=cli;n.zrender=sar;n.number=poi;n.format=upr;n.throttle=kat;n.helper=gai;n.matrix=ecr;n.vector=aii;n.color=eri;n.parseGeoJSON=brt;n.parseGeoJson=lvi;n.util=oyt;n.graphic=syt;n.List=ai;n.Model=ut;n.Axis=fi;n.env=d}),function(n){n.color={};n.color.make=function(t,i,r,u){var f={};return f.r=t||0,f.g=i||0,f.b=r||0,f.a=u!=null?u:1,f.add=function(n,t){for(var i=0;i<n.length;++i)f[n.charAt(i)]+=t;return f.normalize()},f.scale=function(n,t){for(var i=0;i<n.length;++i)f[n.charAt(i)]*=t;return f.normalize()},f.toString=function(){return f.a>=1?"rgb("+[f.r,f.g,f.b].join(",")+")":"rgba("+[f.r,f.g,f.b,f.a].join(",")+")"},f.normalize=function(){function n(n,t,i){return t<n?n:t>i?i:t}return f.r=n(0,parseInt(f.r),255),f.g=n(0,parseInt(f.g),255),f.b=n(0,parseInt(f.b),255),f.a=n(0,f.a,1),f},f.clone=function(){return n.color.make(f.r,f.b,f.g,f.a)},f.normalize()};n.color.extract=function(t,i){var r;do{if(r=t.css(i).toLowerCase(),r!=""&&r!="transparent")break;t=t.parent()}while(t.length&&!n.nodeName(t.get(0),"body"));return r=="rgba(0, 0, 0, 0)"&&(r="transparent"),n.color.parse(r)};n.color.parse=function(i){var r,u=n.color.make,f;return(r=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))?u(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)):(r=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))?u(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),parseFloat(r[4])):(r=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))?u(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55):(r=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))?u(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55,parseFloat(r[4])):(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))?u(parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)):(r=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))?u(parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)):(f=n.trim(i).toLowerCase(),f=="transparent"?u(255,255,255,0):(r=t[f]||[0,0,0],u(r[0],r[1],r[2])))};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(n){function t(t,i){var r=i.children("."+t)[0];if(r==null&&(r=document.createElement("canvas"),r.className=t,n(r).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(i),!r.getContext))if(window.G_vmlCanvasManager)r=window.G_vmlCanvasManager.initElement(r);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=r;var u=this.context=r.getContext("2d"),f=window.devicePixelRatio||1,e=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;this.pixelRatio=f/e;this.resize(i.width(),i.height());this.textContainer=null;this.text={};this._textCache={}}function r(i,r,f,e){function nt(n,t){t=[l].concat(t);for(var i=0;i<n.length;++i)n[i].apply(this,t)}function ui(){for(var i,u={Canvas:t},r=0;r<e.length;++r)i=e[r],i.init(l,u),i.options&&n.extend(!0,o,i.options)}function fi(t){var f;n.extend(!0,o,t);t&&t.colors&&(o.colors=t.colors);o.xaxis.color==null&&(o.xaxis.color=n.color.parse(o.grid.color).scale("a",.22).toString());o.yaxis.color==null&&(o.yaxis.color=n.color.parse(o.grid.color).scale("a",.22).toString());o.xaxis.tickColor==null&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color);o.yaxis.tickColor==null&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color);o.grid.borderColor==null&&(o.grid.borderColor=o.grid.color);o.grid.tickColor==null&&(o.grid.tickColor=n.color.parse(o.grid.color).scale("a",.22).toString());for(var r,s=i.css("font-size"),c=s?+s.replace("px",""):13,h={style:i.css("font-style"),size:Math.round(.8*c),variant:i.css("font-variant"),weight:i.css("font-weight"),family:i.css("font-family")},e=o.xaxes.length||1,u=0;u<e;++u)r=o.xaxes[u],r&&!r.tickColor&&(r.tickColor=r.color),r=n.extend(!0,{},o.xaxis,r),o.xaxes[u]=r,r.font&&(r.font=n.extend({},h,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(r.font.size*1.15)));for(e=o.yaxes.length||1,u=0;u<e;++u)r=o.yaxes[u],r&&!r.tickColor&&(r.tickColor=r.color),r=n.extend(!0,{},o.yaxis,r),o.yaxes[u]=r,r.font&&(r.font=n.extend({},h,r.font),r.font.color||(r.font.color=r.color),r.font.lineHeight||(r.font.lineHeight=Math.round(r.font.size*1.15)));for(o.xaxis.noTicks&&o.xaxis.ticks==null&&(o.xaxis.ticks=o.xaxis.noTicks),o.yaxis.noTicks&&o.yaxis.ticks==null&&(o.yaxis.ticks=o.yaxis.noTicks),o.x2axis&&(o.xaxes[1]=n.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top",o.x2axis.min==null&&(o.xaxes[1].min=null),o.x2axis.max==null&&(o.xaxes[1].max=null)),o.y2axis&&(o.yaxes[1]=n.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right",o.y2axis.min==null&&(o.yaxes[1].min=null),o.y2axis.max==null&&(o.yaxes[1].max=null)),o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas),o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor),o.lines&&n.extend(!0,o.series.lines,o.lines),o.points&&n.extend(!0,o.series.points,o.points),o.bars&&n.extend(!0,o.series.bars,o.bars),o.shadowSize!=null&&(o.series.shadowSize=o.shadowSize),o.highlightColor!=null&&(o.series.highlightColor=o.highlightColor),u=0;u<o.xaxes.length;++u)et(y,u+1).options=o.xaxes[u];for(u=0;u<o.yaxes.length;++u)et(w,u+1).options=o.yaxes[u];for(f in p)o.hooks[f]&&o.hooks[f].length&&(p[f]=p[f].concat(o.hooks[f]));nt(p.processOptions,[o])}function ht(n){c=ei(n);si();hi()}function ei(t){for(var r,u=[],i=0;i<t.length;++i)r=n.extend(!0,{},o.series),t[i].data!=null?(r.data=t[i].data,delete t[i].data,n.extend(!0,r,t[i]),t[i].data=r.data):r.data=t[i],u.push(r);return u}function ft(n,t){var i=n[t+"axis"];return typeof i=="object"&&(i=i.n),typeof i!="number"&&(i=1),i}function it(){return n.grep(y.concat(w),function(n){return n})}function ct(n){for(var i={},t,r=0;r<y.length;++r)t=y[r],t&&t.used&&(i["x"+t.n]=t.c2p(n.left));for(r=0;r<w.length;++r)t=w[r],t&&t.used&&(i["y"+t.n]=t.c2p(n.top));return i.x1!==undefined&&(i.x=i.x1),i.y1!==undefined&&(i.y=i.y1),i}function oi(n){for(var u={},t,i,r=0;r<y.length;++r)if(t=y[r],t&&t.used&&(i="x"+t.n,n[i]==null&&t.n==1&&(i="x"),n[i]!=null)){u.left=t.p2c(n[i]);break}for(r=0;r<w.length;++r)if(t=w[r],t&&t.used&&(i="y"+t.n,n[i]==null&&t.n==1&&(i="y"),n[i]!=null)){u.top=t.p2c(n[i]);break}return u}function et(t,i){return t[i-1]||(t[i-1]={n:i,direction:t==y?"x":"y",options:n.extend(!0,{},t==y?o.xaxis:o.yaxis)}),t[i-1]}function si(){for(var f=c.length,e=-1,u,h,t,l,a,i=0;i<c.length;++i)u=c[i].color,u!=null&&(f--,typeof u=="number"&&u>e&&(e=u));f<=e&&(f=e+1);var v,s=[],p=o.colors,b=p.length,r=0;for(i=0;i<f;i++)v=n.color.parse(p[i%b]||"#666"),i%b==0&&i&&(r=r>=0?r<.5?-r-.2:0:-r),s[i]=v.scale("rgb",1+r);for(h=0,i=0;i<c.length;++i){if(t=c[i],t.color==null?(t.color=s[h].toString(),++h):typeof t.color=="number"&&(t.color=s[t.color].toString()),t.lines.show==null){a=!0;for(l in t)if(t[l]&&t[l].show){a=!1;break}a&&(t.lines.show=!0)}t.lines.zero==null&&(t.lines.zero=!!t.lines.fill);t.xaxis=et(y,ft(t,"x"));t.yaxis=et(w,ft(t,"y"))}}function hi(){function b(n,t,i){t<n.datamin&&t!=-v&&(n.datamin=t);i>n.datamax&&i!=v&&(n.datamax=i)}var y=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY,v=Number.MAX_VALUE,f,l,e,r,t,u,h,i,s,ut,ft,o,et,ot,k,a;for(n.each(it(),function(n,t){t.datamin=y;t.datamax=w;t.used=!1}),f=0;f<c.length;++f)t=c[f],t.datapoints={points:[]},nt(p.processRawData,[t,t.data,t.datapoints]);for(f=0;f<c.length;++f)if(t=c[f],ft=t.data,o=t.datapoints.format,o||(o=[],o.push({x:!0,number:!0,required:!0}),o.push({y:!0,number:!0,required:!0}),(t.bars.show||t.lines.show&&t.lines.fill)&&(et=!!(t.bars.show&&t.bars.zero||t.lines.show&&t.lines.zero),o.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:et}),t.bars.horizontal&&(delete o[o.length-1].y,o[o.length-1].x=!0)),t.datapoints.format=o),t.datapoints.pointsize==null)for(t.datapoints.pointsize=o.length,h=t.datapoints.pointsize,u=t.datapoints.points,ot=t.lines.show&&t.lines.steps,t.xaxis.used=t.yaxis.used=!0,l=e=0;l<ft.length;++l,e+=h){if(ut=ft[l],k=ut==null,!k)for(r=0;r<h;++r)i=ut[r],s=o[r],s&&(s.number&&i!=null&&(i=+i,isNaN(i)?i=null:i==Infinity?i=v:i==-Infinity&&(i=-v)),i==null&&(s.required&&(k=!0),s.defaultValue!=null&&(i=s.defaultValue))),u[e+r]=i;if(k)for(r=0;r<h;++r)i=u[e+r],i!=null&&(s=o[r],s.autoscale!==!1&&(s.x&&b(t.xaxis,i,i),s.y&&b(t.yaxis,i,i))),u[e+r]=null;else if(ot&&e>0&&u[e-h]!=null&&u[e-h]!=u[e]&&u[e-h+1]!=u[e+1]){for(r=0;r<h;++r)u[e+h+r]=u[e+r];u[e+1]=u[e-h+1];e+=h}}for(f=0;f<c.length;++f)t=c[f],nt(p.processDatapoints,[t,t.datapoints]);for(f=0;f<c.length;++f){t=c[f];u=t.datapoints.points;h=t.datapoints.pointsize;o=t.datapoints.format;var d=y,g=y,tt=w,rt=w;for(l=0;l<u.length;l+=h)if(u[l]!=null)for(r=0;r<h;++r)(i=u[l+r],s=o[r],s&&s.autoscale!==!1&&i!=v&&i!=-v)&&(s.x&&(i<d&&(d=i),i>tt&&(tt=i)),s.y&&(i<g&&(g=i),i>rt&&(rt=i)));if(t.bars.show){switch(t.bars.align){case"left":a=0;break;case"right":a=-t.bars.barWidth;break;default:a=-t.bars.barWidth/2}t.bars.horizontal?(g+=a,rt+=a+t.bars.barWidth):(d+=a,tt+=a+t.bars.barWidth)}b(t.xaxis,d,tt);b(t.yaxis,g,rt)}n.each(it(),function(n,t){t.datamin==y&&(t.datamin=null);t.datamax==w&&(t.datamax=null)})}function ci(){i.css("padding",0).children().filter(function(){return!n(this).hasClass("flot-overlay")&&!n(this).hasClass("flot-base")}).remove();i.css("position")=="static"&&i.css("position","relative");a=new t("flot-base",i);tt=new t("flot-overlay",i);s=a.context;v=tt.context;k=n(tt.element).unbind();var r=i.data("plot");r&&(r.shutdown(),tt.clear());i.data("plot",l)}function li(){o.grid.hoverable&&(k.mousemove(bt),k.bind("mouseleave",kt));o.grid.clickable&&k.click(dt);nt(p.bindEvents,[k])}function lt(){rt&&clearTimeout(rt);k.unbind("mousemove",bt);k.unbind("mouseleave",kt);k.unbind("click",dt);nt(p.shutdown,[k])}function ai(n){function u(n){return n}var i,r,t=n.options.transform||u,f=n.options.inverseTransform;n.direction=="x"?(i=n.scale=d/Math.abs(t(n.max)-t(n.min)),r=Math.min(t(n.max),t(n.min))):(i=n.scale=b/Math.abs(t(n.max)-t(n.min)),i=-i,r=Math.max(t(n.max),t(n.min)));n.p2c=t==u?function(n){return(n-r)*i}:function(n){return(t(n)-r)*i};n.c2p=f?function(n){return f(r+n/i)}:function(n){return r+n/i}}function vi(n){for(var e,o,t=n.options,r=n.ticks||[],i=t.labelWidth||0,u=t.labelHeight||0,s=i||(n.direction=="x"?Math.floor(a.width/(r.length||1)):null),h=n.direction+"Axis "+n.direction+n.n+"Axis",c="flot-"+n.direction+"-axis flot-"+n.direction+n.n+"-axis "+h,l=t.font||"flot-tick-label tickLabel",f=0;f<r.length;++f)(e=r[f],e.label)&&(o=a.getTextInfo(c,e.label,l,null,s),i=Math.max(i,o.width),u=Math.max(u,o.height));n.labelWidth=t.labelWidth||i;n.labelHeight=t.labelHeight||u}function yi(t){var r=t.labelWidth,u=t.labelHeight,e=t.options.position,l=t.direction==="x",f=t.options.tickLength,i=o.grid.axisMargin,s=o.grid.labelMargin,v=!0,p=!0,b=!0,c=!1;n.each(l?y:w,function(n,i){i&&(i.show||i.reserveSpace)&&(i===t?c=!0:i.options.position===e&&(c?p=!1:v=!1),c||(b=!1))});p&&(i=0);f==null&&(f=b?"full":5);isNaN(+f)||(s+=+f);l?(u+=s,e=="bottom"?(h.bottom+=u+i,t.box={top:a.height-h.bottom,height:u}):(t.box={top:h.top+i,height:u},h.top+=u+i)):(r+=s,e=="left"?(t.box={left:h.left+i,width:r},h.left+=r+i):(h.right+=r+i,t.box={left:a.width-h.right,width:r}));t.position=e;t.tickLength=f;t.box.padding=s;t.innermost=v}function pi(n){n.direction=="x"?(n.box.left=h.left-n.labelWidth/2,n.box.width=a.width-h.left-h.right+n.labelWidth):(n.box.top=h.top-n.labelHeight/2,n.box.height=a.height-h.bottom-h.top+n.labelHeight)}function wi(){var i=o.grid.minBorderMargin,r,t;if(i==null)for(i=0,r=0;r<c.length;++r)i=Math.max(i,2*(c[r].points.radius+c[r].points.lineWidth/2));t={left:i,right:i,top:i,bottom:i};n.each(it(),function(n,i){i.reserveSpace&&i.ticks&&i.ticks.length&&(i.direction==="x"?(t.left=Math.max(t.left,i.labelWidth/2),t.right=Math.max(t.right,i.labelWidth/2)):(t.bottom=Math.max(t.bottom,i.labelHeight/2),t.top=Math.max(t.top,i.labelHeight/2)))});h.left=Math.ceil(Math.max(t.left,h.left));h.right=Math.ceil(Math.max(t.right,h.right));h.top=Math.ceil(Math.max(t.top,h.top));h.bottom=Math.ceil(Math.max(t.bottom,h.bottom))}function at(){var r,e=it(),u=o.grid.show,f,t,i;for(t in h)f=o.grid.margin||0,h[t]=typeof f=="number"?f:f[t]||0;nt(p.processOffset,[h]);for(t in h)h[t]+=typeof o.grid.borderWidth=="object"?u?o.grid.borderWidth[t]:0:u?o.grid.borderWidth:0;if(n.each(e,function(n,t){var i=t.options;t.show=i.show==null?t.used:i.show;t.reserveSpace=i.reserveSpace==null?t.show:i.reserveSpace;bi(t)}),u){for(i=n.grep(e,function(n){return n.show||n.reserveSpace}),n.each(i,function(n,t){ki(t);di(t);gi(t,t.ticks);vi(t)}),r=i.length-1;r>=0;--r)yi(i[r]);wi();n.each(i,function(n,t){pi(t)})}d=a.width-h.left-h.right;b=a.height-h.bottom-h.top;n.each(e,function(n,t){ai(t)});u&&tr();er()}function bi(n){var t=n.options,r=+(t.min!=null?t.min:n.datamin),i=+(t.max!=null?t.max:n.datamax),f=i-r,e,u;f==0?(e=i==0?1:.01,t.min==null&&(r-=e),(t.max==null||t.min!=null)&&(i+=e)):(u=t.autoscaleMargin,u!=null&&(t.min==null&&(r-=f*u,r<0&&n.datamin!=null&&n.datamin>=0&&(r=0)),t.max==null&&(i+=f*u,i>0&&n.datamax!=null&&n.datamax<=0&&(i=0))));n.min=r;n.max=i}function ki(t){var i=t.options,b,v,h,f,r,s,p,c;b=typeof i.ticks=="number"&&i.ticks>0?i.ticks:.3*Math.sqrt(t.direction=="x"?a.width:a.height);var l=(t.max-t.min)/b,o=-Math.floor(Math.log(l)/Math.LN10),e=i.tickDecimals;if(e!=null&&o>e&&(o=e),v=Math.pow(10,-o),h=l/v,h<1.5?f=1:h<3?(f=2,h>2.25&&(e==null||o+1<=e)&&(f=2.5,++o)):f=h<7.5?5:10,f*=v,i.minTickSize!=null&&f<i.minTickSize&&(f=i.minTickSize),t.delta=l,t.tickDecimals=Math.max(0,e!=null?e:o),t.tickSize=i.tickSize||f,i.mode=="time"&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");t.tickGenerator||(t.tickGenerator=function(n){var i=[],e=u(n.min,n.tickSize),r=0,t=Number.NaN,f;do f=t,t=e+r*n.tickSize,i.push(t),++r;while(t<n.max&&t!=f);return i},t.tickFormatter=function(n,t){var u=t.tickDecimals?Math.pow(10,t.tickDecimals):1,i=""+Math.round(n*u)/u,f,r;return t.tickDecimals!=null&&(f=i.indexOf("."),r=f==-1?0:i.length-f-1,r<t.tickDecimals)?(r?i:i+".")+(""+u).substr(1,t.tickDecimals-r):i});n.isFunction(i.tickFormatter)&&(t.tickFormatter=function(n,t){return""+i.tickFormatter(n,t)});i.alignTicksWithAxis!=null&&(r=(t.direction=="x"?y:w)[i.alignTicksWithAxis-1],r&&r.used&&r!=t&&(s=t.tickGenerator(t),s.length>0&&(i.min==null&&(t.min=Math.min(t.min,s[0])),i.max==null&&s.length>1&&(t.max=Math.max(t.max,s[s.length-1]))),t.tickGenerator=function(n){for(var u=[],t,i=0;i<r.ticks.length;++i)t=(r.ticks[i].v-r.min)/(r.max-r.min),t=n.min+t*(n.max-n.min),u.push(t);return u},t.mode||i.tickDecimals!=null||(p=Math.max(0,-Math.floor(Math.log(t.delta)/Math.LN10)+1),c=t.tickGenerator(t),c.length>1&&/\..*0$/.test((c[1]-c[0]).toFixed(p))||(t.tickDecimals=p))))}function di(t){var i=t.options.ticks,e=[],o,u,f,r;for(i==null||typeof i=="number"&&i>0?e=t.tickGenerator(t):i&&(e=n.isFunction(i)?i(t):i),t.ticks=[],o=0;o<e.length;++o)f=null,r=e[o],typeof r=="object"?(u=+r[0],r.length>1&&(f=r[1])):u=+r,f==null&&(f=t.tickFormatter(u,t)),isNaN(u)||t.ticks.push({v:u,label:f})}function gi(n,t){n.options.autoscaleMargin&&t.length>0&&(n.options.min==null&&(n.min=Math.min(n.min,t[0].v)),n.options.max==null&&t.length>1&&(n.max=Math.max(n.max,t[t.length-1].v)))}function vt(){var n,t;for(a.clear(),nt(p.drawBackground,[s]),n=o.grid,n.show&&n.backgroundColor&&nr(),n.show&&!n.aboveData&&pt(),t=0;t<c.length;++t)nt(p.drawSeries,[s,c[t]]),ir(c[t]);nt(p.draw,[s]);n.show&&n.aboveData&&pt();a.render();ut()}function yt(n,t){for(var s,f,i,r,u,o=it(),e=0;e<o.length;++e)if(f=o[e],f.direction==t&&(u=t+f.n+"axis",n[u]||f.n!=1||(u=t+"axis"),n[u])){i=n[u].from;r=n[u].to;break}return n[u]||(f=t=="x"?y[0]:w[0],i=n[t+"1"],r=n[t+"2"]),i!=null&&r!=null&&i>r&&(s=i,i=r,r=s),{from:i,to:r,axis:f}}function nr(){s.save();s.translate(h.left,h.top);s.fillStyle=ri(o.grid.backgroundColor,b,0,"rgba(255, 255, 255, 0)");s.fillRect(0,0,d,b);s.restore()}function pt(){var v,f,t,e,k,rt,et,ot,tt,ut,w;if(s.save(),s.translate(h.left,h.top),k=o.grid.markings,k)for(n.isFunction(k)&&(f=l.getAxes(),f.xmin=f.xaxis.min,f.xmax=f.xaxis.max,f.ymin=f.yaxis.min,f.ymax=f.yaxis.max,k=k(f)),v=0;v<k.length;++v){var nt=k[v],i=yt(nt,"x"),r=yt(nt,"y");(i.from==null&&(i.from=i.axis.min),i.to==null&&(i.to=i.axis.max),r.from==null&&(r.from=r.axis.min),r.to==null&&(r.to=r.axis.max),i.to<i.axis.min||i.from>i.axis.max||r.to<r.axis.min||r.from>r.axis.max)||(i.from=Math.max(i.from,i.axis.min),i.to=Math.min(i.to,i.axis.max),r.from=Math.max(r.from,r.axis.min),r.to=Math.min(r.to,r.axis.max),rt=i.from===i.to,et=r.from===r.to,rt&&et)||(i.from=Math.floor(i.axis.p2c(i.from)),i.to=Math.floor(i.axis.p2c(i.to)),r.from=Math.floor(r.axis.p2c(r.from)),r.to=Math.floor(r.axis.p2c(r.to)),rt||et?(ot=nt.lineWidth||o.grid.markingsLineWidth,tt=ot%2?.5:0,s.beginPath(),s.strokeStyle=nt.color||o.grid.markingsColor,s.lineWidth=ot,rt?(s.moveTo(i.to+tt,r.from),s.lineTo(i.to+tt,r.to)):(s.moveTo(i.from,r.to+tt),s.lineTo(i.to,r.to+tt)),s.stroke()):(s.fillStyle=nt.color||o.grid.markingsColor,s.fillRect(i.from,r.to,i.to-i.from,r.from-r.to)))}for(f=it(),t=o.grid.borderWidth,ut=0;ut<f.length;++ut){var u=f[ut],ft=u.box,g=u.tickLength,c,a,y,p;if(u.show&&u.ticks.length!=0){for(s.lineWidth=1,u.direction=="x"?(c=0,a=g=="full"?u.position=="top"?0:b:ft.top-h.top+(u.position=="top"?ft.height:0)):(a=0,c=g=="full"?u.position=="left"?0:d:ft.left-h.left+(u.position=="left"?ft.width:0)),u.innermost||(s.strokeStyle=u.options.color,s.beginPath(),y=p=0,u.direction=="x"?y=d+1:p=b+1,s.lineWidth==1&&(u.direction=="x"?a=Math.floor(a)+.5:c=Math.floor(c)+.5),s.moveTo(c,a),s.lineTo(c+y,a+p),s.stroke()),s.strokeStyle=u.options.tickColor,s.beginPath(),v=0;v<u.ticks.length;++v)(w=u.ticks[v].v,y=p=0,isNaN(w)||w<u.min||w>u.max||g=="full"&&(typeof t=="object"&&t[u.position]>0||t>0)&&(w==u.min||w==u.max))||(u.direction=="x"?(c=u.p2c(w),p=g=="full"?-b:g,u.position=="top"&&(p=-p)):(a=u.p2c(w),y=g=="full"?-d:g,u.position=="left"&&(y=-y)),s.lineWidth==1&&(u.direction=="x"?c=Math.floor(c)+.5:a=Math.floor(a)+.5),s.moveTo(c,a),s.lineTo(c+y,a+p));s.stroke()}}t&&(e=o.grid.borderColor,typeof t=="object"||typeof e=="object"?(typeof t!="object"&&(t={top:t,right:t,bottom:t,left:t}),typeof e!="object"&&(e={top:e,right:e,bottom:e,left:e}),t.top>0&&(s.strokeStyle=e.top,s.lineWidth=t.top,s.beginPath(),s.moveTo(0-t.left,0-t.top/2),s.lineTo(d,0-t.top/2),s.stroke()),t.right>0&&(s.strokeStyle=e.right,s.lineWidth=t.right,s.beginPath(),s.moveTo(d+t.right/2,0-t.top),s.lineTo(d+t.right/2,b),s.stroke()),t.bottom>0&&(s.strokeStyle=e.bottom,s.lineWidth=t.bottom,s.beginPath(),s.moveTo(d+t.right,b+t.bottom/2),s.lineTo(0,b+t.bottom/2),s.stroke()),t.left>0&&(s.strokeStyle=e.left,s.lineWidth=t.left,s.beginPath(),s.moveTo(0-t.left/2,b+t.bottom),s.lineTo(0-t.left/2,0),s.stroke())):(s.lineWidth=t,s.strokeStyle=o.grid.borderColor,s.strokeRect(-t/2,-t/2,d+t,b+t)));s.restore()}function tr(){n.each(it(),function(n,t){var i=t.box,l=t.direction+"Axis "+t.direction+t.n+"Axis",c="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+l,v=t.options.font||"flot-tick-label tickLabel",r,u,f,o,s,e;if(a.removeText(c),t.show&&t.ticks.length!=0)for(e=0;e<t.ticks.length;++e)(r=t.ticks[e],!r.label||r.v<t.min||r.v>t.max)||(t.direction=="x"?(o="center",u=h.left+t.p2c(r.v),t.position=="bottom"?f=i.top+i.padding:(f=i.top+i.height-i.padding,s="bottom")):(s="middle",f=h.top+t.p2c(r.v),t.position=="left"?(u=i.left+i.width-i.padding,o="right"):u=i.left+i.padding),a.addText(c,u,f,r.label,v,null,null,o,s))})}function ir(n){n.lines.show&&rr(n);n.bars.show&&fr(n);n.points.show&&ur(n)}function rr(n){function u(n,t,i,r,u){var l=n.points,a=n.pointsize,v=null,y=null,c;for(s.beginPath(),c=a;c<l.length;c+=a){var f=l[c-a],e=l[c-a+1],o=l[c],h=l[c+1];if(f!=null&&o!=null){if(e<=h&&e<u.min){if(h<u.min)continue;f=(u.min-e)/(h-e)*(o-f)+f;e=u.min}else if(h<=e&&h<u.min){if(e<u.min)continue;o=(u.min-e)/(h-e)*(o-f)+f;h=u.min}if(e>=h&&e>u.max){if(h>u.max)continue;f=(u.max-e)/(h-e)*(o-f)+f;e=u.max}else if(h>=e&&h>u.max){if(e>u.max)continue;o=(u.max-e)/(h-e)*(o-f)+f;h=u.max}if(f<=o&&f<r.min){if(o<r.min)continue;e=(r.min-f)/(o-f)*(h-e)+e;f=r.min}else if(o<=f&&o<r.min){if(f<r.min)continue;h=(r.min-f)/(o-f)*(h-e)+e;o=r.min}if(f>=o&&f>r.max){if(o>r.max)continue;e=(r.max-f)/(o-f)*(h-e)+e;f=r.max}else if(o>=f&&o>r.max){if(f>r.max)continue;h=(r.max-f)/(o-f)*(h-e)+e;o=r.max}(f!=v||e!=y)&&s.moveTo(r.p2c(f)+t,u.p2c(e)+i);v=o;y=h;s.lineTo(r.p2c(o)+t,u.p2c(h)+i)}}s.stroke()}function e(n,t,i){for(var c=n.points,o=n.pointsize,b=Math.min(Math.max(0,i.min),i.max),h=0,l=!1,a=1,p=0,w=0,v,y;;){if(o>0&&h>c.length+o)break;h+=o;var r=c[h-o],u=c[h-o+a],f=c[h],e=c[h+a];if(l){if(o>0&&r!=null&&f==null){w=h;o=-o;a=2;continue}if(o<0&&h==p+o){s.fill();l=!1;o=-o;a=1;h=p=w+o;continue}}if(r!=null&&f!=null){if(r<=f&&r<t.min){if(f<t.min)continue;u=(t.min-r)/(f-r)*(e-u)+u;r=t.min}else if(f<=r&&f<t.min){if(r<t.min)continue;e=(t.min-r)/(f-r)*(e-u)+u;f=t.min}if(r>=f&&r>t.max){if(f>t.max)continue;u=(t.max-r)/(f-r)*(e-u)+u;r=t.max}else if(f>=r&&f>t.max){if(r>t.max)continue;e=(t.max-r)/(f-r)*(e-u)+u;f=t.max}if(l||(s.beginPath(),s.moveTo(t.p2c(r),i.p2c(b)),l=!0),u>=i.max&&e>=i.max){s.lineTo(t.p2c(r),i.p2c(i.max));s.lineTo(t.p2c(f),i.p2c(i.max));continue}else if(u<=i.min&&e<=i.min){s.lineTo(t.p2c(r),i.p2c(i.min));s.lineTo(t.p2c(f),i.p2c(i.min));continue}v=r;y=f;u<=e&&u<i.min&&e>=i.min?(r=(i.min-u)/(e-u)*(f-r)+r,u=i.min):e<=u&&e<i.min&&u>=i.min&&(f=(i.min-u)/(e-u)*(f-r)+r,e=i.min);u>=e&&u>i.max&&e<=i.max?(r=(i.max-u)/(e-u)*(f-r)+r,u=i.max):e>=u&&e>i.max&&u<=i.max&&(f=(i.max-u)/(e-u)*(f-r)+r,e=i.max);r!=v&&s.lineTo(t.p2c(v),i.p2c(u));s.lineTo(t.p2c(r),i.p2c(u));s.lineTo(t.p2c(f),i.p2c(e));f!=y&&(s.lineTo(t.p2c(f),i.p2c(e)),s.lineTo(t.p2c(y),i.p2c(e)))}}}var t,i,r,f;s.save();s.translate(h.left,h.top);s.lineJoin="round";t=n.lines.lineWidth;i=n.shadowSize;t>0&&i>0&&(s.lineWidth=i,s.strokeStyle="rgba(0,0,0,0.1)",r=Math.PI/18,u(n.datapoints,Math.sin(r)*(t/2+i/2),Math.cos(r)*(t/2+i/2),n.xaxis,n.yaxis),s.lineWidth=i/2,u(n.datapoints,Math.sin(r)*(t/2+i/4),Math.cos(r)*(t/2+i/4),n.xaxis,n.yaxis));s.lineWidth=t;s.strokeStyle=n.color;f=ot(n.lines,n.color,0,b);f&&(s.fillStyle=f,e(n.datapoints,n.xaxis,n.yaxis));t>0&&u(n.datapoints,0,0,n.xaxis,n.yaxis);s.restore()}function ur(n){function r(n,t,i,r,u,f,e,o){for(var h,c,a=n.points,v=n.pointsize,l=0;l<a.length;l+=v)(h=a[l],c=a[l+1],h==null||h<f.min||h>f.max||c<e.min||c>e.max)||(s.beginPath(),h=f.p2c(h),c=e.p2c(c)+r,o=="circle"?s.arc(h,c,t,0,u?Math.PI:Math.PI*2,!1):o(s,h,c,t,u),s.closePath(),i&&(s.fillStyle=i,s.fill()),s.stroke())}var t;s.save();s.translate(h.left,h.top);var i=n.points.lineWidth,e=n.shadowSize,u=n.points.radius,f=n.points.symbol;i==0&&(i=.0001);i>0&&e>0&&(t=e/2,s.lineWidth=t,s.strokeStyle="rgba(0,0,0,0.1)",r(n.datapoints,u,null,t+t/2,!0,n.xaxis,n.yaxis,f),s.strokeStyle="rgba(0,0,0,0.2)",r(n.datapoints,u,null,t/2,!0,n.xaxis,n.yaxis,f));s.lineWidth=i;s.strokeStyle=n.color;r(n.datapoints,u,ot(n.points,n.color),0,!1,n.xaxis,n.yaxis,f);s.restore()}function wt(n,t,i,r,u,f,e,o,s,h,c){var l,y,a,v,p,w,b,k,d;(h?(k=w=b=!0,p=!1,l=i,y=n,v=t+r,a=t+u,y<l&&(d=y,y=l,l=d,p=!0,w=!1)):(p=w=b=!0,k=!1,l=n+r,y=n+u,a=i,v=t,v<a&&(d=v,v=a,a=d,k=!0,b=!1)),y<e.min||l>e.max||v<o.min||a>o.max)||(l<e.min&&(l=e.min,p=!1),y>e.max&&(y=e.max,w=!1),a<o.min&&(a=o.min,k=!1),v>o.max&&(v=o.max,b=!1),l=e.p2c(l),a=o.p2c(a),y=e.p2c(y),v=o.p2c(v),f&&(s.fillStyle=f(a,v),s.fillRect(l,v,y-l,a-v)),c>0&&(p||w||b||k)&&(s.beginPath(),s.moveTo(l,a),p?s.lineTo(l,v):s.moveTo(l,v),b?s.lineTo(y,v):s.moveTo(y,v),w?s.lineTo(y,a):s.moveTo(y,a),k?s.lineTo(l,a):s.moveTo(l,a),s.stroke()))}function fr(n){function r(t,i,r,u,f,e){for(var h=t.points,c=t.pointsize,o=0;o<h.length;o+=c)h[o]!=null&&wt(h[o],h[o+1],h[o+2],i,r,u,f,e,s,n.bars.horizontal,n.bars.lineWidth)}var t,i;s.save();s.translate(h.left,h.top);s.lineWidth=n.bars.lineWidth;s.strokeStyle=n.color;switch(n.bars.align){case"left":t=0;break;case"right":t=-n.bars.barWidth;break;default:t=-n.bars.barWidth/2}i=n.bars.fill?function(t,i){return ot(n.bars,n.color,t,i)}:null;r(n.datapoints,t,t+n.bars.barWidth,i,n.xaxis,n.yaxis);s.restore()}function ot(t,i,r,u){var e=t.fill,f;return e?t.fillColor?ri(t.fillColor,r,u,i):(f=n.color.parse(i),f.a=typeof e=="number"?e:.4,f.normalize(),f.toString()):null}function er(){var g,r,w,b,v,t,k;if(o.legend.container!=null?n(o.legend.container).html(""):i.find(".legend").remove(),o.legend.show){var f=[],e=[],y=!1,d=o.legend.labelFormatter,s,p;for(r=0;r<c.length;++r)s=c[r],s.label&&(p=d?d(s.label,s):s.label,p&&e.push({label:p,color:s.color}));for(o.legend.sorted&&(n.isFunction(o.legend.sorted)?e.sort(o.legend.sorted):o.legend.sorted=="reverse"?e.reverse():(g=o.legend.sorted!="descending",e.sort(function(n,t){return n.label==t.label?0:n.label<t.label!=g?1:-1}))),r=0;r<e.length;++r)w=e[r],r%o.legend.noColumns==0&&(y&&f.push("<\/tr>"),f.push("<tr>"),y=!0),f.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+w.color+';overflow:hidden"><\/div><\/div><\/td><td class="legendLabel">'+w.label+"<\/td>");if(y&&f.push("<\/tr>"),f.length!=0)if(b='<table style="font-size:smaller;color:'+o.grid.color+'">'+f.join("")+"<\/table>",o.legend.container!=null)n(o.legend.container).html(b);else{var l="",a=o.legend.position,u=o.legend.margin;u[0]==null&&(u=[u,u]);a.charAt(0)=="n"?l+="top:"+(u[1]+h.top)+"px;":a.charAt(0)=="s"&&(l+="bottom:"+(u[1]+h.bottom)+"px;");a.charAt(1)=="e"?l+="right:"+(u[0]+h.right)+"px;":a.charAt(1)=="w"&&(l+="left:"+(u[0]+h.left)+"px;");v=n('<div class="legend">'+b.replace('style="','style="position:absolute;'+l+";")+"<\/div>").appendTo(i);o.legend.backgroundOpacity!=0&&(t=o.legend.backgroundColor,t==null&&(t=o.grid.backgroundColor,t=t&&typeof t=="string"?n.color.parse(t):n.color.extract(v,"background-color"),t.a=1,t=t.toString()),k=v.children(),n('<div style="position:absolute;width:'+k.width()+"px;height:"+k.height()+"px;"+l+"background-color:"+t+';"> <\/div>').prependTo(v).css("opacity",o.legend.backgroundOpacity))}}}function or(n,t,i){for(var w=o.grid.mouseActiveRadius,it=w*w+1,a=null,r,s,e,h,p,tt,u=c.length-1;u>=0;--u)if(i(c[u])){var f=c[u],b=f.xaxis,k=f.yaxis,l=f.datapoints.points,v=b.c2p(n),y=k.c2p(t),g=w/b.scale,nt=w/k.scale;if(s=f.datapoints.pointsize,b.options.inverseTransform&&(g=Number.MAX_VALUE),k.options.inverseTransform&&(nt=Number.MAX_VALUE),f.lines.show||f.points.show)for(r=0;r<l.length;r+=s)if((e=l[r],h=l[r+1],e!=null)&&!(e-v>g)&&!(e-v<-g)&&!(h-y>nt)&&!(h-y<-nt)){var rt=Math.abs(b.p2c(e)-n),ut=Math.abs(k.p2c(h)-t),ft=rt*rt+ut*ut;ft<it&&(it=ft,a=[u,r/s])}if(f.bars.show&&!a){switch(f.bars.align){case"left":p=0;break;case"right":p=-f.bars.barWidth;break;default:p=-f.bars.barWidth/2}for(tt=p+f.bars.barWidth,r=0;r<l.length;r+=s){var e=l[r],h=l[r+1],d=l[r+2];e!=null&&(c[u].bars.horizontal?v<=Math.max(d,e)&&v>=Math.min(d,e)&&y>=h+p&&y<=h+tt:v>=e+p&&v<=e+tt&&y>=Math.min(d,h)&&y<=Math.max(d,h))&&(a=[u,r/s])}}}return a?(u=a[0],r=a[1],s=c[u].datapoints.pointsize,{datapoint:c[u].datapoints.points.slice(r*s,(r+1)*s),dataIndex:r,series:c[u],seriesIndex:u}):null}function bt(n){o.grid.hoverable&&st("plothover",n,function(n){return n.hoverable!=!1})}function kt(n){o.grid.hoverable&&st("plothover",n,function(){return!1})}function dt(n){st("plotclick",n,function(n){return n.clickable!=!1})}function st(n,t,r){var e=k.offset(),l=t.pageX-e.left-h.left,a=t.pageY-e.top-h.top,c=ct({left:l,top:a}),u,s,f;if(c.pageX=t.pageX,c.pageY=t.pageY,u=or(l,a,r),u&&(u.pageX=parseInt(u.series.xaxis.p2c(u.datapoint[0])+e.left+h.left,10),u.pageY=parseInt(u.series.yaxis.p2c(u.datapoint[1])+e.top+h.top,10)),o.grid.autoHighlight){for(s=0;s<g.length;++s)f=g[s],f.auto!=n||u&&f.series==u.series&&f.point[0]==u.datapoint[0]&&f.point[1]==u.datapoint[1]||ti(f.series,f.point);u&&ni(u.series,u.datapoint,n)}i.trigger(n,[c,u])}function ut(){var n=o.interaction.redrawOverlayInterval;if(n==-1){gt();return}rt||(rt=setTimeout(gt,n))}function gt(){rt=null;v.save();tt.clear();v.translate(h.left,h.top);for(var n,t=0;t<g.length;++t)n=g[t],n.series.bars.show?hr(n.series,n.point):sr(n.series,n.point);v.restore();nt(p.drawOverlay,[v])}function ni(n,t,i){var r,u;typeof n=="number"&&(n=c[n]);typeof t=="number"&&(r=n.datapoints.pointsize,t=n.datapoints.points.slice(r*t,r*(t+1)));u=ii(n,t);u==-1?(g.push({series:n,point:t,auto:i}),ut()):i||(g[u].auto=!1)}function ti(n,t){var i,r;if(n==null&&t==null){g=[];ut();return}typeof n=="number"&&(n=c[n]);typeof t=="number"&&(i=n.datapoints.pointsize,t=n.datapoints.points.slice(i*t,i*(t+1)));r=ii(n,t);r!=-1&&(g.splice(r,1),ut())}function ii(n,t){for(var r,i=0;i<g.length;++i)if(r=g[i],r.series==n&&r.point[0]==t[0]&&r.point[1]==t[1])return i;return-1}function sr(t,i){var r=i[0],u=i[1],f=t.xaxis,e=t.yaxis,h=typeof t.highlightColor=="string"?t.highlightColor:n.color.parse(t.color).scale("a",.5).toString(),o,s;r<f.min||r>f.max||u<e.min||u>e.max||(o=t.points.radius+t.points.lineWidth/2,v.lineWidth=o,v.strokeStyle=h,s=1.5*o,r=f.p2c(r),u=e.p2c(u),v.beginPath(),t.points.symbol=="circle"?v.arc(r,u,s,0,2*Math.PI,!1):t.points.symbol(v,r,u,s,!1),v.closePath(),v.stroke())}function hr(t,i){var u=typeof t.highlightColor=="string"?t.highlightColor:n.color.parse(t.color).scale("a",.5).toString(),f=u,r;switch(t.bars.align){case"left":r=0;break;case"right":r=-t.bars.barWidth;break;default:r=-t.bars.barWidth/2}v.lineWidth=t.bars.lineWidth;v.strokeStyle=u;wt(i[0],i[1],i[2]||0,r,r+t.bars.barWidth,function(){return f},t.xaxis,t.yaxis,v,t.bars.horizontal,t.bars.lineWidth)}function ri(t,i,r,u){var h,e,c,f,o;if(typeof t=="string")return t;for(h=s.createLinearGradient(0,r,0,i),e=0,c=t.colors.length;e<c;++e)f=t.colors[e],typeof f!="string"&&(o=n.color.parse(u),f.brightness!=null&&(o=o.scale("rgb",f.brightness)),f.opacity!=null&&(o.a*=f.opacity),f=o.toString()),h.addColorStop(e/(c-1),f);return h}var c=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},a=null,tt=null,k=null,s=null,v=null,y=[],w=[],h={left:0,right:0,top:0,bottom:0},d=0,b=0,p={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},l=this,g,rt;l.setData=ht;l.setupGrid=at;l.draw=vt;l.getPlaceholder=function(){return i};l.getCanvas=function(){return a.element};l.getPlotOffset=function(){return h};l.width=function(){return d};l.height=function(){return b};l.offset=function(){var n=k.offset();return n.left+=h.left,n.top+=h.top,n};l.getData=function(){return c};l.getAxes=function(){var t={};return n.each(y.concat(w),function(n,i){i&&(t[i.direction+(i.n!=1?i.n:"")+"axis"]=i)}),t};l.getXAxes=function(){return y};l.getYAxes=function(){return w};l.c2p=ct;l.p2c=oi;l.getOptions=function(){return o};l.highlight=ni;l.unhighlight=ti;l.triggerRedrawOverlay=ut;l.pointOffset=function(n){return{left:parseInt(y[ft(n,"x")-1].p2c(+n.x)+h.left,10),top:parseInt(w[ft(n,"y")-1].p2c(+n.y)+h.top,10)}};l.shutdown=lt;l.destroy=function(){lt();i.removeData("plot").empty();c=[];o=null;a=null;tt=null;k=null;s=null;v=null;y=[];w=[];p=null;g=[];l=null};l.resize=function(){var n=i.width(),t=i.height();a.resize(n,t);tt.resize(n,t)};l.hooks=p;ui(l);fi(f);ci();ht(r);at();vt();li();g=[];rt=null}function u(n,t){return t*Math.floor(n/t)}var i=Object.prototype.hasOwnProperty;n.fn.detach||(n.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});t.prototype.resize=function(n,t){if(n<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+n+", height = "+t);var i=this.element,u=this.context,r=this.pixelRatio;this.width!=n&&(i.width=n*r,i.style.width=n+"px",this.width=n);this.height!=t&&(i.height=t*r,i.style.height=t+"px",this.height=t);u.restore();u.save();u.scale(r,r)};t.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};t.prototype.render=function(){var h=this._textCache,r,u,f,c,t,e,o,s,n;for(r in h)if(i.call(h,r)){u=this.getTextLayer(r);f=h[r];u.hide();for(c in f)if(i.call(f,c)){t=f[c];for(e in t)if(i.call(t,e)){for(o=t[e].positions,s=0;n=o[s];s++)n.active?n.rendered||(u.append(n.element),n.rendered=!0):(o.splice(s--,1),n.rendered&&n.element.detach());o.length==0&&delete t[e]}}u.show()}};t.prototype.getTextLayer=function(t){var i=this.text[t];return i==null&&(this.textContainer==null&&(this.textContainer=n("<div class='flot-text'><\/div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),i=this.text[t]=n("<div><\/div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),i};t.prototype.getTextInfo=function(t,i,r,u,f){var h,o,s,c,e;return i=""+i,h=typeof r=="object"?r.style+" "+r.variant+" "+r.weight+" "+r.size+"px/"+r.lineHeight+"px "+r.family:r,o=this._textCache[t],o==null&&(o=this._textCache[t]={}),s=o[h],s==null&&(s=o[h]={}),c=s[i],c==null&&(e=n("<div><\/div>").html(i).css({position:"absolute","max-width":f,top:-9999}).appendTo(this.getTextLayer(t)),typeof r=="object"?e.css({font:h,color:r.color}):typeof r=="string"&&e.addClass(r),c=s[i]={width:e.outerWidth(!0),height:e.outerHeight(!0),element:e,positions:[]},e.detach()),c};t.prototype.addText=function(n,t,i,r,u,f,e,o,s){var h=this.getTextInfo(n,r,u,f,e),l=h.positions,a,c;for(o=="center"?t-=h.width/2:o=="right"&&(t-=h.width),s=="middle"?i-=h.height/2:s=="bottom"&&(i-=h.height),a=0;c=l[a];a++)if(c.x==t&&c.y==i){c.active=!0;return}c={active:!0,rendered:!1,element:l.length?h.element.clone():h.element,x:t,y:i};l.push(c);c.element.css({top:Math.round(i),left:Math.round(t),"text-align":o})};t.prototype.removeText=function(n,t,r,u,f,e){var h,a,c,v,l,o,s;if(u==null){if(h=this._textCache[n],h!=null)for(a in h)if(i.call(h,a)){c=h[a];for(v in c)if(i.call(c,v))for(l=c[v].positions,o=0;s=l[o];o++)s.active=!1}}else for(l=this.getTextInfo(n,u,f,e).positions,o=0;s=l[o];o++)s.x==t&&s.y==r&&(s.active=!1)};n.plot=function(t,i,u){return new r(n(t),i,u,n.plot.plugins)};n.plot.version="0.8.3";n.plot.plugins=[];n.fn.plot=function(t,i){return this.each(function(){n.plot(this,t,i)})}}(jQuery),function($,n,t){function c(t){var a,o;for(f===!0&&(f=t||1),a=i.length-1;a>=0;a--)if(o=$(i[a]),o[0]==n||o.is(":visible")){var v=o.width(),y=o.height(),s=o.data(e);s&&(v!==s.w||y!==s.h)&&(o.trigger(h,[s.w=v,s.h=y]),f=t||!0)}else s=o.data(e),s.w=0,s.h=0;u!==null&&(f&&(t==null||t-f<1e3)?u=n.requestAnimationFrame(c):(u=setTimeout(c,r[l]),f=!1))}var i=[],r=$.resize=$.extend($.resize,{}),u,f=!1,s="setTimeout",h="resize",e=h+"-special-event",l="pendingDelay",a="activeDelay",o="throttleWindow";r[l]=200;r[a]=20;r[o]=!0;$.event.special[h]={setup:function(){if(!r[o]&&this[s])return!1;var n=$(this);i.push(this);n.data(e,{w:n.width(),h:n.height()});i.length===1&&(u=t,c())},teardown:function(){var t,n;if(!r[o]&&this[s])return!1;for(t=$(this),n=i.length-1;n>=0;n--)if(i[n]==this){i.splice(n,1);break}t.removeData(e);i.length||(f?cancelAnimationFrame(u):clearTimeout(u),u=null)},add:function(n){function u(n,r,u){var f=$(this),o=f.data(e)||{};o.w=r!==t?r:f.width();o.h=u!==t?u:f.height();i.apply(this,arguments)}if(!r[o]&&this[s])return!1;var i;if($.isFunction(n))return i=n,u;i=n.handler;n.handler=u}};n.requestAnimationFrame||(n.requestAnimationFrame=function(){return n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(t){return n.setTimeout(function(){t((new Date).getTime())},r[a])}}());n.cancelAnimationFrame||(n.cancelAnimationFrame=function(){return n.webkitCancelRequestAnimationFrame||n.mozCancelRequestAnimationFrame||n.oCancelRequestAnimationFrame||n.msCancelRequestAnimationFrame||clearTimeout}())}(jQuery,this),function(n){function t(n){function t(){var t=n.getPlaceholder();t.width()!=0&&t.height()!=0&&(n.resize(),n.setupGrid(),n.draw())}function i(n){n.getPlaceholder().resize(t)}function r(n){n.getPlaceholder().unbind("resize",t)}n.hooks.bindEvents.push(i);n.hooks.shutdown.push(r)}n.plot.plugins.push({init:t,options:{},name:"resize",version:"1.0"})}(jQuery),function(n){function t(n){function t(n,t){for(var r=null,i=0;i<t.length;++i){if(n==t[i])break;t[i].stack==n.stack&&(r=t[i])}return r}function i(n,i,r){var d;if(i.stack!=null&&i.stack!==!1&&(d=t(i,n.getData()),d)){for(var e=r.pointsize,h=r.points,y=d.datapoints.pointsize,l=d.datapoints.points,f=[],p,nt,rt,a,v,w,k=i.lines.show,tt=i.bars.horizontal,ut=e>2&&(tt?r.format[2].x:r.format[2].y),ft=k&&i.lines.steps,it=!0,g=tt?1:0,b=tt?0:1,o=0,c=0,s,u;;){if(o>=h.length)break;if(s=f.length,h[o]==null){for(u=0;u<e;++u)f.push(h[o+u]);o+=e}else if(c>=l.length){if(!k)for(u=0;u<e;++u)f.push(h[o+u]);o+=e}else if(l[c]==null){for(u=0;u<e;++u)f.push(null);it=!0;c+=y}else{if(p=h[o+g],nt=h[o+b],a=l[c+g],v=l[c+b],w=0,p==a){for(u=0;u<e;++u)f.push(h[o+u]);f[s+b]+=v;w=v;o+=e;c+=y}else if(p>a){if(k&&o>0&&h[o-e]!=null){for(rt=nt+(h[o-e+b]-nt)*(a-p)/(h[o-e+g]-p),f.push(a),f.push(rt+v),u=2;u<e;++u)f.push(h[o+u]);w=v}c+=y}else{if(it&&k){o+=e;continue}for(u=0;u<e;++u)f.push(h[o+u]);k&&c>0&&l[c-y]!=null&&(w=v+(l[c-y+b]-v)*(p-a)/(l[c-y+g]-a));f[s+b]+=w;o+=e}it=!1;s!=f.length&&ut&&(f[s+2]+=w)}if(ft&&s!=f.length&&s>0&&f[s]!=null&&f[s]!=f[s-e]&&f[s+1]!=f[s-e+1]){for(u=0;u<e;++u)f[s+e+u]=f[s+u];f[s+1]=f[s-e+1]}}r.points=f}}n.hooks.processDatapoints.push(i)}n.plot.plugins.push({init:t,options:{series:{stack:null}},name:"stack",version:"1.2"})}(jQuery),function(n){function i(n,t){return t*Math.floor(n/t)}function r(n,t,i,r){var c,o,u;if(typeof n.strftime=="function")return n.strftime(t);var f=function(n,t){return n=""+n,t=""+(t==null?"0":t),n.length==1?t+n:n},s=[],h=!1,e=n.getHours(),l=e<12;for(i==null&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),r==null&&(r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),c=e>12?e-12:e==0?12:e,o=0;o<t.length;++o)if(u=t.charAt(o),h){switch(u){case"a":u=""+r[n.getDay()];break;case"b":u=""+i[n.getMonth()];break;case"d":u=f(n.getDate());break;case"e":u=f(n.getDate()," ");break;case"h":case"H":u=f(e);break;case"I":u=f(c);break;case"l":u=f(c," ");break;case"m":u=f(n.getMonth()+1);break;case"M":u=f(n.getMinutes());break;case"q":u=""+(Math.floor(n.getMonth()/3)+1);break;case"S":u=f(n.getSeconds());break;case"y":u=f(n.getFullYear()%100);break;case"Y":u=""+n.getFullYear();break;case"p":u=l?"am":"pm";break;case"P":u=l?"AM":"PM";break;case"w":u=""+n.getDay()}s.push(u);h=!1}else u=="%"?h=!0:s.push(u);return s.join("")}function f(n){function u(n,t,i,r){n[t]=function(){return i[r].apply(i,arguments)}}var i={date:n},r,t;for(n.strftime!=undefined&&u(i,"strftime",n,"strftime"),u(i,"getTime",n,"getTime"),u(i,"setTime",n,"setTime"),r=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],t=0;t<r.length;t++)u(i,"get"+r[t],n,"getUTC"+r[t]),u(i,"set"+r[t],n,"setUTC"+r[t]);return i}function u(n,t){if(t.timezone=="browser")return new Date(n);if(t.timezone&&t.timezone!="utc"){if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var i=new timezoneJS.Date;return i.setTimezone(t.timezone),i.setTime(n),i}return f(new Date(n))}return f(new Date(n))}function h(f){f.hooks.processOptions.push(function(f){n.each(f.getAxes(),function(n,f){var e=f.options;e.mode=="time"&&(f.tickGenerator=function(n){var k=[],r=u(n.min,e),d=0,l=e.tickSize&&e.tickSize[1]==="quarter"||e.minTickSize&&e.minTickSize[1]==="quarter"?s:o,c,y,f,w,p,h,a,b,v,g,nt,tt;for(e.minTickSize!=null&&(d=typeof e.tickSize=="number"?e.tickSize:e.minTickSize[0]*t[e.minTickSize[1]]),c=0;c<l.length-1;++c)if(n.delta<(l[c][0]*t[l[c][1]]+l[c+1][0]*t[l[c+1][1]])/2&&l[c][0]*t[l[c][1]]>=d)break;y=l[c][0];f=l[c][1];f=="year"&&(e.minTickSize!=null&&e.minTickSize[1]=="year"?y=Math.floor(e.minTickSize[0]):(w=Math.pow(10,Math.floor(Math.log(n.delta/t.year)/Math.LN10)),p=n.delta/t.year/w,y=(p<1.5?1:p<3?2:p<7.5?5:10)*w),y<1&&(y=1));n.tickSize=e.tickSize||[y,f];h=n.tickSize[0];f=n.tickSize[1];a=h*t[f];f=="second"?r.setSeconds(i(r.getSeconds(),h)):f=="minute"?r.setMinutes(i(r.getMinutes(),h)):f=="hour"?r.setHours(i(r.getHours(),h)):f=="month"?r.setMonth(i(r.getMonth(),h)):f=="quarter"?r.setMonth(3*i(r.getMonth()/3,h)):f=="year"&&r.setFullYear(i(r.getFullYear(),h));r.setMilliseconds(0);a>=t.minute&&r.setSeconds(0);a>=t.hour&&r.setMinutes(0);a>=t.day&&r.setHours(0);a>=t.day*4&&r.setDate(1);a>=t.month*2&&r.setMonth(i(r.getMonth(),3));a>=t.quarter*2&&r.setMonth(i(r.getMonth(),6));a>=t.year&&r.setMonth(0);b=0;v=Number.NaN;do g=v,v=r.getTime(),k.push(v),f=="month"||f=="quarter"?h<1?(r.setDate(1),nt=r.getTime(),r.setMonth(r.getMonth()+(f=="quarter"?3:1)),tt=r.getTime(),r.setTime(v+b*t.hour+(tt-nt)*h),b=r.getHours(),r.setHours(0)):r.setMonth(r.getMonth()+h*(f=="quarter"?3:1)):f=="year"?r.setFullYear(r.getFullYear()+h):r.setTime(v+a);while(v<n.max&&v!=g);return k},f.tickFormatter=function(n,i){var l=u(n,i.options);if(e.timeformat!=null)return r(l,e.timeformat,e.monthNames,e.dayNames);var o=i.options.tickSize&&i.options.tickSize[1]=="quarter"||i.options.minTickSize&&i.options.minTickSize[1]=="quarter",f=i.tickSize[0]*t[i.tickSize[1]],s=i.max-i.min,h=e.twelveHourClock?" %p":"",c=e.twelveHourClock?"%I":"%H",a;return a=f<t.minute?c+":%M:%S"+h:f<t.day?s<2*t.day?c+":%M"+h:"%b %d "+c+":%M"+h:f<t.month?"%b %d":o&&f<t.quarter||!o&&f<t.year?s<t.year?"%b":"%b %Y":o&&f<t.year?s<t.year?"Q%q":"Q%q %Y":"%Y",r(l,a,e.monthNames,e.dayNames)})})})}var t={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:365.2425*864e5},e=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],o=e.concat([[3,"month"],[6,"month"],[1,"year"]]),s=e.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);n.plot.plugins.push({init:h,options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"});n.plot.formatDate=r;n.plot.dateGenerator=u}(jQuery),function(n){"use strict";function r(n,t,i,r,u,f,e){var o=Math.pow,l=Math.sqrt,h,a,s,c,v,y,p,w;return h=l(o(i-n,2)+o(r-t,2)),a=l(o(u-i,2)+o(f-r,2)),s=e*h/(h+a),c=e-s,v=i+s*(n-u),y=r+s*(t-f),p=i-c*(n-u),w=r-c*(t-f),[v,y,p,w]}function u(t,i,r,u,f){var e=n.color.parse(f),s,o;for(e.a=typeof u=="number"?u:.3,e.normalize(),e=e.toString(),i.beginPath(),i.moveTo(t[0][0],t[0][1]),s=t.length,o=0;o<s;o++)i[t[o][3]].apply(i,t[o][2]);i.stroke();i.lineWidth=0;i.lineTo(t[s-1][0],r);i.lineTo(t[0][0],r);i.closePath();u!==!1&&(i.fillStyle=e,i.fill())}function i(n,i,r,u){(i===void 0||i!=="bezier"&&i!=="quadratic")&&(i="quadratic");i=i+"CurveTo";t.length==0?t.push([r[0],r[1],u.concat(r.slice(2)),i]):i=="quadraticCurveTo"&&r.length==2?(u=u.slice(0,2).concat(r),t.push([r[0],r[1],u,i])):t.push([r[2],r[3],u.concat(r.slice(2)),i])}function f(f,e,o){if(o.splines.show===!0){var l=[],b=o.splines.tension||.5,s,a,v,y=o.datapoints.points,p=o.datapoints.pointsize,w=f.getPlotOffset(),h=y.length,c=[];if(t=[],h/p<4){n.extend(o.lines,o.splines);return}for(s=0;s<h;s+=p)(a=y[s],v=y[s+1],a==null||a<o.xaxis.min||a>o.xaxis.max||v<o.yaxis.min||v>o.yaxis.max)||c.push(o.xaxis.p2c(a)+w.left,o.yaxis.p2c(v)+w.top);for(h=c.length,s=0;s<h-2;s+=2)l=l.concat(r.apply(this,c.slice(s,s+6).concat([b])));for(e.save(),e.strokeStyle=o.color,e.lineWidth=o.splines.lineWidth,i(e,"quadratic",c.slice(0,4),l.slice(0,2)),s=2;s<h-3;s+=2)i(e,"bezier",c.slice(s,s+4),l.slice(2*s-2,2*s+2));i(e,"quadratic",c.slice(h-2,h),[l[2*h-10],l[2*h-9],c[h-4],c[h-3]]);u(t,e,f.height()+10,o.splines.fill,o.color);e.restore()}}var t=[];n.plot.plugins.push({init:function(n){n.hooks.drawSeries.push(f)},options:{series:{splines:{show:!1,lineWidth:2,tension:.5,fill:!1}}},name:"spline",version:"0.8.2"})}(jQuery),function(n){function i(n,t,i,r){var o=t.xaxis.options.mode=="categories",s=t.yaxis.options.mode=="categories",u,f,h,e;if(o||s)for(u=r.format,u||(f=t,u=[],u.push({x:!0,number:!0,required:!0}),u.push({y:!0,number:!0,required:!0}),(f.bars.show||f.lines.show&&f.lines.fill)&&(h=!!(f.bars.show&&f.bars.zero||f.lines.show&&f.lines.zero),u.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:h}),f.bars.horizontal&&(delete u[u.length-1].y,u[u.length-1].x=!0)),r.format=u),e=0;e<u.length;++e)u[e].x&&o&&(u[e].number=!1),u[e].y&&s&&(u[e].number=!1)}function r(n){var t=-1;for(var i in n)n[i]>t&&(t=n[i]);return t+1}function u(n){var i=[],r,t;for(r in n.categories)t=n.categories[r],t>=n.min&&t<=n.max&&i.push([t,r]);return i.sort(function(n,t){return n[0]-t[0]}),i}function t(t,i,r){var s,e,o,h;if(t[i].options.mode=="categories"){if(!t[i].categories){if(s={},e=t[i].options.categories||{},n.isArray(e))for(o=0;o<e.length;++o)s[e[o]]=o;else for(h in e)s[h]=e[h];t[i].categories=s}t[i].options.ticks||(t[i].options.ticks=u);f(r,i,t[i].categories)}}function f(n,t,i){for(var u,e,o=n.points,s=n.pointsize,c=n.format,l=t.charAt(0),h=r(i),f=0;f<o.length;f+=s)if(o[f]!=null)for(u=0;u<s;++u)(e=o[f+u],e!=null&&c[u][l])&&(e in i||(i[e]=h,++h),o[f+u]=i[e])}function e(n,i,r){t(i,"xaxis",r);t(i,"yaxis",r)}function o(n){n.hooks.processRawData.push(i);n.hooks.processDatapoints.push(e)}n.plot.plugins.push({init:o,options:{xaxis:{categories:null},yaxis:{categories:null}},name:"categories",version:"1.0"})}(jQuery),function(n){function r(r){function w(t){l||(l=!0,a=t.getCanvas(),h=n(a).parent(),u=t.getOptions(),t.setData(b(t.getData())))}function b(t){for(var i,f=0,e=0,o=0,s=u.series.pie.combine.color,h=[],r=0;r<t.length;++r)i=t[r].data,n.isArray(i)&&i.length==1&&(i=i[0]),n.isArray(i)?i[1]=!isNaN(parseFloat(i[1]))&&isFinite(i[1])?+i[1]:0:i=!isNaN(parseFloat(i))&&isFinite(i)?[1,+i]:[1,0],t[r].data=[i];for(r=0;r<t.length;++r)f+=t[r].data[0][1];for(r=0;r<t.length;++r)i=t[r].data[0][1],i/f<=u.series.pie.combine.threshold&&(e+=i,o++,s||(s=t[r].color));for(r=0;r<t.length;++r)i=t[r].data[0][1],(o<2||i/f>u.series.pie.combine.threshold)&&h.push(n.extend(t[r],{data:[[1,i]],color:t[r].color,label:t[r].label,angle:i*Math.PI*2/f,percent:i/(f/100)}));return o>1&&h.push({data:[[1,e]],color:s,label:u.series.pie.combine.label,angle:e*Math.PI*2/f,percent:e/(f/100)}),h}function k(r,s){function k(){f.clearRect(0,0,y,p);h.children().filter(".pieLabel, .pieLabelBackground").remove()}function d(){var i=u.series.pie.shadow.left,r=u.series.pie.shadow.top,s=10,h=u.series.pie.shadow.alpha,n=u.series.pie.radius>1?u.series.pie.radius:o*u.series.pie.radius,t;if(!(n>=y/2-i)&&!(n*u.series.pie.tilt>=p/2-r)&&!(n<=s)){for(f.save(),f.translate(i,r),f.globalAlpha=h,f.fillStyle="#000",f.translate(e,c),f.scale(1,u.series.pie.tilt),t=1;t<=s;t++)f.beginPath(),f.arc(0,0,n,0,Math.PI*2,!1),f.fill(),n-=t;f.restore()}}function g(){function l(n,t,r){n<=0||isNaN(n)||(r?f.fillStyle=t:(f.strokeStyle=t,f.lineJoin="round"),f.beginPath(),Math.abs(n-Math.PI*2)>1e-9&&f.moveTo(0,0),f.arc(0,0,s,i,i+n/2,!1),f.arc(0,0,s,i+n/2,i+n,!1),f.closePath(),i+=n,r?f.fill():f.stroke())}function w(){function s(t,i,r){var w,s,b,v,nt;if(t.data[0][1]==0)return!0;w=u.legend.labelFormatter;b=u.series.pie.label.formatter;s=w?w(t.label,t):t.label;b&&(s=b(s,t));var k=(i+t.angle+i)/2,d=e+Math.round(Math.cos(k)*f),g=c+Math.round(Math.sin(k)*f)*u.series.pie.tilt,tt="<span class='pieLabel' id='pieLabel"+r+"' style='position:absolute;top:"+g+"px;left:"+d+"px;'>"+s+"<\/span>";h.append(tt);var o=h.children("#pieLabel"+r),l=g-o.height()/2,a=d-o.width()/2;return(o.css("top",l),o.css("left",a),0-l>0||0-a>0||p-(l+o.height())<0||y-(a+o.width())<0)?!1:(u.series.pie.label.background.opacity!=0&&(v=u.series.pie.label.background.color,v==null&&(v=t.color),nt="top:"+l+"px;left:"+a+"px;",n("<div class='pieLabelBackground' style='position:absolute;width:"+o.width()+"px;height:"+o.height()+"px;"+nt+"background-color:"+v+";'><\/div>").css("opacity",u.series.pie.label.background.opacity).insertBefore(o)),!0)}for(var i=r,f=u.series.pie.label.radius>1?u.series.pie.label.radius:o*u.series.pie.label.radius,t=0;t<a.length;++t){if(a[t].percent>=u.series.pie.label.threshold*100&&!s(a[t],i,t))return!1;i+=a[t].angle}return!0}var r=Math.PI*u.series.pie.startAngle,s=u.series.pie.radius>1?u.series.pie.radius:o*u.series.pie.radius,i,t;for(f.save(),f.translate(e,c),f.scale(1,u.series.pie.tilt),f.save(),i=r,t=0;t<a.length;++t)a[t].startAngle=i,l(a[t].angle,a[t].color,!0);if(f.restore(),u.series.pie.stroke.width>0){for(f.save(),f.lineWidth=u.series.pie.stroke.width,i=r,t=0;t<a.length;++t)l(a[t].angle,u.series.pie.stroke.color,!1);f.restore()}return v(f),f.restore(),u.series.pie.label.show?w():!0}var a,w;if(h){var y=r.getPlaceholder().width(),p=r.getPlaceholder().height(),b=h.children().filter(".legend").children().width()||0;f=s;l=!1;o=Math.min(y,p/u.series.pie.tilt)/2;c=p/2+u.series.pie.offset.top;e=y/2;u.series.pie.offset.left=="auto"?(u.legend.position.match("w")?e+=b/2:e-=b/2,e<o?e=o:e>y-o&&(e=y-o)):e+=u.series.pie.offset.left;a=r.getData();w=0;do w>0&&(o*=i),w+=1,k(),u.series.pie.tilt<=.8&&d();while(!g()&&w<t);w>=t&&(k(),h.prepend("<div class='error'>Could not draw pie with labels contained inside canvas<\/div>"));r.setSeries&&r.insertLegend&&(r.setSeries(a),r.insertLegend())}}function v(n){if(u.series.pie.innerRadius>0){n.save();var t=u.series.pie.innerRadius>1?u.series.pie.innerRadius:o*u.series.pie.innerRadius;n.globalCompositeOperation="destination-out";n.beginPath();n.fillStyle=u.series.pie.stroke.color;n.arc(0,0,t,0,Math.PI*2,!1);n.fill();n.closePath();n.restore();n.save();n.beginPath();n.strokeStyle=u.series.pie.stroke.color;n.arc(0,0,t,0,Math.PI*2,!1);n.stroke();n.closePath();n.restore()}}function d(n,t){for(var u=!1,i=-1,f=n.length,r=f-1;++i<f;r=i)(n[i][1]<=t[1]&&t[1]<n[r][1]||n[r][1]<=t[1]&&t[1]<n[i][1])&&t[0]<(n[r][0]-n[i][0])*(t[1]-n[i][1])/(n[r][1]-n[i][1])+n[i][0]&&(u=!u);return u}function g(n,t){for(var i,l=r.getData(),h=r.getOptions(),u=h.series.pie.radius>1?h.series.pie.radius:o*h.series.pie.radius,a,v,s=0;s<l.length;++s)if(i=l[s],i.pie.show){if(f.save(),f.beginPath(),f.moveTo(0,0),f.arc(0,0,u,i.startAngle,i.startAngle+i.angle/2,!1),f.arc(0,0,u,i.startAngle+i.angle/2,i.startAngle+i.angle,!1),f.closePath(),a=n-e,v=t-c,f.isPointInPath){if(f.isPointInPath(n-e,t-c))return f.restore(),{datapoint:[i.percent,i.data],dataIndex:0,series:i,seriesIndex:s}}else{var y=u*Math.cos(i.startAngle),p=u*Math.sin(i.startAngle),w=u*Math.cos(i.startAngle+i.angle/4),b=u*Math.sin(i.startAngle+i.angle/4),k=u*Math.cos(i.startAngle+i.angle/2),g=u*Math.sin(i.startAngle+i.angle/2),nt=u*Math.cos(i.startAngle+i.angle/1.5),tt=u*Math.sin(i.startAngle+i.angle/1.5),it=u*Math.cos(i.startAngle+i.angle),rt=u*Math.sin(i.startAngle+i.angle),ut=[[0,0],[y,p],[w,b],[k,g],[nt,tt],[it,rt]],ft=[a,v];if(d(ut,ft))return f.restore(),{datapoint:[i.percent,i.data],dataIndex:0,series:i,seriesIndex:s}}f.restore()}return null}function nt(n){y("plothover",n)}function tt(n){y("plotclick",n)}function y(n,t){var o=r.offset(),l=parseInt(t.pageX-o.left),a=parseInt(t.pageY-o.top),i=g(l,a),f,e,c;if(u.grid.autoHighlight)for(f=0;f<s.length;++f)e=s[f],e.auto!=n||i&&e.series==i.series||rt(e.series);i&&it(i.series,n);c={pageX:t.pageX,pageY:t.pageY};h.trigger(n,[c,i])}function it(n,t){var i=p(n);i==-1?(s.push({series:n,auto:t}),r.triggerRedrawOverlay()):t||(s[i].auto=!1)}function rt(n){n==null&&(s=[],r.triggerRedrawOverlay());var t=p(n);t!=-1&&(s.splice(t,1),r.triggerRedrawOverlay())}function p(n){for(var i,t=0;t<s.length;++t)if(i=s[t],i.series==n)return t;return-1}function ut(n,t){function f(n){n.angle<=0||isNaN(n.angle)||(t.fillStyle="rgba(255, 255, 255, "+i.series.pie.highlight.opacity+")",t.beginPath(),Math.abs(n.angle-Math.PI*2)>1e-9&&t.moveTo(0,0),t.arc(0,0,u,n.startAngle,n.startAngle+n.angle/2,!1),t.arc(0,0,u,n.startAngle+n.angle/2,n.startAngle+n.angle,!1),t.closePath(),t.fill())}var i=n.getOptions(),u=i.series.pie.radius>1?i.series.pie.radius:o*i.series.pie.radius,r;for(t.save(),t.translate(e,c),t.scale(1,i.series.pie.tilt),r=0;r<s.length;++r)f(s[r].series);v(t);t.restore()}var a=null,h=null,u=null,o=null,e=null,c=null,l=!1,f=null,s=[];r.hooks.processOptions.push(function(n,t){t.series.pie.show&&(t.grid.show=!1,t.series.pie.label.show=="auto"&&(t.series.pie.label.show=t.legend.show?!1:!0),t.series.pie.radius=="auto"&&(t.series.pie.radius=t.series.pie.label.show?3/4:1),t.series.pie.tilt>1?t.series.pie.tilt=1:t.series.pie.tilt<0&&(t.series.pie.tilt=0))});r.hooks.bindEvents.push(function(n,t){var i=n.getOptions();i.series.pie.show&&(i.grid.hoverable&&t.unbind("mousemove").mousemove(nt),i.grid.clickable&&t.unbind("click").click(tt))});r.hooks.processDatapoints.push(function(n,t,i,r){var u=n.getOptions();u.series.pie.show&&w(n,t,i,r)});r.hooks.drawOverlay.push(function(n,t){var i=n.getOptions();i.series.pie.show&&ut(n,t)});r.hooks.draw.push(function(n,t){var i=n.getOptions();i.series.pie.show&&k(n,t)})}var t=10,i=.95,u={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:3/2,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(n,t){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+t.color+";'>"+n+"<br/>"+Math.round(t.percent)+"%<\/div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};n.plot.plugins.push({init:r,options:u,name:"pie",version:"1.1"})}(jQuery),function(n){var i={tooltip:{show:!1,cssClass:"flotTip",content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,monthNames:null,dayNames:null,shifts:{x:10,y:20},defaultTheme:!0,snap:!0,lines:!1,clickTips:!1,onHover:function(){},$compat:!1}},t,r;i.tooltipOpts=i.tooltip;t=function(n){this.tipPosition={x:0,y:0};this.init(n)};t.prototype.init=function(t){function e(n){var i={};i.x=n.pageX;i.y=n.pageY;t.setTooltipPosition(i)}function o(u,f,e){i.clickmode?(n(t.getPlaceholder()).bind("plothover",r),t.hideTooltip(),i.clickmode=!1):(r(u,f,e),i.getDomElement().is(":visible")&&(n(t.getPlaceholder()).unbind("plothover",r),i.clickmode=!0))}function r(r,u,f){var e=function(n,t,i,r){return Math.sqrt((i-n)*(i-n)+(r-t)*(r-t))},c=function(n,t,i,r,u,f,o){var s,h;if(!o||(o=function(n,t,i,r,u,f){if(typeof i!="undefined")return{x:i,y:t};if(typeof r!="undefined")return{x:n,y:r};var o,e=-1/((f-r)/(u-i));return{x:o=(u*(n*e-t+r)+i*(n*-e+t-f))/(e*(u-i)+r-f),y:e*o-e*n+t}}(n,t,i,r,u,f),o.x>=Math.min(i,u)&&o.x<=Math.max(i,u)&&o.y>=Math.min(r,f)&&o.y<=Math.max(r,f))){var c=r-f,l=u-i,a=i*f-r*u;return Math.abs(c*n+l*t+a)/Math.sqrt(c*c+l*l)}return s=e(n,t,i,r),h=e(n,t,u,f),s>h?h:s};if(f)t.showTooltip(f,i.tooltipOptions.snap?f:u);else if(i.plotOptions.series.lines.show&&i.tooltipOptions.lines===!0){var s=i.plotOptions.grid.mouseActiveRadius,o={distance:s+1},h=u;n.each(t.getData(),function(n,r){for(var v=0,a=-1,s=1;s<r.data.length;s++)r.data[s-1][0]<=u.x&&r.data[s][0]>=u.x&&(v=s-1,a=s);if(a===-1){t.hideTooltip();return}var f={x:r.data[v][0],y:r.data[v][1]},l={x:r.data[a][0],y:r.data[a][1]},p=c(r.xaxis.p2c(u.x),r.yaxis.p2c(u.y),r.xaxis.p2c(f.x),r.yaxis.p2c(f.y),r.xaxis.p2c(l.x),r.yaxis.p2c(l.y),!1);if(p<o.distance){var w=e(f.x,f.y,u.x,u.y)<e(u.x,u.y,l.x,l.y)?v:a,k=r.datapoints.pointsize,y=[u.x,f.y+(l.y-f.y)*((u.x-f.x)/(l.x-f.x))],b={datapoint:y,dataIndex:w,series:r,seriesIndex:n};o={distance:p,item:b};i.tooltipOptions.snap&&(h={pageX:r.xaxis.p2c(y[0]),pageY:r.yaxis.p2c(y[1])})}});o.distance<s+1?t.showTooltip(o.item,h):t.hideTooltip()}else t.hideTooltip()}var i=this,f=n.plot.plugins.length,u;if(this.plotPlugins=[],f)for(u=0;u<f;u++)this.plotPlugins.push(n.plot.plugins[u].name);t.hooks.bindEvents.push(function(t,u){if(i.plotOptions=t.getOptions(),typeof i.plotOptions.tooltip=="boolean"&&(i.plotOptions.tooltipOpts.show=i.plotOptions.tooltip,i.plotOptions.tooltip=i.plotOptions.tooltipOpts,delete i.plotOptions.tooltipOpts),i.plotOptions.tooltip.show!==!1&&typeof i.plotOptions.tooltip.show!="undefined"){i.tooltipOptions=i.plotOptions.tooltip;i.tooltipOptions.$compat?(i.wfunc="width",i.hfunc="height"):(i.wfunc="innerWidth",i.hfunc="innerHeight");var f=i.getDomElement();n(t.getPlaceholder()).bind("plothover",r);i.tooltipOptions.clickTips&&n(t.getPlaceholder()).bind("plotclick",o);i.clickmode=!1;n(u).bind("mousemove",e)}});t.hooks.shutdown.push(function(t,i){n(t.getPlaceholder()).unbind("plothover",r);n(t.getPlaceholder()).unbind("plotclick",o);t.removeTooltip();n(i).unbind("mousemove",e)});t.setTooltipPosition=function(t){var r=i.getDomElement(),u=r.outerWidth()+i.tooltipOptions.shifts.x,f=r.outerHeight()+i.tooltipOptions.shifts.y;t.x-n(window).scrollLeft()>n(window)[i.wfunc]()-u&&(t.x-=u,t.x=Math.max(t.x,0));t.y-n(window).scrollTop()>n(window)[i.hfunc]()-f&&(t.y-=f);isNaN(t.x)?i.tipPosition.x=i.tipPosition.xPrev:(i.tipPosition.x=t.x,i.tipPosition.xPrev=t.x);isNaN(t.y)?i.tipPosition.y=i.tipPosition.yPrev:(i.tipPosition.y=t.y,i.tipPosition.yPrev=t.y)};t.showTooltip=function(n){var r=i.getDomElement(),u=i.stringFormat(i.tooltipOptions.content,n);if(u!==""&&(r.html(u),t.setTooltipPosition({x:i.tipPosition.x,y:i.tipPosition.y}),r.css({left:i.tipPosition.x+i.tooltipOptions.shifts.x,top:i.tipPosition.y+i.tooltipOptions.shifts.y}).show(),typeof i.tooltipOptions.onHover=="function"))i.tooltipOptions.onHover(n,r)};t.hideTooltip=function(){i.getDomElement().hide().html("")};t.removeTooltip=function(){i.getDomElement().remove()}};t.prototype.getDomElement=function(){var t=n("<div>");return this.tooltipOptions&&this.tooltipOptions.cssClass&&(t=n("."+this.tooltipOptions.cssClass),t.length===0&&(t=n("<div />").addClass(this.tooltipOptions.cssClass),t.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&t.css({background:"#fff","z-index":"1040",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"}))),t};t.prototype.stringFormat=function(n,t){var a=/%s/,v=/%c/,y=/%lx/,p=/%ly/,h=/%x\.{0,1}(\d{0,})/,c=/%y\.{0,1}(\d{0,})/,i,r,f,s,l,u,e,k,w,o,b;if(typeof t.series.threshold!="undefined"?(i=t.datapoint[0],r=t.datapoint[1],f=t.datapoint[2]):typeof t.series.curvedLines!="undefined"?(i=t.datapoint[0],r=t.datapoint[1]):typeof t.series.lines!="undefined"&&t.series.lines.steps?(i=t.series.datapoints.points[t.dataIndex*2],r=t.series.datapoints.points[t.dataIndex*2+1],f=""):(i=t.series.data[t.dataIndex][0],r=t.series.data[t.dataIndex][1],f=t.series.data[t.dataIndex][2]),t.series.label===null&&t.series.originSeries&&(t.series.label=t.series.originSeries.label),typeof n=="function"&&(n=n(t.series.label,i,r,t)),typeof n=="boolean"&&!n)return"";if(f&&(n=n.replace("%ct",f)),typeof t.series.percent!="undefined"?s=t.series.percent:typeof t.series.percents!="undefined"&&(s=t.series.percents[t.dataIndex]),typeof s=="number"&&(n=this.adjustValPrecision(/%p\.{0,1}(\d{0,})/,n,s)),t.series.hasOwnProperty("pie")&&typeof t.series.data[0][1]!="undefined"&&(l=t.series.data[0][1]),typeof l=="number"&&(n=n.replace("%n",l)),n=typeof t.series.label!="undefined"?n.replace(a,t.series.label):n.replace(a,""),n=typeof t.series.color!="undefined"?n.replace(v,t.series.color):n.replace(v,""),n=this.hasAxisLabel("xaxis",t)?n.replace(y,t.series.xaxis.options.axisLabel):n.replace(y,""),n=this.hasAxisLabel("yaxis",t)?n.replace(p,t.series.yaxis.options.axisLabel):n.replace(p,""),this.isTimeMode("xaxis",t)&&this.isXDateFormat(t)&&(n=n.replace(h,this.timestampToDate(i,this.tooltipOptions.xDateFormat,t.series.xaxis.options))),this.isTimeMode("yaxis",t)&&this.isYDateFormat(t)&&(n=n.replace(c,this.timestampToDate(r,this.tooltipOptions.yDateFormat,t.series.yaxis.options))),typeof i=="number"&&(n=this.adjustValPrecision(h,n,i)),typeof r=="number"&&(n=this.adjustValPrecision(c,n,r)),typeof t.series.xaxis.ticks!="undefined"){u=this.hasRotatedXAxisTicks(t)?"rotatedTicks":"ticks";e=t.dataIndex+t.seriesIndex;for(k in t.series.xaxis[u])t.series.xaxis[u].hasOwnProperty(e)&&!this.isTimeMode("xaxis",t)&&(w=this.isCategoriesMode("xaxis",t)?t.series.xaxis[u][e].label:t.series.xaxis[u][e].v,w===i&&(n=n.replace(h,t.series.xaxis[u][e].label.replace(/\$/g,"$$$$"))))}if(typeof t.series.yaxis.ticks!="undefined")for(o in t.series.yaxis.ticks)t.series.yaxis.ticks.hasOwnProperty(o)&&(b=this.isCategoriesMode("yaxis",t)?t.series.yaxis.ticks[o].label:t.series.yaxis.ticks[o].v,b===r&&(n=n.replace(c,t.series.yaxis.ticks[o].label.replace(/\$/g,"$$$$"))));return typeof t.series.xaxis.tickFormatter!="undefined"&&(n=n.replace("%x",t.series.xaxis.tickFormatter(i,t.series.xaxis).replace(/\$/g,"$$"))),typeof t.series.yaxis.tickFormatter!="undefined"&&(n=n.replace("%y",t.series.yaxis.tickFormatter(r,t.series.yaxis).replace(/\$/g,"$$"))),n};t.prototype.isTimeMode=function(n,t){return typeof t.series[n].options.mode!="undefined"&&t.series[n].options.mode==="time"};t.prototype.isXDateFormat=function(){return typeof this.tooltipOptions.xDateFormat!="undefined"&&this.tooltipOptions.xDateFormat!==null};t.prototype.isYDateFormat=function(){return typeof this.tooltipOptions.yDateFormat!="undefined"&&this.tooltipOptions.yDateFormat!==null};t.prototype.isCategoriesMode=function(n,t){return typeof t.series[n].options.mode!="undefined"&&t.series[n].options.mode==="categories"};t.prototype.timestampToDate=function(t,i,r){var u=n.plot.dateGenerator(t,r);return n.plot.formatDate(u,i,this.tooltipOptions.monthNames,this.tooltipOptions.dayNames)};t.prototype.adjustValPrecision=function(n,t,i){var r,u=t.match(n);return u!==null&&RegExp.$1!==""&&(r=RegExp.$1,i=i.toFixed(r),t=t.replace(n,i)),t};t.prototype.hasAxisLabel=function(t,i){return n.inArray("axisLabels",this.plotPlugins)!==-1&&typeof i.series[t].options.axisLabel!="undefined"&&i.series[t].options.axisLabel.length>0};t.prototype.hasRotatedXAxisTicks=function(t){return n.inArray("tickRotor",this.plotPlugins)!==-1&&typeof t.series.xaxis.rotatedTicks!="undefined"};r=function(n){new t(n)};n.plot.plugins.push({init:r,options:i,name:"tooltip",version:"0.8.5"})}(jQuery);
/*! X-editable - v1.5.3 
* In-place editing with Twitter Bootstrap, jQuery UI or pure jQuery
* http://github.com/vitalets/x-editable
* Copyright (c) 2015 - 2016 Vitaliy Potapov; Licensed MIT */
(function(n){"use strict";var t=function(t,i){this.options=n.extend({},n.fn.editableform.defaults,i);this.$div=n(t);this.options.scope||(this.options.scope=this)};t.prototype={constructor:t,initInput:function(){this.input=this.options.input;this.value=this.input.str2value(this.options.value);this.input.prerender()},initTemplate:function(){this.$form=n(n.fn.editableform.template)},initButtons:function(){var t=this.$form.find(".editable-buttons");t.append(n.fn.editableform.buttons);this.options.showbuttons==="bottom"&&t.addClass("editable-buttons-bottom")},render:function(){this.$loading=n(n.fn.editableform.loading);this.$div.empty().append(this.$loading);this.initTemplate();this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove();this.showLoading();this.isSaving=!1;this.$div.triggerHandler("rendering");this.initInput();this.$form.find("div.editable-input").append(this.input.$tpl);this.$div.append(this.$form);n.when(this.input.render()).then(n.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(n.proxy(this.cancel,this)),this.input.error)this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(n){n.preventDefault()});else{this.error(!1);this.input.$input.removeAttr("disabled");this.$form.find(".editable-submit").removeAttr("disabled");var t=this.value===null||this.value===undefined||this.value===""?this.options.defaultValue:this.value;this.input.value2input(t);this.$form.submit(n.proxy(this.submit,this))}this.$div.triggerHandler("rendered");this.showForm();this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var n,t;this.$form?(n=this.$form.outerWidth(),t=this.$form.outerHeight(),n&&this.$loading.width(n),t&&this.$loading.height(t),this.$form.hide()):(n=this.$loading.parent().width(),n&&this.$loading.width(n));this.$loading.show()},showForm:function(n){this.$loading.hide();this.$form.show();n!==!1&&this.input.activate();this.$div.triggerHandler("show")},error:function(t){var u=this.$form.find(".control-group"),f=this.$form.find(".editable-error-block"),i,r;if(t===!1)u.removeClass(n.fn.editableform.errorGroupClass),f.removeClass(n.fn.editableform.errorBlockClass).empty().hide();else{if(t){for(i=(""+t).split("\n"),r=0;r<i.length;r++)i[r]=n("<div>").text(i[r]).html();t=i.join("<br>")}u.addClass(n.fn.editableform.errorGroupClass);f.addClass(n.fn.editableform.errorBlockClass).html(t).show()}},submit:function(t){var i,r,u;if(t.stopPropagation(),t.preventDefault(),i=this.input.input2value(),r=this.validate(i),n.type(r)==="object"&&r.newValue!==undefined){if(i=r.newValue,this.input.value2input(i),typeof r.msg=="string"){this.error(r.msg);this.showForm();return}}else if(r){this.error(r);this.showForm();return}if(!this.options.savenochange&&this.input.value2str(i)===this.input.value2str(this.value)){this.$div.triggerHandler("nochange");return}u=this.input.value2submit(i);this.isSaving=!0;n.when(this.save(u)).done(n.proxy(function(n){this.isSaving=!1;var t=typeof this.options.success=="function"?this.options.success.call(this.options.scope,n,i):null;if(t===!1){this.error(!1);this.showForm(!1);return}if(typeof t=="string"){this.error(t);this.showForm();return}t&&typeof t=="object"&&t.hasOwnProperty("newValue")&&(i=t.newValue);this.error(!1);this.value=i;this.$div.triggerHandler("save",{newValue:i,submitValue:u,response:n})},this)).fail(n.proxy(function(n){this.isSaving=!1;var t;t=typeof this.options.error=="function"?this.options.error.call(this.options.scope,n,i):typeof n=="string"?n:n.responseText||n.statusText||"Unknown error!";this.error(t);this.showForm()},this))},save:function(t){this.options.pk=n.fn.editableutils.tryParseJson(this.options.pk,!0);var r=typeof this.options.pk=="function"?this.options.pk.call(this.options.scope):this.options.pk,u=!!(typeof this.options.url=="function"||this.options.url&&(this.options.send==="always"||this.options.send==="auto"&&r!==null&&r!==undefined)),i;if(u)return this.showLoading(),i={name:this.options.name||"",value:t,pk:r},typeof this.options.params=="function"?i=this.options.params.call(this.options.scope,i):(this.options.params=n.fn.editableutils.tryParseJson(this.options.params,!0),n.extend(i,this.options.params)),typeof this.options.url=="function"?this.options.url.call(this.options.scope,i):n.ajax(n.extend({url:this.options.url,data:i,type:"POST"},this.options.ajaxOptions))},validate:function(n){return n===undefined&&(n=this.value),typeof this.options.validate=="function"?this.options.validate.call(this.options.scope,n):void 0},option:function(n,t){n in this.options&&(this.options[n]=t);n==="value"&&this.setValue(t)},setValue:function(n,t){this.value=t?this.input.str2value(n):n;this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}};n.fn.editableform=function(i){var r=arguments;return this.each(function(){var f=n(this),u=f.data("editableform"),e=typeof i=="object"&&i;u||f.data("editableform",u=new t(this,e));typeof i=="string"&&u[i].apply(u,Array.prototype.slice.call(r,1))})};n.fn.editableform.Constructor=t;n.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1};n.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"><\/div><div class="editable-buttons"><\/div><\/div><div class="editable-error-block"><\/div><\/div><\/form>';n.fn.editableform.loading='<div class="editableform-loading"><\/div>';n.fn.editableform.buttons='<button type="submit" class="editable-submit">ok<\/button><button type="button" class="editable-cancel">cancel<\/button>';n.fn.editableform.errorGroupClass=null;n.fn.editableform.errorBlockClass="editable-error";n.fn.editableform.engine="jquery"})(window.jQuery),function(n){"use strict";n.fn.editableutils={inherit:function(n,t){var i=function(){};i.prototype=t.prototype;n.prototype=new i;n.prototype.constructor=n;n.superclass=t.prototype},setCursorPosition:function(n,t){if(n.setSelectionRange)n.setSelectionRange(t,t);else if(n.createTextRange){var i=n.createTextRange();i.collapse(!0);i.moveEnd("character",t);i.moveStart("character",t);i.select()}},tryParseJson:function(n,t){if(typeof n=="string"&&n.length&&n.match(/^[\{\[].*[\}\]]$/))if(t)try{n=new Function("return "+n)()}catch(i){}finally{return n}else n=new Function("return "+n)();return n},sliceObj:function(t,i,r){var u,o,f={},e;if(!n.isArray(i)||!i.length)return f;for(e=0;e<i.length;e++)(u=i[e],t.hasOwnProperty(u)&&(f[u]=t[u]),r!==!0)&&(o=u.toLowerCase(),t.hasOwnProperty(o)&&(f[u]=t[o]));return f},getConfigData:function(t){var i={};return n.each(t.data(),function(n,t){(typeof t!="object"||t&&typeof t=="object"&&(t.constructor===Object||t.constructor===Array))&&(i[n]=t)}),i},objectKeys:function(n){if(Object.keys)return Object.keys(n);if(n!==Object(n))throw new TypeError("Object.keys called on a non-object");var t=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(i);return t},escape:function(t){return n("<div>").text(t).html()},itemsByValue:function(t,i,r){var f;if(!i||t===null)return[];typeof r!="function"&&(f=r||"value",r=function(n){return n[f]});var e=n.isArray(t),u=[],o=this;return n.each(i,function(i,f){if(f.children)u=u.concat(o.itemsByValue(t,f.children,r));else if(e)n.grep(t,function(n){return n==(f&&typeof f=="object"?r(f):f)}).length&&u.push(f);else{var s=f&&typeof f=="object"?r(f):f;t==s&&u.push(f)}}),u},createInput:function(t){var r,u,i=t.type;return i==="date"&&(t.mode==="inline"?n.fn.editabletypes.datefield?i="datefield":n.fn.editabletypes.dateuifield&&(i="dateuifield"):n.fn.editabletypes.date?i="date":n.fn.editabletypes.dateui&&(i="dateui"),i!=="date"||n.fn.editabletypes.date||(i="combodate")),i==="datetime"&&t.mode==="inline"&&(i="datetimefield"),i!=="wysihtml5"||n.fn.editabletypes[i]||(i="textarea"),typeof n.fn.editabletypes[i]=="function"?(r=n.fn.editabletypes[i],u=this.sliceObj(t,this.objectKeys(r.defaults)),new r(u)):(n.error("Unknown type: "+i),!1)},supportsTransitions:function(){var u=document.body||document.documentElement,i=u.style,n="transition",r=["Moz","Webkit","Khtml","O","ms"],t;if(typeof i[n]=="string")return!0;for(n=n.charAt(0).toUpperCase()+n.substr(1),t=0;t<r.length;t++)if(typeof i[r[t]+n]=="string")return!0;return!1}}}(window.jQuery),function(n){"use strict";var t=function(n,t){this.init(n,t)},i=function(n,t){this.init(n,t)};t.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(i,r){this.$element=n(i);this.options=n.extend({},n.fn.editableContainer.defaults,r);this.splitOptions();this.formOptions.scope=this.$element[0];this.initContainer();this.delayedHide=!1;this.$element.on("destroyed",n.proxy(function(){this.destroy()},this));if(!n(document).data("editable-handlers-attached")){n(document).on("keyup.editable",function(t){t.which===27&&n(".editable-open").editableContainer("hide")});n(document).on("click.editable",function(i){var u=n(i.target),r,f=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(!n(".select2-drop-mask").is(":visible")&&n.contains(document.documentElement,i.target)&&!u.is(document)){for(r=0;r<f.length;r++)if(u.is(f[r])||u.parents(f[r]).length)return;t.prototype.closeOthers(i.target)}});n(document).data("editable-handlers-attached",!0)}},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!n.fn[this.containerName])throw new Error(this.containerName+" not found. Have you included corresponding js file?");for(var t in this.options)t in this.defaults?this.containerOptions[t]=this.options[t]:this.formOptions[t]=this.options[t]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var n;return this.containerDataName&&(n=this.$element.data(this.containerDataName))?n:this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:n.proxy(this.save,this),nochange:n.proxy(function(){this.hide("nochange")},this),cancel:n.proxy(function(){this.hide("cancel")},this),show:n.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:n.proxy(this.setPosition,this),resize:n.proxy(this.setPosition,this),rendered:n.proxy(function(){this.$element.triggerHandler("shown",n(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(t){this.$element.addClass("editable-open");t!==!1&&this.closeOthers(this.$element[0]);this.innerShow();this.tip().addClass(this.containerClass);this.$form;this.$form=n("<div>");this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form);this.renderForm()},hide:function(n){if(this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")){if(this.$form.data("editableform").isSaving){this.delayedHide={reason:n};return}this.delayedHide=!1;this.$element.removeClass("editable-open");this.innerHide();this.$element.triggerHandler("hidden",n||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(n){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(n)},setPosition:function(){},save:function(n,t){this.$element.triggerHandler("save",t);this.hide("save")},option:function(n,t){this.options[n]=t;n in this.containerOptions?(this.containerOptions[n]=t,this.setContainerOption(n,t)):(this.formOptions[n]=t,this.$form&&this.$form.editableform("option",n,t))},setContainerOption:function(n,t){this.call("option",n,t)},destroy:function(){this.hide();this.innerDestroy();this.$element.off("destroyed");this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(t){n(".editable-open").each(function(i,r){if(r!==t&&!n(r).find(t).length){var u=n(r),f=u.data("editableContainer");f&&(f.options.onblur==="cancel"?u.data("editableContainer").hide("onblur"):f.options.onblur==="submit"&&u.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}};n.fn.editableContainer=function(r){var u=arguments;return this.each(function(){var e=n(this),o="editableContainer",f=e.data(o),s=typeof r=="object"&&r,h=s.mode==="inline"?i:t;f||e.data(o,f=new h(this,s));typeof r=="string"&&f[r].apply(f,Array.prototype.slice.call(u,1))})};n.fn.editableContainer.Popup=t;n.fn.editableContainer.Inline=i;n.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"};jQuery.event.special.destroyed={remove:function(n){n.handler&&n.handler()}}}(window.jQuery),function(n){"use strict";n.extend(n.fn.editableContainer.Inline.prototype,n.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=n("<span><\/span>");this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={};this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide();this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,n.proxy(function(){this.$element.show();this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(n){"use strict";var t=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.editable.defaults,i,n.fn.editableutils.getConfigData(this.$element));this.options.selector?this.initLive():this.init();this.options.highlight&&!n.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};t.prototype={constructor:t,init:function(){var i=!1,t;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=n.fn.editableutils.createInput(this.options),this.input){if(this.options.value===undefined||this.options.value===null?(this.value=this.input.html2value(n.trim(this.$element.html())),i=!0):(this.options.value=n.fn.editableutils.tryParseJson(this.options.value,!0),this.value=typeof this.options.value=="string"?this.input.str2value(this.options.value):this.options.value),this.$element.addClass("editable"),this.input.type==="textarea"&&this.$element.addClass("editable-pre-wrapped"),this.options.toggle!=="manual"){this.$element.addClass("editable-click");this.$element.on(this.options.toggle+".editable",n.proxy(function(n){if(this.options.disabled||n.preventDefault(),this.options.toggle==="mouseenter")this.show();else{var t=this.options.toggle!=="click";this.toggle(t)}},this))}else this.$element.attr("tabindex",-1);typeof this.options.display=="function"&&(this.options.autotext="always");switch(this.options.autotext){case"always":t=!0;break;case"auto":t=!n.trim(this.$element.text()).length&&this.value!==null&&this.value!==undefined&&!i;break;default:t=!1}n.when(t?this.render():!0).then(n.proxy(function(){this.options.disabled?this.disable():this.enable();this.$element.triggerHandler("init",this)},this))}},initLive:function(){var t=this.options.selector;this.options.selector=!1;this.options.autotext="never";this.$element.on(this.options.toggle+".editable",t,n.proxy(function(t){var i=n(t.target);i.data("editable")||(i.hasClass(this.options.emptyclass)&&i.empty(),i.editable(this.options).trigger(t))},this))},render:function(n){if(this.options.display!==!1)return this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,n):typeof this.options.display=="function"?this.options.display.call(this.$element[0],this.value,n):this.input.value2html(this.value,this.$element[0])},enable:function(){this.options.disabled=!1;this.$element.removeClass("editable-disabled");this.handleEmpty(this.isEmpty);this.options.toggle!=="manual"&&this.$element.attr("tabindex")==="-1"&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0;this.hide();this.$element.addClass("editable-disabled");this.handleEmpty(this.isEmpty);this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(t,i){if(t&&typeof t=="object"){n.each(t,n.proxy(function(t,i){this.option(n.trim(t),i)},this));return}if(this.options[t]=i,t==="disabled")return i?this.disable():this.enable();t==="value"&&this.setValue(i);this.container&&this.container.option(t,i);this.input.option&&this.input.option(t,i)},handleEmpty:function(t){this.options.display!==!1&&(this.isEmpty=t!==undefined?t:typeof this.input.isEmpty=="function"?this.input.isEmpty(this.$element):n.trim(this.$element.html())==="",this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(t){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var i=n.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(i);this.$element.on("save.internal",n.proxy(this.save,this));this.container=this.$element.data("editableContainer")}this.container.show(t)}},hide:function(){this.container&&this.container.hide()},toggle:function(n){this.container&&this.container.tip().is(":visible")?this.hide():this.show(n)},save:function(n,t){var i,r,u;this.options.unsavedclass&&(i=!1,i=i||typeof this.options.url=="function",i=i||this.options.display===!1,i=i||t.response!==undefined,i=i||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(t.newValue),i?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass));this.options.highlight&&(r=this.$element,u=r.css("background-color"),r.css("background-color",this.options.highlight),setTimeout(function(){u==="transparent"&&(u="");r.css("background-color",u);r.addClass("editable-bg-transition");setTimeout(function(){r.removeClass("editable-bg-transition")},1700)},10));this.setValue(t.newValue,!1,t.response)},validate:function(){if(typeof this.options.validate=="function")return this.options.validate.call(this,this.value)},setValue:function(t,i,r){this.value=i?this.input.str2value(t):t;this.container&&this.container.option("value",this.value);n.when(this.render(r)).then(n.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable();this.container&&this.container.destroy();this.input.destroy();this.options.toggle!=="manual"&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable"));this.$element.off("save.internal");this.$element.removeClass("editable editable-open editable-disabled");this.$element.removeData("editable")}};n.fn.editable=function(i){var e={},a=arguments,o="editable",f,r,h,l;switch(i){case"validate":return this.each(function(){var r=n(this),t=r.data(o),i;t&&(i=t.validate())&&(e[t.options.name]=i)}),e;case"getValue":return arguments.length===2&&arguments[1]===!0?e=this.eq(0).data(o).value:this.each(function(){var i=n(this),t=i.data(o);t&&t.value!==undefined&&t.value!==null&&(e[t.options.name]=t.input.value2submit(t.value))}),e;case"submit":var u=arguments[1]||{},s=this,c=this.editable("validate");return n.isEmptyObject(c)?(f={},s.length===1?(r=s.data("editable"),h={name:r.options.name||"",value:r.input.value2submit(r.value),pk:typeof r.options.pk=="function"?r.options.pk.call(r.options.scope):r.options.pk},typeof r.options.params=="function"?h=r.options.params.call(r.options.scope,h):(r.options.params=n.fn.editableutils.tryParseJson(r.options.params,!0),n.extend(h,r.options.params)),f={url:r.options.url,data:h,type:"POST"},u.success=u.success||r.options.success,u.error=u.error||r.options.error):(l=this.editable("getValue"),f={url:u.url,data:l,type:"POST"}),f.success=typeof u.success=="function"?function(n){u.success.call(s,n,u)}:n.noop,f.error=typeof u.error=="function"?function(){u.error.apply(s,arguments)}:n.noop,u.ajaxOptions&&n.extend(f,u.ajaxOptions),u.data&&n.extend(f.data,u.data),n.ajax(f)):typeof u.error=="function"&&u.error.call(s,c),this}return this.each(function(){var f=n(this),r=f.data(o),u=typeof i=="object"&&i;if(u&&u.selector){r=new t(this,u);return}r||f.data(o,r=new t(this,u));typeof i=="string"&&r[i].apply(r,Array.prototype.slice.call(a,1))})};n.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery),function(n){"use strict";n.fn.editabletypes={};var t=function(){};t.prototype={init:function(t,i,r){this.type=t;this.options=n.extend({},r,i)},prerender:function(){this.$tpl=n(this.options.tpl);this.$input=this.$tpl;this.$clear=null;this.error=null},render:function(){},value2html:function(t,i){n(i)[this.options.escape?"text":"html"](n.trim(t))},html2value:function(t){return n("<div>").html(t).text()},value2str:function(n){return n},str2value:function(n){return n},value2submit:function(n){return n},value2input:function(n){this.$input.val(n)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(t){return n("<div>").text(t).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(n){this.options[n]!==undefined&&this.options[n]!==null&&this.$input.attr(n,this.options[n])},option:function(n,t){this.options[n]=t}};t.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0};n.extend(n.fn.editabletypes,{abstractinput:t})}(window.jQuery),function(n){"use strict";var t=function(){};n.fn.editableutils.inherit(t,n.fn.editabletypes.abstractinput);n.extend(t.prototype,{render:function(){var t=n.Deferred();this.error=null;this.onSourceReady(function(){this.renderList();t.resolve()},function(){this.error=this.options.sourceError;t.resolve()});return t.promise()},html2value:function(){return null},value2html:function(t,i,r,u){var f=n.Deferred(),e=function(){typeof r=="function"?r.call(i,t,this.sourceData,u):this.value2htmlFinal(t,i);f.resolve()};if(t===null)e.call(this);else this.onSourceReady(e,function(){f.resolve()});return f.promise()},onSourceReady:function(t,i){var u,f,r,e;if(n.isFunction(this.options.source)?(u=this.options.source.call(this.options.scope),this.sourceData=null):u=this.options.source,this.options.sourceCache&&n.isArray(this.sourceData)){t.call(this);return}try{u=n.fn.editableutils.tryParseJson(u,!1)}catch(o){i.call(this);return}if(typeof u=="string"){if(this.options.sourceCache){if(f=u,n(document).data(f)||n(document).data(f,{}),r=n(document).data(f),r.loading===!1&&r.sourceData){this.sourceData=r.sourceData;this.doPrepend();t.call(this);return}if(r.loading===!0){r.callbacks.push(n.proxy(function(){this.sourceData=r.sourceData;this.doPrepend();t.call(this)},this));r.err_callbacks.push(n.proxy(i,this));return}r.loading=!0;r.callbacks=[];r.err_callbacks=[]}e=n.extend({url:u,type:"get",cache:!1,dataType:"json",success:n.proxy(function(u){r&&(r.loading=!1);this.sourceData=this.makeArray(u);n.isArray(this.sourceData)?(r&&(r.sourceData=this.sourceData,n.each(r.callbacks,function(){this.call()})),this.doPrepend(),t.call(this)):(i.call(this),r&&n.each(r.err_callbacks,function(){this.call()}))},this),error:n.proxy(function(){i.call(this);r&&(r.loading=!1,n.each(r.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);n.ajax(e)}else this.sourceData=this.makeArray(u),n.isArray(this.sourceData)?(this.doPrepend(),t.call(this)):i.call(this)},doPrepend:function(){this.options.prepend!==null&&this.options.prepend!==undefined&&(n.isArray(this.prependData)||(n.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=n.fn.editableutils.tryParseJson(this.options.prepend,!0),typeof this.options.prepend=="string"&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),n.isArray(this.prependData)&&n.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(){},makeArray:function(t){var u,e,r=[],i,o,f;if(!t||typeof t=="string")return null;if(n.isArray(t))for(o=function(n,t){return e={value:n,text:t},u++>=2?!1:void 0},f=0;f<t.length;f++)i=t[f],typeof i=="object"?(u=0,n.each(i,o),u===1?r.push(e):u>1&&(i.children&&(i.children=this.makeArray(i.children)),r.push(i))):r.push({value:i,text:i});else n.each(t,function(n,t){r.push({value:n,text:t})});return r},option:function(n,t){this.options[n]=t;n==="source"&&(this.sourceData=null);n==="prepend"&&(this.prependData=null)}});t.defaults=n.extend({},n.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null});n.fn.editabletypes.list=t}(window.jQuery),function(n){"use strict";var t=function(n){this.init("text",n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.abstractinput);n.extend(t.prototype,{render:function(){this.renderClear();this.setClass();this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),this.$input.is("input,textarea")&&!this.$input.is('[type="checkbox"],[type="range"]')&&n.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=n('<span class="editable-clear-x"><\/span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(n.proxy(function(t){if(!~n.inArray(t.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var i=this;this.t=setTimeout(function(){i.toggleClear(t)},100)}},this)).parent().css("position","relative"),this.$clear.click(n.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(){if(this.$clear){var n=this.$input.val().length,t=this.$clear.is(":visible");n&&!t&&this.$clear.show();!n&&t&&this.$clear.hide()}},clear:function(){this.$clear.hide();this.$input.val("").focus()}});t.defaults=n.extend({},n.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0});n.fn.editabletypes.text=t}(window.jQuery),function(n){"use strict";var t=function(n){this.init("textarea",n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.abstractinput);n.extend(t.prototype,{render:function(){this.setClass();this.setAttr("placeholder");this.setAttr("rows");this.$input.keydown(function(t){t.ctrlKey&&t.which===13&&n(this).closest("form").submit()})},activate:function(){n.fn.editabletypes.text.prototype.activate.call(this)}});t.defaults=n.extend({},n.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea><\/textarea>",inputclass:"input-large",placeholder:null,rows:7});n.fn.editabletypes.textarea=t}(window.jQuery),function(n){"use strict";var t=function(n){this.init("select",n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.list);n.extend(t.prototype,{renderList:function(){this.$input.empty();var i=this.options.escape,t=function(r,u){var e,f,o;if(n.isArray(u))for(f=0;f<u.length;f++)e={},u[f].children?(e.label=u[f].text,r.append(t(n("<optgroup>",e),u[f].children))):(e.value=u[f].value,u[f].disabled&&(e.disabled=!0),o=n("<option>",e),o[i?"text":"html"](u[f].text),r.append(o));return r};t(this.$input,this.sourceData);this.setClass();this.$input.on("keydown.editable",function(t){t.which===13&&n(this).closest("form").submit()})},value2htmlFinal:function(t,i){var r="",u=n.fn.editableutils.itemsByValue(t,this.sourceData);u.length&&(r=u[0].text);n.fn.editabletypes.abstractinput.prototype.value2html.call(this,r,i)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){n(this).closest("form").submit()})}});t.defaults=n.extend({},n.fn.editabletypes.list.defaults,{tpl:"<select><\/select>"});n.fn.editabletypes.select=t}(window.jQuery),function(n){"use strict";var t=function(n){this.init("checklist",n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.list);n.extend(t.prototype,{renderList:function(){var i,t,r;if(this.$tpl.empty(),n.isArray(this.sourceData)){for(t=0;t<this.sourceData.length;t++)i=n("<label>").append(n("<input>",{type:"checkbox",value:this.sourceData[t].value})),r=n("<span>"),r[this.options.escape?"text":"html"](" "+this.sourceData[t].text),i.append(r),n("<div>").append(i).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]');this.setClass()}},value2str:function(t){return n.isArray(t)?t.sort().join(n.trim(this.options.separator)):""},str2value:function(t){var r,i=null;return typeof t=="string"&&t.length?(r=new RegExp("\\s*"+n.trim(this.options.separator)+"\\s*"),i=t.split(r)):i=n.isArray(t)?t:[t],i},value2input:function(t){this.$input.prop("checked",!1);n.isArray(t)&&t.length&&this.$input.each(function(i,r){var u=n(r);n.each(t,function(n,t){u.val()==t&&u.prop("checked",!0)})})},input2value:function(){var t=[];return this.$input.filter(":checked").each(function(i,r){t.push(n(r).val())}),t},value2htmlFinal:function(t,i){var r=[],u=n.fn.editableutils.itemsByValue(t,this.sourceData),f=this.options.escape;u.length?(n.each(u,function(t,i){var u=f?n.fn.editableutils.escape(i.text):i.text;r.push(u)}),n(i).html(r.join("<br>"))):n(i).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(t){t.which===13&&n(this).closest("form").submit()})}});t.defaults=n.extend({},n.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"><\/div>',inputclass:null,separator:","});n.fn.editabletypes.checklist=t}(window.jQuery),function(n){"use strict";var t=function(n){this.init("password",n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.text);n.extend(t.prototype,{value2html:function(t,i){t?n(i).text("[hidden]"):n(i).empty()},html2value:function(){return null}});t.defaults=n.extend({},n.fn.editabletypes.text.defaults,{tpl:'<input type="password">'});n.fn.editabletypes.password=t}(window.jQuery),function(n){"use strict";var t=function(n){this.init("email",n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.text);t.defaults=n.extend({},n.fn.editabletypes.text.defaults,{tpl:'<input type="email">'});n.fn.editabletypes.email=t}(window.jQuery),function(n){"use strict";var t=function(n){this.init("url",n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.text);t.defaults=n.extend({},n.fn.editabletypes.text.defaults,{tpl:'<input type="url">'});n.fn.editabletypes.url=t}(window.jQuery),function(n){"use strict";var t=function(n){this.init("tel",n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.text);t.defaults=n.extend({},n.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'});n.fn.editabletypes.tel=t}(window.jQuery),function(n){"use strict";var t=function(n){this.init("number",n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.text);n.extend(t.prototype,{render:function(){t.superclass.render.call(this);this.setAttr("min");this.setAttr("max");this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}});t.defaults=n.extend({},n.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null});n.fn.editabletypes.number=t}(window.jQuery),function(n){"use strict";var t=function(n){this.init("range",n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.number);n.extend(t.prototype,{render:function(){this.$input=this.$tpl.filter("input");this.setClass();this.setAttr("min");this.setAttr("max");this.setAttr("step");this.$input.on("input",function(){n(this).siblings("output").text(n(this).val())})},activate:function(){this.$input.focus()}});t.defaults=n.extend({},n.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"><\/output>',inputclass:"input-medium"});n.fn.editabletypes.range=t}(window.jQuery),function(n){"use strict";var t=function(n){this.init("time",n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.abstractinput);n.extend(t.prototype,{render:function(){this.setClass()}});t.defaults=n.extend({},n.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'});n.fn.editabletypes.time=t}(window.jQuery),function(n){"use strict";var t=function(i){var r,u;this.init("select2",i,t.defaults);i.select2=i.select2||{};this.sourceData=null;i.placeholder&&(i.select2.placeholder=i.placeholder);!i.select2.tags&&i.source&&(r=i.source,n.isFunction(i.source)&&(r=i.source.call(i.scope)),typeof r=="string"?(i.select2.ajax=i.select2.ajax||{},i.select2.ajax.dataType||(i.select2.ajax.dataType="json"),i.select2.ajax.data||(i.select2.ajax.data=function(n){return{query:n}}),i.select2.ajax.processResults||(i.select2.ajax.processResults=function(n){return{results:n}}),i.select2.ajax.url=r):(this.sourceData=this.convertSource(r),i.select2.data=this.sourceData));this.options.select2=n.extend({},t.defaults.select2,i.select2);this.isMultiple=this.options.select2.tags||this.options.select2.multiple;this.isRemote="ajax"in this.options.select2;this.idFunc=this.options.select2.id;typeof this.idFunc!="function"&&(u=this.idFunc||"id",this.idFunc=function(n){return n[u]});this.formatSelection=this.options.select2.formatSelection;typeof this.formatSelection!="function"&&(this.formatSelection=function(n){return n.text})};n.fn.editableutils.inherit(t,n.fn.editabletypes.abstractinput);n.extend(t.prototype,{render:function(){if(this.setClass(),this.isRemote)this.$input.on("select2-loaded",n.proxy(function(n){this.sourceData=n.items.results},this));if(this.isMultiple)this.$input.on("change",function(){n(this).closest("form").parent().triggerHandler("resize")})},value2html:function(i,r){var u="",f,e=this;this.options.select2.tags?f=i:this.sourceData&&(f=n.fn.editableutils.itemsByValue(i,this.sourceData,this.idFunc));n.isArray(f)?(u=[],n.each(f,function(n,t){u.push(t&&typeof t=="object"?e.formatSelection(t):t)})):f&&(u=e.formatSelection(f));u=n.isArray(u)?u.join(this.options.viewseparator):u;t.superclass.value2html.call(this,u,r)},html2value:function(n){return this.options.select2.tags?this.str2value(n,this.options.viewseparator):null},value2input:function(t){var r,u,i,f;n.isArray(t)&&(t=t.join(this.getSeparator()));this.$input.data("select2")?this.$input.val(t).trigger("change",!0):(this.$input.val(t),this.$input.select2(this.options.select2));!this.isRemote||this.isMultiple||this.options.select2.initSelection||(r=this.options.select2.id,u=this.options.select2.formatSelection,r||u||(i=n(this.options.scope),i.data("editable").isEmpty||(f={id:t,text:i.text()},this.$input.select2("data",f))))},input2value:function(){return this.$input.select2("val")},str2value:function(t,i){if(typeof t!="string"||!this.isMultiple)return t;i=i||this.getSeparator();var u,r,f;if(t===null||t.length<1)return null;for(u=t.split(i),r=0,f=u.length;r<f;r=r+1)u[r]=n.trim(u[r]);return u},autosubmit:function(){this.$input.on("change",function(t,i){i||n(this).closest("form").submit()})},getSeparator:function(){return this.options.select2.separator||n.fn.select2.defaults.separator},convertSource:function(t){if(n.isArray(t)&&t.length&&t[0].value!==undefined)for(var i=0;i<t.length;i++)t[i].value!==undefined&&(t[i].id=t[i].value,delete t[i].value);return t},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}});t.defaults=n.extend({},n.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "});n.fn.editabletypes.select2=t}(window.jQuery),function(n){var t=function(t,i){if(this.$element=n(t),!this.$element.is("input")){n.error("Combodate should be applied to INPUT element");return}this.options=n.extend({},n.fn.combodate.defaults,i,this.$element.data());this.init()};t.prototype={constructor:t,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]};this.$widget=n('<span class="combodate"><\/span>').html(this.getTemplate());this.initCombos();this.$widget.on("change","select",n.proxy(function(t){this.$element.val(this.getValue()).change();this.options.smartDays&&(n(t.target).is(".month")||n(t.target).is(".year"))&&this.fillCombo("day")},this));this.$widget.find("select").css("width","auto");this.$element.hide().after(this.$widget);this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var t=this.options.template;return n.each(this.map,function(n,i){i=i[0];var r=new RegExp(i+"+"),u=i.length>1?i.substring(1,2):i;t=t.replace(r,"{"+u+"}")}),t=t.replace(/ /g,"&nbsp;"),n.each(this.map,function(n,i){i=i[0];var r=i.length>1?i.substring(1,2):i;t=t.replace("{"+r+"}",'<select class="'+n+'"><\/select>')}),t},initCombos:function(){var n,t;for(n in this.map)t=this.$widget.find("."+n),this["$"+n]=t.length?t:null,this.fillCombo(n)},fillCombo:function(n){var t=this["$"+n],i;if(t){var u="fill"+n.charAt(0).toUpperCase()+n.slice(1),r=this[u](),f=t.val();for(t.empty(),i=0;i<r.length;i++)t.append('<option value="'+r[i][0]+'">'+r[i][1]+"<\/option>");t.val(f)}},fillCommon:function(n){var r=[],t,i;return this.options.firstItem==="name"?(t=moment.relativeTime||moment.langData()._relativeTime,i=typeof t[n]=="function"?t[n](1,!0,n,!1):t[n],i=i.split(" ").reverse()[0],r.push(["",i])):this.options.firstItem==="empty"&&r.push(["",""]),r},fillDay:function(){var r=this.fillCommon("d"),u,n,e=this.options.template.indexOf("DD")!==-1,f=31,t,i;for(this.options.smartDays&&this.$month&&this.$year&&(t=parseInt(this.$month.val(),10),i=parseInt(this.$year.val(),10),isNaN(t)||isNaN(i)||(f=moment([i,t]).daysInMonth())),n=1;n<=f;n++)u=e?this.leadZero(n):n,r.push([n,u]);return r},fillMonth:function(){for(var t=this.fillCommon("M"),i,r=this.options.template.indexOf("MMMM")!==-1,u=this.options.template.indexOf("MMM")!==-1,f=this.options.template.indexOf("MM")!==-1,n=0;n<=11;n++)i=r?moment().date(1).month(n).format("MMMM"):u?moment().date(1).month(n).format("MMM"):f?this.leadZero(n+1):n+1,t.push([n,i]);return t},fillYear:function(){for(var t=[],i,r=this.options.template.indexOf("YYYY")!==-1,n=this.options.maxYear;n>=this.options.minYear;n--)i=r?n:(n+"").substring(2),t[this.options.yearDescending?"push":"unshift"]([n,i]);return this.fillCommon("y").concat(t)},fillHour:function(){for(var t=this.fillCommon("h"),i,r=this.options.template.indexOf("h")!==-1,o=this.options.template.indexOf("H")!==-1,u=this.options.template.toLowerCase().indexOf("hh")!==-1,f=r?1:0,e=r?12:23,n=f;n<=e;n++)i=u?this.leadZero(n):n,t.push([n,i]);return t},fillMinute:function(){for(var t=this.fillCommon("m"),i,r=this.options.template.indexOf("mm")!==-1,n=0;n<=59;n+=this.options.minuteStep)i=r?this.leadZero(n):n,t.push([n,i]);return t},fillSecond:function(){for(var t=this.fillCommon("s"),i,r=this.options.template.indexOf("ss")!==-1,n=0;n<=59;n+=this.options.secondStep)i=r?this.leadZero(n):n,t.push([n,i]);return t},fillAmpm:function(){var n=this.options.template.indexOf("a")!==-1,t=this.options.template.indexOf("A")!==-1;return[["am",n?"am":"AM"],["pm",n?"pm":"PM"]]},getValue:function(t){var r,i={},u=this,f=!1;return(n.each(this.map,function(n){if(n!=="ampm"){var t=n==="day"?1:0;return i[n]=u["$"+n]?parseInt(u["$"+n].val(),10):t,isNaN(i[n])?(f=!0,!1):void 0}}),f)?"":(this.$ampm&&(i.hour=i.hour===12?this.$ampm.val()==="am"?0:12:this.$ampm.val()==="am"?i.hour:i.hour+12),r=moment([i.year,i.month,i.day,i.hour,i.minute,i.second]),this.highlight(r),t=t===undefined?this.options.format:t,t===null?r.isValid()?r:null:r.isValid()?r.format(t):"")},setValue:function(t){function f(t,i){var r={};return t.children("option").each(function(t,u){var f=n(u).attr("value"),e;f!==""&&(e=Math.abs(f-i),(typeof r.distance=="undefined"||e<r.distance)&&(r={value:f,distance:e}))}),r.value}if(t){var u=typeof t=="string"?moment(t,this.options.format):moment(t),r=this,i={};u.isValid()&&(n.each(this.map,function(n,t){n!=="ampm"&&(i[n]=u[t[1]]())}),this.$ampm&&(i.hour>=12?(i.ampm="pm",i.hour>12&&(i.hour-=12)):(i.ampm="am",i.hour===0&&(i.hour=12))),n.each(i,function(n,t){r["$"+n]&&(n==="minute"&&r.options.minuteStep>1&&r.options.roundTime&&(t=f(r["$"+n],t)),n==="second"&&r.options.secondStep>1&&r.options.roundTime&&(t=f(r["$"+n],t)),r["$"+n].val(t))}),this.options.smartDays&&this.fillCombo("day"),this.$element.val(u.format(this.options.format)).change())}},highlight:function(n){n.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(n){return n<=9?"0"+n:n},destroy:function(){this.$widget.remove();this.$element.removeData("combodate").show()}};n.fn.combodate=function(i){var r,u=Array.apply(null,arguments);return(u.shift(),i==="getValue"&&this.length&&(r=this.eq(0).data("combodate")))?r.getValue.apply(r,u):this.each(function(){var f=n(this),r=f.data("combodate"),e=typeof i=="object"&&i;r||f.data("combodate",r=new t(this,e));typeof i=="string"&&typeof r[i]=="function"&&r[i].apply(r,u)})};n.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:(new Date).getFullYear(),yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0,smartDays:!1}}(window.jQuery),function(n){"use strict";var t=function(i){this.init("combodate",i,t.defaults);this.options.viewformat||(this.options.viewformat=this.options.format);i.combodate=n.fn.editableutils.tryParseJson(i.combodate,!0);this.options.combodate=n.extend({},t.defaults.combodate,i.combodate,{format:this.options.format,template:this.options.template})};n.fn.editableutils.inherit(t,n.fn.editabletypes.abstractinput);n.extend(t.prototype,{render:function(){this.$input.combodate(this.options.combodate);n.fn.editableform.engine==="bs3"&&this.$input.siblings().find("select").addClass("form-control");this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(n,i){var r=n?n.format(this.options.viewformat):"";t.superclass.value2html.call(this,r,i)},html2value:function(n){return n?moment(n,this.options.viewformat):null},value2str:function(n){return n?n.format(this.options.format):""},str2value:function(n){return n?moment(n,this.options.format):null},value2submit:function(n){return this.value2str(n)},value2input:function(n){this.$input.combodate("setValue",n)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}});t.defaults=n.extend({},n.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null});n.fn.editabletypes.combodate=t}(window.jQuery),function(n){"use strict";var t=n.fn.editableform.Constructor.prototype.initInput;n.extend(n.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=n(n.fn.editableform.template);this.$form.find(".control-group").addClass("form-group");this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){var e,u,i;t.apply(this);var f=this.input.options.inputclass===null||this.input.options.inputclass===!1,r="input-sm",o="text,select,textarea,password,email,url,tel,number,range,time,typeahead".split(",");for(~n.inArray(this.input.type,o)&&(this.input.$input.addClass("form-control"),f&&(this.input.options.inputclass=r,this.input.$input.addClass(r))),e=this.$form.find(".editable-buttons"),u=f?[r]:this.input.options.inputclass.split(" "),i=0;i<u.length;i++)u[i].toLowerCase()==="input-lg"&&e.find("button").removeClass("btn-sm").addClass("btn-lg")}});n.fn.editableform.buttons='<button type="submit" class="btn btn-info editable-submit mt-1"><i class="fas fa-check"><\/i><\/button><button type="button" class="btn btn-danger editable-cancel mt-1"><i class="fas fa-minus-circle"><\/i><\/button>';n.fn.editableform.errorGroupClass="has-error";n.fn.editableform.errorBlockClass=null;n.fn.editableform.engine="bs3"}(window.jQuery),function(n){"use strict";n.extend(n.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:n.fn.popover.Constructor.DEFAULTS,initContainer:function(){n.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var t;this.$element.data("template")&&(t=this.$element.data("template"),this.$element.removeData("template"));this.call(this.containerOptions);t&&this.$element.data("template",t)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(n,t){this.container().options[n]=t},setPosition:function(){(function(){var i=this.tip(),n=typeof this.options.placement=="function"?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,e=/\s?auto?\s?/i,o=e.test(n),h;o&&(n=n.replace(e,"")||"top");var t=this.getPosition(),r=i[0].offsetWidth,u=i[0].offsetHeight;if(o){var f=this.$element.parent(),c=n,s=document.documentElement.scrollTop||document.body.scrollTop,l=this.options.container=="body"?window.innerWidth:f.outerWidth(),a=this.options.container=="body"?window.innerHeight:f.outerHeight(),v=this.options.container=="body"?0:f.offset().left;n=n=="bottom"&&t.top+t.height+u-s>a?"top":n=="top"&&t.top-s-u<0?"bottom":n=="right"&&t.right+r>l?"left":n=="left"&&t.left-r<v?"right":n;i.removeClass(c).addClass(n)}h=this.getCalculatedOffset(n,t,r,u);this.applyPlacement(h,n)}).call(this.container())}})}(window.jQuery),function(n){function r(){return new Date(Date.UTC.apply(Date,arguments))}function s(t,i){var u=n(t).data(),f={},e,o=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase());for(var r in u)i.test(r)&&(e=r.replace(o,function(n,t){return t.toLowerCase()}),f[e]=u[r]);return f}function h(t){var u={},r;if(i[t]||(t=t.split("-")[0],i[t]))return r=i[t],n.each(l,function(n,t){t in r&&(u[t]=r[t])}),u}var u=function(i,r){var u=this;this._process_options(r);this.element=n(i);this.isInline=!1;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1;this.hasInput=this.component&&this.element.find("input").length;this.component&&this.component.length===0&&(this.component=!1);this.picker=n(t.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right"));this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(n,t){return parseInt(t)+1});this._allow_update=!1;this.setStartDate(this.o.startDate);this.setEndDate(this.o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()},f,i,t;u.prototype={constructor:u,_process_options:function(r){var u,f,o;this._o=n.extend({},this._o,r);u=this.o=n.extend({},this._o);f=u.language;i[f]||(f=f.split("-")[0],i[f]||(f=e.language));u.language=f;switch(u.startView){case 2:case"decade":u.startView=2;break;case 1:case"year":u.startView=1;break;default:u.startView=0}switch(u.minViewMode){case 1:case"months":u.minViewMode=1;break;case 2:case"years":u.minViewMode=2;break;default:u.minViewMode=0}u.startView=Math.max(u.startView,u.minViewMode);u.weekStart%=7;u.weekEnd=(u.weekStart+6)%7;o=t.parseFormat(u.format);u.startDate!==-Infinity&&(u.startDate=t.parseDate(u.startDate,o,u.language));u.endDate!==Infinity&&(u.endDate=t.parseDate(u.endDate,o,u.language));u.daysOfWeekDisabled=u.daysOfWeekDisabled||[];n.isArray(u.daysOfWeekDisabled)||(u.daysOfWeekDisabled=u.daysOfWeekDisabled.split(/[,\s]*/));u.daysOfWeekDisabled=n.map(u.daysOfWeekDisabled,function(n){return parseInt(n,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(n){for(var t=0,i,r;t<n.length;t++){i=n[t][0];r=n[t][1];i.on(r)}},_unapplyEvents:function(n){for(var t=0,i,r;t<n.length;t++)i=n[t][0],r=n[t][1],i.off(r)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:n.proxy(this.show,this),keyup:n.proxy(this.update,this),keydown:n.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:n.proxy(this.show,this),keyup:n.proxy(this.update,this),keydown:n.proxy(this.keydown,this)}],[this.component,{click:n.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:n.proxy(this.show,this)}]];this._secondaryEvents=[[this.picker,{click:n.proxy(this.click,this)}],[n(window),{resize:n.proxy(this.place,this)}],[n(document),{mousedown:n.proxy(function(n){this.element.is(n.target)||this.element.find(n.target).size()||this.picker.is(n.target)||this.picker.find(n.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(i,r){var u=r||this.date,f=new Date(u.getTime()+u.getTimezoneOffset()*6e4);this.element.trigger({type:i,date:f,format:n.proxy(function(n){var i=n||this.o.format;return t.formatDate(u,i,this.o.language)},this)})},show:function(n){this.isInline||this.picker.appendTo("body");this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();n&&n.preventDefault();this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date},getDate:function(){var n=this.getUTCDate();return new Date(n.getTime()+n.getTimezoneOffset()*6e4)},getUTCDate:function(){return this.date},setDate:function(n){this.setUTCDate(new Date(n.getTime()-n.getTimezoneOffset()*6e4))},setUTCDate:function(n){this.date=n;this.setValue()},setValue:function(){var n=this.getFormattedDate();this.isInput?this.element.val(n):this.component&&this.element.find("input").val(n)},getFormattedDate:function(n){return n===undefined&&(n=this.o.format),t.formatDate(this.date,n,this.o.language)},setStartDate:function(n){this._process_options({startDate:n});this.update();this.updateNavArrows()},setEndDate:function(n){this._process_options({endDate:n});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(n){this._process_options({daysOfWeekDisabled:n});this.update();this.updateNavArrows()},place:function(){if(!this.isInline){var i=parseInt(this.element.parents().filter(function(){return n(this).css("z-index")!="auto"}).first().css("z-index"))+10,t=this.component?this.component.parent().offset():this.element.offset(),r=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:t.top+r,left:t.left,zIndex:i})}},_allow_update:!0,update:function(){if(this._allow_update){var n,i=!1;arguments&&arguments.length&&(typeof arguments[0]=="string"||arguments[0]instanceof Date)?(n=arguments[0],i=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date);this.date=t.parseDate(n,this.o.format,this.o.language);i&&this.setValue();this.viewDate=this.date<this.o.startDate?new Date(this.o.startDate):this.date>this.o.endDate?new Date(this.o.endDate):new Date(this.date);this.fill()}},fillDow:function(){var r=this.o.weekStart,n="<tr>",t;for(this.o.calendarWeeks&&(t='<th class="cw">&nbsp;<\/th>',n+=t,this.picker.find(".datepicker-days thead tr:first-child").prepend(t));r<this.o.weekStart+7;)n+='<th class="dow">'+i[this.o.language].daysMin[r++%7]+"<\/th>";n+="<\/tr>";this.picker.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var n="",t=0;t<12;)n+='<span class="month">'+i[this.o.language].monthsShort[t++]+"<\/span>";this.picker.find(".datepicker-months td").html(n)},setRange:function(t){t&&t.length?this.range=n.map(t,function(n){return n.valueOf()}):delete this.range;this.fill()},getClassNames:function(t){var i=[],r=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),e=this.date.valueOf(),u=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()==r&&t.getUTCMonth()<f?i.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()==r&&t.getUTCMonth()>f)&&i.push("new"),this.o.todayHighlight&&t.getUTCFullYear()==u.getFullYear()&&t.getUTCMonth()==u.getMonth()&&t.getUTCDate()==u.getDate()&&i.push("today"),e&&t.valueOf()==e&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||n.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&i.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),n.inArray(t.valueOf(),this.range)!=-1&&i.push("selected")),i},fill:function(){var k=new Date(this.viewDate),u=k.getUTCFullYear(),d=k.getUTCMonth(),v=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,it=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,y=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,rt=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,ft=this.date&&this.date.valueOf(),p,f,w,h,o,s,e,a,c,tt,l;for(this.picker.find(".datepicker-days thead th.datepicker-switch").text(i[this.o.language].months[d]+" "+u),this.picker.find("tfoot th.today").text(i[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(i[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths(),f=r(u,d-1,28,0,0,0,0),w=t.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth()),f.setUTCDate(w),f.setUTCDate(w-(f.getUTCDay()-this.o.weekStart+7)%7),h=new Date(f),h.setUTCDate(h.getUTCDate()+42),h=h.valueOf(),o=[];f.valueOf()<h;){if(f.getUTCDay()==this.o.weekStart&&(o.push("<tr>"),this.o.calendarWeeks)){var g=new Date(+f+(this.o.weekStart-f.getUTCDay()-7)%7*864e5),nt=new Date(+g+(11-g.getUTCDay())%7*864e5),b=new Date(+(b=r(nt.getUTCFullYear(),0,1))+(11-b.getUTCDay())%7*864e5),ut=(nt-b)/6048e5+1;o.push('<td class="cw">'+ut+"<\/td>")}s=this.getClassNames(f);s.push("day");e=this.o.beforeShowDay(f);e===undefined?e={}:typeof e=="boolean"?e={enabled:e}:typeof e=="string"&&(e={classes:e});e.enabled===!1&&s.push("disabled");e.classes&&(s=s.concat(e.classes.split(/\s+/)));e.tooltip&&(p=e.tooltip);s=n.unique(s);o.push('<td class="'+s.join(" ")+'"'+(p?' title="'+p+'"':"")+">"+f.getUTCDate()+"<\/td>");f.getUTCDay()==this.o.weekEnd&&o.push("<\/tr>");f.setUTCDate(f.getUTCDate()+1)}for(this.picker.find(".datepicker-days tbody").empty().append(o.join("")),a=this.date&&this.date.getUTCFullYear(),c=this.picker.find(".datepicker-months").find("th:eq(1)").text(u).end().find("span").removeClass("active"),a&&a==u&&c.eq(this.date.getUTCMonth()).addClass("active"),(u<v||u>y)&&c.addClass("disabled"),u==v&&c.slice(0,it).addClass("disabled"),u==y&&c.slice(rt+1).addClass("disabled"),o="",u=parseInt(u/10,10)*10,tt=this.picker.find(".datepicker-years").find("th:eq(1)").text(u+"-"+(u+9)).end().find("td"),u-=1,l=-1;l<11;l++)o+='<span class="year'+(l==-1?" old":l==10?" new":"")+(a==u?" active":"")+(u<v||u>y?" disabled":"")+'">'+u+"<\/span>",u+=1;tt.html(o)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),n=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(i){var u,h,e,l,s;if(i.preventDefault(),u=n(i.target).closest("span, td, th"),u.length==1)switch(u[0].nodeName.toLowerCase()){case"th":switch(u[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":h=t.modes[this.viewMode].navStep*(u[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,h);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,h)}this.fill();break;case"today":e=new Date;e=r(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0);this.showMode(-2);l=this.o.todayBtn=="linked"?null:"view";this._setDate(e,l);break;case"clear":this.isInput?s=this.element:this.component&&(s=this.element.find("input"));s&&s.val("").change();this._trigger("changeDate");this.update();this.o.autoclose&&this.hide()}break;case"span":if(!u.is(".disabled")){if(this.viewDate.setUTCDate(1),u.is(".month")){var c=1,f=u.parent().find("span").index(u),o=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(f);this._trigger("changeMonth",this.viewDate);this.o.minViewMode===1&&this._setDate(r(o,f,c,0,0,0,0))}else{var o=parseInt(u.text(),10)||0,c=1,f=0;this.viewDate.setUTCFullYear(o);this._trigger("changeYear",this.viewDate);this.o.minViewMode===2&&this._setDate(r(o,f,c,0,0,0,0))}this.showMode(-1);this.fill()}break;case"td":if(u.is(".day")&&!u.is(".disabled")){var c=parseInt(u.text(),10)||1,o=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth();u.is(".old")?f===0?(f=11,o-=1):f-=1:u.is(".new")&&(f==11?(f=0,o+=1):f+=1);this._setDate(r(o,f,c,0,0,0,0))}}},_setDate:function(n,t){t&&t!="date"||(this.date=new Date(n));t&&t!="view"||(this.viewDate=new Date(n));this.fill();this.setValue();this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input"));i&&(i.change(),this.o.autoclose&&(!t||t=="date")&&this.hide())},moveMonth:function(n,t){var f;if(!t)return n;var i=new Date(n.valueOf()),e=i.getUTCDate(),o=i.getUTCMonth(),s=Math.abs(t),r,u;if(t=t>0?1:-1,s==1)u=t==-1?function(){return i.getUTCMonth()==o}:function(){return i.getUTCMonth()!=r},r=o+t,i.setUTCMonth(r),(r<0||r>11)&&(r=(r+12)%12);else{for(f=0;f<s;f++)i=this.moveMonth(i,t);r=i.getUTCMonth();i.setUTCDate(e);u=function(){return r!=i.getUTCMonth()}}while(u())i.setUTCDate(--e),i.setUTCMonth(r);return i},moveYear:function(n,t){return this.moveMonth(n,t*12)},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(n){var u,t,i,r,f;if(this.picker.is(":not(:visible)")){n.keyCode==27&&this.show();return}u=!1;switch(n.keyCode){case 27:this.hide();n.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=n.keyCode==37?-1:1;n.ctrlKey?(i=this.moveYear(this.date,t),r=this.moveYear(this.viewDate,t)):n.shiftKey?(i=this.moveMonth(this.date,t),r=this.moveMonth(this.viewDate,t)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+t),r=new Date(this.viewDate),r.setUTCDate(this.viewDate.getUTCDate()+t));this.dateWithinRange(i)&&(this.date=i,this.viewDate=r,this.setValue(),this.update(),n.preventDefault(),u=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=n.keyCode==38?-1:1;n.ctrlKey?(i=this.moveYear(this.date,t),r=this.moveYear(this.viewDate,t)):n.shiftKey?(i=this.moveMonth(this.date,t),r=this.moveMonth(this.viewDate,t)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+t*7),r=new Date(this.viewDate),r.setUTCDate(this.viewDate.getUTCDate()+t*7));this.dateWithinRange(i)&&(this.date=i,this.viewDate=r,this.setValue(),this.update(),n.preventDefault(),u=!0);break;case 13:this.hide();n.preventDefault();break;case 9:this.hide()}u&&(this._trigger("changeDate"),this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change())},showMode:function(n){n&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+n)));this.picker.find(">div").hide().filter(".datepicker-"+t.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};f=function(t,i){this.element=n(t);this.inputs=n.map(i.inputs,function(n){return n.jquery?n[0]:n});delete i.inputs;n(this.inputs).datepicker(i).bind("changeDate",n.proxy(this.dateUpdated,this));this.pickers=n.map(this.inputs,function(t){return n(t).data("datepicker")});this.updateDates()};f.prototype={updateDates:function(){this.dates=n.map(this.pickers,function(n){return n.date});this.updateRanges()},updateRanges:function(){var t=n.map(this.dates,function(n){return n.valueOf()});n.each(this.pickers,function(n,i){i.setRange(t)})},dateUpdated:function(t){var u=n(t.target).data("datepicker"),r=u.getUTCDate(),i=n.inArray(t.target,this.inputs),f=this.inputs.length;if(i!=-1){if(r<this.dates[i])while(i>=0&&r<this.dates[i])this.pickers[i--].setUTCDate(r);else if(r>this.dates[i])while(i<f&&r>this.dates[i])this.pickers[i++].setUTCDate(r);this.updateDates()}},remove:function(){n.map(this.pickers,function(n){n.remove()});delete this.element.data().datepicker}};var c=n.fn.datepicker,o=n.fn.datepicker=function(t){var r=Array.apply(null,arguments),i;return r.shift(),this.each(function(){var c=n(this),o=c.data("datepicker"),a=typeof t=="object"&&t,y;if(!o){var v=s(this,"date"),p=n.extend({},e,v,a),w=h(p.language),l=n.extend({},e,w,v,a);c.is(".input-daterange")||l.inputs?(y={inputs:l.inputs||c.find("input").toArray()},c.data("datepicker",o=new f(this,n.extend(l,y)))):c.data("datepicker",o=new u(this,l))}if(typeof t=="string"&&typeof o[t]=="function"&&(i=o[t].apply(o,r),i!==undefined))return!1}),i!==undefined?i:this},e=n.fn.datepicker.defaults={autoclose:!1,beforeShowDay:n.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},l=n.fn.datepicker.locale_opts=["format","rtl","weekStart"];n.fn.datepicker.Constructor=u;i=n.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};t={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(n){return n%4==0&&n%100!=0||n%400==0},getDaysInMonth:function(n,i){return[31,t.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][i]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(n){var t=n.replace(this.validParts,'\0').split('\0'),i=n.match(this.validParts);if(!t||!t.length||!i||i.length===0)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(f,e,o){var d,h,a,v,l,g,s,p;if(f instanceof Date)return f;if(typeof e=="string"&&(e=t.parseFormat(e)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(f)){for(d=/([\-+]\d+)([dmwy])/,h=f.match(/([\-+]\d+)([dmwy])/g),f=new Date,s=0;s<h.length;s++){a=d.exec(h[s]);v=parseInt(a[1]);switch(a[2]){case"d":f.setUTCDate(f.getUTCDate()+v);break;case"m":f=u.prototype.moveMonth.call(u.prototype,f,v);break;case"w":f.setUTCDate(f.getUTCDate()+v*7);break;case"y":f=u.prototype.moveYear.call(u.prototype,f,v)}}return r(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),0,0,0)}var h=f&&f.match(this.nonpunctuation)||[],f=new Date,w={},k=["yyyy","yy","M","MM","m","mm","d","dd"],c={yyyy:function(n,t){return n.setUTCFullYear(t)},yy:function(n,t){return n.setUTCFullYear(2e3+t)},m:function(n,t){for(t-=1;t<0;)t+=12;for(t%=12,n.setUTCMonth(t);n.getUTCMonth()!=t;)n.setUTCDate(n.getUTCDate()-1);return n},d:function(n,t){return n.setUTCDate(t)}},y,b,a;if(c.M=c.MM=c.mm=c.m,c.dd=c.d,f=r(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0),l=e.parts.slice(),h.length!=l.length&&(l=n(l).filter(function(t,i){return n.inArray(i,k)!==-1}).toArray()),h.length==l.length){for(s=0,g=l.length;s<g;s++){if(y=parseInt(h[s],10),a=l[s],isNaN(y))switch(a){case"MM":b=n(i[o].months).filter(function(){var n=this.slice(0,h[s].length),t=h[s].slice(0,n.length);return n==t});y=n.inArray(b[0],i[o].months)+1;break;case"M":b=n(i[o].monthsShort).filter(function(){var n=this.slice(0,h[s].length),t=h[s].slice(0,n.length);return n==t});y=n.inArray(b[0],i[o].monthsShort)+1}w[a]=y}for(s=0;s<k.length;s++)p=k[s],p in w&&!isNaN(w[p])&&c[p](f,w[p])}return f},formatDate:function(r,u,f){var e,r,s,o,h;for(typeof u=="string"&&(u=t.parseFormat(u)),e={d:r.getUTCDate(),D:i[f].daysShort[r.getUTCDay()],DD:i[f].days[r.getUTCDay()],m:r.getUTCMonth()+1,M:i[f].monthsShort[r.getUTCMonth()],MM:i[f].months[r.getUTCMonth()],yy:r.getUTCFullYear().toString().substring(2),yyyy:r.getUTCFullYear()},e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,r=[],s=n.extend([],u.separators),o=0,h=u.parts.length;o<=h;o++)s.length&&r.push(s.shift()),r.push(e[u.parts[o]]);return r.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/><\/th><th colspan="5" class="datepicker-switch"><\/th><th class="next"><i class="icon-arrow-right"/><\/th><\/tr><\/thead>',contTemplate:'<tbody><tr><td colspan="7"><\/td><\/tr><\/tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"><\/th><\/tr><tr><th colspan="7" class="clear"><\/th><\/tr><\/tfoot>'};t.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+t.headTemplate+"<tbody><\/tbody>"+t.footTemplate+'<\/table><\/div><div class="datepicker-months"><table class="table-condensed">'+t.headTemplate+t.contTemplate+t.footTemplate+'<\/table><\/div><div class="datepicker-years"><table class="table-condensed">'+t.headTemplate+t.contTemplate+t.footTemplate+"<\/table><\/div><\/div>";n.fn.datepicker.DPGlobal=t;n.fn.datepicker.noConflict=function(){return n.fn.datepicker=c,this};n(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=n(this);i.data("datepicker")||(t.preventDefault(),o.call(i,"show"))});n(function(){o.call(n('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(n){"use strict";n.fn.bdatepicker=n.fn.datepicker.noConflict();n.fn.datepicker||(n.fn.datepicker=n.fn.bdatepicker);var t=function(n){this.init("date",n,t.defaults);this.initPicker(n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.abstractinput);n.extend(t.prototype,{initPicker:function(t,i){this.options.viewformat||(this.options.viewformat=this.options.format);t.datepicker=n.fn.editableutils.tryParseJson(t.datepicker,!0);this.options.datepicker=n.extend({},i.datepicker,t.datepicker,{format:this.options.viewformat});this.options.datepicker.language=this.options.datepicker.language||"en";this.dpg=n.fn.bdatepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker);this.options.clear&&(this.$clear=n('<a href="#"><\/a>').html(this.options.clear).click(n.proxy(function(n){n.preventDefault();n.stopPropagation();this.clear()},this)),this.$tpl.parent().append(n('<div class="editable-clear">').append(this.$clear)))},value2html:function(n,i){var r=n?this.dpg.formatDate(n,this.parsedViewFormat,this.options.datepicker.language):"";t.superclass.value2html.call(this,r,i)},html2value:function(n){return this.parseDate(n,this.parsedViewFormat)},value2str:function(n){return n?this.dpg.formatDate(n,this.parsedFormat,this.options.datepicker.language):""},str2value:function(n){return this.parseDate(n,this.parsedFormat)},value2submit:function(n){return this.value2str(n)},value2input:function(n){this.$input.bdatepicker("update",n)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null;this.$input.find(".active").removeClass("active");this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(t){if(!n(t.currentTarget).is(".old")&&!n(t.currentTarget).is(".new")){var i=n(this).closest("form");setTimeout(function(){i.submit()},200)}})},parseDate:function(n,t){var i=null,r;return n&&(i=this.dpg.parseDate(n,t,this.options.datepicker.language),typeof n=="string"&&(r=this.dpg.formatDate(i,t,this.options.datepicker.language),n!==r&&(i=null))),i}});t.defaults=n.extend({},n.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"><\/div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"});n.fn.editabletypes.date=t}(window.jQuery),function(n){"use strict";var t=function(n){this.init("datefield",n,t.defaults);this.initPicker(n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.date);n.extend(t.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.bdatepicker(this.options.datepicker);this.$input.off("focus keydown");this.$input.keyup(n.proxy(function(){this.$tpl.removeData("date");this.$tpl.bdatepicker("update")},this))},value2input:function(n){this.$input.val(n?this.dpg.formatDate(n,this.parsedViewFormat,this.options.datepicker.language):"");this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){n.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});t.defaults=n.extend({},n.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"><\/i><\/span><\/div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}});n.fn.editabletypes.datefield=t}(window.jQuery),function(n){"use strict";var t=function(n){this.init("datetime",n,t.defaults);this.initPicker(n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.abstractinput);n.extend(t.prototype,{initPicker:function(t,i){this.options.viewformat||(this.options.viewformat=this.options.format);t.datetimepicker=n.fn.editableutils.tryParseJson(t.datetimepicker,!0);this.options.datetimepicker=n.extend({},i.datetimepicker,t.datetimepicker,{format:this.options.viewformat});this.options.datetimepicker.language=this.options.datetimepicker.language||"en";this.dpg=n.fn.datetimepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker);this.$input.on("changeMode",function(){var t=n(this).closest("form").parent();setTimeout(function(){t.triggerHandler("resize")},0)});this.options.clear&&(this.$clear=n('<a href="#"><\/a>').html(this.options.clear).click(n.proxy(function(n){n.preventDefault();n.stopPropagation();this.clear()},this)),this.$tpl.parent().append(n('<div class="editable-clear">').append(this.$clear)))},value2html:function(n,i){var r=n?this.dpg.formatDate(this.toUTC(n),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";if(i)t.superclass.value2html.call(this,r,i);else return r},html2value:function(n){var t=this.parseDate(n,this.parsedViewFormat);return t?this.fromUTC(t):null},value2str:function(n){return n?this.dpg.formatDate(this.toUTC(n),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(n){var t=this.parseDate(n,this.parsedFormat);return t?this.fromUTC(t):null},value2submit:function(n){return this.value2str(n)},value2input:function(n){n&&this.$input.data("datetimepicker").setDate(n)},input2value:function(){var n=this.$input.data("datetimepicker");return n.date?n.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null;this.$input.find(".active").removeClass("active");this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(){var t=n(this).closest("form");setTimeout(function(){t.submit()},200)})},toUTC:function(n){return n?new Date(n.valueOf()-n.getTimezoneOffset()*6e4):n},fromUTC:function(n){return n?new Date(n.valueOf()+n.getTimezoneOffset()*6e4):n},parseDate:function(n,t){var i=null,r;return n&&(i=this.dpg.parseDate(n,t,this.options.datetimepicker.language,this.options.formatType),typeof n=="string"&&(r=this.dpg.formatDate(i,t,this.options.datetimepicker.language,this.options.formatType),n!==r&&(i=null))),i}});t.defaults=n.extend({},n.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"><\/div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"});n.fn.editabletypes.datetime=t}(window.jQuery),function(n){"use strict";var t=function(n){this.init("datetimefield",n,t.defaults);this.initPicker(n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.datetime);n.extend(t.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.datetimepicker(this.options.datetimepicker);this.$input.off("focus keydown");this.$input.keyup(n.proxy(function(){this.$tpl.removeData("date");this.$tpl.datetimepicker("update")},this))},value2input:function(n){this.$input.val(this.value2html(n));this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){n.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});t.defaults=n.extend({},n.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"><\/i><\/span><\/div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}});n.fn.editabletypes.datetimefield=t}(window.jQuery),function(n){"use strict";var t=function(n){this.init("address",n,t.defaults)};n.fn.editableutils.inherit(t,n.fn.editabletypes.abstractinput);n.extend(t.prototype,{render:function(){this.$input=this.$tpl.find("input")},value2html:function(t,i){if(!t){n(i).empty();return}var r=n("<div>").text(t.city).html()+", "+n("<div>").text(t.street).html()+" st., bld. "+n("<div>").text(t.building).html();n(i).html(r)},html2value:function(){return null},value2str:function(n){var t="",i;if(n)for(i in n)t=t+i+":"+n[i]+";";return t},str2value:function(n){return n},value2input:function(n){n&&(this.$input.filter('[name="city"]').val(n.city),this.$input.filter('[name="street"]').val(n.street),this.$input.filter('[name="building"]').val(n.building))},input2value:function(){return{city:this.$input.filter('[name="city"]').val(),street:this.$input.filter('[name="street"]').val(),building:this.$input.filter('[name="building"]').val()}},activate:function(){this.$input.filter('[name="city"]').focus()},autosubmit:function(){this.$input.keydown(function(t){t.which===13&&n(this).closest("form").submit()})}});t.defaults=n.extend({},n.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-address"><label><span>City: <\/span><input type="text" name="city" class="input-small"><\/label><\/div><div class="editable-address"><label><span>Street: <\/span><input type="text" name="street" class="input-small"><\/label><\/div><div class="editable-address"><label><span>Building: <\/span><input type="text" name="building" class="input-mini"><\/label><\/div>',inputclass:""});n.fn.editabletypes.address=t}(window.jQuery);
/*!
 * webTicker 2.2.0
 * Examples and documentation at:
 * http://jonmifsud.com/open-source/jquery/jquery-webticker/
 * 2011 Jonathan Mifsud
 * Version: 2.2.0 (15-FEB-2016)
 * Dual licensed under the Creative Commons and DonationWare licenses:
 * http://creativecommons.org/licenses/by-nc/3.0/
 * https://github.com/jonmifsud/Web-Ticker/blob/master/licence.md
 * Requires:
 * jQuery v1.4.2 or later
 *
 */
(function(n){function i(t){var i=0;return t.children("li").each(function(){i+=n(this).outerWidth(!0)}),i}function o(t){return Math.max.apply(Math,t.children().map(function(){return n(this).width()}).get())}function s(n){var t=n.data("settings")||{direction:"left",speed:50},u=n.children().first(),i=Math.abs(-n.css(t.direction).replace("px","").replace("auto","0")-u.outerWidth(!0)),f=i*1e3/t.speed,r={};return r[t.direction]=n.css(t.direction).replace("px","").replace("auto","0")-i,{css:r,time:f}}function h(n){var i=n.data("settings")||{direction:"left"},t;n.css("transition-duration","0s").css(i.direction,"0");t=n.children().first();t.hasClass("webticker-init")?t.remove():n.children().last().after(t)}function u(n,t){var r=n.data("settings")||{direction:"left"},i;typeof t=="undefined"&&(t=!1);t&&h(n);i=s(n);n.animate(i.css,i.time,"linear",function(){n.css(r.direction,"0");u(n,!0)})}function f(n,t){typeof t=="undefined"&&(t=!1);t&&h(n);var i=s(n),r=i.time/1e3;r+="s";n.css(i.css).css("transition-duration",r)}function c(t,i,r){var u=[];n.get(t,function(t){var f=n(t);f.find("item").each(function(){var t=n(this),i={title:t.find("title").text(),link:t.find("link").text()},r='<li><a href="'+i.link+'"">'+i.title+"<\/a><\/li>";u+=r});r.webTicker("update",u,i)})}function r(t,r){var u,f,c,l,s,a,h,e;if(t.children("li").length<1)return window.console,!1;if(u=t.data("settings"),u.duplicateLoops=u.duplicateLoops||0,t.width("auto"),f=0,t.children("li").each(function(){f+=n(this).outerWidth(!0)}),c=t.find("li:first").height(),u.duplicate){for(l=o(t),s=0;f-l<t.parent().width()||t.children().length===1||s<u.duplicateLoops;)a=t.children().clone(),t.append(a),f=0,f=i(t),l=o(t),s++;u.duplicateLoops=s}else h=t.parent().width()-f,h+=t.find("li:first").width(),t.find(".ticker-spacer").length>0?t.find(".ticker-spacer").width(h):t.append('<li class="ticker-spacer" style="float: '+u.direction+";width:"+h+"px;height:"+c+'px;"><\/li>');for(u.startEmpty&&r&&t.prepend('<li class="webticker-init" style="float: '+u.direction+";width:"+t.parent().width()+"px;height:"+c+'px;"><\/li>'),f=0,f=i(t),t.width(f+200),e=0,e=i(t);e>=t.width();)t.width(t.width()+200),e=0,e=i(t);return!0}var t=function(){var n=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(n.transition==="")return!0;while(t.length)if(t.pop()+"Transition"in n)return!0;return!1}(),e={init:function(i){return i=jQuery.extend({speed:50,direction:"left",moving:!0,startEmpty:!0,duplicate:!1,rssurl:!1,hoverpause:!0,rssfrequency:0,updatetype:"reset",transition:"linear",height:"30px",maskleft:"",maskright:"",maskwidth:0},i),this.each(function(){var e,s,o,a,h,l;if(jQuery(this).data("settings",i),e=jQuery(this),s=e.wrap('<div class="mask"><\/div>'),s.after('<span class="tickeroverlay-left">&nbsp;<\/span><span class="tickeroverlay-right">&nbsp;<\/span>'),o=e.parent().wrap('<div class="tickercontainer"><\/div>'),n(window).resize(function(){clearTimeout(a);a=setTimeout(function(){console.log("window was resized");r(e,!1)},500)}),e.children("li").css("white-space","nowrap"),e.children("li").css("float",i.direction),e.children("li").css("padding","0 7px"),e.children("li").css("line-height",i.height),s.css("position","relative"),s.css("overflow","hidden"),e.closest(".tickercontainer").css("height",i.height),e.closest(".tickercontainer").css("overflow","hidden"),e.css("float",i.direction),e.css("position","relative"),e.css("font","bold 10px Verdana"),e.css("list-style-type","none"),e.css("margin","0"),e.css("padding","0"),i.maskleft!==""&&i.maskright!==""?(h='url("'+i.maskleft+'")',o.find(".tickeroverlay-left").css("background-image",h),o.find(".tickeroverlay-left").css("display","block"),o.find(".tickeroverlay-left").css("pointer-events","none"),o.find(".tickeroverlay-left").css("position","absolute"),o.find(".tickeroverlay-left").css("z-index","30"),o.find(".tickeroverlay-left").css("height",i.height),o.find(".tickeroverlay-left").css("width",i.maskwidth),o.find(".tickeroverlay-left").css("top","0"),o.find(".tickeroverlay-left").css("left","-2px"),h='url("'+i.maskright+'")',o.find(".tickeroverlay-right").css("background-image",h),o.find(".tickeroverlay-right").css("display","block"),o.find(".tickeroverlay-right").css("pointer-events","none"),o.find(".tickeroverlay-right").css("position","absolute"),o.find(".tickeroverlay-right").css("z-index","30"),o.find(".tickeroverlay-right").css("height",i.height),o.find(".tickeroverlay-right").css("width",i.maskwidth),o.find(".tickeroverlay-right").css("top","0"),o.find(".tickeroverlay-right").css("right","-2px")):(o.find(".tickeroverlay-left").css("display","none"),o.find(".tickeroverlay-right").css("display","none")),e.children("li").last().addClass("last"),l=r(e,!0),i.rssurl&&(c(i.rssurl,i.type,e),i.rssfrequency>0&&window.setInterval(function(){c(i.rssurl,i.type,e)},i.rssfrequency*6e4)),t){e.css("transition-timing-function",i.transition);e.css("transition-duration","0s").css(i.direction,"0");l&&f(e,!1);e.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend",function(t){if(!e.is(t.target))return!1;f(n(this),!0)})}else l&&u(n(this));i.hoverpause&&e.hover(function(){if(t){var r=n(this).css(i.direction);n(this).css("transition-duration","0s").css(i.direction,r)}else jQuery(this).stop()},function(){jQuery(this).data("settings").moving&&(t?f(n(this),!1):u(e))})})},stop:function(){var i=n(this).data("settings");if(i.moving)return i.moving=!1,this.each(function(){if(t){var r=n(this).css(i.direction);n(this).css("transition-duration","0s").css(i.direction,r)}else n(this).stop()})},cont:function(){var i=n(this).data("settings");if(!i.moving)return i.moving=!0,this.each(function(){t?f(n(this),!1):u(n(this))})},transition:function(i){var r=n(this);t&&r.css("transition-timing-function",i)},update:function(t,u,f,e){var o,s,l,y,a,v,h,c;if(u=u||"reset",typeof f=="undefined"&&(f=!0),typeof e=="undefined"&&(e=!1),typeof t=="string"&&(t=n(t)),o=n(this),o.webTicker("stop"),s=n(this).data("settings"),u==="reset")o.html(t),r(o,!0);else if(u==="swap")if(window.console,o.children("li").length<1)o.html(t),o.css(s.direction,"0"),r(o,!0);else if(s.duplicate===!0){for(o.children("li").addClass("old"),h=t.length-1;h>=0;h--)l=n(t[h]).data("update"),y=o.find('[data-update="'+l+'"]'),y.length<1?f&&(o.find(".ticker-spacer:first-child").length===0&&o.find(".ticker-spacer").length>0?o.children("li.ticker-spacer").before(t[h]):(a=n(t[h]),h===t.length-1&&a.addClass("last"),o.find("last").after(a),o.find("last").removeClass("last"))):o.find('[data-update="'+l+'"]').replaceWith(t[h]);o.children("li.webticker-init, li.ticker-spacer").removeClass("old");e&&o.children("li").remove(".old");v=0;v=i(o);o.width(v+200);o.find("li.webticker-init").length<1&&(s.startEmpty=!1);o.html(t);o.children("li").css("white-space","nowrap");o.children("li").css("float",s.direction);o.children("li").css("padding","0 7px");o.children("li").css("line-height",s.height);r(o,!0)}else{for(o.children("li").addClass("old"),c=0;c<t.length;c++)l=n(t[c]).data("update"),y=o.find('[data-update="'+l+'"]'),y.length<1?f&&(o.find(".ticker-spacer:first-child").length===0&&o.find(".ticker-spacer").length>0?o.children("li.ticker-spacer").before(t[c]):(a=n(t[c]),c===t.length-1&&a.addClass("last"),o.find(".old.last").after(a),o.find(".old.last").removeClass("last"))):o.find('[data-update="'+l+'"]').replaceWith(t[c]);o.children("li.webticker-init, li.ticker-spacer").removeClass("old");o.children("li").css("white-space","nowrap");o.children("li").css("float",s.direction);o.children("li").css("padding","0 7px");o.children("li").css("line-height",s.height);e&&o.children("li").remove(".old");v=0;v=i(o);o.width(v+200)}o.webTicker("cont")}};n.fn.webTicker=function(t){if(e[t])return e[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery.webTicker");else return e.init.apply(this,arguments)}})(jQuery),function(n,t,i){function f(r,f){function a(){e.elem.children().css("margin",0).children().css("margin",0);e.elem.css({position:"relative",height:e.opts.height,overflow:"hidden"});e.targ.css({position:"absolute",margin:0});setInterval(function(){l()},100)}function o(){e.timer=setInterval(function(){e.winFocus==1&&c(e.opts.direction)},e.opts.interval);n(e.opts.controls.toggle).addClass("et-run").html(e.opts.controls.stopText)}function s(){clearInterval(e.timer);e.timer=0;n(e.opts.controls.toggle).removeClass("et-run").html(e.opts.controls.playText)}function c(n){var t,i,r,u,f;e.elem.is(":visible")&&(n=="up"?(t=":first-child",i="-=",r="appendTo"):(t=":last-child",i="+=",r="prependTo"),u=e.targ.children(t),f=u.outerHeight(),e.targ.stop(!0,!0).animate({top:i+f+"px"},e.opts.speed,e.opts.easing,function(){u.hide()[r](e.targ).fadeIn();e.targ.css("top",0);l()}))}function h(n){s();n=="up"?c("up"):c("down")}function v(){var t=0,i=e.elem.css("display");e.elem.css("display","block");e.targ.children().each(function(){t+=n(this).outerHeight()});e.elem.css({display:i,height:t})}function y(t){var i=0;e.targ.children(":lt("+e.opts.visible+")").each(function(){i+=n(this).outerHeight()});t==1?e.elem.stop(!0,!0).animate({height:i},e.opts.speed):e.elem.css("height",i)}function l(){e.opts.height=="auto"&&e.opts.visible!=0?(anim=arguments.callee.caller.name=="init"?0:1,y(anim)):e.opts.height=="auto"&&v()}var e=this;e.opts=n.extend({},u,f);e.elem=n(r);e.targ=n(r).children(":first-child");e.timer=0;e.mHover=0;e.winFocus=1;a();o();n([t,i]).off("focus.jqet").on("focus.jqet",function(){e.winFocus=1}).off("blur.jqet").on("blur.jqet",function(){e.winFocus=0});e.opts.mousePause==1&&e.elem.mouseenter(function(){e.timerTemp=e.timer;s()}).mouseleave(function(){e.timerTemp!==0&&o()});n(e.opts.controls.up).on("click",function(n){n.preventDefault();h("up")});n(e.opts.controls.down).on("click",function(n){n.preventDefault();h("down")});n(e.opts.controls.toggle).on("click",function(n){n.preventDefault();e.timer==0?o():s()});return{up:function(){h("up")},down:function(){h("down")},start:o,stop:s,options:e.opts}}var r="easyTicker",u={direction:"up",easing:"swing",speed:"slow",interval:2e3,height:"auto",visible:0,mousePause:1,controls:{up:"",down:"",toggle:"",playText:"Play",stopText:"Stop"}};n.fn[r]=function(t){return this.each(function(){n.data(this,r)||n.data(this,r,new f(this,t))})}}(jQuery,window,document);
/*! The MIT License (MIT)
Copyright (c) 2015 Senthil Porunan<senthilraja39@gmail.com>
Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
Source: https://github.com/senthilporunan/jRate
Demo: http://www.toolitup.com/JRate.html
**/
(function(n){n.fn.jRate=function(t){"use strict";function s(n){return typeof n!="undefined"}function g(){if(s(i))return i.rating}function nt(n){if(!s(n)||n<i.min||n>i.max)throw n+" is not in range("+min+","+max+")";i.rating=n;e(n)}function tt(n){var f='<svg width="'+i.width+'" height='+i.height+' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"',o=i.horizontal,t=u.attr("id"),e='<defs><linearGradient id="'+t+"_grad"+n+'" x1="0%" y1="0%" x2="'+(o?100:0)+'%" y2="'+(o?0:100)+'%"><stop offset="0%"  stop-color='+i.backgroundColor+'/><stop offset="0%" stop-color='+i.backgroundColor+"/><\/linearGradient><\/defs>",r;switch(i.shape){case"STAR":r=f+'viewBox="0 12.705 512 486.59">'+e+'<polygon style="fill: url(#'+t+"_grad"+n+");stroke:"+i.strokeColor+";fill-opacity:"+ +i.transparency+";stroke-width:"+i.strokeWidth+'; "points="256.814,12.705 317.205,198.566 512.631,198.566 354.529,313.435 414.918,499.295 256.814,384.427 98.713,499.295 159.102,313.435 1,198.566 196.426,198.566 "/><\/svg>';break;case"CIRCLE":r=f+">"+e+'<circle  cx="'+i.width/2+'" cy="'+i.height/2+'" r="'+i.width/2+'" fill="url(#'+t+"_grad"+n+')" style="stroke:'+i.strokeColor+";fill-opacity:"+ +i.transparency+";stroke-width:"+i.strokeWidth+';"/><\/svg>';break;case"RECTANGLE":r=f+">"+e+'<rect width="'+i.width+'" height="'+i.height+'" fill="url(#'+t+"_grad"+n+')" style="stroke:'+i.strokeColor+";fill-opacity:"+ +i.transparency+";stroke-width:"+i.strokeWidth+';"/><\/svg>';break;case"TRIANGLE":r=f+">"+e+'<polygon points="'+i.width/2+",0 0,"+i.height+" "+i.width+","+i.height+'" fill="url(#'+t+"_grad"+n+')" style="stroke:'+i.strokeColor+";fill-opacity:"+ +i.transparency+";stroke-width:"+i.strokeWidth+';"/><\/svg>';break;case"RHOMBUS":r=f+">"+e+'<polygon points="'+i.width/2+",0 "+i.width+","+i.height/2+" "+i.width/2+","+i.height+" 0,"+i.height/2+'" fill="url(#'+t+"_grad"+n+')"  style="stroke:'+i.strokeColor+";fill-opacity:"+ +i.transparency+";stroke-width:"+i.strokeWidth+';"/><\/svg>';break;case"FOOD":r=f+'viewBox="0 0 50 50">'+e+'<path fill="url(#'+t+"_grad"+n+')" style="stroke:'+i.strokeColor+";fill-opacity:"+ +i.transparency+';"d="M45.694,21.194C45.694,9.764,36.43,0.5,25,0.5S4.306,9.764,4.306,21.194c0,8.621,5.272,16.005,12.764,19.115c-1.882,2.244-3.762,4.486-5.645,6.73c-0.429,0.5-0.458,1.602,0.243,2.145c0.7,0.551,1.757,0.252,2.139-0.289c1.878-2.592,3.753-5.189,5.63-7.783c1.774,0.494,3.633,0.777,5.561,0.777c1.85,0,3.64-0.266,5.349-0.723c1.617,2.563,3.238,5.121,4.862,7.684c0.34,0.555,1.365,0.91,2.088,0.414c0.728-0.492,0.759-1.58,0.368-2.096c-1.663-2.252-3.332-4.508-4.995-6.76C40.3,37.354,45.694,29.91,45.694,21.194z M25,37.824c-1.018,0-2.01-0.105-2.977-0.281c1.07-1.48,2.146-2.965,3.215-4.447c0.939,1.48,1.874,2.959,2.81,4.436C27.058,37.717,26.041,37.824,25,37.824z M30.155,37c-1.305-1.764-2.609-3.527-3.91-5.295c0.724-1,1.446-1.998,2.17-3c1.644,0.746,3.646,0,4.827-1.787c1.239-1.872,0.005,0,0.005,0.002c0.01-0.014,5.822-8.824,5.63-8.97c-0.186-0.15-3.804,4.771-6.387,8.081l-0.548-0.43c2.362-3.481,5.941-8.426,5.757-8.575c-0.189-0.146-3.959,4.655-6.652,7.878l-0.545-0.428c2.463-3.398,6.202-8.228,6.014-8.374c-0.188-0.15-4.115,4.528-6.917,7.67l-0.547-0.43c2.575-3.314,6.463-8.02,6.278-8.169c-0.191-0.15-5.808,6.021-7.319,7.651c-1.325,1.424-1.664,3.68-0.562,5.12c-0.703,0.84-1.41,1.678-2.113,2.518c-0.781-1.057-1.563-2.111-2.343-3.17c1.975-1.888,1.984-5.234-0.054-7.626c-2.14-2.565-6.331-5.22-8.51-3.818c-2.093,1.526-1.14,6.396,0.479,9.316c1.498,2.764,4.617,3.965,7.094,2.805c0.778,1.227,1.554,2.455,2.333,3.684c-1.492,1.783-2.984,3.561-4.478,5.342C13.197,34.826,8.38,28.574,8.38,21.191c0-9.183,7.444-16.631,16.632-16.631c9.188,0,16.625,7.447,16.625,16.631C41.63,28.576,36.816,34.828,30.155,37z"/><\/svg>';break;case"TWITTER":r=f+'viewBox="0 0 512 512">'+e+'<path fill="url(#'+t+"_grad"+n+')" style="stroke:'+i.strokeColor+";fill-opacity:"+ +i.transparency+';stroke-width:0.7px;"d="M512,97.209c-18.838,8.354-39.082,14.001-60.33,16.54c21.687-13,38.343-33.585,46.187-58.115c-20.299,12.039-42.778,20.78-66.705,25.49c-19.16-20.415-46.461-33.17-76.674-33.17c-58.011,0-105.043,47.029-105.043,105.039c0,8.233,0.929,16.25,2.72,23.939c-87.3-4.382-164.701-46.2-216.509-109.753c-9.042,15.514-14.223,33.558-14.223,52.809c0,36.444,18.544,68.596,46.73,87.433c-17.219-0.546-33.416-5.271-47.577-13.139c-0.01,0.438-0.01,0.878-0.01,1.321c0,50.894,36.209,93.348,84.261,103c-8.813,2.399-18.094,3.686-27.674,3.686c-6.769,0-13.349-0.66-19.764-1.887c13.368,41.73,52.16,72.104,98.126,72.949c-35.95,28.175-81.243,44.967-130.458,44.967c-8.479,0-16.84-0.497-25.058-1.471c46.486,29.806,101.701,47.197,161.021,47.197c193.211,0,298.868-160.062,298.868-298.872c0-4.554-0.103-9.084-0.305-13.59C480.11,136.773,497.918,118.273,512,97.209z"/><\/svg>';break;case"BULB":r=f+'viewBox="0 0 512 512">'+e+'<path fill="url(#'+t+"_grad"+n+')" style="stroke:'+i.strokeColor+";fill-opacity:"+ +i.transparency+';stroke-width:0.7px;"d="M384,192c0,64-64,127-64,192H192c0-63-64-128-64-192c0-70.688,57.313-128,128-128S384,121.313,384,192z M304,448h-96c-8.844,0-16,7.156-16,16s7.156,16,16,16h2.938c6.594,18.625,24.188,32,45.063,32s38.469-13.375,45.063-32H304c8.844,0,16-7.156,16-16S312.844,448,304,448z M304,400h-96c-8.844,0-16,7.156-16,16s7.156,16,16,16h96c8.844,0,16-7.156,16-16S312.844,400,304,400z M81.719,109.875l28.719,16.563c4.438-9.813,9.844-19,16.094-27.656L97.719,82.125L81.719,109.875z M272,33.625V0h-32v33.625C245.344,33.063,250.5,32,256,32S266.656,33.063,272,33.625z M190.438,46.438l-16.563-28.719l-27.75,16l16.656,28.813C171.438,56.281,180.625,50.875,190.438,46.438z M430.281,109.875l-16-27.75l-28.813,16.656c6.25,8.656,11.688,17.844,16.125,27.656L430.281,109.875z M365.844,33.719l-27.688-16l-16.563,28.719c9.781,4.438,19,9.844,27.625,16.063L365.844,33.719z M96,192c0-5.5,1.063-10.656,1.625-16H64v32h33.688C97.063,202.688,96,197.438,96,192z M414.375,176c0.563,5.344,1.625,10.5,1.625,16c0,5.438-1.063,10.688-1.688,16H448v-32H414.375z M388.094,286.719l26.188,15.125l16-27.719l-29.063-16.75C397.188,267.313,392.813,277.063,388.094,286.719z M81.719,274.125l16,27.719l25.969-14.969c-4.688-9.688-9.063-19.5-13.031-29.438L81.719,274.125z"/><\/svg>';break;case"BASKET":r=f+'viewBox="0 0 30 30">'+e+'<path fill="url(#'+t+"_grad"+n+')" style="stroke:'+i.strokeColor+";fill-opacity:"+ +i.transparency+';stroke-width:0.7px;"d="M28.835,9.955H7.947L5.74,1.352C5.632,0.795,5.16,0.375,4.595,0.375H1.169C0.523,0.375,0,0.922,0,1.597c0,0.673,0.523,1.22,1.169,1.22H3.7l5.312,20.71c-0.404,0.16-0.767,0.407-1.068,0.72v0.002l-0.002-0.002c-0.546,0.569-0.884,1.36-0.884,2.228c0,0.868,0.338,1.659,0.884,2.228l0.044,0.044c0.543,0.545,1.28,0.88,2.089,0.88c0.831,0,1.588-0.353,2.134-0.924c0.545-0.569,0.883-1.359,0.883-2.228c0-0.612-0.169-1.187-0.46-1.674h8.839c-0.292,0.486-0.461,1.062-0.461,1.674c0,0.868,0.338,1.659,0.884,2.228c0.544,0.57,1.301,0.924,2.133,0.924c0.831,0,1.585-0.353,2.131-0.924V28.7l0.003,0.001c0.545-0.569,0.883-1.359,0.883-2.228c0-0.617-0.172-1.198-0.467-1.686c0.57-0.08,1.008-0.592,1.008-1.208c0-0.675-0.523-1.221-1.169-1.221H11.128l-0.776-3.03h16.77c0.577,0,1.057-0.438,1.152-1.013l1.69-6.833c0.161-0.651-0.214-1.316-0.836-1.484c-0.097-0.025-0.197-0.039-0.292-0.039V9.955L28.835,9.955z M10.089,24.788c0.048,0.007,0.095,0.01,0.145,0.01V24.8h0.032c0.37,0.045,0.702,0.222,0.95,0.481c0.291,0.305,0.472,0.729,0.472,1.193c0,0.466-0.18,0.89-0.472,1.193c-0.29,0.305-0.696,0.493-1.142,0.493c-0.432,0-0.825-0.175-1.113-0.461l-0.029-0.032c-0.292-0.303-0.472-0.727-0.472-1.193c0-0.464,0.18-0.888,0.472-1.193H8.931c0.292-0.303,0.697-0.493,1.144-0.493H10.089L10.089,24.788z M23.834,24.8h0.383c0.356,0.045,0.677,0.207,0.921,0.449l0.029,0.032c0.291,0.305,0.473,0.729,0.473,1.193c0,0.466-0.182,0.89-0.473,1.193l0.001,0.002c-0.291,0.305-0.697,0.491-1.143,0.491c-0.445,0-0.85-0.188-1.142-0.493c-0.29-0.303-0.472-0.727-0.472-1.193c0-0.464,0.182-0.888,0.472-1.193C23.132,25.021,23.465,24.845,23.834,24.8L23.834,24.8z"/><\/svg>';break;default:throw Error("No such shape as "+i.shape);}return r}function it(){u.css("white-space","nowrap");u.css("cursor","pointer");u.css("fill",i.shape)}function rt(n,t){n.on("mousemove",h(t)).on("mouseenter",h(t)).on("click",ut(t)).on("mouseover",h(t)).on("hover",h(t)).on("mouseleave",v).on("mouseout",v).on("JRate.change",d).on("JRate.set",ft);if(i.touch)n.on("touchstart",b(t)).on("touchmove",b(t)).on("touchend",k(t)).on("tap",k(t))}function c(){for(var t=u.attr("id"),n=0;n<i.count;n++)r.eq(n).find("#"+t+"_grad"+(n+1)).find("stop").eq(0).attr({offset:"0%"}),r.eq(n).find("#"+t+"_grad"+(n+1)).find("stop").eq(0).attr({"stop-color":i.backgroundColor}),r.eq(n).find("#"+t+"_grad"+(n+1)).find("stop").eq(1).attr({offset:"0%"}),r.eq(n).find("#"+t+"_grad"+(n+1)).find("stop").eq(1).attr({"stop-color":i.backgroundColor})}function e(n){var v,h,f,a,e,t;if(c(),v=(i.max-i.min)/i.count,n=(n-i.min)/v,h=i.startColor,f=u.attr("id"),i.reverse)for(t=0;t<n;t++)a=i.count-1-t,r.eq(a).find("#"+f+"_grad"+(a+1)).find("stop").eq(0).attr({offset:"100%"}),r.eq(a).find("#"+f+"_grad"+(a+1)).find("stop").eq(0).attr({"stop-color":h}),parseInt(n)!==n&&(e=Math.ceil(i.count-n)-1,r.eq(e).find("#"+f+"_grad"+(e+1)).find("stop").eq(0).attr({offset:100-n*10%10*10+"%"}),r.eq(e).find("#"+f+"_grad"+(e+1)).find("stop").eq(0).attr({"stop-color":i.backgroundColor}),r.eq(e).find("#"+f+"_grad"+(e+1)).find("stop").eq(1).attr({offset:100-n*10%10*10+"%"}),r.eq(e).find("#"+f+"_grad"+(e+1)).find("stop").eq(1).attr({"stop-color":h})),s(o)&&(h=l(i.count-1,t));else for(t=0;t<n;t++)r.eq(t).find("#"+f+"_grad"+(t+1)).find("stop").eq(0).attr({offset:"100%"}),r.eq(t).find("#"+f+"_grad"+(t+1)).find("stop").eq(0).attr({"stop-color":h}),n*10%10>0&&(r.eq(Math.ceil(n)-1).find("#"+f+"_grad"+(t+1)).find("stop").eq(0).attr({offset:n*10%10*10+"%"}),r.eq(Math.ceil(n)-1).find("#"+f+"_grad"+(t+1)).find("stop").eq(0).attr({"stop-color":h})),s(o)&&(h=l(i.count,t))}function a(n){var t,i;return t=document.createElement("canvas"),t.height=1,t.width=1,i=t.getContext("2d"),i.fillStyle=n,i.fillRect(0,0,1,1),i.getImageData(0,0,1,1).data}function v(){i.readOnly||(e(i.rating),d(null,{rating:i.rating}))}function y(n){var t=1/i.precision;return Math.ceil(n*t)/t}function p(n,t,u,f){var s,h,c,o;i.readOnly||(s=r.eq(t-1),h=i.horizontal?(n.pageX-s.offset().left)/s.width():(n.pageY-s.offset().top)/s.height(),c=(i.max-i.min)/i.count,h=i.reverse?h:1-h,o=((i.reverse?i.max-i.min-t+1:t)-h)*c,o=i.min+Number(y(o)),o<i.minSelected&&(o=i.minSelected),o<=i.max&&o>=i.min&&(e(o),f&&(i.rating=o),s.trigger(u,{rating:o})))}function w(n,t,u,f){var c,l,s,h,a,o;i.readOnly||(c=n.originalEvent.changedTouches,c.length>1)||(l=c[0],s=r.eq(t-1),h=i.horizontal?(l.pageX-s.offset().left)/s.width():(l.pageY-s.offset().top)/s.height(),a=(i.max-i.min)/i.count,h=i.reverse?h:1-h,o=((i.reverse?i.max-i.min-t+1:t)-h)*a,o=i.min+Number(y(o)),o<i.minSelected&&(o=i.minSelected),o<=i.max&&o>=i.min&&(e(o),f&&(i.rating=o),s.trigger(u,{rating:o})))}function h(n){return function(t){p(t,n,"JRate.change")}}function ut(n){return function(t){p(t,n,"JRate.set",!0)}}function b(n){return function(t){w(t,n,"JRate.touch")}}function k(n){return function(t){w(t,n,"JRate.tap",!0)}}function d(n,t){i.onChange&&typeof i.onChange=="function"&&i.onChange.apply(this,[t.rating])}function ft(n,t){i.onSet&&typeof i.onSet=="function"&&i.onSet.apply(this,[t.rating])}function et(){for(var t,f,o,n=0;n<i.count;n++)u.append(tt(n+1));for(r=u.find("svg"),n=0;n<i.count;n++)t=r.eq(n),rt(t,n+1),i.horizontal?t.css("margin-right",i.shapeGap||"0px"):t.css({display:"block","margin-bottom":i.shapeGap||"0px"}),i.widthGrowth&&(f="scaleX("+(1+i.widthGrowth*n)+")",t.css({transform:f,"-webkit-transform":f,"-moz-transform":f,"-ms-transform":f,"-o-transform":f})),i.heightGrowth&&(o="scaleY("+(1+i.heightGrowth*n)+")",t.css({transform:o,"-webkit-transform":o,"-moz-transform":o,"-ms-transform":o,"-o-transform":o}));c();e(i.rating);r.attr({width:i.width,height:i.height})}var u=n(this),i=n.extend({},{rating:0,shape:"STAR",count:5,width:"20",height:"20",widthGrowth:0,heightGrowth:0,backgroundColor:"transparent",startColor:"yellow",endColor:"green",strokeColor:"black",transparency:1,shapeGap:"0px",opacity:1,min:0,max:5,precision:.1,minSelected:0,strokeWidth:"2px",horizontal:!0,reverse:!1,readOnly:!1,touch:!0,onChange:null,onSet:null},t),f,o,r,l=function(n,t){for(var e,s,u=[],r=0;r<3;r++)e=Math.round((f[r]-o[r])/n),s=f[r]+e*(t+1),u[r]=s/256?(f[r]-e*(t+1))%256:(f[r]+e*(t+1))%256;return"rgba("+u[0]+","+u[1]+","+u[2]+","+i.opacity+")"};return i.startColor&&(f=a(i.startColor)),i.endColor&&(o=a(i.endColor)),it(),et(),n.extend({},this,{getRating:g,setRating:nt,setReadOnly:function(n){i.readOnly=n},isReadOnly:function(){return i.readOnly}})}})(jQuery);
/*!
 * jQuery Stepy - A Wizard Plugin
 * --------------------------------------------------------------
 *
 * jQuery Stepy is a plugin that generates a customizable wizard.
 *
 * Licensed under The MIT License
 *
 * @version        1.1.0
 * @since          2010-07-03
 * @author         Washington Botelho
 * @documentation  wbotelhos.com/stepy
 *
 * --------------------------------------------------------------
 *
 *  <form>
 *    <fieldset title="Step 1">
 *      <legend>description one</legend>
 *      <!-- inputs -->
 *    </fieldset>
 *
 *    <fieldset title="Step 2">
 *      <legend>description two</legend>
 *      <!-- inputs -->
 *    </fieldset>
 *
 *    <input type="submit" />
 *  </form>
 *
 *  $('form').stepy();
 *
 */
(function(n){"use strict";var t={init:function(i){return this.each(function(){var u,r;t.destroy.call(this);this.stepyOptions=n.extend({},n.fn.stepy.defaults,i);u=n(this);t._generateId.call(this);this.stepyOptions.header&&(this.header=t._header.call(this));this.steps=u.find("."+this.stepyOptions.stepClass);r=this;this.steps.each(function(i){var u=n(this);u.addClass(r.stepyOptions.stepClass);i===0&&u.addClass("stepy-active");r.stepyOptions.header&&t._createHead.call(r,this,i)});t._bindNextButton.call(this);t._bindBackButton.call(this);t._bindFinishButton.call(this);this.stepyOptions.header&&t._bindHeader.call(this);this.stepyOptions.enter&&t._bindEnter.call(this);this.steps.first().find(":input:visible:enabled:first").trigger("select").trigger("focus");t._setState.call(this,{settings:this.stepyOptions,index:0,stepy:!0});t._stateButton.call(this,this.steps)})},_bindBackButton:function(){var i=n(this).find(this.stepyOptions.backButton);if(i.length)i.on("click.stepy",function(i){i.preventDefault();var r=n(this).data("index")-1;r>=0&&(!this.stepyOptions.back||t._execute.call(this,this.stepyOptions.back,r,this.steps.length))&&t.step.call(this,r)}.bind(this))},_bindEnter:function(){var t=this;this.steps.find("input:not(:button, :submit)").on("keypress.stepy",function(i){var f=i.keyCode?i.keyCode:i.which,r,u;f===13&&(i.preventDefault(),r=n(this).closest("."+t.stepyOptions.stepClass),u=r.next("."+t.stepyOptions.stepClass).length,u?r.find(t.stepyOptions.nextButton).trigger("click"):t.finishButton&&t.finishButton.trigger("click"))})},_bindFinishButton:function(){if(this.finishButton=n(this).find(this.stepyOptions.finishButton),!this.finishButton.length)return n.error('submit button "'+this.stepyOptions.finishButton+'" missing.');this.finishButton.on("click.stepy",t._onFinishButton.bind(this))},_bindHeader:function(){if(this.heads=this.header.find("li"),this.heads.first().addClass("stepy-active"),this.stepyOptions.titleClick){var n=this;this.heads.on("click",function(){t._bindHeaderHandler.call(n,this)})}else this.heads.css("cursor","default")},_bindHeaderHandler:function(i){var u=parseInt(n(this.heads).filter(".stepy-active")[0].id.match(/\d/)[0],10),r=parseInt(i.id.match(/\d/)[0],10);if(r>u){if(this.stepyOptions.next&&!t._execute.call(this,this.stepyOptions.next,r))return!1}else if(r<u&&this.stepyOptions.back&&!t._execute.call(this,this.stepyOptions.back,r))return!1;r!=u&&t.step.call(this,r)},_bindNextButton:function(){var i=n(this).find(this.stepyOptions.nextButton);if(i.length)i.on("click.stepy",function(i){i.preventDefault();var r=n(this).data("index")+1;r<this.steps.length&&(!this.stepyOptions.next||t._execute.call(this,this.stepyOptions.next,r,this.steps.length))&&t.step.call(this,r)}.bind(this))},_createHead:function(i,r){var i=n(i).attr("id",this.getAttribute("id")+"-step-"+r),u=t._head.call(this,r),f;u.append(t._title.call(this,i));this.stepyOptions.description&&(f=t._description.call(this,i),f.length&&u.append(f));this.header.append(u)},_description:function(t){var i=t.find("."+this.stepyOptions.legendClass);return(this.stepyOptions.legend||i.hide(),!i.length)?null:n("<span />",{html:i.html()})},_execute:function(n,t,i){if(n===undefined)return!0;var r=n.call(this,t,i);return r||r===undefined},_generateId:function(){var t=this.getAttribute("id");(t===undefined||t==="")&&n(this).attr("id","stepy-"+Math.random().toString().substring(2))},_head:function(t){return n("<li />",{id:this.getAttribute("id")+"-head-"+t})},_header:function(){var t=n("<ul />",{id:this.getAttribute("id")+"-header","class":"stepy-header"});return this.stepyOptions.titleTarget?t.appendTo(this.stepyOptions.titleTarget):t.insertBefore(this),t},_onFinishButton:function(n){var i=undefined,r;this.tagName==="FORM"&&(i=this.getAttribute("onsubmit"),this.setAttribute("onsubmit","return false;"));t._execute.call(this,this.stepyOptions.finish,this.steps.length-1)?this.tagName==="FORM"&&(i?this.setAttribute("onsubmit",i):this.removeAttribute("onsubmit"),r=this.finishButton.attr("type")==="submit",r&&(!this.stepyOptions.validate||t.validate.call(this,this.steps.length-1))&&this.submit()):n.preventDefault()},_setState:function(t){var i=n(this);i.data(n.extend({},i.data(),t))},_stateButton:function(t){var i=n(this),r=i.data("index");r===0?(i.find(this.stepyOptions.backButton).removeClass("stepy-active"),i.find(this.stepyOptions.finishButton).removeClass("stepy-active"),i.find(this.stepyOptions.nextButton).addClass("stepy-active")):r===t.length-1?(i.find(this.stepyOptions.backButton).addClass("stepy-active"),i.find(this.stepyOptions.finishButton).addClass("stepy-active"),i.find(this.stepyOptions.nextButton).removeClass("stepy-active")):(i.find(this.stepyOptions.backButton).addClass("stepy-active"),i.find(this.stepyOptions.finishButton).removeClass("stepy-active"),i.find(this.stepyOptions.nextButton).addClass("stepy-active"))},_title:function(t){return n("<div />",{html:t.attr("title")||"--"})},_transition:function(t){var i=this.steps.eq(n(this).data("index")),r=this.steps.eq(t);if(this.stepyOptions.transition==="fade")i.animate({opacity:0},this.stepyOptions.duration,function(){i.removeClass("stepy-active");r.addClass("stepy-active").animate({opacity:1},this.stepyOptions.duration)}.bind(this));else if(this.stepyOptions.transition==="slide"){var u=i.index()<r.index(),f=(u?-1:1)*i.outerWidth(),e=(u?1:-1)*r.outerWidth(),o=0;i.animate({"margin-left":f},this.stepyOptions.duration,function(){i.removeClass("stepy-active");r.animate({"margin-left":e},0).addClass("stepy-active").animate({"margin-left":o},this.stepyOptions.duration)}.bind(this))}},destroy:function(){return n(this).each(function(){var t=n(this),i;t.data("stepy")&&(i=t.data("stepy",!1).find(".stepy-active").removeClass("stepy-active"),t.find(".stepy-errors").remove())})},step:function(i){var r=i,s=n(this),u=s.find("."+this.stepyOptions.stepClass),o,f,e;if(i>u.length&&(i=u.length),this.stepyOptions.validate)for(o=!0,f=0;f<i;f++)if(o&=t.validate.call(this,f),this.stepyOptions.block&&!o){r=f;break}return this.stepyOptions.transition?t._transition.call(this,r):u.removeClass("stepy-active").eq(r).addClass("stepy-active"),this.stepyOptions.header&&this.heads.removeClass("stepy-active").eq(r).addClass("stepy-active"),this.tagName==="FORM"&&(e=u.eq(r),e=r===i?e.find(":input:enabled:visible"):e.find(".error").trigger("select").trigger("focus"),e.first().trigger("select").trigger("focus")),this.stepyOptions.select&&this.stepyOptions.select.call(this,r,u.length),t._setState.call(this,{index:r}),t._stateButton.call(this,u),s},validate:function(t){var f=n(this);if(0)return!0;var i=this,e=f.find("."+this.stepyOptions.stepClass).eq(t),r=!0,u=n("#"+this.getAttribute("id")+"-header").children().eq(t);return n(e.find(":input:enabled").get().reverse()).each(function(){var n=i.stepyOptions.validate.call(i,this);n===undefined&&(n=!0);r=r&&n;r?i.stepyOptions.errorImage&&u.removeClass("stepy-error"):(i.stepyOptions.errorImage&&u.addClass("stepy-error"),this.focus())}),r}};n.fn.stepy=function(i){if(t[i])return t[i].apply(this[0],Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exist!");else return t.init.apply(this,arguments)};n.fn.stepy.defaults={back:undefined,backButton:".stepy-back",block:!1,description:!0,duration:0,enter:!0,errorImage:!1,finish:undefined,finishButton:".stepy-finish",header:!0,ignore:"",legend:!0,legendClass:"stepy-legend",next:undefined,nextButton:".stepy-next",select:undefined,stepClass:"stepy-step",titleClick:!1,titleTarget:undefined,transition:undefined,validate:undefined}})(jQuery);
/*!
 * Isotope PACKAGED v3.0.6
 *
 * Licensed GPLv3 for open source use
 * or Isotope Commercial License for commercial use
 *
 * https://isotope.metafizzy.co
 * Copyright 2010-2018 Metafizzy
 */
(function(n,t){typeof define=="function"&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){return t(n,i)}):typeof module=="object"&&module.exports?module.exports=t(n,require("jquery")):n.jQueryBridget=t(n,n.jQuery)})(window,function(n,t){"use strict";function u(i,u,o){function s(n,t,u){var f,e="$()."+i+'("'+t+'")';return n.each(function(n,s){var h=o.data(s,i),c,l;if(!h){r(i+" not initialized. Cannot call methods, i.e. "+e);return}if(c=h[t],!c||t.charAt(0)=="_"){r(e+" is not a valid method");return}l=c.apply(h,u);f=f===undefined?l:f}),f!==undefined?f:n}function h(n,t){n.each(function(n,r){var f=o.data(r,i);f?(f.option(t),f._init()):(f=new u(r,t),o.data(r,i,f))})}(o=o||t||n.jQuery,o)&&(u.prototype.option||(u.prototype.option=function(n){o.isPlainObject(n)&&(this.options=o.extend(!0,this.options,n))}),o.fn[i]=function(n){if(typeof n=="string"){var t=e.call(arguments,1);return s(this,n,t)}return h(this,n),this},f(o))}function f(n){!n||n&&n.bridget||(n.bridget=u)}var e=Array.prototype.slice,i=n.console,r=typeof i=="undefined"?function(){}:function(n){i.error(n)};return f(t||n.jQuery),u}),function(n,t){typeof define=="function"&&define.amd?define("ev-emitter/ev-emitter",t):typeof module=="object"&&module.exports?module.exports=t():n.EvEmitter=t()}(typeof window!="undefined"?window:this,function(){function t(){}var n=t.prototype;return n.on=function(n,t){if(n&&t){var i=this._events=this._events||{},r=i[n]=i[n]||[];return r.indexOf(t)==-1&&r.push(t),this}},n.once=function(n,t){if(n&&t){this.on(n,t);var i=this._onceEvents=this._onceEvents||{},r=i[n]=i[n]||{};return r[t]=!0,this}},n.off=function(n,t){var i=this._events&&this._events[n],r;if(i&&i.length)return r=i.indexOf(t),r!=-1&&i.splice(r,1),this},n.emitEvent=function(n,t){var i=this._events&&this._events[n],u,f,r,e;if(i&&i.length){for(i=i.slice(0),t=t||[],u=this._onceEvents&&this._onceEvents[n],f=0;f<i.length;f++)r=i[f],e=u&&u[r],e&&(this.off(n,r),delete u[r]),r.apply(this,t);return this}},n.allOff=function(){delete this._events;delete this._onceEvents},t});
/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */
(function(n,t){typeof define=="function"&&define.amd?define("get-size/get-size",t):typeof module=="object"&&module.exports?module.exports=t():n.getSize=t()})(window,function(){"use strict";function n(n){var t=parseFloat(n),i=n.indexOf("%")==-1&&!isNaN(t);return i&&t}function o(){}function h(){for(var u,i={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=0;n<r;n++)u=t[n],i[u]=0;return i}function u(n){var t=getComputedStyle(n);return t||s("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}function c(){var t,r,o;f||(f=!0,t=document.createElement("div"),t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style.boxSizing="border-box",r=document.body||document.documentElement,r.appendChild(t),o=u(t),i=Math.round(n(o.width))==200,e.isBoxSizeOuter=i,r.removeChild(t))}function e(f){var o,e,a,s,l;if(c(),typeof f=="string"&&(f=document.querySelector(f)),f&&typeof f=="object"&&f.nodeType){if(o=u(f),o.display=="none")return h();for(e={},e.width=f.offsetWidth,e.height=f.offsetHeight,a=e.isBorderBox=o.boxSizing=="border-box",s=0;s<r;s++){var v=t[s],nt=o[v],y=parseFloat(nt);e[v]=isNaN(y)?0:y}var p=e.paddingLeft+e.paddingRight,w=e.paddingTop+e.paddingBottom,tt=e.marginLeft+e.marginRight,it=e.marginTop+e.marginBottom,b=e.borderLeftWidth+e.borderRightWidth,k=e.borderTopWidth+e.borderBottomWidth,d=a&&i,g=n(o.width);return g!==!1&&(e.width=g+(d?0:p+b)),l=n(o.height),l!==!1&&(e.height=l+(d?0:w+k)),e.innerWidth=e.width-(p+b),e.innerHeight=e.height-(w+k),e.outerWidth=e.width+tt,e.outerHeight=e.height+it,e}}var s=typeof console=="undefined"?o:function(n){console.error(n)},t=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],r=t.length,f=!1,i;return e}),function(n,t){"use strict";typeof define=="function"&&define.amd?define("desandro-matches-selector/matches-selector",t):typeof module=="object"&&module.exports?module.exports=t():n.matchesSelector=t()}(window,function(){"use strict";var n=function(){var t=window.Element.prototype,i,n,u,r;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(i=["webkit","moz","ms","o"],n=0;n<i.length;n++)if(u=i[n],r=u+"MatchesSelector",t[r])return r}();return function(t,i){return t[n](i)}}),function(n,t){typeof define=="function"&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return t(n,i)}):typeof module=="object"&&module.exports?module.exports=t(n,require("desandro-matches-selector")):n.fizzyUIUtils=t(n,n.matchesSelector)}(window,function(n,t){var i={},u,r;return i.extend=function(n,t){for(var i in t)n[i]=t[i];return n},i.modulo=function(n,t){return(n%t+t)%t},u=Array.prototype.slice,i.makeArray=function(n){if(Array.isArray(n))return n;if(n===null||n===undefined)return[];var t=typeof n=="object"&&typeof n.length=="number";return t?u.call(n):[n]},i.removeFrom=function(n,t){var i=n.indexOf(t);i!=-1&&n.splice(i,1)},i.getParent=function(n,i){while(n.parentNode&&n!=document.body)if(n=n.parentNode,t(n,i))return n},i.getQueryElement=function(n){return typeof n=="string"?document.querySelector(n):n},i.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},i.filterFindElements=function(n,r){n=i.makeArray(n);var u=[];return n.forEach(function(n){var f,i;if(n instanceof HTMLElement){if(!r){u.push(n);return}for(t(n,r)&&u.push(n),f=n.querySelectorAll(r),i=0;i<f.length;i++)u.push(f[i])}}),u},i.debounceMethod=function(n,t,i){i=i||100;var u=n.prototype[t],r=t+"Timeout";n.prototype[t]=function(){var f=this[r],t,n;clearTimeout(f);t=arguments;n=this;this[r]=setTimeout(function(){u.apply(n,t);delete n[r]},i)}},i.docReady=function(n){var t=document.readyState;t=="complete"||t=="interactive"?setTimeout(n):document.addEventListener("DOMContentLoaded",n)},i.toDashed=function(n){return n.replace(/(.)([A-Z])/g,function(n,t,i){return t+"-"+i}).toLowerCase()},r=n.console,i.htmlInit=function(t,u){i.docReady(function(){var e=i.toDashed(u),f="data-"+e,s=document.querySelectorAll("["+f+"]"),h=document.querySelectorAll(".js-"+e),c=i.makeArray(s).concat(i.makeArray(h)),l=f+"-options",o=n.jQuery;c.forEach(function(n){var i=n.getAttribute(f)||n.getAttribute(l),e,s;try{e=i&&JSON.parse(i)}catch(h){r&&r.error("Error parsing "+f+" on "+n.className+": "+h);return}s=new t(n,e);o&&o.data(n,u,s)})})},i}),function(n,t){typeof define=="function"&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],t):typeof module=="object"&&module.exports?module.exports=t(require("ev-emitter"),require("get-size")):(n.Outlayer={},n.Outlayer.Item=t(n.EvEmitter,n.getSize))}(window,function(n,t){"use strict";function l(n){for(var t in n)return!1;return t=null,!0}function u(n,t){n&&(this.element=n,this.layout=t,this.position={x:0,y:0},this._create())}function v(n){return n.replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()})}var f=document.documentElement.style,r=typeof f.transition=="string"?"transition":"WebkitTransition",e=typeof f.transform=="string"?"transform":"WebkitTransform",o={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[r],a={transform:e,transition:r,transitionDuration:r+"Duration",transitionProperty:r+"Property",transitionDelay:r+"Delay"},i=u.prototype=Object.create(n.prototype),s,h,c;return i.constructor=u,i._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:"absolute"})},i.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},i.getSize=function(){this.size=t(this.element)},i.css=function(n){var r=this.element.style,t,i;for(t in n)i=a[t]||t,r[i]=n[t]},i.getPosition=function(){var r=getComputedStyle(this.element),u=this.layout._getOption("originLeft"),f=this.layout._getOption("originTop"),e=r[u?"left":"right"],o=r[f?"top":"bottom"],n=parseFloat(e),t=parseFloat(o),i=this.layout.size;e.indexOf("%")!=-1&&(n=n/100*i.width);o.indexOf("%")!=-1&&(t=t/100*i.height);n=isNaN(n)?0:n;t=isNaN(t)?0:t;n-=u?i.paddingLeft:i.paddingRight;t-=f?i.paddingTop:i.paddingBottom;this.position.x=n;this.position.y=t},i.layoutPosition=function(){var r=this.layout.size,n={},t=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),u=t?"paddingLeft":"paddingRight",f=t?"left":"right",e=t?"right":"left",o=this.position.x+r[u];n[f]=this.getXValue(o);n[e]="";var s=i?"paddingTop":"paddingBottom",h=i?"top":"bottom",c=i?"bottom":"top",l=this.position.y+r[s];n[h]=this.getYValue(l);n[c]="";this.css(n);this.emitEvent("layout",[this])},i.getXValue=function(n){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!t?n/this.layout.size.width*100+"%":n+"px"},i.getYValue=function(n){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&t?n/this.layout.size.height*100+"%":n+"px"},i._transitionTo=function(n,t){this.getPosition();var r=this.position.x,u=this.position.y,f=n==this.position.x&&t==this.position.y;if(this.setPosition(n,t),f&&!this.isTransitioning){this.layoutPosition();return}var e=n-r,o=t-u,i={};i.transform=this.getTranslate(e,o);this.transition({to:i,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},i.getTranslate=function(n,t){var i=this.layout._getOption("originLeft"),r=this.layout._getOption("originTop");return n=i?n:-n,t=r?t:-t,"translate3d("+n+"px, "+t+"px, 0)"},i.goTo=function(n,t){this.setPosition(n,t);this.layoutPosition()},i.moveTo=i._transitionTo,i.setPosition=function(n,t){this.position.x=parseFloat(n);this.position.y=parseFloat(t)},i._nonTransition=function(n){this.css(n.to);n.isCleaning&&this._removeStyles(n.to);for(var t in n.onTransitionEnd)n.onTransitionEnd[t].call(this)},i.transition=function(n){var i,t,r;if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(n);return}i=this._transn;for(t in n.onTransitionEnd)i.onEnd[t]=n.onTransitionEnd[t];for(t in n.to)i.ingProperties[t]=!0,n.isCleaning&&(i.clean[t]=!0);n.from&&(this.css(n.from),r=this.element.offsetHeight,r=null);this.enableTransition(n.to);this.css(n.to);this.isTransitioning=!0},s="opacity,"+v(e),i.enableTransition=function(){if(!this.isTransitioning){var n=this.layout.options.transitionDuration;n=typeof n=="number"?n+"ms":n;this.css({transitionProperty:s,transitionDuration:n,transitionDelay:this.staggerDelay||0});this.element.addEventListener(o,this,!1)}},i.onwebkitTransitionEnd=function(n){this.ontransitionend(n)},i.onotransitionend=function(n){this.ontransitionend(n)},h={"-webkit-transform":"transform"},i.ontransitionend=function(n){var t,i,r;n.target===this.element&&(t=this._transn,i=h[n.propertyName]||n.propertyName,delete t.ingProperties[i],l(t.ingProperties)&&this.disableTransition(),i in t.clean&&(this.element.style[n.propertyName]="",delete t.clean[i]),i in t.onEnd&&(r=t.onEnd[i],r.call(this),delete t.onEnd[i]),this.emitEvent("transitionEnd",[this]))},i.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(o,this,!1);this.isTransitioning=!1},i._removeStyles=function(n){var t={};for(var i in n)t[i]="";this.css(t)},c={transitionProperty:"",transitionDuration:"",transitionDelay:""},i.removeTransitionStyles=function(){this.css(c)},i.stagger=function(n){n=isNaN(n)?0:n;this.staggerDelay=n+"ms"},i.removeElem=function(){this.element.parentNode.removeChild(this.element);this.css({display:""});this.emitEvent("remove",[this])},i.remove=function(){if(!r||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}this.once("transitionEnd",function(){this.removeElem()});this.hide()},i.reveal=function(){delete this.isHidden;this.css({display:""});var n=this.layout.options,t={},i=this.getHideRevealTransitionEndProperty("visibleStyle");t[i]=this.onRevealTransitionEnd;this.transition({from:n.hiddenStyle,to:n.visibleStyle,isCleaning:!0,onTransitionEnd:t})},i.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},i.getHideRevealTransitionEndProperty=function(n){var t=this.layout.options[n],i;if(t.opacity)return"opacity";for(i in t)return i},i.hide=function(){this.isHidden=!0;this.css({display:""});var n=this.layout.options,t={},i=this.getHideRevealTransitionEndProperty("hiddenStyle");t[i]=this.onHideTransitionEnd;this.transition({from:n.visibleStyle,to:n.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},i.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},i.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},u});
/*!
 * Outlayer v2.1.1
 * the brains and guts of a layout library
 * MIT license
 */
(function(n,t){"use strict";typeof define=="function"&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(i,r,u,f){return t(n,i,r,u,f)}):typeof module=="object"&&module.exports?module.exports=t(n,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):n.Outlayer=t(n,n.EvEmitter,n.getSize,n.fizzyUIUtils,n.Outlayer.Item)})(window,function(n,t,i,r,u){"use strict";function e(n,t){var i=r.getQueryElement(n),u,f;if(!i){h&&h.error("Bad element for "+this.constructor.namespace+": "+(i||n));return}this.element=i;o&&(this.$element=o(this.element));this.options=r.extend({},this.constructor.defaults);this.option(t);u=++v;this.element.outlayerGUID=u;s[u]=this;this._create();f=this._getOption("initLayout");f&&this.layout()}function l(n){function t(){n.apply(this,arguments)}return t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t}function y(n){var r;if(typeof n=="number")return n;var t=n.match(/(^\d*\.?\d*)(\w*)/),i=t&&t[1],u=t&&t[2];return i.length?(i=parseFloat(i),r=a[u]||1,i*r):0}var h=n.console,o=n.jQuery,c=function(){},v=0,s={},f,a;return e.namespace="outlayer",e.Item=u,e.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},f=e.prototype,r.extend(f,t.prototype),f.option=function(n){r.extend(this.options,n)},f._getOption=function(n){var t=this.constructor.compatOptions[n];return t&&this.options[t]!==undefined?this.options[t]:this.options[n]},e.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},f._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);r.extend(this.element.style,this.options.containerStyle);var n=this._getOption("resize");n&&this.bindResize()},f.reloadItems=function(){this.items=this._itemize(this.element.children)},f._itemize=function(n){for(var u,f,i=this._filterFindItemElements(n),e=this.constructor.Item,r=[],t=0;t<i.length;t++)u=i[t],f=new e(u,this),r.push(f);return r},f._filterFindItemElements=function(n){return r.filterFindElements(n,this.options.itemSelector)},f.getItemElements=function(){return this.items.map(function(n){return n.element})},f.layout=function(){this._resetLayout();this._manageStamps();var n=this._getOption("layoutInstant"),t=n!==undefined?n:!this._isLayoutInited;this.layoutItems(this.items,t);this._isLayoutInited=!0},f._init=f.layout,f._resetLayout=function(){this.getSize()},f.getSize=function(){this.size=i(this.element)},f._getMeasurement=function(n,t){var r=this.options[n],u;r?(typeof r=="string"?u=this.element.querySelector(r):r instanceof HTMLElement&&(u=r),this[n]=u?i(u)[t]:r):this[n]=0},f.layoutItems=function(n,t){n=this._getItemsForLayout(n);this._layoutItems(n,t);this._postLayout()},f._getItemsForLayout=function(n){return n.filter(function(n){return!n.isIgnored})},f._layoutItems=function(n,t){if(this._emitCompleteOnItems("layout",n),n&&n.length){var i=[];n.forEach(function(n){var r=this._getItemLayoutPosition(n);r.item=n;r.isInstant=t||n.isLayoutInstant;i.push(r)},this);this._processLayoutQueue(i)}},f._getItemLayoutPosition=function(){return{x:0,y:0}},f._processLayoutQueue=function(n){this.updateStagger();n.forEach(function(n,t){this._positionItem(n.item,n.x,n.y,n.isInstant,t)},this)},f.updateStagger=function(){var n=this.options.stagger;if(n===null||n===undefined){this.stagger=0;return}return this.stagger=y(n),this.stagger},f._positionItem=function(n,t,i,r,u){r?n.goTo(t,i):(n.stagger(u*this.stagger),n.moveTo(t,i))},f._postLayout=function(){this.resizeContainer()},f.resizeContainer=function(){var t=this._getOption("resizeContainer"),n;t&&(n=this._getContainerSize(),n&&(this._setContainerMeasure(n.width,!0),this._setContainerMeasure(n.height,!1)))},f._getContainerSize=c,f._setContainerMeasure=function(n,t){if(n!==undefined){var i=this.size;i.isBorderBox&&(n+=t?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth);n=Math.max(n,0);this.element.style[t?"width":"height"]=n+"px"}},f._emitCompleteOnItems=function(n,t){function r(){f.dispatchEvent(n+"Complete",null,[t])}function e(){i++;i==u&&r()}var f=this,u=t.length,i;if(!t||!u){r();return}i=0;t.forEach(function(t){t.once(n,e)})},f.dispatchEvent=function(n,t,i){var u=t?[t].concat(i):i,r;this.emitEvent(n,u);o&&(this.$element=this.$element||o(this.element),t?(r=o.Event(t),r.type=n,this.$element.trigger(r,i)):this.$element.trigger(n,i))},f.ignore=function(n){var t=this.getItem(n);t&&(t.isIgnored=!0)},f.unignore=function(n){var t=this.getItem(n);t&&delete t.isIgnored},f.stamp=function(n){(n=this._find(n),n)&&(this.stamps=this.stamps.concat(n),n.forEach(this.ignore,this))},f.unstamp=function(n){(n=this._find(n),n)&&n.forEach(function(n){r.removeFrom(this.stamps,n);this.unignore(n)},this)},f._find=function(n){if(n)return typeof n=="string"&&(n=this.element.querySelectorAll(n)),r.makeArray(n)},f._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},f._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),n=this.size;this._boundingRect={left:t.left+n.paddingLeft+n.borderLeftWidth,top:t.top+n.paddingTop+n.borderTopWidth,right:t.right-(n.paddingRight+n.borderRightWidth),bottom:t.bottom-(n.paddingBottom+n.borderBottomWidth)}},f._manageStamp=c,f._getElementOffset=function(n){var t=n.getBoundingClientRect(),r=this._boundingRect,u=i(n);return{left:t.left-r.left-u.marginLeft,top:t.top-r.top-u.marginTop,right:r.right-t.right-u.marginRight,bottom:r.bottom-t.bottom-u.marginBottom}},f.handleEvent=r.handleEvent,f.bindResize=function(){n.addEventListener("resize",this);this.isResizeBound=!0},f.unbindResize=function(){n.removeEventListener("resize",this);this.isResizeBound=!1},f.onresize=function(){this.resize()},r.debounceMethod(e,"onresize",100),f.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},f.needsResizeLayout=function(){var n=i(this.element),t=this.size&&n;return t&&n.innerWidth!==this.size.innerWidth},f.addItems=function(n){var t=this._itemize(n);return t.length&&(this.items=this.items.concat(t)),t},f.appended=function(n){var t=this.addItems(n);t.length&&(this.layoutItems(t,!0),this.reveal(t))},f.prepended=function(n){var t=this._itemize(n),i;t.length&&(i=this.items.slice(0),this.items=t.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(i))},f.reveal=function(n){if(this._emitCompleteOnItems("reveal",n),n&&n.length){var t=this.updateStagger();n.forEach(function(n,i){n.stagger(i*t);n.reveal()})}},f.hide=function(n){if(this._emitCompleteOnItems("hide",n),n&&n.length){var t=this.updateStagger();n.forEach(function(n,i){n.stagger(i*t);n.hide()})}},f.revealItemElements=function(n){var t=this.getItems(n);this.reveal(t)},f.hideItemElements=function(n){var t=this.getItems(n);this.hide(t)},f.getItem=function(n){for(var i,t=0;t<this.items.length;t++)if(i=this.items[t],i.element==n)return i},f.getItems=function(n){n=r.makeArray(n);var t=[];return n.forEach(function(n){var i=this.getItem(n);i&&t.push(i)},this),t},f.remove=function(n){var t=this.getItems(n);(this._emitCompleteOnItems("remove",t),t&&t.length)&&t.forEach(function(n){n.remove();r.removeFrom(this.items,n)},this)},f.destroy=function(){var n=this.element.style,t;n.height="";n.position="";n.width="";this.items.forEach(function(n){n.destroy()});this.unbindResize();t=this.element.outlayerGUID;delete s[t];delete this.element.outlayerGUID;o&&o.removeData(this.element,this.constructor.namespace)},e.data=function(n){n=r.getQueryElement(n);var t=n&&n.outlayerGUID;return t&&s[t]},e.create=function(n,t){var i=l(e);return i.defaults=r.extend({},e.defaults),r.extend(i.defaults,t),i.compatOptions=r.extend({},e.compatOptions),i.namespace=n,i.data=e.data,i.Item=l(u),r.htmlInit(i,n),o&&o.bridget&&o.bridget(n,i),i},a={ms:1,s:1e3},e.Item=u,e}),function(n,t){typeof define=="function"&&define.amd?define("isotope-layout/js/item",["outlayer/outlayer"],t):typeof module=="object"&&module.exports?module.exports=t(require("outlayer")):(n.Isotope=n.Isotope||{},n.Isotope.Item=t(n.Outlayer))}(window,function(n){"use strict";function i(){n.Item.apply(this,arguments)}var t=i.prototype=Object.create(n.Item.prototype),u=t._create,r;return t._create=function(){this.id=this.layout.itemGUID++;u.call(this);this.sortData={}},t.updateSortData=function(){var t,i,n,r;if(!this.isIgnored){this.sortData.id=this.id;this.sortData["original-order"]=this.id;this.sortData.random=Math.random();t=this.layout.options.getSortData;i=this.layout._sorters;for(n in t)r=i[n],this.sortData[n]=r(this.element,this)}},r=t.destroy,t.destroy=function(){r.apply(this,arguments);this.css({display:""})},i}),function(n,t){typeof define=="function"&&define.amd?define("isotope-layout/js/layout-mode",["get-size/get-size","outlayer/outlayer"],t):typeof module=="object"&&module.exports?module.exports=t(require("get-size"),require("outlayer")):(n.Isotope=n.Isotope||{},n.Isotope.LayoutMode=t(n.getSize,n.Outlayer))}(window,function(n,t){"use strict";function r(n){this.isotope=n;n&&(this.options=n.options[this.namespace],this.element=n.element,this.items=n.filteredItems,this.size=n.size)}var i=r.prototype;return["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout","_getOption"].forEach(function(n){i[n]=function(){return t.prototype[n].apply(this.isotope,arguments)}}),i.needsVerticalResizeLayout=function(){var t=n(this.isotope.element),i=this.isotope.size&&t;return i&&t.innerHeight!=this.isotope.size.innerHeight},i._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},i.getColumnWidth=function(){this.getSegmentSize("column","Width")},i.getRowHeight=function(){this.getSegmentSize("row","Height")},i.getSegmentSize=function(n,t){var i=n+t,u="outer"+t,r;(this._getMeasurement(i,u),this[i])||(r=this.getFirstItemSize(),this[i]=r&&r[u]||this.isotope.size["inner"+t])},i.getFirstItemSize=function(){var t=this.isotope.filteredItems[0];return t&&t.element&&n(t.element)},i.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},i.getSize=function(){this.isotope.getSize();this.size=this.isotope.size},r.modes={},r.create=function(n,t){function u(){r.apply(this,arguments)}return u.prototype=Object.create(i),u.prototype.constructor=u,t&&(u.options=t),u.prototype.namespace=n,r.modes[n]=u,u},r});
/*!
 * Masonry v4.2.1
 * Cascading grid layout library
 * https://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
(function(n,t){typeof define=="function"&&define.amd?define("masonry-layout/masonry",["outlayer/outlayer","get-size/get-size"],t):typeof module=="object"&&module.exports?module.exports=t(require("outlayer"),require("get-size")):n.Masonry=t(n.Outlayer,n.getSize)})(window,function(n,t){var r=n.create("masonry"),i;return r.compatOptions.fitWidth="isFitWidth",i=r.prototype,i._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();this.colYs=[];for(var n=0;n<this.cols;n++)this.colYs.push(0);this.maxY=0;this.horizontalColIndex=0},i.measureColumns=function(){var n,i;this.getContainerWidth();this.columnWidth||(n=this.items[0],i=n&&n.element,this.columnWidth=i&&t(i).outerWidth||this.containerWidth);var r=this.columnWidth+=this.gutter,f=this.containerWidth+this.gutter,u=f/r,e=r-f%r,o=e&&e<1?"round":"floor";u=Math[o](u);this.cols=Math.max(u,1)},i.getContainerWidth=function(){var i=this._getOption("fitWidth"),r=i?this.element.parentNode:this.element,n=t(r);this.containerWidth=n&&n.innerWidth},i._getItemLayoutPosition=function(n){var r;n.getSize();var u=n.size.outerWidth%this.columnWidth,f=u&&u<1?"round":"ceil",i=Math[f](n.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);var e=this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition",t=this[e](i,n),o={x:this.columnWidth*t.col,y:t.y},s=t.y+n.size.outerHeight,h=i+t.col;for(r=t.col;r<h;r++)this.colYs[r]=s;return o},i._getTopColPosition=function(n){var t=this._getTopColGroup(n),i=Math.min.apply(Math,t);return{col:t.indexOf(i),y:i}},i._getTopColGroup=function(n){var i,r,t;if(n<2)return this.colYs;for(i=[],r=this.cols+1-n,t=0;t<r;t++)i[t]=this._getColGroupY(t,n);return i},i._getColGroupY=function(n,t){if(t<2)return this.colYs[n];var i=this.colYs.slice(n,n+t);return Math.max.apply(Math,i)},i._getHorizontalColPosition=function(n,t){var i=this.horizontalColIndex%this.cols,u=n>1&&i+n>this.cols,r;return i=u?0:i,r=t.size.outerWidth&&t.size.outerHeight,this.horizontalColIndex=r?i+n:this.horizontalColIndex,{col:i,y:this._getColGroupY(i,n)}},i._manageStamp=function(n){var e=t(n),u=this._getElementOffset(n),l=this._getOption("originLeft"),o=l?u.left:u.right,s=o+e.outerWidth,f=Math.floor(o/this.columnWidth),i,h,c,r;for(f=Math.max(0,f),i=Math.floor(s/this.columnWidth),i-=s%this.columnWidth?0:1,i=Math.min(this.cols-1,i),h=this._getOption("originTop"),c=(h?u.top:u.bottom)+e.outerHeight,r=f;r<=i;r++)this.colYs[r]=Math.max(c,this.colYs[r])},i._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var n={height:this.maxY};return this._getOption("fitWidth")&&(n.width=this._getContainerFitWidth()),n},i._getContainerFitWidth=function(){for(var n=0,t=this.cols;--t;){if(this.colYs[t]!==0)break;n++}return(this.cols-n)*this.columnWidth-this.gutter},i.needsResizeLayout=function(){var n=this.containerWidth;return this.getContainerWidth(),n!=this.containerWidth},r});
/*!
 * Masonry layout mode
 * sub-classes Masonry
 * https://masonry.desandro.com
 */
(function(n,t){typeof define=="function"&&define.amd?define("isotope-layout/js/layout-modes/masonry",["../layout-mode","masonry-layout/masonry"],t):typeof module=="object"&&module.exports?module.exports=t(require("../layout-mode"),require("masonry-layout")):t(n.Isotope.LayoutMode,n.Masonry)})(window,function(n,t){"use strict";var u=n.create("masonry"),i=u.prototype,o={_getElementOffset:!0,layout:!0,_getMeasurement:!0},r,f,e;for(r in t.prototype)o[r]||(i[r]=t.prototype[r]);return f=i.measureColumns,i.measureColumns=function(){this.items=this.isotope.filteredItems;f.call(this)},e=i._getOption,i._getOption=function(n){return n=="fitWidth"?this.options.isFitWidth!==undefined?this.options.isFitWidth:this.options.fitWidth:e.apply(this.isotope,arguments)},u}),function(n,t){typeof define=="function"&&define.amd?define("isotope-layout/js/layout-modes/fit-rows",["../layout-mode"],t):typeof exports=="object"?module.exports=t(require("../layout-mode")):t(n.Isotope.LayoutMode)}(window,function(n){"use strict";var i=n.create("fitRows"),t=i.prototype;return t._resetLayout=function(){this.x=0;this.y=0;this.maxY=0;this._getMeasurement("gutter","outerWidth")},t._getItemLayoutPosition=function(n){var t,i,r;return n.getSize(),t=n.size.outerWidth+this.gutter,i=this.isotope.size.innerWidth+this.gutter,this.x!==0&&t+this.x>i&&(this.x=0,this.y=this.maxY),r={x:this.x,y:this.y},this.maxY=Math.max(this.maxY,this.y+n.size.outerHeight),this.x+=t,r},t._getContainerSize=function(){return{height:this.maxY}},i}),function(n,t){typeof define=="function"&&define.amd?define("isotope-layout/js/layout-modes/vertical",["../layout-mode"],t):typeof module=="object"&&module.exports?module.exports=t(require("../layout-mode")):t(n.Isotope.LayoutMode)}(window,function(n){"use strict";var i=n.create("vertical",{horizontalAlignment:0}),t=i.prototype;return t._resetLayout=function(){this.y=0},t._getItemLayoutPosition=function(n){n.getSize();var t=(this.isotope.size.innerWidth-n.size.outerWidth)*this.options.horizontalAlignment,i=this.y;return this.y+=n.size.outerHeight,{x:t,y:i}},t._getContainerSize=function(){return{height:this.y}},i});
/*!
 * Isotope v3.0.6
 *
 * Licensed GPLv3 for open source use
 * or Isotope Commercial License for commercial use
 *
 * https://isotope.metafizzy.co
 * Copyright 2010-2018 Metafizzy
 */
(function(n,t){typeof define=="function"&&define.amd?define(["outlayer/outlayer","get-size/get-size","desandro-matches-selector/matches-selector","fizzy-ui-utils/utils","isotope-layout/js/item","isotope-layout/js/layout-mode","isotope-layout/js/layout-modes/masonry","isotope-layout/js/layout-modes/fit-rows","isotope-layout/js/layout-modes/vertical"],function(i,r,u,f,e,o){return t(n,i,r,u,f,e,o)}):typeof module=="object"&&module.exports?module.exports=t(n,require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("fizzy-ui-utils"),require("isotope-layout/js/item"),require("isotope-layout/js/layout-mode"),require("isotope-layout/js/layout-modes/masonry"),require("isotope-layout/js/layout-modes/fit-rows"),require("isotope-layout/js/layout-modes/vertical")):n.Isotope=t(n,n.Outlayer,n.getSize,n.matchesSelector,n.fizzyUIUtils,n.Isotope.Item,n.Isotope.LayoutMode)})(window,function(n,t,i,r,u,f,e){function v(n,t){return function(i,r){for(var s,h,u=0;u<n.length;u++){var f=n[u],e=i.sortData[f],o=r.sortData[f];if(e>o||e<o)return s=t[f]!==undefined?t[f]:t,h=s?1:-1,(e>o?1:-1)*h}return 0}}var h=n.jQuery,a=String.prototype.trim?function(n){return n.trim()}:function(n){return n.replace(/^\s+|\s+$/g,"")},s=t.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0}),o,c,l;return s.Item=f,s.LayoutMode=e,o=s.prototype,o._create=function(){this.itemGUID=0;this._sorters={};this._getSorters();t.prototype._create.call(this);this.modes={};this.filteredItems=this.items;this.sortHistory=["original-order"];for(var n in e.modes)this._initLayoutMode(n)},o.reloadItems=function(){this.itemGUID=0;t.prototype.reloadItems.call(this)},o._itemize=function(){for(var r,n=t.prototype._itemize.apply(this,arguments),i=0;i<n.length;i++)r=n[i],r.id=this.itemGUID++;return this._updateItemsSortData(n),n},o._initLayoutMode=function(n){var t=e.modes[n],i=this.options[n]||{};this.options[n]=t.options?u.extend(t.options,i):i;this.modes[n]=new t(this)},o.layout=function(){if(!this._isLayoutInited&&this._getOption("initLayout")){this.arrange();return}this._layout()},o._layout=function(){var n=this._getIsInstant();this._resetLayout();this._manageStamps();this.layoutItems(this.filteredItems,n);this._isLayoutInited=!0},o.arrange=function(n){this.option(n);this._getIsInstant();var t=this._filter(this.items);this.filteredItems=t.matches;this._bindArrangeComplete();this._isInstant?this._noTransition(this._hideReveal,[t]):this._hideReveal(t);this._sort();this._layout()},o._init=o.arrange,o._hideReveal=function(n){this.reveal(n.needReveal);this.hide(n.needHide)},o._getIsInstant=function(){var n=this._getOption("layoutInstant"),t=n!==undefined?n:!this._isLayoutInited;return this._isInstant=t,t},o._bindArrangeComplete=function(){function n(){t&&i&&r&&u.dispatchEvent("arrangeComplete",null,[u.filteredItems])}var t,i,r,u=this;this.once("layoutComplete",function(){t=!0;n()});this.once("hideComplete",function(){i=!0;n()});this.once("revealComplete",function(){r=!0;n()})},o._filter=function(n){var u=this.options.filter,i,t,r;u=u||"*";var f=[],e=[],o=[],s=this._getFilterTest(u);for(i=0;i<n.length;i++)(t=n[i],t.isIgnored)||(r=s(t),r&&f.push(t),r&&t.isHidden?e.push(t):r||t.isHidden||o.push(t));return{matches:f,needReveal:e,needHide:o}},o._getFilterTest=function(n){return h&&this.options.isJQueryFiltering?function(t){return h(t.element).is(n)}:typeof n=="function"?function(t){return n(t.element)}:function(t){return r(t.element,n)}},o.updateSortData=function(n){var t;n?(n=u.makeArray(n),t=this.getItems(n)):t=this.items;this._getSorters();this._updateItemsSortData(t)},o._getSorters=function(){var t=this.options.getSortData,n,i;for(n in t)i=t[n],this._sorters[n]=c(i)},o._updateItemsSortData=function(n){for(var r,i=n&&n.length,t=0;i&&t<i;t++)r=n[t],r.updateSortData()},c=function(){function n(n){if(typeof n!="string")return n;var i=a(n).split(" "),r=i[0],u=r.match(/^\[(.+)\]$/),o=u&&u[1],f=t(o,r),e=s.sortDataParsers[i[1]];return e?function(n){return n&&e(f(n))}:function(n){return n&&f(n)}}function t(n,t){return n?function(t){return t.getAttribute(n)}:function(n){var i=n.querySelector(t);return i&&i.textContent}}return n}(),s.sortDataParsers={parseInt:function(n){return parseInt(n,10)},parseFloat:function(n){return parseFloat(n)}},o._sort=function(){var n,t;this.options.sortBy&&(n=u.makeArray(this.options.sortBy),this._getIsSameSortBy(n)||(this.sortHistory=n.concat(this.sortHistory)),t=v(this.sortHistory,this.options.sortAscending),this.filteredItems.sort(t))},o._getIsSameSortBy=function(n){for(var t=0;t<n.length;t++)if(n[t]!=this.sortHistory[t])return!1;return!0},o._mode=function(){var n=this.options.layoutMode,t=this.modes[n];if(!t)throw new Error("No layout mode: "+n);return t.options=this.options[n],t},o._resetLayout=function(){t.prototype._resetLayout.call(this);this._mode()._resetLayout()},o._getItemLayoutPosition=function(n){return this._mode()._getItemLayoutPosition(n)},o._manageStamp=function(n){this._mode()._manageStamp(n)},o._getContainerSize=function(){return this._mode()._getContainerSize()},o.needsResizeLayout=function(){return this._mode().needsResizeLayout()},o.appended=function(n){var t=this.addItems(n),i;t.length&&(i=this._filterRevealAdded(t),this.filteredItems=this.filteredItems.concat(i))},o.prepended=function(n){var t=this._itemize(n),i;t.length&&(this._resetLayout(),this._manageStamps(),i=this._filterRevealAdded(t),this.layoutItems(this.filteredItems),this.filteredItems=i.concat(this.filteredItems),this.items=t.concat(this.items))},o._filterRevealAdded=function(n){var t=this._filter(n);return this.hide(t.needHide),this.reveal(t.matches),this.layoutItems(t.matches,!0),t.matches},o.insert=function(n){var i=this.addItems(n),t,u,r,f;if(i.length){for(r=i.length,t=0;t<r;t++)u=i[t],this.element.appendChild(u.element);for(f=this._filter(i).matches,t=0;t<r;t++)i[t].isLayoutInstant=!0;for(this.arrange(),t=0;t<r;t++)delete i[t].isLayoutInstant;this.reveal(f)}},l=o.remove,o.remove=function(n){var t,r,i,f;for(n=u.makeArray(n),t=this.getItems(n),l.call(this,n),r=t&&t.length,i=0;r&&i<r;i++)f=t[i],u.removeFrom(this.filteredItems,f)},o.shuffle=function(){for(var t,n=0;n<this.items.length;n++)t=this.items[n],t.sortData.random=Math.random();this.options.sortBy="random";this._sort();this._layout()},o._noTransition=function(n,t){var r=this.options.transitionDuration,i;return this.options.transitionDuration=0,i=n.apply(this,t),this.options.transitionDuration=r,i},o.getFilteredItemElements=function(){return this.filteredItems.map(function(n){return n.element})},s});
/*!
 * ColorPicker
 *
 * Copyright (c) 2011-2017 Martijn W. van der Lee
 * Licensed under the MIT.
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){"use strict";var r=0,u='<div class="ui-colorpicker ui-colorpicker-dialog ui-dialog ui-widget ui-widget-content ui-corner-all" style="display: none;"><\/div>',f='<div class="ui-colorpicker ui-colorpicker-inline ui-dialog ui-widget ui-widget-content ui-corner-all"><\/div>',e='<div class="ui-colorpicker ui-colorpicker-inline"><\/div>',i=function(n){var t=Math.round(n).toString(16);return t.length===1&&(t="0"+t),t.toLowerCase()},t={isPrint:function(n){return n==32||n>=48&&n<=57||n>=65&&n<=90||n>=96&&n<=111||n>=186&&n<192||n>=219&&n<222},isHex:function(n){return n>=48&&n<=57||n>=96&&n<=105||n>=65&&n<=70}},o=function(t,i){var s,r,u,e,h,v,p,w,f,o,c,l,a,y;for(t.sort(function(n,t){return n.pos[1]===t.pos[1]?n.pos[0]-t.pos[0]:n.pos[1]-t.pos[1]}),e=0,h=0,n.each(t,function(n,t){e=Math.max(e,t.pos[0]+t.pos[2]);h=Math.max(h,t.pos[1]+t.pos[3])}),s=[],r=0;r<e;++r)s.push([]);for(p=[],v=[],n.each(t,function(n,t){for(r=0;r<t.pos[2];r+=1)v[t.pos[0]+r]=!0;for(u=0;u<t.pos[3];u+=1)p[t.pos[1]+u]=!0}),o="",f=t[w=0],u=0;u<h;++u){for(o+="<tr>",r=0;r<e;)if(typeof f!="undefined"&&r===f.pos[0]&&u===f.pos[1]){for(o+=i(f,r,u),l=0;l<f.pos[3];l+=1)for(c=0;c<f.pos[2];c+=1)s[r+c][u+l]=!0;r+=f.pos[2];f=t[++w]}else{for(a=0,y=!1;r<e&&s[r][u]===undefined&&(f===undefined||u<f.pos[1]||u===f.pos[1]&&r<f.pos[0]);)v[r]===!0&&(a+=1),y=!0,r+=1;a>0?o+='<td colspan="'+a+'"><\/td>':y||(r+=1)}o+="<\/tr>"}return'<table cellspacing="0" cellpadding="0" border="0"><tbody>'+o+"<\/tbody><\/table>"};return n.colorpicker=new function(){this.regional={"":{ok:"OK",cancel:"Cancel",none:"None",button:"Color",title:"Pick a color",transparent:"Transparent",hsvH:"H",hsvS:"S",hsvV:"V",rgbR:"R",rgbG:"G",rgbB:"B",labL:"L",labA:"a",labB:"b",hslH:"H",hslS:"S",hslL:"L",cmykC:"C",cmykM:"M",cmykY:"Y",cmykK:"K",alphaA:"A"}};this.swatchesNames={html:"HTML"};this.swatches={html:[{name:"black",r:0,g:0,b:0},{name:"dimgray",r:.41176470588235292,g:.41176470588235292,b:.41176470588235292},{name:"gray",r:.50196078431372548,g:.50196078431372548,b:.50196078431372548},{name:"darkgray",r:.66274509803921566,g:.66274509803921566,b:.66274509803921566},{name:"silver",r:.75294117647058822,g:.75294117647058822,b:.75294117647058822},{name:"lightgrey",r:.82745098039215681,g:.82745098039215681,b:.82745098039215681},{name:"gainsboro",r:.86274509803921573,g:.86274509803921573,b:.86274509803921573},{name:"whitesmoke",r:.96078431372549022,g:.96078431372549022,b:.96078431372549022},{name:"white",r:1,g:1,b:1},{name:"rosybrown",r:.73725490196078436,g:.5607843137254902,b:.5607843137254902},{name:"indianred",r:.803921568627451,g:.36078431372549019,b:.36078431372549019},{name:"brown",r:.6470588235294118,g:.16470588235294117,b:.16470588235294117},{name:"firebrick",r:.69803921568627447,g:.13333333333333333,b:.13333333333333333},{name:"lightcoral",r:.94117647058823528,g:.50196078431372548,b:.50196078431372548},{name:"maroon",r:.50196078431372548,g:0,b:0},{name:"darkred",r:.54509803921568623,g:0,b:0},{name:"red",r:1,g:0,b:0},{name:"snow",r:1,g:.98039215686274506,b:.98039215686274506},{name:"salmon",r:.98039215686274506,g:.50196078431372548,b:.44705882352941179},{name:"mistyrose",r:1,g:.89411764705882357,b:.88235294117647056},{name:"tomato",r:1,g:.38823529411764707,b:.27843137254901962},{name:"darksalmon",r:.9137254901960784,g:.58823529411764708,b:.47843137254901963},{name:"orangered",r:1,g:.27058823529411763,b:0},{name:"coral",r:1,g:.49803921568627452,b:.31372549019607843},{name:"lightsalmon",r:1,g:.62745098039215685,b:.47843137254901963},{name:"sienna",r:.62745098039215685,g:.32156862745098042,b:.17647058823529413},{name:"seashell",r:1,g:.96078431372549022,b:.93333333333333335},{name:"chocolate",r:.82352941176470584,g:.41176470588235292,b:.11764705882352941},{name:"saddlebrown",r:.54509803921568623,g:.27058823529411763,b:.074509803921568626},{name:"sandybrown",r:.95686274509803926,g:.64313725490196083,b:.37647058823529411},{name:"peachpuff",r:1,g:.85490196078431369,b:.72549019607843135},{name:"peru",r:.803921568627451,g:.52156862745098043,b:.24705882352941178},{name:"linen",r:.98039215686274506,g:.94117647058823528,b:.90196078431372551},{name:"darkorange",r:1,g:.5490196078431373,b:0},{name:"bisque",r:1,g:.89411764705882357,b:.7686274509803922},{name:"burlywood",r:.87058823529411766,g:.72156862745098038,b:.52941176470588236},{name:"tan",r:.82352941176470584,g:.70588235294117652,b:.5490196078431373},{name:"antiquewhite",r:.98039215686274506,g:.92156862745098034,b:.84313725490196079},{name:"navajowhite",r:1,g:.87058823529411766,b:.67843137254901964},{name:"blanchedalmond",r:1,g:.92156862745098034,b:.803921568627451},{name:"papayawhip",r:1,g:.93725490196078431,b:.83529411764705885},{name:"orange",r:1,g:.6470588235294118,b:0},{name:"moccasin",r:1,g:.89411764705882357,b:.70980392156862748},{name:"wheat",r:.96078431372549022,g:.87058823529411766,b:.70196078431372544},{name:"oldlace",r:.99215686274509807,g:.96078431372549022,b:.90196078431372551},{name:"floralwhite",r:1,g:.98039215686274506,b:.94117647058823528},{name:"goldenrod",r:.85490196078431369,g:.6470588235294118,b:.12549019607843137},{name:"darkgoldenrod",r:.72156862745098038,g:.52549019607843139,b:.043137254901960784},{name:"cornsilk",r:1,g:.97254901960784312,b:.86274509803921573},{name:"gold",r:1,g:.84313725490196079,b:0},{name:"palegoldenrod",r:.93333333333333335,g:.90980392156862744,b:.66666666666666663},{name:"khaki",r:.94117647058823528,g:.90196078431372551,b:.5490196078431373},{name:"lemonchiffon",r:1,g:.98039215686274506,b:.803921568627451},{name:"darkkhaki",r:.74117647058823533,g:.71764705882352942,b:.41960784313725491},{name:"beige",r:.96078431372549022,g:.96078431372549022,b:.86274509803921573},{name:"lightgoldenrodyellow",r:.98039215686274506,g:.98039215686274506,b:.82352941176470584},{name:"olive",r:.50196078431372548,g:.50196078431372548,b:0},{name:"yellow",r:1,g:1,b:0},{name:"lightyellow",r:1,g:1,b:.8784313725490196},{name:"ivory",r:1,g:1,b:.94117647058823528},{name:"olivedrab",r:.41960784313725491,g:.55686274509803924,b:.13725490196078433},{name:"yellowgreen",r:.60392156862745094,g:.803921568627451,b:.19607843137254902},{name:"darkolivegreen",r:.33333333333333331,g:.41960784313725491,b:.18431372549019609},{name:"greenyellow",r:.67843137254901964,g:1,b:.18431372549019609},{name:"lawngreen",r:.48627450980392156,g:.9882352941176471,b:0},{name:"chartreuse",r:.49803921568627452,g:1,b:0},{name:"darkseagreen",r:.5607843137254902,g:.73725490196078436,b:.5607843137254902},{name:"forestgreen",r:.13333333333333333,g:.54509803921568623,b:.13333333333333333},{name:"limegreen",r:.19607843137254902,g:.803921568627451,b:.19607843137254902},{name:"lightgreen",r:.56470588235294117,g:.93333333333333335,b:.56470588235294117},{name:"palegreen",r:.596078431372549,g:.984313725490196,b:.596078431372549},{name:"darkgreen",r:0,g:.39215686274509803,b:0},{name:"green",r:0,g:.50196078431372548,b:0},{name:"lime",r:0,g:1,b:0},{name:"honeydew",r:.94117647058823528,g:1,b:.94117647058823528},{name:"mediumseagreen",r:.23529411764705882,g:.70196078431372544,b:.44313725490196076},{name:"seagreen",r:.1803921568627451,g:.54509803921568623,b:.3411764705882353},{name:"springgreen",r:0,g:1,b:.49803921568627452},{name:"mintcream",r:.96078431372549022,g:1,b:.98039215686274506},{name:"mediumspringgreen",r:0,g:.98039215686274506,b:.60392156862745094},{name:"mediumaquamarine",r:.4,g:.803921568627451,b:.66666666666666663},{name:"aquamarine",r:.49803921568627452,g:1,b:.83137254901960789},{name:"turquoise",r:.25098039215686274,g:.8784313725490196,b:.81568627450980391},{name:"lightseagreen",r:.12549019607843137,g:.69803921568627447,b:.66666666666666663},{name:"mediumturquoise",r:.28235294117647058,g:.81960784313725488,b:.8},{name:"darkslategray",r:.18431372549019609,g:.30980392156862746,b:.30980392156862746},{name:"paleturquoise",r:.68627450980392157,g:.93333333333333335,b:.93333333333333335},{name:"teal",r:0,g:.50196078431372548,b:.50196078431372548},{name:"darkcyan",r:0,g:.54509803921568623,b:.54509803921568623},{name:"darkturquoise",r:0,g:.807843137254902,b:.81960784313725488},{name:"aqua",r:0,g:1,b:1},{name:"cyan",r:0,g:1,b:1},{name:"lightcyan",r:.8784313725490196,g:1,b:1},{name:"azure",r:.94117647058823528,g:1,b:1},{name:"cadetblue",r:.37254901960784315,g:.61960784313725492,b:.62745098039215685},{name:"powderblue",r:.69019607843137254,g:.8784313725490196,b:.90196078431372551},{name:"lightblue",r:.67843137254901964,g:.84705882352941175,b:.90196078431372551},{name:"deepskyblue",r:0,g:.74901960784313726,b:1},{name:"skyblue",r:.52941176470588236,g:.807843137254902,b:.92156862745098034},{name:"lightskyblue",r:.52941176470588236,g:.807843137254902,b:.98039215686274506},{name:"steelblue",r:.27450980392156865,g:.50980392156862742,b:.70588235294117652},{name:"aliceblue",r:.94117647058823528,g:.97254901960784312,b:1},{name:"dodgerblue",r:.11764705882352941,g:.56470588235294117,b:1},{name:"slategray",r:.4392156862745098,g:.50196078431372548,b:.56470588235294117},{name:"lightslategray",r:.46666666666666667,g:.53333333333333333,b:.6},{name:"lightsteelblue",r:.69019607843137254,g:.7686274509803922,b:.87058823529411766},{name:"cornflowerblue",r:.39215686274509803,g:.58431372549019611,b:.92941176470588238},{name:"royalblue",r:.25490196078431371,g:.41176470588235292,b:.88235294117647056},{name:"midnightblue",r:.098039215686274508,g:.098039215686274508,b:.4392156862745098},{name:"lavender",r:.90196078431372551,g:.90196078431372551,b:.98039215686274506},{name:"navy",r:0,g:0,b:.50196078431372548},{name:"darkblue",r:0,g:0,b:.54509803921568623},{name:"mediumblue",r:0,g:0,b:.803921568627451},{name:"blue",r:0,g:0,b:1},{name:"ghostwhite",r:.97254901960784312,g:.97254901960784312,b:1},{name:"darkslateblue",r:.28235294117647058,g:.23921568627450981,b:.54509803921568623},{name:"slateblue",r:.41568627450980394,g:.35294117647058826,b:.803921568627451},{name:"mediumslateblue",r:.4823529411764706,g:.40784313725490196,b:.93333333333333335},{name:"mediumpurple",r:.57647058823529407,g:.4392156862745098,b:.85882352941176465},{name:"blueviolet",r:.54117647058823526,g:.16862745098039217,b:.88627450980392153},{name:"indigo",r:.29411764705882354,g:0,b:.50980392156862742},{name:"darkorchid",r:.6,g:.19607843137254902,b:.8},{name:"darkviolet",r:.58039215686274515,g:0,b:.82745098039215681},{name:"mediumorchid",r:.72941176470588232,g:.33333333333333331,b:.82745098039215681},{name:"thistle",r:.84705882352941175,g:.74901960784313726,b:.84705882352941175},{name:"plum",r:.8666666666666667,g:.62745098039215685,b:.8666666666666667},{name:"violet",r:.93333333333333335,g:.50980392156862742,b:.93333333333333335},{name:"purple",r:.50196078431372548,g:0,b:.50196078431372548},{name:"darkmagenta",r:.54509803921568623,g:0,b:.54509803921568623},{name:"magenta",r:1,g:0,b:1},{name:"fuchsia",r:1,g:0,b:1},{name:"orchid",r:.85490196078431369,g:.4392156862745098,b:.83921568627450982},{name:"mediumvioletred",r:.7803921568627451,g:.082352941176470587,b:.52156862745098043},{name:"deeppink",r:1,g:.0784313725490196,b:.57647058823529407},{name:"hotpink",r:1,g:.41176470588235292,b:.70588235294117652},{name:"palevioletred",r:.85882352941176465,g:.4392156862745098,b:.57647058823529407},{name:"lavenderblush",r:1,g:.94117647058823528,b:.96078431372549022},{name:"crimson",r:.86274509803921573,g:.0784313725490196,b:.23529411764705882},{name:"pink",r:1,g:.75294117647058822,b:.796078431372549},{name:"lightpink",r:1,g:.71372549019607845,b:.75686274509803919}]};this.writers={"#HEX":function(n,t){return t._formatColor("#rxgxbx",n)},"#HEX3":function(t){var i=n.colorpicker.writers.HEX3(t);return i===!1?!1:"#"+i},HEX:function(n,t){return t._formatColor("rxgxbx",n)},HEX3:function(n){var t=n.getRGB(),i=Math.round(t.r*255),r=Math.round(t.g*255),u=Math.round(t.b*255);return i>>>4==(i&=15)&&r>>>4==(r&=15)&&u>>>4==(u&=15)?i.toString(16)+r.toString(16)+u.toString(16):!1},"#HEXA":function(n,t){return t._formatColor("#rxgxbxax",n)},"#HEXA4":function(t,i){var r=n.colorpicker.writers.HEXA4(t,i);return r===!1?!1:"#"+r},HEXA:function(n,t){return t._formatColor("rxgxbxax",n)},HEXA4:function(t,i){var r=Math.round(t.getAlpha()*255);return r>>>4==(r&=15)?n.colorpicker.writers.HEX3(t,i)+r.toString(16):!1},RGB:function(n,t){return n.getAlpha()>=1?t._formatColor("rgb(rd,gd,bd)",n):!1},RGBA:function(n,t){return t._formatColor("rgba(rd,gd,bd,af)",n)},"RGB%":function(n,t){return n.getAlpha()>=1?t._formatColor("rgb(rp%,gp%,bp%)",n):!1},"RGBA%":function(n,t){return t._formatColor("rgba(rp%,gp%,bp%,af)",n)},HSL:function(n,t){return n.getAlpha()>=1?t._formatColor("hsl(hd,sd,vd)",n):!1},HSLA:function(n,t){return t._formatColor("hsla(hd,sd,vd,af)",n)},"HSL%":function(n,t){return n.getAlpha()>=1?t._formatColor("hsl(hp%,sp%,vp%)",n):!1},"HSLA%":function(n,t){return t._formatColor("hsla(hp%,sp%,vp%,af)",n)},NAME:function(n,t){return t._closestName(n)},EXACT:function(n,t){return t._exactName(n)}};this.parsers={"":function(t){if(t==="")return new n.colorpicker.Color},NAME:function(t,i){var r=i._getSwatch(n.trim(t));if(r)return new n.colorpicker.Color(r.r,r.g,r.b)},RGBA:function(t){var i=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(t);if(i)return new n.colorpicker.Color(i[1]/255,i[2]/255,i[3]/255,parseFloat(i[4]))},"RGBA%":function(t){var i=/^rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(t);if(i)return new n.colorpicker.Color(i[1]/100,i[2]/100,i[3]/100,i[4]/100)},HSLA:function(t){var i=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(t);if(i)return(new n.colorpicker.Color).setHSL(i[1]/255,i[2]/255,i[3]/255).setAlpha(parseFloat(i[4]))},"HSLA%":function(t){var i=/^hsla?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(t);if(i)return(new n.colorpicker.Color).setHSL(i[1]/100,i[2]/100,i[3]/100).setAlpha(i[4]/100)},"#HEX":function(t){var i=/^#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/.exec(t);if(i)return new n.colorpicker.Color(parseInt(i[1],16)/255,parseInt(i[2],16)/255,parseInt(i[3],16)/255)},"#HEX3":function(t){var i=/^#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/.exec(t);if(i)return new n.colorpicker.Color(parseInt(String(i[1])+i[1],16)/255,parseInt(String(i[2])+i[2],16)/255,parseInt(String(i[3])+i[3],16)/255)},HEX:function(t){var i=/^([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/.exec(t);if(i)return new n.colorpicker.Color(parseInt(i[1],16)/255,parseInt(i[2],16)/255,parseInt(i[3],16)/255)},HEX3:function(t){var i=/^([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/.exec(t);if(i)return new n.colorpicker.Color(parseInt(String(i[1])+i[1],16)/255,parseInt(String(i[2])+i[2],16)/255,parseInt(String(i[3])+i[3],16)/255)},"#HEXA":function(t){var i=/^#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/.exec(t);if(i)return new n.colorpicker.Color(parseInt(i[1],16)/255,parseInt(i[2],16)/255,parseInt(i[3],16)/255,parseInt(i[4],16)/255)},"#HEXA4":function(t){var i=/^#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/.exec(t);if(i)return new n.colorpicker.Color(parseInt(String(i[1])+i[1],16)/255,parseInt(String(i[2])+i[2],16)/255,parseInt(String(i[3])+i[3],16)/255,parseInt(String(i[4])+i[4],16)/255)},HEXA:function(t){var i=/^([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/.exec(t);if(i)return new n.colorpicker.Color(parseInt(i[1],16)/255,parseInt(i[2],16)/255,parseInt(i[3],16)/255,parseInt(i[4],16)/255)},HEXA4:function(t){var i=/^([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/.exec(t);if(i)return new n.colorpicker.Color(parseInt(String(i[1])+i[1],16)/255,parseInt(String(i[2])+i[2],16)/255,parseInt(String(i[3])+i[3],16)/255,parseInt(String(i[4])+i[4],16)/255)}};this.partslists={full:["header","map","bar","hex","hsv","rgb","alpha","lab","cmyk","preview","swatches","footer"],popup:["map","bar","hex","hsv","rgb","alpha","preview","footer"],draggable:["header","map","bar","hex","hsv","rgb","alpha","preview","footer"],inline:["map","bar","hex","hsv","rgb","alpha","preview"]};this.limits={websafe:function(n){n.limit(6)},nibble:function(n){n.limit(16)},binary:function(n){n.limit(2)},name:function(n,t){var i=t._getSwatch(t._closestName(n));n.setRGB(i.r,i.g,i.b)}};this.parts={header:function(t){var f=this,i=null,u=function(){var i=t.options.title||t._getRegional("title"),n='<span class="ui-dialog-title">'+i+"<\/span>";return!t.inline&&t.options.showCloseButton&&(n+='<a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close<\/span><\/a>'),'<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">'+n+"<\/div>"},r=function(n){n.preventDefault();t.close(t.options.revert)};this.init=function(){var f,e;i=n(u()).prependTo(t.dialog);f=n(".ui-dialog-titlebar-close",i);t._hoverable(f);t._focusable(f);f.on("click",r);!t.inline&&t.options.draggable&&(e={handle:i},t.options.containment&&(e.containment=t.options.containment),t.dialog.draggable(e))};this.disable=function(t){n(".ui-dialog-titlebar-close",i)[t?"off":"on"]("click",r)}},map:function(t){var e=this,u=null,l,r,f,i={},o,h,s,c,a;o=function(e){if(t.opened){var c=i.p.offset(),l=e.pageX-c.left,a=e.pageY-c.top;if(l>=0&&l<r&&a>=0&&a<f){e.stopImmediatePropagation();e.preventDefault();u.off("mousedown",o).focus();n(document).on("mouseup",h);n(document).on("mousemove",s);s(e)}}};h=function(i){i.stopImmediatePropagation();i.preventDefault();n(document).off("mouseup",h);n(document).off("mousemove",s);u.on("mousedown",o);t._callback("stop")};s=function(n){if(n.stopImmediatePropagation(),n.preventDefault(),n.pageX!==e.x||n.pageY!==e.y){e.x=n.pageX;e.y=n.pageY;var s=i.p.offset(),u=n.pageX-s.left,o=n.pageY-s.top;u=Math.max(0,Math.min(u/r,1));o=Math.max(0,Math.min(o/f,1));switch(t.mode){case"h":t.color.setHSV(null,u,1-o);break;case"s":case"a":t.color.setHSV(u,null,1-o);break;case"v":t.color.setHSV(u,1-o,null);break;case"r":t.color.setRGB(null,1-o,u);break;case"g":t.color.setRGB(1-o,null,u);break;case"b":t.color.setRGB(u,1-o,null)}t._change(!1)}};c=function(n){var e={h:"s",s:"h",v:"h",r:"b",g:"b",b:"r",a:"h"},h={37:-1,39:1},o={h:"v",s:"v",v:"s",r:"g",g:"r",b:"g",a:"v"},c={38:1,40:-1},s={35:0,36:1},i,u;typeof h[n.which]!="undefined"?(u=t.color.getChannel(e[t.mode])*r,i=h[n.which],n.shiftKey?i*=10:(n.ctrlKey||n.metaKey)&&(i*=r),t.color.setChannel(e[t.mode],(u+i)/r),t._change(!1)):typeof c[n.which]!="undefined"?(u=t.color.getChannel(o[t.mode])*f,i=c[n.which],n.shiftKey?i*=10:(n.ctrlKey||n.metaKey)&&(i*=f),t.color.setChannel(o[t.mode],(u+i)/f),t._change(!1)):typeof s[n.which]!="undefined"&&(t.color.setChannel(e[t.mode],1-s[n.which]),t.color.setChannel(o[t.mode],s[n.which]),t._change(!1))};a=function(){return'<div class="ui-colorpicker-map ui-colorpicker-map-'+(t.options.part.map.size||256)+' ui-colorpicker-border" taonex="0"><span class="ui-colorpicker-map-layer-1">&nbsp;<\/span><span class="ui-colorpicker-map-layer-2">&nbsp;<\/span>'+(t.options.alpha?'<span class="ui-colorpicker-map-layer-alpha">&nbsp;<\/span>':"")+'<span class="ui-colorpicker-map-layer-pointer"><span class="ui-colorpicker-map-pointer"><\/span><\/span><\/div>'};this.init=function(){u=n(a()).appendTo(n(".ui-colorpicker-map-container",t.dialog));u.on("mousedown",o);u.on("keydown",c);i[1]=n(".ui-colorpicker-map-layer-1",u);i[2]=n(".ui-colorpicker-map-layer-2",u);i.a=n(".ui-colorpicker-map-layer-alpha",u);i.p=n(".ui-colorpicker-map-layer-pointer",u);r=i.p.width();f=i.p.height();l=n(".ui-colorpicker-map-pointer",u)};this.update=function(){var n=(t.options.part.map.size||256)*65/64;switch(t.mode){case"h":i[1].css({"background-position":"0 0",opacity:""}).show();i[2].hide();break;case"s":case"a":i[1].css({"background-position":"0 "+-n+"px",opacity:""}).show();i[2].css({"background-position":"0 "+-n*2+"px",opacity:""}).show();break;case"v":u.css("background-color","black");i[1].css({"background-position":"0 "+-n*3+"px",opacity:""}).show();i[2].hide();break;case"r":i[1].css({"background-position":"0 "+-n*4+"px",opacity:""}).show();i[2].css({"background-position":"0 "+-n*5+"px",opacity:""}).show();break;case"g":i[1].css({"background-position":"0 "+-n*6+"px",opacity:""}).show();i[2].css({"background-position":"0 "+-n*7+"px",opacity:""}).show();break;case"b":i[1].css({"background-position":"0 "+-n*8+"px",opacity:""}).show();i[2].css({"background-position":"0 "+-n*9+"px",opacity:""}).show()}e.repaint()};this.repaint=function(){var e=0,o=0,f,n;switch(t.mode){case"h":f=t.color.getHSV();e=f.s*r;o=(1-f.v)*r;u.css("background-color",t.color.copy().setHSV(null,1,1).toCSS());break;case"s":case"a":f=t.color.getHSV();e=f.h*r;o=(1-f.v)*r;i[2].css("opacity",1-f.s);break;case"v":f=t.color.getHSV();e=f.h*r;o=(1-f.s)*r;i[1].css("opacity",f.v);break;case"r":n=t.color.getRGB();e=n.b*r;o=(1-n.g)*r;i[2].css("opacity",n.r);break;case"g":n=t.color.getRGB();e=n.b*r;o=(1-n.r)*r;i[2].css("opacity",n.g);break;case"b":n=t.color.getRGB();e=n.r*r;o=(1-n.g)*r;i[2].css("opacity",n.b)}t.options.alpha&&i.a.css("opacity",1-t.color.getAlpha());l.css({left:e-7,top:o-7})};this.disable=function(n){u[n?"off":"on"]("mousedown",o);u[n?"off":"on"]("keydown",c)}},bar:function(t){var o=this,r=null,c,l,u,i={},f,s,e,h,a;f=function(o){if(t.opened){var h=i.p.offset(),c=o.pageX-h.left,a=o.pageY-h.top;if(c>=0&&c<l&&a>=0&&a<u){o.stopImmediatePropagation();o.preventDefault();r.off("mousedown",f).focus();n(document).on("mouseup",s);n(document).on("mousemove",e);e(o)}}};s=function(i){i.stopImmediatePropagation();i.preventDefault();n(document).off("mouseup",s);n(document).off("mousemove",e);r.on("mousedown",f);t._callback("stop")};e=function(n){if(n.stopImmediatePropagation(),n.preventDefault(),n.pageY!==o.y){o.y=n.pageY;var f=i.p.offset(),r=n.pageY-f.top;r=Math.max(0,Math.min(r/u,1));switch(t.mode){case"h":t.color.setHSV(1-r,null,null);break;case"s":t.color.setHSV(null,1-r,null);break;case"v":t.color.setHSV(null,null,1-r);break;case"r":t.color.setRGB(1-r,null,null);break;case"g":t.color.setRGB(null,1-r,null);break;case"b":t.color.setRGB(null,null,1-r);break;case"a":t.color.setAlpha(1-r)}t._change(!1)}};h=function(n){var i={38:1,40:-1,33:10,34:-10},r={35:0,36:1},f;typeof i[n.which]!="undefined"?(f=t.color.getChannel(t.mode)*u,i=i[n.which],n.shiftKey?i*=10:(n.ctrlKey||n.metaKey)&&(i*=u),t.color.setChannel(t.mode,(f+i)/u),t._change(!1)):typeof r[n.which]!="undefined"&&(t.color.setChannel(t.mode,r[n.which]),t._change(!1))};a=function(){var n='<div class="ui-colorpicker-bar ui-colorpicker-bar-'+(t.options.part.bar.size||256)+'  ui-colorpicker-border" taonex="0"><span class="ui-colorpicker-bar-layer-1">&nbsp;<\/span><span class="ui-colorpicker-bar-layer-2">&nbsp;<\/span><span class="ui-colorpicker-bar-layer-3">&nbsp;<\/span><span class="ui-colorpicker-bar-layer-4">&nbsp;<\/span>';return t.options.alpha&&(n+='<span class="ui-colorpicker-bar-layer-alpha">&nbsp;<\/span><span class="ui-colorpicker-bar-layer-alphabar">&nbsp;<\/span>'),n+'<span class="ui-colorpicker-bar-layer-pointer"><span class="ui-colorpicker-bar-pointer"><\/span><\/span><\/div>'};this.init=function(){r=n(a()).appendTo(n(".ui-colorpicker-bar-container",t.dialog));r.on("mousedown",f);r.on("keydown",h);i[1]=n(".ui-colorpicker-bar-layer-1",r);i[2]=n(".ui-colorpicker-bar-layer-2",r);i[3]=n(".ui-colorpicker-bar-layer-3",r);i[4]=n(".ui-colorpicker-bar-layer-4",r);i.a=n(".ui-colorpicker-bar-layer-alpha",r);i.ab=n(".ui-colorpicker-bar-layer-alphabar",r);i.p=n(".ui-colorpicker-bar-layer-pointer",r);l=i.p.width();u=i.p.height();c=n(".ui-colorpicker-bar-pointer",r)};this.update=function(){var n=(t.options.part.bar.size||256)*65/64;switch(t.mode){case"h":case"s":case"v":case"r":case"g":case"b":i.a.show();i.ab.hide();break;case"a":i.a.hide();i.ab.show()}switch(t.mode){case"h":i[1].css({"background-position":"0 0",opacity:""}).show();i[2].hide();i[3].hide();i[4].hide();break;case"s":i[1].css({"background-position":"0 "+-n+"px",opacity:""}).show();i[2].css({"background-position":"0 "+-n*2+"px",opacity:""}).show();i[3].hide();i[4].hide();break;case"v":i[1].css({"background-position":"0 "+-n*2+"px",opacity:""}).show();i[2].hide();i[3].hide();i[4].hide();break;case"r":i[1].css({"background-position":"0 "+-n*6+"px",opacity:""}).show();i[2].css({"background-position":"0 "+-n*5+"px",opacity:""}).show();i[3].css({"background-position":"0 "+-n*3+"px",opacity:""}).show();i[4].css({"background-position":"0 "+-n*4+"px",opacity:""}).show();break;case"g":i[1].css({"background-position":"0 "+-n*10+"px",opacity:""}).show();i[2].css({"background-position":"0 "+-n*9+"px",opacity:""}).show();i[3].css({"background-position":"0 "+-n*7+"px",opacity:""}).show();i[4].css({"background-position":"0 "+-n*8+"px",opacity:""}).show();break;case"b":i[1].css({"background-position":"0 "+-n*14+"px",opacity:""}).show();i[2].css({"background-position":"0 "+-n*13+"px",opacity:""}).show();i[3].css({"background-position":"0 "+-n*11+"px",opacity:""}).show();i[4].css({"background-position":"0 "+-n*12+"px",opacity:""}).show();break;case"a":i[1].hide();i[2].hide();i[3].hide();i[4].hide()}o.repaint()};this.repaint=function(){var f=0,e,n;switch(t.mode){case"h":f=(1-t.color.getHSV().h)*u;break;case"s":e=t.color.getHSV();f=(1-e.s)*u;i[2].css("opacity",1-e.v);r.css("background-color",t.color.copy().setHSV(null,1,null).toCSS());break;case"v":f=(1-t.color.getHSV().v)*u;r.css("background-color",t.color.copy().setHSV(null,null,1).toCSS());break;case"r":n=t.color.getRGB();f=(1-n.r)*u;i[2].css("opacity",Math.max(0,n.b-n.g));i[3].css("opacity",Math.max(0,n.g-n.b));i[4].css("opacity",Math.min(n.b,n.g));break;case"g":n=t.color.getRGB();f=(1-n.g)*u;i[2].css("opacity",Math.max(0,n.b-n.r));i[3].css("opacity",Math.max(0,n.r-n.b));i[4].css("opacity",Math.min(n.r,n.b));break;case"b":n=t.color.getRGB();f=(1-n.b)*u;i[2].css("opacity",Math.max(0,n.r-n.g));i[3].css("opacity",Math.max(0,n.g-n.r));i[4].css("opacity",Math.min(n.r,n.g));break;case"a":f=(1-t.color.getAlpha())*u;r.css("background-color",t.color.copy().toCSS())}t.mode!=="a"&&i.a.css("opacity",1-t.color.getAlpha());c.css("top",f-3)};this.disable=function(n){r[n?"off":"on"]("mousedown",f);r[n?"off":"on"]("keydown",h)}},preview:function(t){var c=this,i=null,r,u,f,e,o,s,h=function(){t.color=t.currentColor.copy();t._change()};s=function(){return'<div class="ui-colorpicker-preview ui-colorpicker-border"><div class="ui-colorpicker-preview-initial"><div class="ui-colorpicker-preview-initial-alpha"><\/div><\/div><div class="ui-colorpicker-preview-current"><div class="ui-colorpicker-preview-current-alpha"><\/div><\/div><\/div>'};this.init=function(){i=n(s()).appendTo(n(".ui-colorpicker-preview-container",t.dialog));n(".ui-colorpicker-preview-initial",i).on("click",h);u=n(".ui-colorpicker-preview-initial",i);f=n(".ui-colorpicker-preview-initial-alpha",i);e=n(".ui-colorpicker-preview-current",i);o=n(".ui-colorpicker-preview-current-alpha",i);r=n(".ui-colorpicker-preview-initial-alpha, .ui-colorpicker-preview-current-alpha",i)};this.update=function(){r[t.options.alpha?"show":"hide"]();this.repaint()};this.repaint=function(){u.css("background-color",t.currentColor.set?t.currentColor.toCSS():"").attr("title",t.currentColor.set?t.currentColor.toCSS():"");f.css("opacity",1-t.currentColor.getAlpha());e.css("background-color",t.color.set?t.color.toCSS():"").attr("title",t.color.set?t.color.toCSS():"");o.css("opacity",1-t.color.getAlpha())};this.disable=function(t){n(".ui-colorpicker-preview-initial",i)[t?"off":"on"]("click",h)}},hsv:function(t){var f=this,r=null,i={},u;u=function(){var n="";return t.options.hsv&&(n+='<div class="ui-colorpicker-hsv-h"><input class="ui-colorpicker-mode" type="radio" value="h"/><label>'+t._getRegional("hsvH")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="360" size="10"/><span class="ui-colorpicker-unit">&deg;<\/span><\/div><div class="ui-colorpicker-hsv-s"><input class="ui-colorpicker-mode" type="radio" value="s"/><label>'+t._getRegional("hsvS")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100" size="10"/><span class="ui-colorpicker-unit">%<\/span><\/div><div class="ui-colorpicker-hsv-v"><input class="ui-colorpicker-mode" type="radio" value="v"/><label>'+t._getRegional("hsvV")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100" size="10"/><span class="ui-colorpicker-unit">%<\/span><\/div>'),'<div class="ui-colorpicker-hsv">'+n+"<\/div>"};this.init=function(){r=n(u()).appendTo(n(".ui-colorpicker-hsv-container",t.dialog));n(".ui-colorpicker-mode",r).click(function(){t.mode=n(this).val();t._updateAllParts()});i.h=n(".ui-colorpicker-hsv-h .ui-colorpicker-number",r);i.s=n(".ui-colorpicker-hsv-s .ui-colorpicker-number",r);i.v=n(".ui-colorpicker-hsv-v .ui-colorpicker-number",r);n(".ui-colorpicker-number",r).on("input change keyup",function(){t.color.setHSV(i.h.val()/360,i.s.val()/100,i.v.val()/100);t._change()})};this.repaint=function(){var n=t.color.getHSV();i.h.val(Math.round(n.h*360));i.s.val(Math.round(n.s*100));i.v.val(Math.round(n.v*100))};this.update=function(){n(".ui-colorpicker-mode",r).each(function(){var i=n(this);i.prop("checked",i.val()===t.mode)});this.repaint()};this.disable=function(t){n(":input",r).prop("disabled",t)}},rgb:function(t){var f=this,i=null,r={},u;u=function(){var n="";return t.options.rgb&&(n+='<div class="ui-colorpicker-rgb-r"><input class="ui-colorpicker-mode" type="radio" value="r"/><label>'+t._getRegional("rgbR")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="255"/><\/div><div class="ui-colorpicker-rgb-g"><input class="ui-colorpicker-mode" type="radio" value="g"/><label>'+t._getRegional("rgbG")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="255"/><\/div><div class="ui-colorpicker-rgb-b"><input class="ui-colorpicker-mode" type="radio" value="b"/><label>'+t._getRegional("rgbB")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="255"/><\/div>'),'<div class="ui-colorpicker-rgb">'+n+"<\/div>"};this.init=function(){i=n(u()).appendTo(n(".ui-colorpicker-rgb-container",t.dialog));n(".ui-colorpicker-mode",i).click(function(){t.mode=n(this).val();t._updateAllParts()});r.r=n(".ui-colorpicker-rgb-r .ui-colorpicker-number",i);r.g=n(".ui-colorpicker-rgb-g .ui-colorpicker-number",i);r.b=n(".ui-colorpicker-rgb-b .ui-colorpicker-number",i);n(".ui-colorpicker-number",i).on("input change keyup",function(){var u=n(".ui-colorpicker-rgb-r .ui-colorpicker-number",i).val();t.color.setRGB(r.r.val()/255,r.g.val()/255,r.b.val()/255);t._change()})};this.repaint=function(){var n=t.color.getRGB();r.r.val(Math.round(n.r*255));r.g.val(Math.round(n.g*255));r.b.val(Math.round(n.b*255))};this.update=function(){n(".ui-colorpicker-mode",i).each(function(){var i=n(this);i.prop("checked",i.val()===t.mode)});this.repaint()};this.disable=function(t){n(":input",i).prop("disabled",t)}},lab:function(t){var f=this,r=null,i={},u=function(){var n="";return t.options.hsv&&(n+='<div class="ui-colorpicker-lab-l"><label>'+t._getRegional("labL")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><\/div><div class="ui-colorpicker-lab-a"><label>'+t._getRegional("labA")+'<\/label><input class="ui-colorpicker-number" type="number" min="-128" max="127"/><\/div><div class="ui-colorpicker-lab-b"><label>'+t._getRegional("labB")+'<\/label><input class="ui-colorpicker-number" type="number" min="-128" max="127"/><\/div>'),'<div class="ui-colorpicker-lab">'+n+"<\/div>"};this.init=function(){r=n(u()).appendTo(n(".ui-colorpicker-lab-container",t.dialog));i.l=n(".ui-colorpicker-lab-l .ui-colorpicker-number",r);i.a=n(".ui-colorpicker-lab-a .ui-colorpicker-number",r);i.b=n(".ui-colorpicker-lab-b .ui-colorpicker-number",r);n(".ui-colorpicker-number",r).on("input change keyup",function(){t.color.setLAB(parseInt(i.l.val(),10)/100,(parseInt(i.a.val(),10)+128)/255,(parseInt(i.b.val(),10)+128)/255);t._change()})};this.repaint=function(){var n=t.color.getLAB();i.l.val(Math.round(n.l*100));i.a.val(Math.round(n.a*255)-128);i.b.val(Math.round(n.b*255)-128)};this.update=this.repaint;this.disable=function(t){n(":input",r).prop("disabled",t)}},cmyk:function(t){var f=this,r=null,i={},u=function(){var n="";return t.options.hsv&&(n+='<div class="ui-colorpicker-cmyk-c"><label>'+t._getRegional("cmykC")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%<\/span><\/div><div class="ui-colorpicker-cmyk-m"><label>'+t._getRegional("cmykM")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%<\/span><\/div><div class="ui-colorpicker-cmyk-y"><label>'+t._getRegional("cmykY")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%<\/span><\/div><div class="ui-colorpicker-cmyk-k"><label>'+t._getRegional("cmykK")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%<\/span><\/div>'),'<div class="ui-colorpicker-cmyk">'+n+"<\/div>"};this.init=function(){r=n(u()).appendTo(n(".ui-colorpicker-cmyk-container",t.dialog));i.c=n(".ui-colorpicker-cmyk-c .ui-colorpicker-number",r);i.m=n(".ui-colorpicker-cmyk-m .ui-colorpicker-number",r);i.y=n(".ui-colorpicker-cmyk-y .ui-colorpicker-number",r);i.k=n(".ui-colorpicker-cmyk-k .ui-colorpicker-number",r);n(".ui-colorpicker-number",r).on("input change keyup",function(){t.color.setCMYK(parseInt(i.c.val(),10)/100,parseInt(i.m.val(),10)/100,parseInt(i.y.val(),10)/100,parseInt(i.k.val(),10)/100);t._change()})};this.repaint=function(){var n=t.color.getCMYK();i.c.val(Math.round(n.c*100));i.m.val(Math.round(n.m*100));i.y.val(Math.round(n.y*100));i.k.val(Math.round(n.k*100))};this.update=this.repaint;this.disable=function(t){n(":input",r).prop("disabled",t)}},alpha:function(t){var f=this,i=null,r,u=function(){var n="";return t.options.alpha&&(n+='<div class="ui-colorpicker-a"><input class="ui-colorpicker-mode" name="mode" type="radio" value="a"/><label>'+t._getRegional("alphaA")+'<\/label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%<\/span><\/div>'),'<div class="ui-colorpicker-alpha">'+n+"<\/div>"};this.init=function(){i=n(u()).appendTo(n(".ui-colorpicker-alpha-container",t.dialog));n(".ui-colorpicker-mode",i).click(function(){t.mode=n(this).val();t._updateAllParts()});r=n(".ui-colorpicker-a .ui-colorpicker-number",i);n(".ui-colorpicker-number",i).on("input change keyup",function(){t.color.setAlpha(r.val()/100);t._change()})};this.update=function(){n(".ui-colorpicker-mode",i).each(function(){n(this).prop("checked",n(this).val()===t.mode)});this.repaint()};this.repaint=function(){r.val(Math.round(t.color.getAlpha()*100))};this.disable=function(t){n(":input",i).prop("disabled",t)}},hex:function(r){var s=this,f=null,u={},e=function(t){var i,r;return(r=/^#?([a-fA-F0-9]{1,3})$/.exec(t),r)?(i=parseInt(r[1],16),new n.colorpicker.Color((i>>8&15)/15,(i>>4&15)/15,(i&15)/15)):(r=/^#?([a-fA-F0-9]{1,6})$/.exec(t),r)?(i=parseInt(r[1],16),new n.colorpicker.Color((i>>16&255)/255,(i>>8&255)/255,(i&255)/255)):new n.colorpicker.Color},o=function(){var n="";return r.options.alpha&&(n+='<input class="ui-colorpicker-hex-alpha" type="text" maxlength="2" size="2"/>'),n+='<input class="ui-colorpicker-hex-input" type="text" maxlength="6" size="6"/>','<div class="ui-colorpicker-hex"><label>#<\/label>'+n+"<\/div>"};this.init=function(){f=n(o()).appendTo(n(".ui-colorpicker-hex-container",r.dialog));u.color=n(".ui-colorpicker-hex-input",f);u.alpha=n(".ui-colorpicker-hex-alpha",f);u.color.on("keydown keyup",function(n){return n.ctrlKey||n.metaKey||t.isHex(n.which)||!t.isPrint(n.which)});u.color.on("change",function(){/[^a-fA-F0-9]/.test(u.color.val())&&u.color.val(u.color.val().replace(/[^a-fA-F0-9]/g,""))});u.color.on("change keyup",function(){r.color=e(u.color.val()).setAlpha(r.color.getAlpha());r._change()});u.alpha.on("keydown keyup",function(n){return n.ctrlKey||n.metaKey||t.isHex(n.which)||!t.isPrint(n.which)});u.alpha.on("change",function(){/[^a-fA-F0-9]/.test(u.alpha)&&u.alpha.val(u.alpha.val().replace(/[^a-fA-F0-9]/g,""))});u.alpha.on("change keyup",function(){r.color.setAlpha(parseInt(u.alpha.val(),16)/255);r._change()})};this.repaint=function(){u.color.is(":focus")||u.color.val(r.color.toHex(!0));u.alpha.is(":focus")||u.alpha.val(i(r.color.getAlpha()*255))};this.update=this.repaint;this.disable=function(t){n(":input",f).prop("disabled",t)}},swatches:function(t){var f=this,i=null,u=function(){var i="";return t._eachSwatch(function(t,r){var u=new n.colorpicker.Color(r.r,r.g,r.b),f=u.toCSS();i+='<div class="ui-colorpicker-swatch" style="background-color:'+f+'" title="'+t+'"><\/div>'}),'<div class="ui-colorpicker-swatches ui-colorpicker-border" style="width:'+t.options.swatchesWidth+'px">'+i+"<\/div>"},r=function(){t.color=t._parseColor(n(this).css("background-color"))||new n.colorpicker.Color;t._change()};this.init=function(){i=n(u());n(".ui-colorpicker-swatches-container",t.dialog).html(i);n(".ui-colorpicker-swatch",i).on("click",r)};this.disable=function(t){n(".ui-colorpicker-swatch",i)[t?"off":"on"]("click",r)}},footer:function(t){var e=this,i=null,r="ui-colorpicker-special-transparent-"+t.colorpicker_index,u="ui-colorpicker-special-none-"+t.colorpicker_index,f=function(){var n="";return(t.options.alpha||!t.inline&&t.options.showNoneButton)&&(n+='<div class="ui-colorpicker-buttonset">',t.options.alpha&&(n+='<input type="radio" name="ui-colorpicker-special" id="'+r+'" class="ui-colorpicker-special-transparent"/><label for="'+r+'">'+t._getRegional("transparent")+"<\/label>"),!t.inline&&t.options.showNoneButton&&(n+='<input type="radio" name="ui-colorpicker-special" id="'+u+'" class="ui-colorpicker-special-none"><label for="'+u+'">'+t._getRegional("none")+"<\/label>"),n+="<\/div>"),t.inline||(n+='<div class="ui-dialog-buttonset">',t.options.showCancelButton&&(n+='<button class="ui-colorpicker-cancel">'+t._getRegional("cancel")+"<\/button>"),n+='<button class="ui-colorpicker-ok">'+t._getRegional("ok")+"<\/button>",n+="<\/div>"),'<div class="ui-dialog-buttonpane ui-widget-content">'+n+"<\/div>"};this.init=function(){i=n(f()).appendTo(t.dialog);n(".ui-colorpicker-ok",i).button().click(function(){t.close()});n(".ui-colorpicker-cancel",i).button().click(function(){t.close(!0)});n(".ui-colorpicker-buttonset",i)[n.fn.controlgroup?"controlgroup":"buttonset"]();n(".ui-colorpicker-special-color",i).click(function(){t._change()});n("#"+u,i).click(function(){t.color.set=!1;t._change()});n("#"+r,i).click(function(){t.color.setAlpha(0);t._change()})};this.repaint=function(){n(".ui-colorpicker-special-none",i).prop("checked",!t.color.set).button("refresh");n(".ui-colorpicker-special-transparent",i).prop("checked",t.color.set&&t.color.getAlpha()===0).button("refresh");n(".ui-colorpicker-ok",i).button(t.changed?"enable":"disable")};this.update=function(){};this.disable=function(r){n(":input, :button",i).button(r?"disable":"enable");r||n(".ui-colorpicker-ok",i).button(t.changed?"enable":"disable")}}};this.Color=function(){var t={rgb:{r:0,g:0,b:0},hsv:{h:0,s:0,v:0},hsl:{h:0,s:0,l:0},lab:{l:0,a:0,b:0},cmyk:{c:0,m:0,y:0,k:1}},a=1,u=[.9504285,1,1.0889],r=arguments,i=function(n){return isNaN(n)||n===null?0:(typeof n=="string"&&(n=parseInt(n,10)),Math.max(0,Math.min(n,1)))},l=function(n){var n=Math.round(n),t="0123456789abcdef",i=n%16,r=(n-i)/16;return t.charAt(r)+t.charAt(i)},f=function(n){var t=n.r>.04045?Math.pow((n.r+.055)/1.055,2.4):n.r/12.92,i=n.g>.04045?Math.pow((n.g+.055)/1.055,2.4):n.g/12.92,r=n.b>.04045?Math.pow((n.b+.055)/1.055,2.4):n.b/12.92;return{x:t*.4124+i*.3576+r*.1805,y:t*.2126+i*.7152+r*.0722,z:t*.0193+i*.1192+r*.9505}},v=function(n){var t={r:n.x*3.2406+n.y*-1.5372+n.z*-.4986,g:n.x*-.9689+n.y*1.8758+n.z*.0415,b:n.x*.0557+n.y*-.204+n.z*1.057};return t.r=t.r>.0031308?1.055*Math.pow(t.r,1/2.4)-.055:12.92*t.r,t.g=t.g>.0031308?1.055*Math.pow(t.g,1/2.4)-.055:12.92*t.g,t.b=t.b>.0031308?1.055*Math.pow(t.b,1/2.4)-.055:12.92*t.b,t},e=function(n){var o=Math.min(n.r,n.g,n.b),i=Math.max(n.r,n.g,n.b),r=i-o,u,f,e,t={h:0,s:0,v:i};return r===0?(t.h=0,t.s=0):(t.s=r/i,u=((i-n.r)/6+r/2)/r,f=((i-n.g)/6+r/2)/r,e=((i-n.b)/6+r/2)/r,n.r===i?t.h=e-f:n.g===i?t.h=1/3+u-e:n.b===i&&(t.h=2/3+f-u),t.h<0?t.h+=1:t.h>1&&(t.h-=1)),t},y=function(n){var t={r:0,g:0,b:0},u,i,r,f,e;return n.s===0?t.r=t.g=t.b=n.v:(u=n.h===1?0:n.h*6,i=Math.floor(u),r=n.v*(1-n.s),f=n.v*(1-n.s*(u-i)),e=n.v*(1-n.s*(1-(u-i))),i===0?(t.r=n.v,t.g=e,t.b=r):i===1?(t.r=f,t.g=n.v,t.b=r):i===2?(t.r=r,t.g=n.v,t.b=e):i===3?(t.r=r,t.g=f,t.b=n.v):i===4?(t.r=e,t.g=r,t.b=n.v):(t.r=n.v,t.g=r,t.b=f)),t},o=function(n){var u=Math.min(n.r,n.g,n.b),i=Math.max(n.r,n.g,n.b),r=i-u,f,e,o,t={h:0,s:0,l:(i+u)/2};return r===0?(t.h=0,t.s=0):(t.s=t.l<.5?r/(i+u):r/(2-i-u),f=((i-n.r)/6+r/2)/r,e=((i-n.g)/6+r/2)/r,o=((i-n.b)/6+r/2)/r,n.r===i?t.h=o-e:n.g===i?t.h=1/3+f-o:n.b===i&&(t.h=2/3+e-f),t.h<0?t.h+=1:t.h>1&&(t.h-=1)),t},p=function(n){var i,t,r=function(n,t,i){return(i<0&&(i+=1),i>1&&(i-=1),6*i<1)?n+(t-n)*6*i:2*i<1?t:3*i<2?n+(t-n)*(2/3-i)*6:n};return n.s===0?{r:n.l,g:n.l,b:n.l}:(t=n.l<.5?n.l*(1+n.s):n.l+n.s-n.s*n.l,i=2*n.l-t,{r:r(i,t,n.h+1/3),g:r(i,t,n.h),b:r(i,t,n.h-1/3)})},s=function(n){var i=n.x/u[0],t=n.y/u[1],r=n.z/u[2];return i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,{l:(116*t-16)/100,a:(500*(i-t)+128)/255,b:(200*(t-r)+128)/255}},w=function(n){var i={l:n.l*100,a:n.a*255-128,b:n.b*255-128},t={x:0,y:(i.l+16)/116,z:0};return t.x=i.a/500+t.y,t.z=t.y-i.b/200,t.x=Math.pow(t.x,3)>.008856?Math.pow(t.x,3):(t.x-16/116)/7.787,t.y=Math.pow(t.y,3)>.008856?Math.pow(t.y,3):(t.y-16/116)/7.787,t.z=Math.pow(t.z,3)>.008856?Math.pow(t.z,3):(t.z-16/116)/7.787,t.x*=u[0],t.y*=u[1],t.z*=u[2],t},h=function(n){return{c:1-n.r,m:1-n.g,y:1-n.b}},b=function(n){return{r:1-n.c,g:1-n.m,b:1-n.y}},c=function(n){var t=1;return(n.c<t&&(t=n.c),n.m<t&&(t=n.m),n.y<t&&(t=n.y),t===1)?{c:0,m:0,y:0,k:1}:{c:(n.c-t)/(1-t),m:(n.m-t)/(1-t),y:(n.y-t)/(1-t),k:t}},k=function(n){return{c:n.c*(1-n.k)+n.k,m:n.m*(1-n.k)+n.k,y:n.y*(1-n.k)+n.k}};this.set=!1;this.setAlpha=function(n){return n!==null&&(a=i(n)),this.set=!0,this};this.getAlpha=function(){return a};this.setRGB=function(n,r,u){return t={rgb:this.getRGB()},n!==null&&(t.rgb.r=i(n)),r!==null&&(t.rgb.g=i(r)),u!==null&&(t.rgb.b=i(u)),this.set=!0,this};this.getChannel=function(n){switch(n){case"h":case"s":case"v":return this.getHSV()[n];case"r":case"g":case"b":return this.getRGB()[n];case"a":return this.getAlpha()}return null};this.setChannel=function(n,t){switch(n){case"h":return this.setHSV(t,null,null);case"s":return this.setHSV(null,t,null);case"v":return this.setHSV(null,null,t);case"r":return this.setRGB(t,null,null);case"g":return this.setRGB(null,t,null);case"b":return this.setRGB(null,null,t);case"a":return this.setAlpha(t)}return this};this.setHSV=function(n,r,u){return t={hsv:this.getHSV()},n!==null&&(t.hsv.h=i(n)),r!==null&&(t.hsv.s=i(r)),u!==null&&(t.hsv.v=i(u)),this.set=!0,this};this.setHSL=function(n,r,u){return t={hsl:this.getHSL()},n!==null&&(t.hsl.h=i(n)),r!==null&&(t.hsl.s=i(r)),u!==null&&(t.hsl.l=i(u)),this.set=!0,this};this.setLAB=function(n,r,u){return t={lab:this.getLAB()},n!==null&&(t.lab.l=i(n)),r!==null&&(t.lab.a=i(r)),u!==null&&(t.lab.b=i(u)),this.set=!0,this};this.setCMYK=function(n,r,u,f){return t={cmyk:this.getCMYK()},n!==null&&(t.cmyk.c=i(n)),r!==null&&(t.cmyk.m=i(r)),u!==null&&(t.cmyk.y=i(u)),f!==null&&(t.cmyk.k=i(f)),this.set=!0,this};this.getRGB=function(){return t.rgb||(t.rgb=t.lab?v(w(t.lab)):t.hsv?y(t.hsv):t.hsl?p(t.hsl):t.cmyk?b(k(t.cmyk)):{r:0,g:0,b:0},t.rgb.r=i(t.rgb.r),t.rgb.g=i(t.rgb.g),t.rgb.b=i(t.rgb.b)),n.extend({},t.rgb)};this.getHSV=function(){return t.hsv||(t.hsv=t.lab?e(this.getRGB()):t.rgb?e(t.rgb):t.hsl?e(this.getRGB()):t.cmyk?e(this.getRGB()):{h:0,s:0,v:0},t.hsv.h=i(t.hsv.h),t.hsv.s=i(t.hsv.s),t.hsv.v=i(t.hsv.v)),n.extend({},t.hsv)};this.getHSL=function(){return t.hsl||(t.hsl=t.rgb?o(t.rgb):t.hsv?o(this.getRGB()):t.cmyk?o(this.getRGB()):t.hsv?o(this.getRGB()):{h:0,s:0,l:0},t.hsl.h=i(t.hsl.h),t.hsl.s=i(t.hsl.s),t.hsl.l=i(t.hsl.l)),n.extend({},t.hsl)};this.getCMYK=function(){return t.cmyk||(t.cmyk=t.rgb?c(h(t.rgb)):t.hsv?c(h(this.getRGB())):t.hsl?c(h(this.getRGB())):t.lab?c(h(this.getRGB())):{c:0,m:0,y:0,k:1},t.cmyk.c=i(t.cmyk.c),t.cmyk.m=i(t.cmyk.m),t.cmyk.y=i(t.cmyk.y),t.cmyk.k=i(t.cmyk.k)),n.extend({},t.cmyk)};this.getLAB=function(){return t.lab||(t.lab=t.rgb?s(f(t.rgb)):t.hsv?s(f(this.getRGB())):t.hsl?s(f(this.getRGB())):t.cmyk?s(f(this.getRGB())):{l:0,a:0,b:0},t.lab.l=i(t.lab.l),t.lab.a=i(t.lab.a),t.lab.b=i(t.lab.b)),n.extend({},t.lab)};this.getChannels=function(){return{r:this.getRGB().r,g:this.getRGB().g,b:this.getRGB().b,a:this.getAlpha(),h:this.getHSV().h,s:this.getHSV().s,v:this.getHSV().v,c:this.getCMYK().c,m:this.getCMYK().m,y:this.getCMYK().y,k:this.getCMYK().k,L:this.getLAB().l,A:this.getLAB().a,B:this.getLAB().b}};this.getSpaces=function(){return n.extend(!0,{},t)};this.distance=function(n){var t="get"+"lab".toUpperCase(),i=this[t](),f=n[t](),r=0;for(var u in i)r+=Math.pow(i[u]-f[u],2);return r};this.equals=function(n){if(n){var t=this.getRGB(),i=n.getRGB();return this.set===n.set&&this.getAlpha()===n.getAlpha()&&t.r===i.r&&t.g===i.g&&t.b===i.b}return!1};this.limit=function(n){n-=1;var t=this.getRGB();this.setRGB(Math.round(t.r*n)/n,Math.round(t.g*n)/n,Math.round(t.b*n)/n)};this.toHex=function(){var n=this.getRGB();return l(n.r*255)+l(n.g*255)+l(n.b*255)};this.toCSS=function(){return"#"+this.toHex()};this.copy=function(){var t=new n.colorpicker.Color(this.getSpaces(),this.getAlpha());return t.set=this.set,t};r.length===2&&(t=r[0],this.setAlpha(r[1]===0?0:r[1]||1),this.set=!0);r.length>2&&(this.setRGB(r[0],r[1],r[2]),this.setAlpha(r[3]===0?0:r[3]||1),this.set=!0)}},n.widget("vanderlee.colorpicker",{options:{alpha:!1,altAlpha:!0,altField:"",altOnChange:!0,altProperties:"background-color",autoOpen:!1,buttonClass:null,buttonColorize:!1,buttonImage:"images/ui-colorpicker.png",buttonImageOnly:!1,buttonText:null,closeOnEscape:!0,closeOnOutside:!0,color:"#00FF00",colorFormat:"HEX",disabled:!1,draggable:!0,containment:null,duration:"fast",hideOn:"button",hsv:!0,inline:!0,inlineFrame:!0,layout:{map:[0,0,1,5],bar:[1,0,1,5],preview:[2,0,1,1],hsv:[2,1,1,1],rgb:[2,2,1,1],alpha:[2,3,1,1],hex:[2,4,1,1],lab:[3,1,1,1],cmyk:[3,2,1,2],swatches:[4,0,1,5]},limit:"",modal:!1,mode:"h",okOnEnter:!1,parts:"",part:{map:{size:256},bar:{size:256}},position:null,regional:"",revert:!1,rgb:!0,showAnim:"fadeIn",showCancelButton:!0,showNoneButton:!1,showCloseButton:!0,showOn:"focus click alt",showOptions:{},swatches:null,swatchesWidth:84,title:null,cancel:null,close:null,init:null,ok:null,open:null,select:null,stop:null,ready:null},_create:function(){var t=this,i;if(t.colorpicker_index=r++,t.widgetEventPrefix="colorpicker",t.opened=!1,t.generated=!1,t.inline=!1,t.changed=!1,t.dialog=null,t.button=null,t.image=null,t.overlay=null,t.events={window_resize:null,document_keydown:null,document_click_html:null},t.mode=t.options.mode,t.element.is("input")||t.options.inline===!1){if(t._setColor(t.element.is("input")?t.element.val():t.options.color),t._callback("init"),/\bfocus|all|both\b/.test(t.options.showOn))t.element.on("focus",function(){t.open()});if(/\bfocus|all|both\b/.test(t.options.hideOn))t.element.on("focusout",function(){t.close()});if(/\bclick|all|both\b/.test(t.options.showOn))t.element.on("click",function(){t.opened&&/\bclick|all|both\b/.test(t.options.hideOn)?t.close():t.open()});if(/\bbutton|all|both\b/.test(t.options.showOn)&&(t.options.buttonImage!==""&&(i=t.options.buttonText||t._getRegional("button"),t.image=n("<img/>").attr({src:t.options.buttonImage,alt:i,title:i}),t.options.buttonClass&&t.image.attr("class",t.options.buttonClass),t._setImageBackground()),t.options.buttonImageOnly&&t.image?t.button=t.image:(t.button=n('<button type="button"><\/button>').html(t.image||t.options.buttonText).button(),t.image=t.image?n("img",t.button).first():null),t.button.insertAfter(t.element).click(function(){t.options.disabled||(t.opened&&/\bbutton|all|both\b/.test(t.options.hideOn)?t.close():t.open())})),/\balt|all|both\b/.test(t.options.showOn))n(t.options.altField).on("click",function(){t.opened&&/\balt|all|both\b/.test(t.options.hideOn)?t.close():t.open()});t.options.autoOpen&&t.open()}else t.inline=!0,t._generate(),t.opened=!0;return(t.element.is(":disabled")||t.options.disabled)&&t.disable(),t._callback("ready"),this},_setOption:function(t,i){switch(t){case"disabled":this[i?"disable":"enable"]();break;case"swatches":this.options.swatches=i;this.parts.swatches.init()}n.Widget.prototype._setOption.apply(this,arguments)},enable:function(){this.element&&this.element.prop("disabled",!1);this.button&&this.button.prop("disabled",!1);this.dialog&&this.dialog.removeClass("ui-colorpicker-disabled");this.options.disabled=!1;this.parts&&n.each(this.parts,function(n,t){t.disable&&t.disable(!1)})},disable:function(){this.element&&this.element.prop("disabled",!0);this.button&&this.button.prop("disabled",!0);this.dialog&&this.dialog.addClass("ui-colorpicker-disabled");this.options.disabled=!0;this.parts&&n.each(this.parts,function(n,t){t.disable&&t.disable(!0)})},_setImageBackground:function(){this.image&&this.options.buttonColorize&&this.image.css("background-color",this.color.set?this._formatColor("RGBA",this.color):"")},_setAltField:function(){if(this.options.altOnChange&&this.options.altField&&this.options.altProperties){for(var i,r=this.options.altProperties.split(","),t=0;t<=r.length;++t){i=n.trim(r[t]);switch(i){case"color":case"fill":case"stroke":case"background-color":case"backgroundColor":case"outline-color":case"border-color":n(this.options.altField).css(i,this.color.set?this.color.toCSS():"")}}this.options.altAlpha&&n(this.options.altField).css("opacity",this.color.set?this.color.getAlpha():"")}},_setColor:function(t){this.color=this._parseColor(t)||new n.colorpicker.Color;this.currentColor=this.color.copy();this._setImageBackground();this._setAltField()},setColor:function(n){this._setColor(n);this._change()},getColor:function(n){return this._formatColor(n||this.options.colorFormat,this.color)},_generateInline:function(){var t=this;n(t.element).html(t.options.inlineFrame?f:e);t.dialog=n(".ui-colorpicker",t.element)},_generatePopup:function(){var t=this;if(t.dialog=n(u).appendTo("body"),t.events.document_click_html===null)n(document).on("touchstart click","html",t.events.document_click_html=function(i){if(t.opened&&i.target!==t.element[0]&&!t.overlay){if(t.dialog.is(i.target)||t.dialog.has(i.target).length>0){t.element.blur();return}var r,u=n(i.target).parents();for(u.push(i.target),r=0;r<=u.length;++r){if(t.button!==null&&u[r]===t.button[0])return;if(/\balt|all|both\b/.test(t.options.showOn)&&n(t.options.altField).is(u[r]))return}t.options.closeOnOutside&&t.close(t.options.revert)}});if(t.events.document_keydown===null)n(document).on("keydown",t.events.document_keydown=function(n){t.opened&&n.keyCode===27&&t.options.closeOnEscape&&t.close(t.options.revert);t.opened&&n.keyCode===13&&t.options.okOnEnter&&t.close()});t.element.keydown(function(n){n.keyCode===9&&t.close()}).keyup(function(){var n=t._parseColor(t.element.val());n&&!t.color.equals(n)&&(t.color=n,t._change())})},_generate:function(){var t=this,u,r,f,i;t._setColor(t.inline||!t.element.is("input")?t.options.color:t.element.val());t[t.inline?"_generateInline":"_generatePopup"]();u=typeof t.options.parts=="string"?n.colorpicker.partslists[t.options.parts]?n.colorpicker.partslists[t.options.parts]:n.colorpicker.partslists[t.inline?"inline":"popup"]:t.options.parts;t.parts={};n.each(u,function(i,r){n.colorpicker.parts[r]&&(t.parts[r]=new n.colorpicker.parts[r](t))});t.generated||(r=[],n.each(t.options.layout,function(n,i){t.parts[n]&&r.push({part:n,pos:i})}),f=n(o(r,function(n,t,r){return i=["ui-colorpicker-"+n.part+"-container"],t>0&&i.push("ui-colorpicker-padding-left"),r>0&&i.push("ui-colorpicker-padding-top"),'<td  class="'+i.join(" ")+'"'+(n.pos[2]>1?' colspan="'+n.pos[2]+'"':"")+(n.pos[3]>1?' rowspan="'+n.pos[3]+'"':"")+' valign="top"><\/td>'})).appendTo(t.dialog),t.options.inlineFrame&&f.addClass("ui-dialog-content ui-widget-content"),t._initAllParts(),t._updateAllParts(),t.generated=!0)},_effectGeneric:function(t,i,r,u,f){var e=this;n.effects&&n.effects[e.options.showAnim]?t[i](e.options.showAnim,e.options.showOptions,e.options.duration,f):(t[e.options.showAnim==="slideDown"?r:e.options.showAnim==="fadeIn"?u:i](e.options.showAnim?e.options.duration:null,f),!n.isFunction(f)||e.options.showAnim&&e.options.duration||f())},_effectShow:function(n,t){this._effectGeneric(n,"show","slideDown","fadeIn",t)},_effectHide:function(n,t){this._effectGeneric(n,"hide","slideUp","fadeOut",t)},open:function(){var t=this,i,u,r;t.opened||(t._generate(),u=t.element.is(":hidden")?n("<div/>").insertBefore(t.element):t.element,t.element.is(":hidden")&&u.remove(),i=0,n(t.element[0]).parents().each(function(){var t=n(this).css("z-index");if(typeof t!="number"&&typeof t!="string"||t===""||isNaN(t))n(this).siblings().each(function(){var t=n(this).css("z-index");typeof t!="number"&&typeof t!="string"||t===""||isNaN(t)||t>i&&(i=parseInt(t,10))});else if(t>i)return i=parseInt(t,10),!1}),i+=2,t.dialog.css("z-index",i),t.options.modal&&(t.overlay=n('<div class="ui-widget-overlay"><\/div>').appendTo("body").css("z-index",i-1),t.events.window_resize!==null&&n(window).off("resize",t.events.window_resize),t.events.window_resize=function(){t.overlay&&(t.overlay.width(n(document).width()),t.overlay.height(n(document).height()))},n(window).on("resize",t.events.window_resize),t.events.window_resize()),t._effectShow(this.dialog),t.options.position?(r=n.extend({},t.options.position),r.of==="element"&&(r.of=u)):r={my:"left top",at:"left bottom",of:u,collision:"flip"},t.dialog.position(r),t.opened=!0,t._callback("open"),n(function(){t._repaintAllParts()}))},close:function(t){var i=this;i.opened&&(t?(i.color=i.currentColor.copy(),i._change(),i._callback("cancel")):(i.currentColor=i.color.copy(),i._callback("ok")),i.changed=!1,i.overlay&&(n(window).off("resize",i.events.window_resize),i.overlay.remove()),i._effectHide(i.dialog,function(){i.dialog.remove();i.dialog=null;i.generated=!1;i.opened=!1;i._callback("close")}))},destroy:function(){var t=this;t.events.document_click_html!==null&&n(document).off("touchstart click","html",t.events.document_click_html);t.events.document_keydown!==null&&n(document).off("keydown",t.events.document_keydown);t.events.window_resize!==null&&n(window).off("resize",t.events.window_resize);this.element.off();this.overlay&&this.overlay.remove();this.dialog!==null&&this.dialog.remove();this.image!==null&&this.image.remove();this.button!==null&&this.button.remove()},_callback:function(n){var t=this,i,r;return t.color.set?(i={formatted:t._formatColor(t.options.colorFormat,t.color),colorPicker:t},i.hex=t.color.toHex(),i.css=t.color.toCSS(),i.a=t.color.getAlpha(),i.rgb=t.color.getRGB(),i.hsv=t.color.getHSV(),i.cmyk=t.color.getCMYK(),i.hsl=t.color.getHSL(),r=t.color.getLAB(),r.a=r.a*2-1,r.b=r.b*2-1,i.lab=r,t._trigger(n,null,i)):t._trigger(n,null,{formatted:"",colorPicker:t})},_initAllParts:function(){n.each(this.parts,function(n,t){t.init&&t.init()})},_updateAllParts:function(){n.each(this.parts,function(n,t){t.update&&t.update()})},_repaintAllParts:function(){n.each(this.parts,function(n,t){t.repaint&&t.repaint()})},_change:function(t){this.color.set&&this.options.limit&&n.colorpicker.limits[this.options.limit]&&n.colorpicker.limits[this.options.limit](this.color,this);this.changed=!this.color.equals(this.currentColor);this.inline||(this.color.set?this.color.equals(this._parseColor(this.element.val()))||this.element.val(this._formatColor(this.options.colorFormat,this.color)).change():this.element.val()!==""&&this.element.val("").change(),this._setImageBackground());this._setAltField();this.options.color=this.color.set?this.color.toCSS():"";this.opened&&this._repaintAllParts();this._callback("select");(typeof t=="undefined"?!1:!t)||this._callback("stop")},_hoverable:function(n){n.hover(function(){n.addClass("ui-state-hover")},function(){n.removeClass("ui-state-hover")})},_focusable:function(n){n.focus(function(){n.addClass("ui-state-focus")}).blur(function(){n.removeClass("ui-state-focus")})},_getRegional:function(t){return n.colorpicker.regional[this.options.regional][t]!==undefined?n.colorpicker.regional[this.options.regional][t]:n.colorpicker.regional[""][t]},_getSwatches:function(){return typeof this.options.swatches=="string"?n.colorpicker.swatches[this.options.swatches]:n.isPlainObject(this.options.swatches)?this.options.swatches:n.colorpicker.swatches.html},_eachSwatch:function(t){var i=this._getSwatches(),r;n.each(i,function(u,f){return r=n.isArray(i)?f.name:u,t(r,f)})},_getSwatch:function(n){var t=!1;return this._eachSwatch(function(i,r){if(i.toLowerCase()==n.toLowerCase())return t=r,!1}),t},_parseFormat:function(t,i){var y=this,a={x:function(){return"([0-9a-fA-F]{2})"},d:function(){return"([12]?[0-9]{1,2})"},f:function(){return"([0-9]*\\.?[0-9]*)"},p:function(){return"([0-9]*\\.?[0-9]*)"}},v={x:function(n){return parseInt(n,16)/255},d:function(n){return n/255},f:function(n){return n},p:function(n){return n*.01}},h={r:"setRGB",g:"setRGB",b:"setRGB",h:"setHSV",s:"setHSV",v:"setHSV",c:"setCMYK",m:"setCMYK",y:"setCMYK",k:"setCMYK",L:"setLAB",A:"setLAB",B:"setLAB"},c=[],l=[],r=null,u,f,e,o,s;return f=t.replace(/[()\\^$.|?*+[\]]/g,function(n){return"\\"+n}),f=f.replace(/\\?[argbhsvcmykLAB][xdfp]/g,function(n){if(n.match(/^\\/))return n.slice(1);var t=n.charAt(0),i=n.charAt(1);return c.push(t),l.push(v[i]),h[t]&&(r=h[t]),a[i]()}),r&&(e=i.match(new RegExp(f)),e&&(o=[],e.shift(),n.each({setRGB:["r","g","b"],setHSV:["h","s","v"],setCMYK:["c","m","y","k"],setLAB:["L","A","B"]}[r],function(t,i){s=n.inArray(i,c);o[t]=l[s](e[s])}),u=new n.colorpicker.Color,u[r].apply(u,o))),u},_parseColor:function(t){var r=this,i,u=n.isArray(r.options.colorFormat)?r.options.colorFormat:[r.options.colorFormat];return(n.each(u,function(u,f){return i=n.colorpicker.parsers[f]?n.colorpicker.parsers[f](t,r):r._parseFormat(f,t),i?!1:void 0}),i||n.each(n.colorpicker.parsers,function(n,u){return i=u(t,r),i?!1:void 0}),i)?i:!1},_exactName:function(t){var i=!1;return this._eachSwatch(function(r,u){if(t.equals(new n.colorpicker.Color(u.r,u.g,u.b)))return i=r,!1}),i},_closestName:function(t){var f=t.getRGB(),r=null,u=!1,i;return this._eachSwatch(function(f,e){if(i=t.distance(new n.colorpicker.Color(e.r,e.g,e.b)),i<r||r===null){if(u=f,i<=1e-20)return!1;r=i}}),u},_formatColor:function(t,r){var f=this,u=null,e={x:function(n){return i(n*255)},d:function(n){return Math.round(n*255)},f:function(n){return n},p:function(n){return n*100}},o=r.getChannels();return n.isArray(t)||(t=[t]),n.each(t,function(t,i){return n.colorpicker.writers[i]?(u=n.colorpicker.writers[i](r,f),u===!1):(u=i.replace(/\\?[argbhsvcmykLAB][xdfp]/g,function(n){return n.match(/^\\/)?n.slice(1):e[n.charAt(1)](o[n.charAt(0)])}),!1)}),u}}),n.vanderlee.colorpicker});
/*!
 * ClockPicker v0.0.7 (http://weareoutman.github.io/clockpicker/)
 * Copyright 2014 Wang Shenwei.
 * Licensed under MIT (https://github.com/weareoutman/clockpicker/blob/gh-pages/LICENSE)
 */
(function(){function o(n){return document.createElementNS(k,n)}function s(n){return(n<10?"0":"")+n}function it(n){var t=++tt+"";return n?n+t:t}function t(t,v){function vt(n,t){var b=st.offset(),k=/^touch/.test(n.type),s=b.left+i,c=b.top+i,f=(k?n.originalEvent.touches[0]:n).pageX-s,o=(k?n.originalEvent.touches[0]:n).pageY-c,d=Math.sqrt(f*f+o*o),l=!1,g;if(!t||!(d<r-u||d>r+u)){n.preventDefault();g=setTimeout(function(){a.addClass("clockpicker-moving")},200);h&&st.append(nt.canvas);nt.setHand(f,o,!t,!0);e.off(y).on(y,function(n){n.preventDefault();var t=/^touch/.test(n.type),i=(t?n.originalEvent.touches[0]:n).pageX-s,r=(t?n.originalEvent.touches[0]:n).pageY-c;(l||i!==f||r!==o)&&(l=!0,nt.setHand(i,r,!1,!0))});e.off(p).on(p,function(n){e.off(p);n.preventDefault();var i=/^touch/.test(n.type),r=(i?n.originalEvent.changedTouches[0]:n).pageX-s,u=(i?n.originalEvent.changedTouches[0]:n).pageY-c;(t||l)&&r===f&&u===o&&nt.setHand(r,u);nt.currentView==="hours"?nt.toggleView("minutes",w/2):v.autoclose&&(nt.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){nt.done()},w/2));st.prepend(yt);clearTimeout(g);a.removeClass("clockpicker-moving");e.off(y)})}}var d=n(rt),st=d.find(".clockpicker-plate"),pt=d.find(".clockpicker-hours"),bt=d.find(".clockpicker-minutes"),ti=d.find(".clockpicker-am-pm-block"),kt=t.prop("tagName")==="INPUT",dt=kt?t:t.find("input"),gt=t.find(".input-group-addon"),nt=this,ni,ii,at,b,k,tt,et,wt,yt,ot,ut,ft,ht,ct,lt;this.id=it("cp");this.element=t;this.options=v;this.isAppended=!1;this.isShown=!1;this.currentView="hours";this.isInput=kt;this.input=dt;this.addon=gt;this.popover=d;this.plate=st;this.hoursView=pt;this.minutesView=bt;this.amPmBlock=ti;this.spanHours=d.find(".clockpicker-span-hours");this.spanMinutes=d.find(".clockpicker-span-minutes");this.spanAmPm=d.find(".clockpicker-span-am-pm");this.amOrPm="PM";v.twelvehour&&(ni='<div class="clockpicker-am-pm-block"><button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-am-button">AM<\/button><button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-pm-button">PM<\/button><\/div>',ii=n(ni),n('<button type="button" class="btn btn-sm btn-default clockpicker-button am-button">AM<\/button>').on("click",function(){nt.amOrPm="AM";n(".clockpicker-span-am-pm").empty().append("AM")}).appendTo(this.amPmBlock),n('<button type="button" class="btn btn-sm btn-default clockpicker-button pm-button">PM<\/button>').on("click",function(){nt.amOrPm="PM";n(".clockpicker-span-am-pm").empty().append("PM")}).appendTo(this.amPmBlock));v.autoclose||n('<button type="button" class="btn btn-sm btn-default btn-block clockpicker-button">'+v.donetext+"<\/button>").click(n.proxy(this.done,this)).appendTo(d);(v.placement==="top"||v.placement==="bottom")&&(v.align==="top"||v.align==="bottom")&&(v.align="left");(v.placement==="left"||v.placement==="right")&&(v.align==="left"||v.align==="right")&&(v.align="top");d.addClass(v.placement);d.addClass("clockpicker-align-"+v.align);this.spanHours.click(n.proxy(this.toggleView,this,"hours"));this.spanMinutes.click(n.proxy(this.toggleView,this,"minutes"));dt.on("focus.clockpicker click.clockpicker",n.proxy(this.show,this));gt.on("click.clockpicker",n.proxy(this.toggle,this));if(at=n('<div class="clockpicker-tick"><\/div>'),v.twelvehour)for(b=1;b<13;b+=1){k=at.clone();tt=b/6*Math.PI;et=r;k.css("font-size","120%");k.css({left:i+Math.sin(tt)*et-u,top:i-Math.cos(tt)*et-u});k.html(b===0?"00":b);pt.append(k);k.on(c,vt)}else for(b=0;b<24;b+=1){k=at.clone();tt=b/6*Math.PI;wt=b>0&&b<13;et=wt?l:r;k.css({left:i+Math.sin(tt)*et-u,top:i-Math.cos(tt)*et-u});wt&&k.css("font-size","120%");k.html(b===0?"00":b);pt.append(k);k.on(c,vt)}for(b=0;b<60;b+=5){k=at.clone();tt=b/30*Math.PI;k.css({left:i+Math.sin(tt)*r-u,top:i-Math.cos(tt)*r-u});k.css("font-size","120%");k.html(s(b));bt.append(k);k.on(c,vt)}st.on(c,function(t){n(t.target).closest(".clockpicker-tick").length===0&&vt(t,!0)});h&&(yt=d.find(".clockpicker-canvas"),ot=o("svg"),ot.setAttribute("class","clockpicker-svg"),ot.setAttribute("width",g),ot.setAttribute("height",g),ut=o("g"),ut.setAttribute("transform","translate("+i+","+i+")"),ft=o("circle"),ft.setAttribute("class","clockpicker-canvas-bearing"),ft.setAttribute("cx",0),ft.setAttribute("cy",0),ft.setAttribute("r",2),ht=o("line"),ht.setAttribute("x1",0),ht.setAttribute("y1",0),ct=o("circle"),ct.setAttribute("class","clockpicker-canvas-bg"),ct.setAttribute("r",u),lt=o("circle"),lt.setAttribute("class","clockpicker-canvas-fg"),lt.setAttribute("r",3.5),ut.appendChild(ht),ut.appendChild(ct),ut.appendChild(lt),ut.appendChild(ft),ot.appendChild(ut),yt.append(ot),this.hand=ht,this.bg=ct,this.fg=lt,this.bearing=ft,this.g=ut,this.canvas=yt);f(this.options.init)}function f(n){n&&typeof n=="function"&&n()}var n=window.jQuery,b=n(window),e=n(document),a,k="http://www.w3.org/2000/svg",h="SVGAngle"in window&&function(){var t,n=document.createElement("div");return n.innerHTML="<svg/>",t=(n.firstChild&&n.firstChild.namespaceURI)==k,n.innerHTML="",t}(),nt=function(){var n=document.createElement("div").style;return"transition"in n||"WebkitTransition"in n||"MozTransition"in n||"msTransition"in n||"OTransition"in n}(),v="ontouchstart"in window,c="mousedown"+(v?" touchstart":""),y="mousemove.clockpicker"+(v?" touchmove.clockpicker":""),p="mouseup.clockpicker"+(v?" touchend.clockpicker":""),d=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,tt=0,i=100,r=80,l=54,u=13,g=i*2,w=nt?350:1,rt='<div class="popover clockpicker-popover"><div class="arrow"><\/div><div class="popover-title"><span class="clockpicker-span-hours text-primary"><\/span> : <span class="clockpicker-span-minutes"><\/span><span class="clockpicker-span-am-pm"><\/span><\/div><div class="popover-content"><div class="clockpicker-plate"><div class="clockpicker-canvas"><\/div><div class="clockpicker-dial clockpicker-hours"><\/div><div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"><\/div><\/div><span class="clockpicker-am-pm-block"><\/span><\/div><\/div>';t.DEFAULTS={"default":"",fromnow:0,placement:"bottom",align:"left",donetext:"完成",autoclose:!1,twelvehour:!1,vibrate:!0};t.prototype.toggle=function(){this[this.isShown?"hide":"show"]()};t.prototype.locate=function(){var r=this.element,i=this.popover,t=r.offset(),u=r.outerWidth(),f=r.outerHeight(),e=this.options.placement,o=this.options.align,n={},s=this;i.show();switch(e){case"bottom":n.top=t.top+f;break;case"right":n.left=t.left+u;break;case"top":n.top=t.top-i.outerHeight();break;case"left":n.left=t.left-i.outerWidth()}switch(o){case"left":n.left=t.left;break;case"right":n.left=t.left+u-i.outerWidth();break;case"top":n.top=t.top;break;case"bottom":n.top=t.top+f-i.outerHeight()}i.css(n)};t.prototype.show=function(){var t,i,r;if(!this.isShown){if(f(this.options.beforeShow),t=this,!this.isAppended){a=n(document.body).append(this.popover);b.on("resize.clockpicker"+this.id,function(){t.isShown&&t.locate()});this.isAppended=!0}i=((this.input.prop("value")||this.options["default"]||"")+"").split(":");i[0]==="now"&&(r=new Date(+new Date+this.options.fromnow),i=[r.getHours(),r.getMinutes()]);this.hours=+i[0]||0;this.minutes=+i[1]||0;this.spanHours.html(s(this.hours));this.spanMinutes.html(s(this.minutes));this.toggleView("hours");this.locate();this.isShown=!0;e.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(i){var r=n(i.target);r.closest(t.popover).length===0&&r.closest(t.addon).length===0&&r.closest(t.input).length===0&&t.hide()});e.on("keyup.clockpicker."+this.id,function(n){n.keyCode===27&&t.hide()});f(this.options.afterShow)}};t.prototype.hide=function(){f(this.options.beforeHide);this.isShown=!1;e.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id);e.off("keyup.clockpicker."+this.id);this.popover.hide();f(this.options.afterHide)};t.prototype.toggleView=function(t,i){var u=!1;t==="minutes"&&n(this.hoursView).css("visibility")==="visible"&&(f(this.options.beforeHourSelect),u=!0);var r=t==="hours",o=r?this.hoursView:this.minutesView,e=r?this.minutesView:this.hoursView;this.currentView=t;this.spanHours.toggleClass("text-primary",r);this.spanMinutes.toggleClass("text-primary",!r);e.addClass("clockpicker-dial-out");o.css("visibility","visible").removeClass("clockpicker-dial-out");this.resetClock(i);clearTimeout(this.toggleViewTimer);this.toggleViewTimer=setTimeout(function(){e.css("visibility","hidden")},w);u&&f(this.options.afterHourSelect)};t.prototype.resetClock=function(n){var u=this.currentView,t=this[u],f=u==="hours",a=Math.PI/(f?6:30),e=t*a,o=f&&t>0&&t<13?l:r,s=Math.sin(e)*o,c=-Math.cos(e)*o,i=this;h&&n?(i.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){i.canvas.removeClass("clockpicker-canvas-out");i.setHand(s,c)},n)):this.setHand(s,c)};t.prototype.setHand=function(t,i,u,f){var o=Math.atan2(t,-i),c=this.currentView==="hours",p=Math.PI/(c||u?6:30),k=Math.sqrt(t*t+i*i),w=this.options,b=c&&k<(r+l)/2,y=b?l:r,e,a,v;if(w.twelvehour&&(y=r),o<0&&(o=Math.PI*2+o),e=Math.round(o/p),o=e*p,w.twelvehour?c?e===0&&(e=12):(u&&(e*=5),e===60&&(e=0)):c?(e===12&&(e=0),e=b?e===0?12:e:e===0?0:e+12):(u&&(e*=5),e===60&&(e=0)),this[this.currentView]!==e&&d&&this.options.vibrate&&(this.vibrateTimer||(navigator[d](10),this.vibrateTimer=setTimeout(n.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=e,this[c?"spanHours":"spanMinutes"].html(s(e)),!h){this[c?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var t=n(this);t.toggleClass("active",e===+t.html())});return}f||!c&&e%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute("class","clockpicker-canvas-bg clockpicker-canvas-bg-trans")):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute("class","clockpicker-canvas-bg"));a=Math.sin(o)*y;v=-Math.cos(o)*y;this.hand.setAttribute("x2",a);this.hand.setAttribute("y2",v);this.bg.setAttribute("cx",a);this.bg.setAttribute("cy",v);this.fg.setAttribute("cx",a);this.fg.setAttribute("cy",v)};t.prototype.done=function(){f(this.options.beforeDone);this.hide();var t=this.input.prop("value"),n=s(this.hours)+":"+s(this.minutes);this.options.twelvehour&&(n=n+this.amOrPm);this.input.prop("value",n);n!==t&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change"));this.options.autoclose&&this.input.trigger("blur");f(this.options.afterDone)};t.prototype.remove=function(){this.element.removeData("clockpicker");this.input.off("focus.clockpicker click.clockpicker");this.addon.off("click.clockpicker");this.isShown&&this.hide();this.isAppended&&(b.off("resize.clockpicker"+this.id),this.popover.remove())};n.fn.clockpicker=function(i){var r=Array.prototype.slice.call(arguments,1);return this.each(function(){var u=n(this),f=u.data("clockpicker"),e;f?typeof f[i]=="function"&&f[i].apply(f,r):(e=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i),u.data("clockpicker",new t(u,e)))})}})();
/*!
 * Datepicker for Bootstrap v1.8.0 (https://github.com/uxsolutions/bootstrap-datepicker)
 *
 * Licensed under the Apache License v2.0 (http://www.apache.org/licenses/LICENSE-2.0)
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery")):n(jQuery)})(function(n,t){function f(){return new Date(Date.UTC.apply(Date,arguments))}function s(){var n=new Date;return f(n.getFullYear(),n.getMonth(),n.getDate())}function l(n,t){return n.getUTCFullYear()===t.getUTCFullYear()&&n.getUTCMonth()===t.getUTCMonth()&&n.getUTCDate()===t.getUTCDate()}function h(i,r){return function(){return r!==t&&n.fn.datepicker.deprecated(r),this[i].apply(this,arguments)}}function p(n){return n&&!isNaN(n.getTime())}function w(t,i){function s(n,t){return t.toLowerCase()}var u=n(t).data(),f={},e,o=new RegExp("^"+i.toLowerCase()+"([A-Z])"),r;i=new RegExp("^"+i.toLowerCase());for(r in u)i.test(r)&&(e=r.replace(o,s),f[e]=u[r]);return f}function b(t){var u={},i;if(r[t]||(t=t.split("-")[0],r[t]))return i=r[t],n.each(y,function(n,t){t in i&&(u[t]=i[t])}),u}var a=function(){var t={get:function(n){return this.slice(n)[0]},contains:function(n){for(var i=n&&n.valueOf(),t=0,r=this.length;t<r;t++)if(0<=this[t].valueOf()-i&&this[t].valueOf()-i<864e5)return t;return-1},remove:function(n){this.splice(n,1)},replace:function(t){t&&(n.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var n=new a;return n.replace(this),n}};return function(){var i=[];return i.push.apply(i,arguments),n.extend(i,t),i}}(),u=function(t,r){n.data(t,"datepicker",this);this._process_options(r);this.dates=new a;this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=n(t);this.isInput=this.element.is("input");this.inputField=this.isInput?this.element:this.element.find("input");this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1;this.component&&this.component.length===0&&(this.component=!1);this.isInline=!this.component&&this.element.is("div");this.picker=n(i.template);this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow);this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(n,t){return Number(t)+1});this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled});this._allow_update=!1;this.setViewMode(this.o.startView);this._allow_update=!0;this.fillDow();this.fillMonths();this.update();this.isInline&&this.show()},c,v,o,e,y,r,i;u.prototype={constructor:u,_resolveViewName:function(t){return n.each(i.viewModes,function(i,r){if(t===i||n.inArray(t,r.names)!==-1)return t=i,!1}),t},_resolveDaysOfWeek:function(t){return n.isArray(t)||(t=t.split(/[,\s]*/)),n.map(t,Number)},_check_template:function(i){try{if(i===t||i==="")return!1;if((i.match(/[<>]/g)||[]).length<=0)return!0;var r=n(i);return r.length>0}catch(u){return!1}},_process_options:function(t){var u,h,l,o,c;if(this._o=n.extend({},this._o,t),u=this.o=n.extend({},this._o),h=u.language,r[h]||(h=h.split("-")[0],r[h]||(h=e.language)),u.language=h,u.startView=this._resolveViewName(u.startView),u.minViewMode=this._resolveViewName(u.minViewMode),u.maxViewMode=this._resolveViewName(u.maxViewMode),u.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,u.startView)),u.multidate!==!0&&(u.multidate=Number(u.multidate)||!1,u.multidate!==!1&&(u.multidate=Math.max(0,u.multidate))),u.multidateSeparator=String(u.multidateSeparator),u.weekStart%=7,u.weekEnd=(u.weekStart+6)%7,l=i.parseFormat(u.format),u.startDate!==-Infinity&&(u.startDate=u.startDate?u.startDate instanceof Date?this._local_to_utc(this._zero_time(u.startDate)):i.parseDate(u.startDate,l,u.language,u.assumeNearbyYear):-Infinity),u.endDate!==Infinity&&(u.endDate=u.endDate?u.endDate instanceof Date?this._local_to_utc(this._zero_time(u.endDate)):i.parseDate(u.endDate,l,u.language,u.assumeNearbyYear):Infinity),u.daysOfWeekDisabled=this._resolveDaysOfWeek(u.daysOfWeekDisabled||[]),u.daysOfWeekHighlighted=this._resolveDaysOfWeek(u.daysOfWeekHighlighted||[]),u.datesDisabled=u.datesDisabled||[],n.isArray(u.datesDisabled)||(u.datesDisabled=u.datesDisabled.split(",")),u.datesDisabled=n.map(u.datesDisabled,function(n){return i.parseDate(n,l,u.language,u.assumeNearbyYear)}),o=String(u.orientation).toLowerCase().split(/\s+/g),c=u.orientation.toLowerCase(),o=n.grep(o,function(n){return/^auto|left|right|top|bottom$/.test(n)}),u.orientation={x:"auto",y:"auto"},c&&c!=="auto")if(o.length===1)switch(o[0]){case"top":case"bottom":u.orientation.y=o[0];break;case"left":case"right":u.orientation.x=o[0]}else c=n.grep(o,function(n){return/^left|right$/.test(n)}),u.orientation.x=c[0]||"auto",c=n.grep(o,function(n){return/^top|bottom$/.test(n)}),u.orientation.y=c[0]||"auto";if(u.defaultViewDate instanceof Date||typeof u.defaultViewDate=="string")u.defaultViewDate=i.parseDate(u.defaultViewDate,l,u.language,u.assumeNearbyYear);else if(u.defaultViewDate){var a=u.defaultViewDate.year||(new Date).getFullYear(),v=u.defaultViewDate.month||0,y=u.defaultViewDate.day||1;u.defaultViewDate=f(a,v,y)}else u.defaultViewDate=s()},_events:[],_secondaryEvents:[],_applyEvents:function(n){for(var i=0,f,r,u;i<n.length;i++){f=n[i][0];n[i].length===2?(r=t,u=n[i][1]):n[i].length===3&&(r=n[i][1],u=n[i][2]);f.on(u,r)}},_unapplyEvents:function(n){for(var i=0,f,r,u;i<n.length;i++)f=n[i][0],n[i].length===2?(u=t,r=n[i][1]):n[i].length===3&&(u=n[i][1],r=n[i][2]),f.off(r,u)},_buildEvents:function(){var t={keyup:n.proxy(function(t){n.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:n.proxy(this.keydown,this),paste:n.proxy(this.paste,this)};this.o.showOnFocus===!0&&(t.focus=n.proxy(this.show,this));this._events=this.isInput?[[this.element,t]]:this.component&&this.inputField.length?[[this.inputField,t],[this.component,{click:n.proxy(this.show,this)}]]:[[this.element,{click:n.proxy(this.show,this),keydown:n.proxy(this.keydown,this)}]];this._events.push([this.element,"*",{blur:n.proxy(function(n){this._focused_from=n.target},this)}],[this.element,{blur:n.proxy(function(n){this._focused_from=n.target},this)}]);this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":n.proxy(function(n){this.update(n.date)},this)}]);this._secondaryEvents=[[this.picker,{click:n.proxy(this.click,this)}],[this.picker,".prev, .next",{click:n.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:n.proxy(this.dayCellClick,this)}],[n(window),{resize:n.proxy(this.place,this)}],[n(document),{"mousedown touchstart":n.proxy(function(n){this.element.is(n.target)||this.element.find(n.target).length||this.picker.is(n.target)||this.picker.find(n.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,r){var u=r||this.dates.get(-1),f=this._utc_to_local(u);this.element.trigger({type:t,date:f,viewMode:this.viewMode,dates:n.map(this.dates,this._utc_to_local),format:n.proxy(function(n,t){arguments.length===0?(n=this.dates.length-1,t=this.o.format):typeof n=="string"&&(t=n,n=this.dates.length-1);t=t||this.o.format;var r=this.dates.get(n);return i.formatDate(r,t,this.o.language)},this)})},show:function(){if(!this.inputField.prop("disabled")&&(!this.inputField.prop("readonly")||this.o.enableOnReadonly!==!1))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&n(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(t){var i;if(t.originalEvent.clipboardData&&t.originalEvent.clipboardData.types&&n.inArray("text/plain",t.originalEvent.clipboardData.types)!==-1)i=t.originalEvent.clipboardData.getData("text/plain");else if(window.clipboardData)i=window.clipboardData.getData("Text");else return;this.setDate(i);this.update();t.preventDefault()},_utc_to_local:function(n){if(!n)return n;var t=new Date(n.getTime()+n.getTimezoneOffset()*6e4);return t.getTimezoneOffset()!==n.getTimezoneOffset()&&(t=new Date(n.getTime()+t.getTimezoneOffset()*6e4)),t},_local_to_utc:function(n){return n&&new Date(n.getTime()-n.getTimezoneOffset()*6e4)},_zero_time:function(n){return n&&new Date(n.getFullYear(),n.getMonth(),n.getDate())},_zero_utc_time:function(n){return n&&f(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())},getDates:function(){return n.map(this.dates,this._utc_to_local)},getUTCDates:function(){return n.map(this.dates,function(n){return new Date(n)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var n=this.dates.get(-1);return n!==t?new Date(n):null},clearDates:function(){this.inputField.val("");this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()},setDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,n.map(t,this._utc_to_local)),this},setDate:h("setDates"),setUTCDate:h("setUTCDates"),remove:h("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var n=this.getFormattedDate();return this.inputField.val(n),this},getFormattedDate:function(r){r===t&&(r=this.o.format);var u=this.o.language;return n.map(this.dates,function(n){return i.formatDate(n,r,u)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(n){return this._process_options({startDate:n}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(n){return this._process_options({endDate:n}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(n){return this._process_options({daysOfWeekDisabled:n}),this.update(),this},setDaysOfWeekHighlighted:function(n){return this._process_options({daysOfWeekHighlighted:n}),this.update(),this},setDatesDisabled:function(n){return this._process_options({datesDisabled:n}),this.update(),this},place:function(){var r,y,p;if(this.isInline)return this;var f=this.picker.outerWidth(),s=this.picker.outerHeight(),e=n(this.o.container),h=e.width(),c=this.o.container==="body"?n(document).scrollTop():e.scrollTop(),l=e.offset(),a=[0];this.element.parents().each(function(){var t=n(this).css("z-index");t!=="auto"&&Number(t)!==0&&a.push(Number(t))});var v=Math.max.apply(Math,a)+this.o.zIndexOffset,u=this.component?this.component.parent().offset():this.element.offset(),w=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),o=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),t=u.left-l.left,i=u.top-l.top;return this.o.container!=="body"&&(i+=c),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(t-=f-o)):u.left<0?(this.picker.addClass("datepicker-orient-left"),t-=u.left-10):t+f>h?(this.picker.addClass("datepicker-orient-right"),t+=o-f):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left"),r=this.o.orientation.y,r==="auto"&&(y=-c+i-s,r=y<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+r),r==="top"?i-=s+parseInt(this.picker.css("padding-top")):i+=w,this.o.rtl?(p=h-(t+o),this.picker.css({top:i,right:p,zIndex:v})):this.picker.css({top:i,left:t,zIndex:v}),this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var u=this.dates.copy(),t=[],r=!1;return arguments.length?(n.each(arguments,n.proxy(function(n,i){i instanceof Date&&(i=this._local_to_utc(i));t.push(i)},this)),r=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.inputField.val(),t=t&&this.o.multidate?t.split(this.o.multidateSeparator):[t],delete this.element.data().date),t=n.map(t,n.proxy(function(n){return i.parseDate(n,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),t=n.grep(t,n.proxy(function(n){return!this.dateWithinRange(n)||!n},this),!0),this.dates.replace(t),this.o.updateViewDate&&(this.viewDate=this.dates.length?new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?new Date(this.o.startDate):this.viewDate>this.o.endDate?new Date(this.o.endDate):this.o.defaultViewDate),r?(this.setValue(),this.element.change()):this.dates.length&&String(u)!==String(this.dates)&&r&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&u.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var i=this.o.weekStart,t="<tr>";for(this.o.calendarWeeks&&(t+='<th class="cw">&#160;<\/th>');i<this.o.weekStart+7;)t+='<th class="dow',n.inArray(i,this.o.daysOfWeekDisabled)!==-1&&(t+=" disabled"),t+='">'+r[this.o.language].daysMin[i++%7]+"<\/th>";t+="<\/tr>";this.picker.find(".datepicker-days thead").append(t)}},fillMonths:function(){for(var t=this._utc_to_local(this.viewDate),i="",u,n=0;n<12;n++)u=t&&t.getMonth()===n?" focused":"",i+='<span class="month'+u+'">'+r[this.o.language].monthsShort[n]+"<\/span>";this.picker.find(".datepicker-months td").html(i)},setRange:function(t){t&&t.length?this.range=n.map(t,function(n){return n.valueOf()}):delete this.range;this.fill()},getClassNames:function(t){var i=[],r=this.viewDate.getUTCFullYear(),u=this.viewDate.getUTCMonth(),f=s();return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<u?i.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>u)&&i.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&l(t,f)&&i.push("today"),this.dates.contains(t)!==-1&&i.push("active"),this.dateWithinRange(t)||i.push("disabled"),this.dateIsDisabled(t)&&i.push("disabled","disabled-date"),n.inArray(t.getUTCDay(),this.o.daysOfWeekHighlighted)!==-1&&i.push("highlighted"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),n.inArray(t.valueOf(),this.range)!==-1&&i.push("selected"),t.valueOf()===this.range[0]&&i.push("range-start"),t.valueOf()===this.range[this.range.length-1]&&i.push("range-end")),i},_fill_yearsView:function(i,r,u,f,e,o,s){for(var w="",c=u/10,b=this.picker.find(i),v=Math.floor(f/u)*u,p=v+c*9,k=Math.floor(this.viewDate.getFullYear()/c)*c,d=n.map(this.dates,function(n){return Math.floor(n.getUTCFullYear()/c)*c}),l,y,h,a=v-c;a<=p+c;a+=c)l=[r],y=null,a===v-c?l.push("old"):a===p+c&&l.push("new"),n.inArray(a,d)!==-1&&l.push("active"),(a<e||a>o)&&l.push("disabled"),a===k&&l.push("focused"),s!==n.noop&&(h=s(new Date(a,0,1)),h===t?h={}:typeof h=="boolean"?h={enabled:h}:typeof h=="string"&&(h={classes:h}),h.enabled===!1&&l.push("disabled"),h.classes&&(l=l.concat(h.classes.split(/\s+/))),h.tooltip&&(y=h.tooltip)),w+='<span class="'+l.join(" ")+'"'+(y?' title="'+y+'"':"")+">"+a+"<\/span>";b.find(".datepicker-switch").text(v+"-"+p);b.find("td").html(w)},fill:function(){var w=new Date(this.viewDate),o=w.getUTCFullYear(),d=w.getUTCMonth(),a=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,ut=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,v=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,ft=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,et=r[this.o.language].today||r.en.today||"",ot=r[this.o.language].clear||r.en.clear||"",st=r[this.o.language].titleFormat||r.en.titleFormat,y,u,e,g,h,c,p,s,k,it,l,rt;if(!isNaN(o)&&!isNaN(d)){for(this.picker.find(".datepicker-days .datepicker-switch").text(i.formatDate(w,st,this.o.language)),this.picker.find("tfoot .today").text(et).css("display",this.o.todayBtn===!0||this.o.todayBtn==="linked"?"table-cell":"none"),this.picker.find("tfoot .clear").text(ot).css("display",this.o.clearBtn===!0?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display",typeof this.o.title=="string"&&this.o.title!==""?"table-cell":"none"),this.updateNavArrows(),this.fillMonths(),e=f(o,d,0),g=e.getUTCDate(),e.setUTCDate(g-(e.getUTCDay()-this.o.weekStart+7)%7),h=new Date(e),e.getUTCFullYear()<100&&h.setUTCFullYear(e.getUTCFullYear()),h.setUTCDate(h.getUTCDate()+42),h=h.valueOf(),c=[];e.valueOf()<h;){if(p=e.getUTCDay(),p===this.o.weekStart&&(c.push("<tr>"),this.o.calendarWeeks)){var nt=new Date(+e+(this.o.weekStart-p-7)%7*864e5),tt=new Date(Number(nt)+(11-nt.getUTCDay())%7*864e5),b=new Date(Number(b=f(tt.getUTCFullYear(),0,1))+(11-b.getUTCDay())%7*864e5),ht=(tt-b)/6048e5+1;c.push('<td class="cw">'+ht+"<\/td>")}s=this.getClassNames(e);s.push("day");k=e.getUTCDate();this.o.beforeShowDay!==n.noop&&(u=this.o.beforeShowDay(this._utc_to_local(e)),u===t?u={}:typeof u=="boolean"?u={enabled:u}:typeof u=="string"&&(u={classes:u}),u.enabled===!1&&s.push("disabled"),u.classes&&(s=s.concat(u.classes.split(/\s+/))),u.tooltip&&(y=u.tooltip),u.content&&(k=u.content));s=n.isFunction(n.uniqueSort)?n.uniqueSort(s):n.unique(s);c.push('<td class="'+s.join(" ")+'"'+(y?' title="'+y+'"':"")+' data-date="'+e.getTime().toString()+'">'+k+"<\/td>");y=null;p===this.o.weekEnd&&c.push("<\/tr>");e.setUTCDate(e.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(c.join(""));it=r[this.o.language].monthsTitle||r.en.monthsTitle||"Months";l=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?it:o).end().find("tbody span").removeClass("active");n.each(this.dates,function(n,t){t.getUTCFullYear()===o&&l.eq(t.getUTCMonth()).addClass("active")});(o<a||o>v)&&l.addClass("disabled");o===a&&l.slice(0,ut).addClass("disabled");o===v&&l.slice(ft+1).addClass("disabled");this.o.beforeShowMonth!==n.noop&&(rt=this,n.each(l,function(i,r){var f=new Date(o,i,1),u=rt.o.beforeShowMonth(f);u===t?u={}:typeof u=="boolean"?u={enabled:u}:typeof u=="string"&&(u={classes:u});u.enabled!==!1||n(r).hasClass("disabled")||n(r).addClass("disabled");u.classes&&n(r).addClass(u.classes);u.tooltip&&n(r).prop("title",u.tooltip)}));this._fill_yearsView(".datepicker-years","year",10,o,a,v,this.o.beforeShowYear);this._fill_yearsView(".datepicker-decades","decade",100,o,a,v,this.o.beforeShowDecade);this._fill_yearsView(".datepicker-centuries","century",1e3,o,a,v,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var u=new Date(this.viewDate),t=u.getUTCFullYear(),f=u.getUTCMonth(),e=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,s=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,o=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,h=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,i,r,n=1;switch(this.viewMode){case 4:n*=10;case 3:n*=10;case 2:n*=10;case 1:i=Math.floor(t/n)*n<e;r=Math.floor(t/n)*n+n>o;break;case 0:i=t<=e&&f<s;r=t>=o&&f>h}this.picker.find(".prev").toggleClass("disabled",i);this.picker.find(".next").toggleClass("disabled",r)}},click:function(t){t.preventDefault();t.stopPropagation();var r,o,u,e;r=n(t.target);r.hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1);r.hasClass("today")&&!r.hasClass("day")&&(this.setViewMode(0),this._setDate(s(),this.o.todayBtn==="linked"?null:"view"));r.hasClass("clear")&&this.clearDates();r.hasClass("disabled")||(r.hasClass("month")||r.hasClass("year")||r.hasClass("decade")||r.hasClass("century"))&&(this.viewDate.setUTCDate(1),o=1,this.viewMode===1?(e=r.parent().find("span").index(r),u=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(e)):(e=0,u=Number(r.text()),this.viewDate.setUTCFullYear(u)),this._trigger(i.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(f(u,e,o)):(this.setViewMode(this.viewMode-1),this.fill()));this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus();delete this._focused_from},dayCellClick:function(t){var r=n(t.currentTarget),u=r.data("date"),i=new Date(u);this.o.updateViewDate&&(i.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),i.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate));this._setDate(i)},navArrowsClick:function(t){var u=n(t.currentTarget),r=u.hasClass("prev")?-1:1;this.viewMode!==0&&(r*=i.viewModes[this.viewMode].navStep*12);this.viewDate=this.moveMonth(this.viewDate,r);this._trigger(i.viewModes[this.viewMode].e,this.viewDate);this.fill()},_toggle_multidate:function(n){var t=this.dates.contains(n);if(n||this.dates.clear(),t!==-1?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):this.o.multidate===!1?(this.dates.clear(),this.dates.push(n)):this.dates.push(n),typeof this.o.multidate=="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(n,t){t&&t!=="date"||this._toggle_multidate(n&&new Date(n));(!t&&this.o.updateViewDate||t==="view")&&(this.viewDate=n&&new Date(n));this.fill();this.setValue();t&&t==="view"||this._trigger("changeDate");this.inputField.trigger("change");this.o.autoclose&&(!t||t==="date")&&this.hide()},moveDay:function(n,t){var i=new Date(n);return i.setUTCDate(n.getUTCDate()+t),i},moveWeek:function(n,t){return this.moveDay(n,t*7)},moveMonth:function(n,t){var f;if(!p(n))return this.o.defaultViewDate;if(!t)return n;var i=new Date(n.valueOf()),e=i.getUTCDate(),o=i.getUTCMonth(),s=Math.abs(t),r,u;if(t=t>0?1:-1,s===1)u=t===-1?function(){return i.getUTCMonth()===o}:function(){return i.getUTCMonth()!==r},r=o+t,i.setUTCMonth(r),r=(r+12)%12;else{for(f=0;f<s;f++)i=this.moveMonth(i,t);r=i.getUTCMonth();i.setUTCDate(e);u=function(){return r!==i.getUTCMonth()}}while(u())i.setUTCDate(--e),i.setUTCMonth(r);return i},moveYear:function(n,t){return this.moveMonth(n,t*12)},moveAvailableDate:function(n,t,i){do{if(n=this[i](n,t),!this.dateWithinRange(n))return!1;i="moveDay"}while(this.dateIsDisabled(n));return n},weekOfDateIsDisabled:function(t){return n.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1},dateIsDisabled:function(t){return this.weekOfDateIsDisabled(t)||n.grep(this.o.datesDisabled,function(n){return l(t,n)}).length>0},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(n){if(!this.picker.is(":visible")){(n.keyCode===40||n.keyCode===27)&&(this.show(),n.stopPropagation());return}var u=!1,t,i,r=this.focusDate||this.viewDate;switch(n.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide();n.preventDefault();n.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||this.o.daysOfWeekDisabled.length===7)break;t=n.keyCode===37||n.keyCode===38?-1:1;this.viewMode===0?n.ctrlKey?(i=this.moveAvailableDate(r,t,"moveYear"),i&&this._trigger("changeYear",this.viewDate)):n.shiftKey?(i=this.moveAvailableDate(r,t,"moveMonth"),i&&this._trigger("changeMonth",this.viewDate)):n.keyCode===37||n.keyCode===39?i=this.moveAvailableDate(r,t,"moveDay"):this.weekOfDateIsDisabled(r)||(i=this.moveAvailableDate(r,t,"moveWeek")):this.viewMode===1?((n.keyCode===38||n.keyCode===40)&&(t=t*4),i=this.moveAvailableDate(r,t,"moveMonth")):this.viewMode===2&&((n.keyCode===38||n.keyCode===40)&&(t=t*4),i=this.moveAvailableDate(r,t,"moveYear"));i&&(this.focusDate=this.viewDate=i,this.setValue(),this.fill(),n.preventDefault());break;case 13:if(!this.o.forceParse)break;r=this.focusDate||this.dates.get(-1)||this.viewDate;this.o.keyboardNavigation&&(this._toggle_multidate(r),u=!0);this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(n.preventDefault(),n.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide()}u&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))},setViewMode:function(n){this.viewMode=n;this.picker.children("div").hide().filter(".datepicker-"+i.viewModes[this.viewMode].clsName).show();this.updateNavArrows();this._trigger("changeViewMode",new Date(this.viewDate))}};c=function(t,i){n.data(t,"datepicker",this);this.element=n(t);this.inputs=n.map(i.inputs,function(n){return n.jquery?n[0]:n});delete i.inputs;this.keepEmptyValues=i.keepEmptyValues;delete i.keepEmptyValues;o.call(n(this.inputs),i).on("changeDate",n.proxy(this.dateUpdated,this));this.pickers=n.map(this.inputs,function(t){return n.data(t,"datepicker")});this.updateDates()};c.prototype={updateDates:function(){this.dates=n.map(this.pickers,function(n){return n.getUTCDate()});this.updateRanges()},updateRanges:function(){var t=n.map(this.dates,function(n){return n.valueOf()});n.each(this.pickers,function(n,i){i.setRange(t)})},clearDates:function(){n.each(this.pickers,function(n,t){t.clearDates()})},dateUpdated:function(i){var u;if(!this.updating&&(this.updating=!0,u=n.data(i.target,"datepicker"),u!==t)){var r=u.getUTCDate(),s=this.keepEmptyValues,o=n.inArray(i.target,this.inputs),f=o-1,e=o+1,h=this.inputs.length;if(o!==-1){if(n.each(this.pickers,function(n,t){t.getUTCDate()||t!==u&&s||t.setUTCDate(r)}),r<this.dates[f])while(f>=0&&r<this.dates[f])this.pickers[f--].setUTCDate(r);else if(r>this.dates[e])while(e<h&&r>this.dates[e])this.pickers[e++].setUTCDate(r);this.updateDates();delete this.updating}}},destroy:function(){n.map(this.pickers,function(n){n.destroy()});n(this.inputs).off("changeDate",this.dateUpdated);delete this.element.data().datepicker},remove:h("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};v=n.fn.datepicker;o=function(i){var f=Array.apply(null,arguments),r;if(f.shift(),this.each(function(){var s=n(this),t=s.data("datepicker"),h=typeof i=="object"&&i;if(!t){var l=w(this,"date"),a=n.extend({},e,l,h),v=b(a.language),o=n.extend({},e,v,l,h);s.hasClass("input-daterange")||o.inputs?(n.extend(o,{inputs:o.inputs||s.find("input").toArray()}),t=new c(this,o)):t=new u(this,o);s.data("datepicker",t)}typeof i=="string"&&typeof t[i]=="function"&&(r=t[i].apply(t,f))}),r===t||r instanceof u||r instanceof c)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+i+" function)");else return r};n.fn.datepicker=o;e=n.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:n.noop,beforeShowMonth:n.noop,beforeShowYear:n.noop,beforeShowDecade:n.noop,beforeShowCentury:n.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0};y=n.fn.datepicker.locale_opts=["format","rtl","weekStart"];n.fn.datepicker.Constructor=u;r=n.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}};i={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(n){if(typeof n.toValue=="function"&&typeof n.toDisplay=="function")return n;var t=n.replace(this.validParts,'\0').split('\0'),i=n.match(this.validParts);if(!t||!t.length||!i||i.length===0)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(f,e,o,h){function et(n,t){return t===!0&&(t=10),n<100&&(n+=2e3,n>(new Date).getFullYear()+t&&(n-=100)),n}function ut(){var n=this.slice(0,l[c].length),t=l[c].slice(0,n.length);return n.toLowerCase()===t.toLowerCase()}var tt,g,l,y,it,c,rt,v,ft,d,w;if(!f)return t;if(f instanceof Date)return f;if(typeof e=="string"&&(e=i.parseFormat(e)),e.toValue)return e.toValue(f,e,o);if(tt={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},g={yesterday:"-1d",today:"+0d",tomorrow:"+1d"},f in g&&(f=g[f]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(f)){for(l=f.match(/([\-+]\d+)([dmwy])/gi),f=new Date,c=0;c<l.length;c++)y=l[c].match(/([\-+]\d+)([dmwy])/i),it=Number(y[1]),rt=tt[y[2].toLowerCase()],f=u.prototype[rt](f,it);return u.prototype._zero_utc_time(f)}l=f&&f.match(this.nonpunctuation)||[];var b={},nt=["yyyy","yy","M","MM","m","mm","d","dd"],a={yyyy:function(n,t){return n.setUTCFullYear(h?et(t,h):t)},m:function(n,t){if(isNaN(n))return n;for(t-=1;t<0;)t+=12;for(t%=12,n.setUTCMonth(t);n.getUTCMonth()!==t;)n.setUTCDate(n.getUTCDate()-1);return n},d:function(n,t){return n.setUTCDate(t)}},p,k;if(a.yy=a.yyyy,a.M=a.MM=a.mm=a.m,a.dd=a.d,f=s(),v=e.parts.slice(),l.length!==v.length&&(v=n(v).filter(function(t,i){return n.inArray(i,nt)!==-1}).toArray()),l.length===v.length){for(c=0,ft=v.length;c<ft;c++){if(p=parseInt(l[c],10),y=v[c],isNaN(p))switch(y){case"MM":k=n(r[o].months).filter(ut);p=n.inArray(k[0],r[o].months)+1;break;case"M":k=n(r[o].monthsShort).filter(ut);p=n.inArray(k[0],r[o].monthsShort)+1}b[y]=p}for(c=0;c<nt.length;c++)w=nt[c],w in b&&!isNaN(b[w])&&(d=new Date(f),a[w](d,b[w]),isNaN(d)||(f=d))}return f},formatDate:function(t,u,f){var e,s,o,h;if(!t)return"";if(typeof u=="string"&&(u=i.parseFormat(u)),u.toDisplay)return u.toDisplay(t,u,f);for(e={d:t.getUTCDate(),D:r[f].daysShort[t.getUTCDay()],DD:r[f].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:r[f].monthsShort[t.getUTCMonth()],MM:r[f].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()},e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,t=[],s=n.extend([],u.separators),o=0,h=u.parts.length;o<=h;o++)s.length&&t.push(s.shift()),t.push(e[u.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"><\/th><\/tr><tr><th class="prev">'+e.templates.leftArrow+'<\/th><th colspan="5" class="datepicker-switch"><\/th><th class="next">'+e.templates.rightArrow+"<\/th><\/tr><\/thead>",contTemplate:'<tbody><tr><td colspan="7"><\/td><\/tr><\/tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"><\/th><\/tr><tr><th colspan="7" class="clear"><\/th><\/tr><\/tfoot>'};i.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+i.headTemplate+"<tbody><\/tbody>"+i.footTemplate+'<\/table><\/div><div class="datepicker-months"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datepicker-years"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datepicker-decades"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datepicker-centuries"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+"<\/table><\/div><\/div>";n.fn.datepicker.DPGlobal=i;n.fn.datepicker.noConflict=function(){return n.fn.datepicker=v,this};n.fn.datepicker.version="1.8.0";n.fn.datepicker.deprecated=function(n){var t=window.console;t&&t.warn&&t.warn("DEPRECATED: "+n)};n(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=n(this);i.data("datepicker")||(t.preventDefault(),o.call(i,"show"))});n(function(){o.call(n('[data-provide="datepicker-inline"]'))})});
/**
* @version: 3.0.3
* @author: Dan Grossman http://www.dangrossman.info/
* @copyright: Copyright (c) 2012-2018 Dan Grossman. All rights reserved.
* @license: Licensed under the MIT license. See http://www.opensource.org/licenses/mit-license.php
* @website: http://www.daterangepicker.com/
*/
(function(n,t){var i,r;typeof define=="function"&&define.amd?define(["moment","jquery"],function(n,i){return i.fn||(i.fn={}),t(n,i)}):typeof module=="object"&&module.exports?(i=typeof window!="undefined"?window.jQuery:undefined,i||(i=require("jquery"),i.fn||(i.fn={})),r=typeof window!="undefined"&&typeof window.moment!="undefined"?window.moment:require("moment"),module.exports=t(r,i)):n.daterangepicker=t(n.moment,n.jQuery)})(this,function(n,t){var i=function(i,r,u){var y,f,o,e,c,v,s,h,a,l;if(this.parentEl="body",this.element=t(i),this.startDate=n().startOf("day"),this.endDate=n().endOf("day"),this.minDate=!1,this.maxDate=!1,this.maxSpan=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.minYear=n().subtract(100,"year").format("YYYY"),this.maxYear=n().add(100,"year").format("YYYY"),this.showWeekNumbers=!1,this.showISOWeekNumbers=!1,this.showCustomRangeLabel=!0,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.alwaysShowCalendars=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyButtonClasses="btn-primary",this.cancelButtonClasses="btn-default",this.locale={direction:"ltr",format:n.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:n.weekdaysMin(),monthNames:n.monthsShort(),firstDay:n.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},(typeof r!="object"||r===null)&&(r={}),r=t.extend(this.element.data(),r),typeof r.template=="string"||r.template instanceof t||(r.template='<div class="daterangepicker"><div class="ranges"><\/div><div class="drp-calendar left"><div class="calendar-table"><\/div><div class="calendar-time"><\/div><\/div><div class="drp-calendar right"><div class="calendar-table"><\/div><div class="calendar-time"><\/div><\/div><div class="drp-buttons"><span class="drp-selected"><\/span><button class="cancelBtn" type="button"><\/button><button class="applyBtn" disabled="disabled" type="button"><\/button> <\/div><\/div>'),this.parentEl=r.parentEl&&t(r.parentEl).length?t(r.parentEl):t(this.parentEl),this.container=t(r.template).appendTo(this.parentEl),typeof r.locale=="object"&&(typeof r.locale.direction=="string"&&(this.locale.direction=r.locale.direction),typeof r.locale.format=="string"&&(this.locale.format=r.locale.format),typeof r.locale.separator=="string"&&(this.locale.separator=r.locale.separator),typeof r.locale.daysOfWeek=="object"&&(this.locale.daysOfWeek=r.locale.daysOfWeek.slice()),typeof r.locale.monthNames=="object"&&(this.locale.monthNames=r.locale.monthNames.slice()),typeof r.locale.firstDay=="number"&&(this.locale.firstDay=r.locale.firstDay),typeof r.locale.applyLabel=="string"&&(this.locale.applyLabel=r.locale.applyLabel),typeof r.locale.cancelLabel=="string"&&(this.locale.cancelLabel=r.locale.cancelLabel),typeof r.locale.weekLabel=="string"&&(this.locale.weekLabel=r.locale.weekLabel),typeof r.locale.customRangeLabel=="string"&&(h=document.createElement("textarea"),h.innerHTML=r.locale.customRangeLabel,a=h.value,this.locale.customRangeLabel=a)),this.container.addClass(this.locale.direction),typeof r.startDate=="string"&&(this.startDate=n(r.startDate,this.locale.format)),typeof r.endDate=="string"&&(this.endDate=n(r.endDate,this.locale.format)),typeof r.minDate=="string"&&(this.minDate=n(r.minDate,this.locale.format)),typeof r.maxDate=="string"&&(this.maxDate=n(r.maxDate,this.locale.format)),typeof r.startDate=="object"&&(this.startDate=n(r.startDate)),typeof r.endDate=="object"&&(this.endDate=n(r.endDate)),typeof r.minDate=="object"&&(this.minDate=n(r.minDate)),typeof r.maxDate=="object"&&(this.maxDate=n(r.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),typeof r.applyButtonClasses=="string"&&(this.applyButtonClasses=r.applyButtonClasses),typeof r.applyClass=="string"&&(this.applyButtonClasses=r.applyClass),typeof r.cancelButtonClasses=="string"&&(this.cancelButtonClasses=r.cancelButtonClasses),typeof r.cancelClass=="string"&&(this.cancelButtonClasses=r.cancelClass),typeof r.maxSpan=="object"&&(this.maxSpan=r.maxSpan),typeof r.dateLimit=="object"&&(this.maxSpan=r.dateLimit),typeof r.opens=="string"&&(this.opens=r.opens),typeof r.drops=="string"&&(this.drops=r.drops),typeof r.showWeekNumbers=="boolean"&&(this.showWeekNumbers=r.showWeekNumbers),typeof r.showISOWeekNumbers=="boolean"&&(this.showISOWeekNumbers=r.showISOWeekNumbers),typeof r.buttonClasses=="string"&&(this.buttonClasses=r.buttonClasses),typeof r.buttonClasses=="object"&&(this.buttonClasses=r.buttonClasses.join(" ")),typeof r.showDropdowns=="boolean"&&(this.showDropdowns=r.showDropdowns),typeof r.minYear=="number"&&(this.minYear=r.minYear),typeof r.maxYear=="number"&&(this.maxYear=r.maxYear),typeof r.showCustomRangeLabel=="boolean"&&(this.showCustomRangeLabel=r.showCustomRangeLabel),typeof r.singleDatePicker=="boolean"&&(this.singleDatePicker=r.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),typeof r.timePicker=="boolean"&&(this.timePicker=r.timePicker),typeof r.timePickerSeconds=="boolean"&&(this.timePickerSeconds=r.timePickerSeconds),typeof r.timePickerIncrement=="number"&&(this.timePickerIncrement=r.timePickerIncrement),typeof r.timePicker24Hour=="boolean"&&(this.timePicker24Hour=r.timePicker24Hour),typeof r.autoApply=="boolean"&&(this.autoApply=r.autoApply),typeof r.autoUpdateInput=="boolean"&&(this.autoUpdateInput=r.autoUpdateInput),typeof r.linkedCalendars=="boolean"&&(this.linkedCalendars=r.linkedCalendars),typeof r.isInvalidDate=="function"&&(this.isInvalidDate=r.isInvalidDate),typeof r.isCustomDate=="function"&&(this.isCustomDate=r.isCustomDate),typeof r.alwaysShowCalendars=="boolean"&&(this.alwaysShowCalendars=r.alwaysShowCalendars),this.locale.firstDay!=0)for(y=this.locale.firstDay;y>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),y--;if(typeof r.startDate=="undefined"&&typeof r.endDate=="undefined"&&t(this.element).is(":text")&&(c=t(this.element).val(),v=c.split(this.locale.separator),f=o=null,v.length==2?(f=n(v[0],this.locale.format),o=n(v[1],this.locale.format)):this.singleDatePicker&&c!==""&&(f=n(c,this.locale.format),o=n(c,this.locale.format)),f!==null&&o!==null&&(this.setStartDate(f),this.setEndDate(o))),typeof r.ranges=="object"){for(e in r.ranges)(f=typeof r.ranges[e][0]=="string"?n(r.ranges[e][0],this.locale.format):n(r.ranges[e][0]),o=typeof r.ranges[e][1]=="string"?n(r.ranges[e][1],this.locale.format):n(r.ranges[e][1]),this.minDate&&f.isBefore(this.minDate)&&(f=this.minDate.clone()),s=this.maxDate,this.maxSpan&&s&&f.clone().add(this.maxSpan).isAfter(s)&&(s=f.clone().add(this.maxSpan)),s&&o.isAfter(s)&&(o=s.clone()),this.minDate&&o.isBefore(this.minDate,this.timepicker?"minute":"day")||s&&f.isAfter(s,this.timepicker?"minute":"day"))||(h=document.createElement("textarea"),h.innerHTML=e,a=h.value,this.ranges[a]=[f,o]);l="<ul>";for(e in this.ranges)l+='<li data-range-key="'+e+'">'+e+"<\/li>";this.showCustomRangeLabel&&(l+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"<\/li>");l+="<\/ul>";this.container.find(".ranges").prepend(l)}typeof u=="function"&&(this.callback=u);this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide());this.timePicker&&this.autoApply&&(this.autoApply=!1);this.autoApply&&this.container.addClass("auto-apply");typeof r.ranges=="object"&&this.container.addClass("show-ranges");this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".drp-calendar.left").addClass("single"),this.container.find(".drp-calendar.left").show(),this.container.find(".drp-calendar.right").hide(),this.timePicker||this.container.addClass("auto-apply"));(typeof r.ranges=="undefined"&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar");this.container.addClass("opens"+this.opens);this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses);this.applyButtonClasses.length&&this.container.find(".applyBtn").addClass(this.applyButtonClasses);this.cancelButtonClasses.length&&this.container.find(".cancelBtn").addClass(this.cancelButtonClasses);this.container.find(".applyBtn").html(this.locale.applyLabel);this.container.find(".cancelBtn").html(this.locale.cancelLabel);this.container.find(".drp-calendar").on("click.daterangepicker",".prev",t.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",t.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",t.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",t.proxy(this.hoverDate,this)).on("change.daterangepicker","select.yearselect",t.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",t.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",t.proxy(this.timeChanged,this));this.container.find(".ranges").on("click.daterangepicker","li",t.proxy(this.clickRange,this));this.container.find(".drp-buttons").on("click.daterangepicker","button.applyBtn",t.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",t.proxy(this.clickCancel,this));if(this.element.is("input")||this.element.is("button"))this.element.on({"click.daterangepicker":t.proxy(this.show,this),"focus.daterangepicker":t.proxy(this.show,this),"keyup.daterangepicker":t.proxy(this.elementChanged,this),"keydown.daterangepicker":t.proxy(this.keydown,this)});else{this.element.on("click.daterangepicker",t.proxy(this.toggle,this));this.element.on("keydown.daterangepicker",t.proxy(this.toggle,this))}this.updateElement()};return i.prototype={constructor:i,setStartDate:function(t){typeof t=="string"&&(this.startDate=n(t,this.locale.format));typeof t=="object"&&(this.startDate=n(t));this.timePicker||(this.startDate=this.startDate.startOf("day"));this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement));this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement));this.isShowing||this.updateElement();this.updateMonthsInView()},setEndDate:function(t){typeof t=="string"&&(this.endDate=n(t,this.locale.format));typeof t=="object"&&(this.endDate=n(t));this.timePicker||(this.endDate=this.endDate.add(1,"d").startOf("day").subtract(1,"second"));this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement);this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone());this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone());this.maxSpan&&this.startDate.clone().add(this.maxSpan).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.maxSpan));this.previousRightTime=this.endDate.clone();this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format));this.isShowing||this.updateElement();this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled"));this.endDate&&this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format));this.updateMonthsInView();this.updateCalendars();this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2);this.rightCalendar.month=this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.startDate.clone().date(2).add(1,"month"):this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){var n,i,r,t;(this.timePicker&&(this.endDate?(n=parseInt(this.container.find(".left .hourselect").val(),10),i=parseInt(this.container.find(".left .minuteselect").val(),10),r=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,this.timePicker24Hour||(t=this.container.find(".left .ampmselect").val(),t==="PM"&&n<12&&(n+=12),t==="AM"&&n===12&&(n=0))):(n=parseInt(this.container.find(".right .hourselect").val(),10),i=parseInt(this.container.find(".right .minuteselect").val(),10),r=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,this.timePicker24Hour||(t=this.container.find(".right .ampmselect").val(),t==="PM"&&n<12&&(n+=12),t==="AM"&&n===12&&(n=0))),this.leftCalendar.month.hour(n).minute(i).second(r),this.rightCalendar.month.hour(n).minute(i).second(r)),this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),this.endDate!=null)&&this.calculateChosenLabel()},renderCalendar:function(i){var r=i=="left"?this.leftCalendar:this.rightCalendar,d=r.month.month(),g=r.month.year(),yt=r.month.hour(),et=r.month.minute(),ot=r.month.second(),pt=n([g,d]).daysInMonth(),w=n([g,d,1]),wt=n([g,d,pt]),st=n(w).subtract(1,"month").month(),ht=n(w).subtract(1,"month").year(),nt=n([ht,st]).daysInMonth(),ct=w.day(),r=[],a,v,tt,h,b,l,ut,f,u,o,p,k,ft,s;for(r.firstDay=w,r.lastDay=wt,s=0;s<6;s++)r[s]=[];a=nt-ct+this.locale.firstDay+1;a>nt&&(a-=7);ct==this.locale.firstDay&&(a=nt-6);v=n([ht,st,a,12,et,ot]);for(var s=0,u=0,f=0;s<42;s++,u++,v=n(v).add(24,"hour"))s>0&&u%7==0&&(u=0,f++),r[f][u]=v.clone().hour(yt).minute(et).second(ot),v.hour(12),this.minDate&&r[f][u].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&r[f][u].isBefore(this.minDate)&&i=="left"&&(r[f][u]=this.minDate.clone()),this.maxDate&&r[f][u].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&r[f][u].isAfter(this.maxDate)&&i=="right"&&(r[f][u]=this.maxDate.clone());i=="left"?this.leftCalendar.calendar=r:this.rightCalendar.calendar=r;var y=i=="left"?this.minDate:this.startDate,c=this.maxDate,dt=i=="left"?this.startDate:this.endDate,gt=this.locale.direction=="ltr"?{left:"chevron-left",right:"chevron-right"}:{left:"chevron-right",right:"chevron-left"},e='<table class="table-condensed">';if(e+="<thead>",e+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(e+="<th><\/th>"),e+=y&&!y.isBefore(r.firstDay)||this.linkedCalendars&&i!="left"?"<th><\/th>":'<th class="prev available"><span><\/span><\/th>',tt=this.locale.monthNames[r[1][1].month()]+r[1][1].format(" YYYY"),this.showDropdowns){var lt=r[1][1].month(),it=r[1][1].year(),at=c&&c.year()||this.maxYear,vt=y&&y.year()||this.minYear,bt=it==vt,kt=it==at,rt='<select class="monthselect">';for(h=0;h<12;h++)rt+=(!bt||h>=y.month())&&(!kt||h<=c.month())?"<option value='"+h+"'"+(h===lt?" selected='selected'":"")+">"+this.locale.monthNames[h]+"<\/option>":"<option value='"+h+"'"+(h===lt?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[h]+"<\/option>";for(rt+="<\/select>",b='<select class="yearselect">',l=vt;l<=at;l++)b+='<option value="'+l+'"'+(l===it?' selected="selected"':"")+">"+l+"<\/option>";b+="<\/select>";tt=rt+b}for(e+='<th colspan="5" class="month">'+tt+"<\/th>",e+=(!c||c.isAfter(r.lastDay))&&(!this.linkedCalendars||i=="right"||this.singleDatePicker)?'<th class="next available"><span><\/span><\/th>':"<th><\/th>",e+="<\/tr>",e+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(e+='<th class="week">'+this.locale.weekLabel+"<\/th>"),t.each(this.locale.daysOfWeek,function(n,t){e+="<th>"+t+"<\/th>"}),e+="<\/tr>",e+="<\/thead>",e+="<tbody>",this.endDate==null&&this.maxSpan&&(ut=this.startDate.clone().add(this.maxSpan).endOf("day"),(!c||ut.isBefore(c))&&(c=ut)),f=0;f<6;f++){for(e+="<tr>",this.showWeekNumbers?e+='<td class="week">'+r[f][0].week()+"<\/td>":this.showISOWeekNumbers&&(e+='<td class="week">'+r[f][0].isoWeek()+"<\/td>"),u=0;u<7;u++){for(o=[],r[f][u].isSame(new Date,"day")&&o.push("today"),r[f][u].isoWeekday()>5&&o.push("weekend"),r[f][u].month()!=r[1][1].month()&&o.push("off"),this.minDate&&r[f][u].isBefore(this.minDate,"day")&&o.push("off","disabled"),c&&r[f][u].isAfter(c,"day")&&o.push("off","disabled"),this.isInvalidDate(r[f][u])&&o.push("off","disabled"),r[f][u].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&o.push("active","start-date"),this.endDate!=null&&r[f][u].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&o.push("active","end-date"),this.endDate!=null&&r[f][u]>this.startDate&&r[f][u]<this.endDate&&o.push("in-range"),p=this.isCustomDate(r[f][u]),p!==!1&&(typeof p=="string"?o.push(p):Array.prototype.push.apply(o,p)),k="",ft=!1,s=0;s<o.length;s++)k+=o[s]+" ",o[s]=="disabled"&&(ft=!0);ft||(k+="available");e+='<td class="'+k.replace(/^\s+|\s+$/g,"")+'" data-title="r'+f+"c"+u+'">'+r[f][u].date()+"<\/td>"}e+="<\/tr>"}e+="<\/tbody>";e+="<\/table>";this.container.find(".drp-calendar."+i+" .calendar-table").html(e)},renderTimePicker:function(n){var r,i,e,u,s,v,y,p,c,o,f,t,l,a;if(n!="right"||this.endDate){for(u=this.maxDate,this.maxSpan&&(!this.maxDate||this.startDate.clone().add(this.maxSpan).isAfter(this.maxDate))&&(u=this.startDate.clone().add(this.maxSpan)),n=="left"?(i=this.startDate.clone(),e=this.minDate):n=="right"&&(i=this.endDate.clone(),e=this.startDate,s=this.container.find(".drp-calendar.right .calendar-time"),s.html()!=""&&(i.hour(i.hour()||s.find(".hourselect option:selected").val()),i.minute(i.minute()||s.find(".minuteselect option:selected").val()),i.second(i.second()||s.find(".secondselect option:selected").val()),this.timePicker24Hour||(v=s.find(".ampmselect option:selected").val(),v==="PM"&&i.hour()<12&&i.hour(i.hour()+12),v==="AM"&&i.hour()===12&&i.hour(0))),i.isBefore(this.startDate)&&(i=this.startDate.clone()),u&&i.isAfter(u)&&(i=u.clone())),r='<select class="hourselect">',y=this.timePicker24Hour?0:1,p=this.timePicker24Hour?23:12,t=y;t<=p;t++)c=t,this.timePicker24Hour||(c=i.hour()>=12?t==12?12:t+12:t==12?0:t),o=i.clone().hour(c),f=!1,e&&o.minute(59).isBefore(e)&&(f=!0),u&&o.minute(0).isAfter(u)&&(f=!0),r+=c!=i.hour()||f?f?'<option value="'+t+'" disabled="disabled" class="disabled">'+t+"<\/option>":'<option value="'+t+'">'+t+"<\/option>":'<option value="'+t+'" selected="selected">'+t+"<\/option>";for(r+="<\/select> ",r+=': <select class="minuteselect">',t=0;t<60;t+=this.timePickerIncrement){var h=t<10?"0"+t:t,o=i.clone().minute(t),f=!1;e&&o.second(59).isBefore(e)&&(f=!0);u&&o.second(0).isAfter(u)&&(f=!0);r+=i.minute()!=t||f?f?'<option value="'+t+'" disabled="disabled" class="disabled">'+h+"<\/option>":'<option value="'+t+'">'+h+"<\/option>":'<option value="'+t+'" selected="selected">'+h+"<\/option>"}if(r+="<\/select> ",this.timePickerSeconds){for(r+=': <select class="secondselect">',t=0;t<60;t++){var h=t<10?"0"+t:t,o=i.clone().second(t),f=!1;e&&o.isBefore(e)&&(f=!0);u&&o.isAfter(u)&&(f=!0);r+=i.second()!=t||f?f?'<option value="'+t+'" disabled="disabled" class="disabled">'+h+"<\/option>":'<option value="'+t+'">'+h+"<\/option>":'<option value="'+t+'" selected="selected">'+h+"<\/option>"}r+="<\/select> "}this.timePicker24Hour||(r+='<select class="ampmselect">',l="",a="",e&&i.clone().hour(12).minute(0).second(0).isBefore(e)&&(l=' disabled="disabled" class="disabled"'),u&&i.clone().hour(0).minute(0).second(0).isAfter(u)&&(a=' disabled="disabled" class="disabled"'),r+=i.hour()>=12?'<option value="AM"'+l+'>AM<\/option><option value="PM" selected="selected"'+a+">PM<\/option>":'<option value="AM" selected="selected"'+l+'>AM<\/option><option value="PM"'+a+">PM<\/option>",r+="<\/select>");this.container.find(".drp-calendar."+n+" .calendar-time").html(r)}},updateFormInputs:function(){this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},move:function(){var n={top:0,left:0},i,r=t(window).width();this.parentEl.is("body")||(n={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},r=this.parentEl[0].clientWidth+this.parentEl.offset().left);i=this.drops=="up"?this.element.offset().top-this.container.outerHeight()-n.top:this.element.offset().top+this.element.outerHeight()-n.top;this.container[this.drops=="up"?"addClass":"removeClass"]("drop-up");this.opens=="left"?(this.container.css({top:i,right:r-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):this.opens=="center"?(this.container.css({top:i,left:this.element.offset().left-n.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:i,left:this.element.offset().left-n.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>t(window).width()&&this.container.css({left:"auto",right:0}))},show:function(){if(!this.isShowing){this._outsideClickProxy=t.proxy(function(n){this.outsideClick(n)},this);t(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy);t(window).on("resize.daterangepicker",t.proxy(function(n){this.move(n)},this));this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.previousRightTime=this.endDate.clone();this.updateView();this.container.show();this.move();this.element.trigger("show.daterangepicker",this);this.isShowing=!0}},hide:function(){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate.clone(),this.endDate.clone(),this.chosenLabel),this.updateElement(),t(document).off(".daterangepicker"),t(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(){this.isShowing?this.hide():this.show()},outsideClick:function(n){var i=t(n.target);n.type=="focusin"||i.closest(this.element).length||i.closest(this.container).length||i.closest(".calendar-table").length||(this.hide(),this.element.trigger("outsideClick.daterangepicker",this))},showCalendars:function(){this.container.addClass("show-calendar");this.move();this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar");this.element.trigger("hideCalendar.daterangepicker",this)},clickRange:function(n){var t=n.target.getAttribute("data-range-key"),i;this.chosenLabel=t;t==this.locale.customRangeLabel?this.showCalendars():(i=this.ranges[t],this.startDate=i[0],this.endDate=i[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply())},clickPrev:function(n){var i=t(n.target).parents(".drp-calendar");i.hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month");this.updateCalendars()},clickNext:function(n){var i=t(n.target).parents(".drp-calendar");i.hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month"));this.updateCalendars()},hoverDate:function(n){if(t(n.target).hasClass("available")){var i=t(n.target).attr("data-title"),r=i.substr(1,1),u=i.substr(3,1),e=t(n.target).parents(".drp-calendar"),f=e.hasClass("left")?this.leftCalendar.calendar[r][u]:this.rightCalendar.calendar[r][u],o=this.leftCalendar,s=this.rightCalendar,h=this.startDate;this.endDate||this.container.find(".drp-calendar tbody td").each(function(n,i){if(!t(i).hasClass("week")){var u=t(i).attr("data-title"),e=u.substr(1,1),c=u.substr(3,1),l=t(i).parents(".drp-calendar"),r=l.hasClass("left")?o.calendar[e][c]:s.calendar[e][c];r.isAfter(h)&&r.isBefore(f)||r.isSame(f,"day")?t(i).addClass("in-range"):t(i).removeClass("in-range")}})}},clickDate:function(n){var i,u,f,e;if(t(n.target).hasClass("available")){var o=t(n.target).attr("data-title"),s=o.substr(1,1),h=o.substr(3,1),c=t(n.target).parents(".drp-calendar"),r=c.hasClass("left")?this.leftCalendar.calendar[s][h]:this.rightCalendar.calendar[s][h];this.endDate||r.isBefore(this.startDate,"day")?(this.timePicker&&(i=parseInt(this.container.find(".left .hourselect").val(),10),this.timePicker24Hour||(u=this.container.find(".left .ampmselect").val(),u==="PM"&&i<12&&(i+=12),u==="AM"&&i===12&&(i=0)),f=parseInt(this.container.find(".left .minuteselect").val(),10),e=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,r=r.clone().hour(i).minute(f).second(e)),this.endDate=null,this.setStartDate(r.clone())):!this.endDate&&r.isBefore(this.startDate)?this.setEndDate(this.startDate.clone()):(this.timePicker&&(i=parseInt(this.container.find(".right .hourselect").val(),10),this.timePicker24Hour||(u=this.container.find(".right .ampmselect").val(),u==="PM"&&i<12&&(i+=12),u==="AM"&&i===12&&(i=0)),f=parseInt(this.container.find(".right .minuteselect").val(),10),e=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,r=r.clone().hour(i).minute(f).second(e)),this.setEndDate(r.clone()),this.autoApply&&(this.calculateChosenLabel(),this.clickApply()));this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply());this.updateView();n.stopPropagation()}},calculateChosenLabel:function(){var i=!0,r=0,n,t;for(n in this.ranges){if(this.timePicker){if(t=this.timePickerSeconds?"YYYY-MM-DD hh:mm:ss":"YYYY-MM-DD hh:mm",this.startDate.format(t)==this.ranges[n][0].format(t)&&this.endDate.format(t)==this.ranges[n][1].format(t)){i=!1;this.chosenLabel=this.container.find(".ranges li:eq("+r+")").addClass("active").attr("data-range-key");break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[n][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[n][1].format("YYYY-MM-DD")){i=!1;this.chosenLabel=this.container.find(".ranges li:eq("+r+")").addClass("active").attr("data-range-key");break}r++}i&&(this.chosenLabel=this.showCustomRangeLabel?this.container.find(".ranges li:last").addClass("active").attr("data-range-key"):null,this.showCalendars())},clickApply:function(){this.hide();this.element.trigger("apply.daterangepicker",this)},clickCancel:function(){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.hide();this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(n){var u=t(n.target).closest(".drp-calendar").hasClass("left"),e=u?"left":"right",f=this.container.find(".drp-calendar."+e),r=parseInt(f.find(".monthselect").val(),10),i=f.find(".yearselect").val();u||(i<this.startDate.year()||i==this.startDate.year()&&r<this.startDate.month())&&(r=this.startDate.month(),i=this.startDate.year());this.minDate&&(i<this.minDate.year()||i==this.minDate.year()&&r<this.minDate.month())&&(r=this.minDate.month(),i=this.minDate.year());this.maxDate&&(i>this.maxDate.year()||i==this.maxDate.year()&&r>this.maxDate.month())&&(r=this.maxDate.month(),i=this.maxDate.year());u?(this.leftCalendar.month.month(r).year(i),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(r).year(i),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month")));this.updateCalendars()},timeChanged:function(n){var u=t(n.target).closest(".drp-calendar"),h=u.hasClass("left"),r=parseInt(u.find(".hourselect").val(),10),o=parseInt(u.find(".minuteselect").val(),10),s=this.timePickerSeconds?parseInt(u.find(".secondselect").val(),10):0,e,i,f;this.timePicker24Hour||(e=u.find(".ampmselect").val(),e==="PM"&&r<12&&(r+=12),e==="AM"&&r===12&&(r=0));h?(i=this.startDate.clone(),i.hour(r),i.minute(o),i.second(s),this.setStartDate(i),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==i.format("YYYY-MM-DD")&&this.endDate.isBefore(i)&&this.setEndDate(i.clone())):this.endDate&&(f=this.endDate.clone(),f.hour(r),f.minute(o),f.second(s),this.setEndDate(f));this.updateCalendars();this.updateFormInputs();this.renderTimePicker("left");this.renderTimePicker("right")},elementChanged:function(){if(this.element.is("input")&&this.element.val().length){var r=this.element.val().split(this.locale.separator),t=null,i=null;(r.length===2&&(t=n(r[0],this.locale.format),i=n(r[1],this.locale.format)),(this.singleDatePicker||t===null||i===null)&&(t=n(this.element.val(),this.locale.format),i=t),t.isValid()&&i.isValid())&&(this.setStartDate(t),this.setEndDate(i),this.updateView())}},keydown:function(n){(n.keyCode===9||n.keyCode===13)&&this.hide();n.keyCode===27&&(n.preventDefault(),n.stopPropagation(),this.hide())},updateElement:function(){if(this.element.is("input")&&this.autoUpdateInput){var n=this.startDate.format(this.locale.format);this.singleDatePicker||(n+=this.locale.separator+this.endDate.format(this.locale.format));n!==this.element.val()&&this.element.val(n).trigger("change")}},remove:function(){this.container.remove();this.element.off(".daterangepicker");this.element.removeData()}},t.fn.daterangepicker=function(n,r){var u=t.extend(!0,{},t.fn.daterangepicker.defaultOptions,n);return this.each(function(){var n=t(this);n.data("daterangepicker")&&n.data("daterangepicker").remove();n.data("daterangepicker",new i(n,u,r))}),this},i});