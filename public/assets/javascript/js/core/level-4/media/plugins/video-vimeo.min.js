(function(a,b){if(typeof define==="function"&&define.amd){define(["video.js"],function(c){return(a.Vimeo=b(c))})}else{if(typeof module==="object"&&module.exports){module.exports=(a.Vimeo=b(require("video.js")))}else{a.Vimeo=b(a.videojs)}}}(this,function(e){var d={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3};var h=e.getComponent("Tech");var g=e.extend(h,{constructor:function(i,j){h.call(this,i,j);if(i.poster!=""){this.setPoster(i.poster)}this.setSrc(this.options_.source,true);if(this.options_.mute){this.startMuted=true}setTimeout(function(){this.el_.parentNode.className+=" vjs-vimeo"}.bind(this))},dispose:function(){this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-vimeo","")},createEl:function(){this.vimeo={};this.vimeoInfo={};this.baseUrl="https://player.vimeo.com/video/";this.baseApiUrl="http://www.vimeo.com/api/v2/video/";this.videoId=g.parseUrl(this.options_.source.src).videoId;this.iframe=document.createElement("iframe");this.iframe.setAttribute("id",this.options_.techId);this.iframe.setAttribute("title","Vimeo Video Player");this.iframe.setAttribute("class","vimeoplayer");this.iframe.setAttribute("src",this.baseUrl+this.videoId+"?background="+this.options_.background+"&autoplay="+this.options_.autoplay+"&api=1&player_id="+this.options_.techId+"&loop="+(this.options_.loop?"1":"0"));this.iframe.setAttribute("frameborder","0");this.iframe.setAttribute("scrolling","no");this.iframe.setAttribute("marginWidth","0");this.iframe.setAttribute("marginHeight","0");this.iframe.setAttribute("webkitAllowFullScreen","0");this.iframe.setAttribute("mozallowfullscreen","0");this.iframe.setAttribute("allowFullScreen","0");var i=document.createElement("div");i.setAttribute("style","margin:0 auto;width:100%;height:0;position:absolute:top:0;overflow:hidden;");i.setAttribute("class","vimeoFrame");i.appendChild(this.iframe);if(!a&&!this.options_.ytControls){var j=document.createElement("div");j.setAttribute("class","vjs-iframe-blocker");j.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%");j.onclick=function(){this.onPause()}.bind(this);i.appendChild(j)}if(g.isApiReady){this.initPlayer()}else{g.apiReadyQueue.push(this)}if(this.options_.poster==""){$.getJSON(this.baseApiUrl+this.videoId+".json?callback=?",{format:"json"},(function(k){return function(l){k.setPoster(l[0].thumbnail_large)}})(this))}return i},initPlayer:function(){var i=this;var j=g.parseUrl(this.options_.source.src).videoId;if(this.vimeo&&this.vimeo.api){this.vimeo.api("unload");delete this.vimeo}i.vimeo=$f(i.iframe);i.vimeoInfo={state:d.UNSTARTED,volume:1,muted:false,muteVolume:1,time:0,duration:0,buffered:0,url:i.baseUrl+i.videoId,error:null};this.vimeo.addEvent("ready",function(k){i.onReady();i.vimeo.addEvent("loadProgress",function(l,m){i.onLoadProgress(l)});i.vimeo.addEvent("playProgress",function(l,m){i.onPlayProgress(l)});i.vimeo.addEvent("play",function(l){i.onPlay()});i.vimeo.addEvent("pause",function(l){i.onPause()});i.vimeo.addEvent("finish",function(l){i.onFinish()});i.vimeo.addEvent("seek",function(l,m){i.onSeek(l)})})},onReady:function(){this.isReady_=true;this.triggerReady();this.trigger("loadedmetadata");if(this.startMuted){this.setMuted(true);this.startMuted=false}if(this.playOnReady){this.play()}},onLoadProgress:function(j){var i=!this.vimeoInfo.duration;this.vimeoInfo.duration=j.duration;this.vimeoInfo.buffered=j.percent;this.trigger("progress");if(i){this.trigger("durationchange")}},onPlayProgress:function(i){this.vimeoInfo.time=i.seconds;this.trigger("timeupdate")},onPlay:function(){this.vimeoInfo.state=d.PLAYING;this.trigger("play")},onPause:function(){this.vimeoInfo.state=d.PAUSED;this.trigger("pause")},onFinish:function(){this.vimeoInfo.state=d.ENDED;this.trigger("ended")},onSeek:function(i){this.trigger("seeking");this.vimeoInfo.time=i.seconds;this.trigger("timeupdate");this.trigger("seeked")},onError:function(i){this.error=i;this.trigger("error")},error:function(){switch(this.errorNumber){case 2:return{code:"Unable to find the video"};case 5:return{code:"Error while trying to play the video"};case 100:return{code:"Unable to find the video"};case 101:case 150:return{code:"Playback on other Websites has been disabled by the video owner."}}return{code:"Vimeo unknown error ("+this.errorNumber+")"}},src:function(){return this.source},poster:function(){return this.poster_},setPoster:function(i){this.poster_=i},setSrc:function(i){if(!i){return}this.source=i;this.url=g.parseUrl(i.src);if(!this.options_.poster){if(this.url.videoId){$.getJSON(this.baseApiUrl+this.videoId+".json?callback=?",{format:"json"},(function(j){return function(k){j.poster_=k[0].thumbnail_small}})(this));this.checkHighResPoster()}}if(this.options_.autoplay&&!a){if(this.isReady_){this.play()}else{this.playOnReady=true}}},supportsFullScreen:function(){return true},load:function(){},play:function(){this.vimeo.api("play")},pause:function(){this.vimeo.api("pause")},paused:function(){return this.vimeoInfo.state!==d.PLAYING&&this.vimeoInfo.state!==d.BUFFERING},currentTime:function(){return this.vimeoInfo.time||0},setCurrentTime:function(i){this.vimeo.api("seekTo",i);this.player_.trigger("timeupdate")},duration:function(){return this.vimeoInfo.duration||0},buffered:function(){return e.createTimeRange(0,(this.vimeoInfo.buffered*this.vimeoInfo.duration)||0)},volume:function(){return(this.vimeoInfo.muted)?this.vimeoInfo.muteVolume:this.vimeoInfo.volume},setVolume:function(i){this.vimeo.api("setvolume",i);this.vimeoInfo.volume=i;this.player_.trigger("volumechange")},currentSrc:function(){return this.el_.src},muted:function(){return this.vimeoInfo.muted||false},setMuted:function(i){if(i){this.vimeoInfo.muteVolume=this.vimeoInfo.volume;this.setVolume(0)}else{this.setVolume(this.vimeoInfo.muteVolume)}this.vimeoInfo.muted=i;this.player_.trigger("volumechange")},checkHighResPoster:function(){var i="";try{$.getJSON(this.baseApiUrl+this.videoId+".json?callback=?",{format:"json"},(function(l){return function(m){l=m[0].thumbnail_large}})(i));var k=new Image();k.onload=function(){if("naturalHeight" in this){if(this.naturalHeight<=90||this.naturalWidth<=120){this.onerror();return}}else{if(this.height<=90||this.width<=120){this.onerror();return}}this.poster_=i;this.trigger("posterchange")}.bind(this);k.onerror=function(){};k.src=i}catch(j){}}});g.isSupported=function(){return true};g.canPlaySource=function(i){return(i.type==="video/vimeo")};var a=/(iPad|iPhone|iPod|Android)/g.test(navigator.userAgent);g.parseUrl=function(k){var i={videoId:null};var l=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/;var j=k.match(l);if(j){i.videoId=j[5]}return i};function c(){var j=".vjs-vimeo .vjs-iframe-blocker { display: none; }.vjs-vimeo.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-vimeo .vjs-poster { background-size: cover; }.vjs-vimeo { height:100%; }.vimeoplayer { width:100%; height:180%; position:absolute; left:0; top:-40%; }";var i=document.head||document.getElementsByTagName("head")[0];var k=document.createElement("style");k.type="text/css";if(k.styleSheet){k.styleSheet.cssText=j}else{k.appendChild(document.createTextNode(j))}i.appendChild(k)}g.apiReadyQueue=[];var b=function(){g.isApiReady=true;for(var j=0;j<g.apiReadyQueue.length;++j){g.apiReadyQueue[j].initPlayer()}};b();e.registerTech("Vimeo",g);var f=(function(){function j(v){return new j.fn.init(v)}var u={},l=false,p=false,t=Array.prototype.slice,q="*";j.fn=j.prototype={element:null,init:function(v){if(typeof v==="string"){v=document.getElementById(v)}this.element=v;return this},api:function(B,y){if(!this.element||!B){return false}var v=this,x=v.element,w=x.id!==""?x.id:null,z=!k(y)?y:null,A=k(y)?y:null;if(A){r(B,A,w)}s(B,z,x);return v},addEvent:function(w,z){if(!this.element){return false}var v=this,y=v.element,x=y.id!==""?y.id:null;r(w,z,x);if(w!="ready"){s("addEventListener",w,y)}else{if(w=="ready"&&p){z.call(null,x)}}return v},removeEvent:function(w){if(!this.element){return false}var v=this,y=v.element,x=y.id!==""?y.id:null,z=m(w,x);if(w!="ready"&&z){s("removeEventListener",w,y)}}};function s(y,x,w){if(!w.contentWindow.postMessage){return false}var v=JSON.stringify({method:y,value:x});w.contentWindow.postMessage(v,q)}function i(w){var y,v;try{y=JSON.parse(w.data);v=y.event||y.method}catch(z){}if(v=="ready"&&!p){p=true}if(!(/^https?:\/\/player.vimeo.com/).test(w.origin)){return false}if(q==="*"){q=w.origin}var A=y.value,B=y.data,D=D===""?null:y.player_id,C=n(v,D),x=[];if(!C){return false}if(A!==undefined){x.push(A)}if(B){x.push(B)}if(D){x.push(D)}return x.length>0?C.apply(null,x):C.call()}function r(v,x,w){if(w){if(!u[w]){u[w]={}}u[w][v]=x}else{u[v]=x}}function n(v,w){if(w&&u[w]){return u[w][v]}else{if(u[v]){return u[v]}}}function m(v,w){if(w&&u[w]){if(!u[w][v]){return false}u[w][v]=null}else{if(!u[v]){return false}u[v]=null}return true}function k(v){return !!(v&&v.constructor&&v.call&&v.apply)}function o(v){return toString.call(v)==="[object Array]"}j.fn.init.prototype=j.fn;if(window.addEventListener){window.addEventListener("message",i,false)}else{window.attachEvent("onmessage",i)}return(window.Froogaloop=window.$f=j)})()}));