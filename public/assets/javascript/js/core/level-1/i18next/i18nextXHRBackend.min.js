(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.i18nextXHRBackend=a())}(this,(function(){var g=[];var h=g.forEach;var k=g.slice;function e(l){h.call(k.call(arguments,1),function(m){if(m){for(var n in m){if(l[n]===undefined){l[n]=m[n]}}}});return l}var b=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol==="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l};function a(l,o){if(o&&(typeof o==="undefined"?"undefined":b(o))==="object"){var p="",n=encodeURIComponent;for(var m in o){p+="&"+n(m)+"="+n(o[m])}if(!p){return l}l=l+(l.indexOf("?")!==-1?"&":"?")+p.slice(1)}return l}function i(m,t,s,n,l){if(n&&(typeof n==="undefined"?"undefined":b(n))==="object"){if(!l){n._t=new Date()}n=a("",n).slice(1)}if(t.queryStringParams){m=a(m,t.queryStringParams)}try{var r;if(XMLHttpRequest){r=new XMLHttpRequest()}else{r=new ActiveXObject("MSXML2.XMLHTTP.3.0")}r.open(n?"POST":"GET",m,1);if(!t.crossDomain){r.setRequestHeader("X-Requested-With","XMLHttpRequest")}r.withCredentials=!!t.withCredentials;if(n){r.setRequestHeader("Content-type","application/x-www-form-urlencoded")}if(r.overrideMimeType){r.overrideMimeType("application/json")}var p=t.customHeaders;if(p){for(var o in p){r.setRequestHeader(o,p[o])}}r.onreadystatechange=function(){r.readyState>3&&s&&s(r.responseText,r)};r.send(n)}catch(q){console&&console.log(q)}}var c=function(){function l(p,n){for(var m=0;m<n.length;m++){var o=n[m];o.enumerable=o.enumerable||false;o.configurable=true;if("value" in o){o.writable=true}Object.defineProperty(p,o.key,o)}}return function(o,m,n){if(m){l(o.prototype,m)}if(n){l(o,n)}return o}}();function f(l,m){if(!(l instanceof m)){throw new TypeError("Cannot call a class as a function")}}function j(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:false,parse:JSON.parse,crossDomain:false,ajax:i}}var d=function(){function l(s){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};f(this,l);this.init(s,r);this.type="backend"}c(l,[{key:"init",value:function q(s){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.services=s;this.options=e(r,this.options||{},j())}},{key:"readMulti",value:function p(u,t,v){var r=this.options.loadPath;if(typeof this.options.loadPath==="function"){r=this.options.loadPath(u,t)}var s=this.services.interpolator.interpolate(r,{lng:u.join("+"),ns:t.join("+")});this.loadUrl(s,v)}},{key:"read",value:function o(v,t,u){var r=this.options.loadPath;if(typeof this.options.loadPath==="function"){r=this.options.loadPath([v],[t])}var s=this.services.interpolator.interpolate(r,{lng:v,ns:t});this.loadUrl(s,u)}},{key:"loadUrl",value:function n(r,t){var s=this;this.options.ajax(r,this.options,function(w,y){if(y.status>=500&&y.status<600){return t("failed loading "+r,true)}if(y.status>=400&&y.status<500){return t("failed loading "+r,false)}var u=void 0,v=void 0;try{u=s.options.parse(w,r)}catch(x){v="failed parsing "+r+" to json"}if(v){return t(v,false)}t(null,u)})}},{key:"create",value:function m(w,t,s,r){var u=this;if(typeof w==="string"){w=[w]}var v={};v[s]=r||"";w.forEach(function(y){var x=u.services.interpolator.interpolate(u.options.addPath,{lng:y,ns:t});u.options.ajax(x,u.options,function(z,A){},v)})}}]);return l}();d.type="backend";return d})));