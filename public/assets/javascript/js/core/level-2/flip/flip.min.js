/*! flip - v1.1.2 - 2016-10-20
* https://github.com/nnattawat/flip
* Copyright (c) 2016 Nattawat Nonsung; Licensed MIT */
(function(b){var c=function(){var d,e=document.createElement("fakeelement"),f={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(d in f){if(e.style[d]!==undefined){return f[d]}}};var a=function(e,d,g){this.setting={axis:"y",reverse:false,trigger:"click",speed:500,forceHeight:false,forceWidth:false,autoSize:true,front:".front",back:".back"};this.setting=b.extend(this.setting,d);if(typeof d.axis==="string"&&(d.axis.toLowerCase()==="x"||d.axis.toLowerCase()==="y")){this.setting.axis=d.axis.toLowerCase()}if(typeof d.reverse==="boolean"){this.setting.reverse=d.reverse}if(typeof d.trigger==="string"){this.setting.trigger=d.trigger.toLowerCase()}var f=parseInt(d.speed);if(!isNaN(f)){this.setting.speed=f}if(typeof d.forceHeight==="boolean"){this.setting.forceHeight=d.forceHeight}if(typeof d.forceWidth==="boolean"){this.setting.forceWidth=d.forceWidth}if(typeof d.autoSize==="boolean"){this.setting.autoSize=d.autoSize}if(typeof d.front==="string"||d.front instanceof b){this.setting.front=d.front}if(typeof d.back==="string"||d.back instanceof b){this.setting.back=d.back}this.element=e;this.frontElement=this.getFrontElement();this.backElement=this.getBackElement();this.isFlipped=false;this.init(g)};b.extend(a.prototype,{flipDone:function(e){var d=this;d.element.one(c(),function(){d.element.trigger("flip:done");if(typeof e==="function"){e.call(d.element)}})},flip:function(e){if(this.isFlipped){return}this.isFlipped=true;var d="rotate"+this.setting.axis;this.frontElement.css({transform:d+(this.setting.reverse?"(-180deg)":"(180deg)"),"z-index":"0"});this.backElement.css({transform:d+"(0deg)","z-index":"1"});this.flipDone(e)},unflip:function(e){if(!this.isFlipped){return}this.isFlipped=false;var d="rotate"+this.setting.axis;this.frontElement.css({transform:d+"(0deg)","z-index":"1"});this.backElement.css({transform:d+(this.setting.reverse?"(180deg)":"(-180deg)"),"z-index":"0"});this.flipDone(e)},getFrontElement:function(){if(this.setting.front instanceof b){return this.setting.front}else{return this.element.find(this.setting.front)}},getBackElement:function(){if(this.setting.back instanceof b){return this.setting.back}else{return this.element.find(this.setting.back)}},init:function(k){var e=this;var d=e.frontElement.add(e.backElement);var f="rotate"+e.setting.axis;var g=e.element["outer"+(f==="rotatex"?"Height":"Width")]()*2;var h={perspective:g,position:"relative"};var j={transform:f+"("+(e.setting.reverse?"180deg":"-180deg")+")","z-index":"0",position:"relative"};var i={"backface-visibility":"hidden","transform-style":"preserve-3d",position:"absolute","z-index":"1"};if(e.setting.forceHeight){d.outerHeight(e.element.height())}else{if(e.setting.autoSize){i.height="100%"}}if(e.setting.forceWidth){d.outerWidth(e.element.width())}else{if(e.setting.autoSize){i.width="100%"}}if((window.chrome||(window.Intl&&Intl.v8BreakIterator))&&"CSS" in window){h["-webkit-transform-style"]="preserve-3d"}d.css(i).find("*").css({"backface-visibility":"hidden"});e.element.css(h);e.backElement.css(j);setTimeout(function(){var l=e.setting.speed/1000||0.5;d.css({transition:"all "+l+"s ease-out"});if(typeof k==="function"){k.call(e.element)}},20);e.attachEvents()},clickHandler:function(d){if(!d){d=window.event}if(this.element.find(b(d.target).closest('button, a, input[type="submit"]')).length){return}if(this.isFlipped){this.unflip()}else{this.flip()}},hoverHandler:function(){var d=this;d.element.off("mouseleave.flip");d.flip();setTimeout(function(){d.element.on("mouseleave.flip",b.proxy(d.unflip,d));if(!d.element.is(":hover")){d.unflip()}},(d.setting.speed+150))},attachEvents:function(){var d=this;if(d.setting.trigger==="click"){d.element.on(b.fn.tap?"tap.flip":"click.flip",b.proxy(d.clickHandler,d))}else{if(d.setting.trigger==="hover"){d.element.on("mouseenter.flip",b.proxy(d.hoverHandler,d));d.element.on("mouseleave.flip",b.proxy(d.unflip,d))}}},flipChanged:function(d){this.element.trigger("flip:change");if(typeof d==="function"){d.call(this.element)}},changeSettings:function(f,j){var e=this;var i=false;if(f.axis!==undefined&&e.setting.axis!==f.axis.toLowerCase()){e.setting.axis=f.axis.toLowerCase();i=true}if(f.reverse!==undefined&&e.setting.reverse!==f.reverse){e.setting.reverse=f.reverse;i=true}if(i){var d=e.frontElement.add(e.backElement);var h=d.css(["transition-property","transition-timing-function","transition-duration","transition-delay"]);d.css({transition:"none"});var g="rotate"+e.setting.axis;if(e.isFlipped){e.frontElement.css({transform:g+(e.setting.reverse?"(-180deg)":"(180deg)"),"z-index":"0"})}else{e.backElement.css({transform:g+(e.setting.reverse?"(180deg)":"(-180deg)"),"z-index":"0"})}setTimeout(function(){d.css(h);e.flipChanged(j)},0)}else{e.flipChanged(j)}}});b.fn.flip=function(d,e){if(typeof d==="function"){e=d}if(typeof d==="string"||typeof d==="boolean"){this.each(function(){var f=b(this).data("flip-model");if(d==="toggle"){d=!f.isFlipped}if(d){f.flip(e)}else{f.unflip(e)}})}else{this.each(function(){if(b(this).data("flip-model")){var f=b(this).data("flip-model");if(d&&(d.axis!==undefined||d.reverse!==undefined)){f.changeSettings(d,e)}}else{b(this).data("flip-model",new a(b(this),(d||{}),e))}})}return this}}(jQuery));