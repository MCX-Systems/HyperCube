(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof module==="object"&&module.exports){module.exports=function(b,c){if(c===undefined){if(typeof window!=="undefined"){c=require("jquery")}else{c=require("jquery")(b)}}a(c);return c}}else{a(jQuery)}}}(function(b){var a=0;b.fn.TouchSpin=function(d){var e={min:0,max:100,initval:"",replacementval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:false,verticalup:"+",verticaldown:"-",verticalupclass:"",verticaldownclass:"",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:true,boostat:10,maxboostedstep:false,mousewheel:true,buttondown_class:"btn btn-primary",buttonup_class:"btn btn-primary",buttondown_txt:"-",buttonup_txt:"+",callback_before_calculation:function(f){return f},callback_after_calculation:function(f){return f}};var c={min:"min",max:"max",initval:"init-val",replacementval:"replacement-val",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each(function(){var O,I=b(this),g=I.data(),q,u,B,i,H,l,K,A,v,z=0,s=false;N();function N(){if(I.data("alreadyinitialized")){return}I.data("alreadyinitialized",true);a+=1;I.data("spinnerid",a);if(!I.is("input")){console.log("Must be an input.");return}J();M();p();C();h();y();r();L()}function M(){if(O.initval!==""&&I.val()===""){I.val(O.initval)}}function m(Q){D(Q);p();var P=i.input.val();if(P!==""){P=Number(O.callback_before_calculation(i.input.val()));i.input.val(O.callback_after_calculation(Number(P).toFixed(O.decimals)))}}function J(){O=b.extend({},e,g,x(),d)}function x(){var P={};b.each(c,function(R,S){var Q="bts-"+S+"";if(I.is("[data-"+Q+"]")){P[R]=I.data(Q)}});return P}function o(){var P=I.parent();w();I.off(".touchspin");if(P.hasClass("bootstrap-touchspin-injected")){I.siblings().remove();I.unwrap()}else{b(".bootstrap-touchspin-injected",P).remove();P.removeClass("bootstrap-touchspin")}I.data("alreadyinitialized",false)}function D(R){O=b.extend({},O,R);if(R.postfix){var P=I.parent().find(".bootstrap-touchspin-postfix");if(P.length===0){u.insertAfter(I)}I.parent().find(".bootstrap-touchspin-postfix .input-group-text").text(R.postfix)}if(R.prefix){var Q=I.parent().find(".bootstrap-touchspin-prefix");if(Q.length===0){q.insertBefore(I)}I.parent().find(".bootstrap-touchspin-prefix .input-group-text").text(R.prefix)}y()}function C(){var Q=I.val(),P=I.parent();if(Q!==""){Q=O.callback_after_calculation(Number(Q).toFixed(O.decimals))}I.data("initvalue",Q).val(Q);I.addClass("form-control");if(P.hasClass("input-group")){G(P)}else{j()}}function G(Q){Q.addClass("bootstrap-touchspin");var T=I.prev(),S=I.next();var V,P,R='<span class="input-group-addon input-group-prepend bootstrap-touchspin-prefix input-group-prepend bootstrap-touchspin-injected"><span class="input-group-text">'+O.prefix+"</span></span>",U='<span class="input-group-addon input-group-append bootstrap-touchspin-postfix input-group-append bootstrap-touchspin-injected"><span class="input-group-text">'+O.postfix+"</span></span>";if(T.hasClass("input-group-btn")||T.hasClass("input-group-prepend")){V='<button class="'+O.buttondown_class+' bootstrap-touchspin-down bootstrap-touchspin-injected" type="button"><i class="fas fa-minus"></i></button>';T.append(V)}else{V='<span class="input-group-btn input-group-prepend bootstrap-touchspin-injected"><button class="'+O.buttondown_class+' bootstrap-touchspin-down" type="button"><i class="fas fa-minus"></i></button></span>';b(V).insertBefore(I)}if(S.hasClass("input-group-btn")||S.hasClass("input-group-append")){P='<button class="'+O.buttonup_class+' bootstrap-touchspin-up bootstrap-touchspin-injected" type="button"><i class="fas fa-plus"></i></button>';S.prepend(P)}else{P='<span class="input-group-btn input-group-append bootstrap-touchspin-injected"><button class="'+O.buttonup_class+' bootstrap-touchspin-up" type="button"><i class="fas fa-plus"></i></button></span>';b(P).insertAfter(I)}b(R).insertBefore(I);b(U).insertAfter(I);B=Q}function j(){var P;var Q="";if(I.hasClass("input-sm")){Q="input-group-sm"}if(I.hasClass("input-lg")){Q="input-group-lg"}if(O.verticalbuttons){P='<div class="input-group '+Q+' bootstrap-touchspin bootstrap-touchspin-injected"><span class="input-group-addon input-group-prepend bootstrap-touchspin-prefix"><span class="input-group-text">'+O.prefix+'</span></span><span class="input-group-addon bootstrap-touchspin-postfix input-group-append"><span class="input-group-text">'+O.postfix+'</span></span><span class="input-group-btn-vertical"><button class="'+O.buttondown_class+" bootstrap-touchspin-up "+O.verticalupclass+'" type="button"><i class="fas fa-plus"></i></button><button class="'+O.buttonup_class+" bootstrap-touchspin-down "+O.verticaldownclass+'" type="button"><i class="fas fa-minus"></i></button></span></div>'}else{P='<div class="input-group bootstrap-touchspin bootstrap-touchspin-injected"><span class="input-group-btn input-group-prepend"><button class="'+O.buttondown_class+' bootstrap-touchspin-down" type="button"><i class="fas fa-minus"></i></button></span><span class="input-group-addon bootstrap-touchspin-prefix input-group-prepend"><span class="input-group-text">'+O.prefix+'</span></span><span class="input-group-addon bootstrap-touchspin-postfix input-group-append"><span class="input-group-text">'+O.postfix+'</span></span><span class="input-group-btn input-group-append"><button class="'+O.buttonup_class+' bootstrap-touchspin-up" type="button"><i class="fas fa-plus"></i></button></span></div>'}B=b(P).insertBefore(I);b(".bootstrap-touchspin-prefix",B).after(I);if(I.hasClass("input-sm")){B.addClass("input-group-sm")}else{if(I.hasClass("input-lg")){B.addClass("input-group-lg")}}}function h(){i={down:b(".bootstrap-touchspin-down",B),up:b(".bootstrap-touchspin-up",B),input:b("input",B),prefix:b(".bootstrap-touchspin-prefix",B).addClass(O.prefix_extraclass),postfix:b(".bootstrap-touchspin-postfix",B).addClass(O.postfix_extraclass)}}function y(){if(O.prefix===""){q=i.prefix.detach()}if(O.postfix===""){u=i.postfix.detach()}}function r(){I.on("keydown.touchspin",function(Q){var P=Q.keyCode||Q.which;if(P===38){if(s!=="up"){f();F()}Q.preventDefault()}else{if(P===40){if(s!=="down"){E();k()}Q.preventDefault()}}});I.on("keyup.touchspin",function(Q){var P=Q.keyCode||Q.which;if(P===38){w()}else{if(P===40){w()}}});I.on("blur.touchspin",function(){p();I.val(O.callback_after_calculation(I.val()))});i.down.on("keydown",function(Q){var P=Q.keyCode||Q.which;if(P===32||P===13){if(s!=="down"){E();k()}Q.preventDefault()}});i.down.on("keyup.touchspin",function(Q){var P=Q.keyCode||Q.which;if(P===32||P===13){w()}});i.up.on("keydown.touchspin",function(Q){var P=Q.keyCode||Q.which;if(P===32||P===13){if(s!=="up"){f();F()}Q.preventDefault()}});i.up.on("keyup.touchspin",function(Q){var P=Q.keyCode||Q.which;if(P===32||P===13){w()}});i.down.on("mousedown.touchspin",function(P){i.down.off("touchstart.touchspin");if(I.is(":disabled")){return}E();k();P.preventDefault();P.stopPropagation()});i.down.on("touchstart.touchspin",function(P){i.down.off("mousedown.touchspin");if(I.is(":disabled")){return}E();k();P.preventDefault();P.stopPropagation()});i.up.on("mousedown.touchspin",function(P){i.up.off("touchstart.touchspin");if(I.is(":disabled")){return}f();F();P.preventDefault();P.stopPropagation()});i.up.on("touchstart.touchspin",function(P){i.up.off("mousedown.touchspin");if(I.is(":disabled")){return}f();F();P.preventDefault();P.stopPropagation()});i.up.on("mouseup.touchspin mouseout.touchspin touchleave.touchspin touchend.touchspin touchcancel.touchspin",function(P){if(!s){return}P.stopPropagation();w()});i.down.on("mouseup.touchspin mouseout.touchspin touchleave.touchspin touchend.touchspin touchcancel.touchspin",function(P){if(!s){return}P.stopPropagation();w()});i.down.on("mousemove.touchspin touchmove.touchspin",function(P){if(!s){return}P.stopPropagation();P.preventDefault()});i.up.on("mousemove.touchspin touchmove.touchspin",function(P){if(!s){return}P.stopPropagation();P.preventDefault()});I.on("mousewheel.touchspin DOMMouseScroll.touchspin",function(P){if(!O.mousewheel||!I.is(":focus")){return}var Q=P.originalEvent.wheelDelta||-P.originalEvent.deltaY||-P.originalEvent.detail;P.stopPropagation();P.preventDefault();if(Q<0){E()}else{f()}})}function L(){I.on("touchspin.destroy",function(){o()});I.on("touchspin.uponce",function(){w();f()});I.on("touchspin.downonce",function(){w();E()});I.on("touchspin.startupspin",function(){F()});I.on("touchspin.startdownspin",function(){k()});I.on("touchspin.stopspin",function(){w()});I.on("touchspin.updatesettings",function(P,Q){m(Q)})}function t(P){switch(O.forcestepdivisibility){case"round":return(Math.round(P/O.step)*O.step).toFixed(O.decimals);case"floor":return(Math.floor(P/O.step)*O.step).toFixed(O.decimals);case"ceil":return(Math.ceil(P/O.step)*O.step).toFixed(O.decimals);default:return P}}function p(){var R,P,Q;R=O.callback_before_calculation(I.val());if(R===""){if(O.replacementval!==""){I.val(O.replacementval);I.trigger("change")}return}if(O.decimals>0&&R==="."){return}P=parseFloat(R);if(isNaN(P)){if(O.replacementval!==""){P=O.replacementval}else{P=0}}Q=P;if(P.toString()!==R){Q=P}if((O.min!==null)&&(P<O.min)){Q=O.min}if((O.max!==null)&&(P>O.max)){Q=O.max}Q=t(Q);if(Number(R).toString()!==Q.toString()){I.val(Q);I.trigger("change")}}function n(){if(!O.booster){return O.step}else{var P=Math.pow(2,Math.floor(z/O.boostat))*O.step;if(O.maxboostedstep){if(P>O.maxboostedstep){P=O.maxboostedstep;H=Math.round((H/P))*P}}return Math.max(O.step,P)}}function f(){p();H=parseFloat(O.callback_before_calculation(i.input.val()));if(isNaN(H)){H=0}var Q=H,P=n();H=H+P;if((O.max!==null)&&(H>O.max)){H=O.max;I.trigger("touchspin.on.max");w()}i.input.val(O.callback_after_calculation(Number(H).toFixed(O.decimals)));if(Q!==H){I.trigger("change")}}function E(){p();H=parseFloat(O.callback_before_calculation(i.input.val()));if(isNaN(H)){H=0}var Q=H,P=n();H=H-P;if((O.min!==null)&&(H<O.min)){H=O.min;I.trigger("touchspin.on.min");w()}i.input.val(O.callback_after_calculation(Number(H).toFixed(O.decimals)));if(Q!==H){I.trigger("change")}}function k(){w();z=0;s="down";I.trigger("touchspin.on.startspin");I.trigger("touchspin.on.startdownspin");A=setTimeout(function(){l=setInterval(function(){z++;E()},O.stepinterval)},O.stepintervaldelay)}function F(){w();z=0;s="up";I.trigger("touchspin.on.startspin");I.trigger("touchspin.on.startupspin");v=setTimeout(function(){K=setInterval(function(){z++;f()},O.stepinterval)},O.stepintervaldelay)}function w(){clearTimeout(A);clearTimeout(v);clearInterval(l);clearInterval(K);switch(s){case"up":I.trigger("touchspin.on.stopupspin");I.trigger("touchspin.on.stopspin");break;case"down":I.trigger("touchspin.on.stopdownspin");I.trigger("touchspin.on.stopspin");break}z=0;s=false}})}}));