(function(i){var g=false;var h=function(b){var m=b.sortModalSelector,c="#"+m;if(!i(c).hasClass("modal")){var a='  <div class="modal fade" id="'+m+'" tabindex="-1" role="dialog" aria-labelledby="'+m+'Label" aria-hidden="true">';a+='         <div class="modal-dialog">';a+='             <div class="modal-content">';a+='                 <div class="modal-header">';a+='                     <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>';a+='                     <h4 class="modal-title" id="'+m+'Label">'+b.options.formatMultipleSort()+"</h4>";a+="                 </div>";a+='                 <div class="modal-body">';a+='                     <div class="bootstrap-table">';a+='                         <div class="fixed-table-toolbar">';a+='                             <div class="bars">';a+='                                 <div id="toolbar">';a+='                                     <button id="add" type="button" class="btn btn-default"><i class="'+b.options.iconsPrefix+" "+b.options.icons.plus+'"></i> '+b.options.formatAddLevel()+"</button>";a+='                                     <button id="delete" type="button" class="btn btn-default" disabled><i class="'+b.options.iconsPrefix+" "+b.options.icons.minus+'"></i> '+b.options.formatDeleteLevel()+"</button>";a+="                                 </div>";a+="                             </div>";a+="                         </div>";a+='                         <div class="fixed-table-container">';a+='                             <table id="multi-sort" class="table">';a+="                                 <thead>";a+="                                     <tr>";a+="                                         <th></th>";a+='                                         <th><div class="th-inner">'+b.options.formatColumn()+"</div></th>";a+='                                         <th><div class="th-inner">'+b.options.formatOrder()+"</div></th>";a+="                                     </tr>";a+="                                 </thead>";a+="                                 <tbody></tbody>";a+="                             </table>";a+="                         </div>";a+="                     </div>";a+="                 </div>";a+='                 <div class="modal-footer">';a+='                     <button type="button" class="btn btn-default" data-dismiss="modal">'+b.options.formatCancel()+"</button>";a+='                     <button type="button" class="btn btn-primary">'+b.options.formatSort()+"</button>";a+="                 </div>";a+="             </div>";a+="         </div>";a+="     </div>";i("body").append(i(a));b.$sortModal=i(c);var e=b.$sortModal.find("tbody > tr");b.$sortModal.off("click","#add").on("click","#add",function(){var l=b.$sortModal.find(".multi-sort-name:first option").length,k=b.$sortModal.find("tbody tr").length;if(k<l){k++;b.addLevel();b.setButtonStates()}});b.$sortModal.off("click","#delete").on("click","#delete",function(){var l=b.$sortModal.find(".multi-sort-name:first option").length,k=b.$sortModal.find("tbody tr").length;if(k>1&&k<=l){k--;b.$sortModal.find("tbody tr:last").remove();b.setButtonStates()}});b.$sortModal.off("click",".btn-primary").on("click",".btn-primary",function(){var x=b.$sortModal.find("tbody > tr"),t=b.$sortModal.find("div.alert"),k=[],u=[];b.options.sortPriority=i.map(x,function(n){var q=i(n),o=q.find(".multi-sort-name").val(),p=q.find(".multi-sort-order").val();k.push(o);return{sortName:o,sortOrder:p}});var l=k.sort();for(var v=0;v<k.length-1;v++){if(l[v+1]==l[v]){u.push(l[v])}}if(u.length>0){if(t.length===0){t='<div class="alert alert-danger" role="alert"><strong>'+b.options.formatDuplicateAlertTitle()+"</strong> "+b.options.formatDuplicateAlertDescription()+"</div>";i(t).insertBefore(b.$sortModal.find(".bars"))}}else{if(t.length===1){i(t).remove()}b.$sortModal.modal("hide");b.options.sortName="";if(b.options.sidePagination==="server"){var w=b.options.queryParams;b.options.queryParams=function(n){n.multiSort=b.options.sortPriority;return w(n)};g=false;b.initServer(b.options.silentSort);return}b.onMultipleSort()}});if(b.options.sortPriority===null||b.options.sortPriority.length===0){if(b.options.sortName){b.options.sortPriority=[{sortName:b.options.sortName,sortOrder:b.options.sortOrder}]}}if(b.options.sortPriority!==null&&b.options.sortPriority.length>0){if(e.length<b.options.sortPriority.length&&typeof b.options.sortPriority==="object"){for(var d=0;d<b.options.sortPriority.length;d++){b.addLevel(d,b.options.sortPriority[d])}}}else{b.addLevel(0)}b.setButtonStates()}};i.fn.bootstrapTable.methods.push("multipleSort");i.extend(i.fn.bootstrapTable.defaults,{showMultiSort:false,showMultiSortButton:true,sortPriority:null,onMultipleSort:function(){return false}});i.extend(i.fn.bootstrapTable.defaults.icons,{sort:"glyphicon-sort",plus:"glyphicon-plus",minus:"glyphicon-minus"});i.extend(i.fn.bootstrapTable.Constructor.EVENTS,{"multiple-sort.bs.table":"onMultipleSort"});i.extend(i.fn.bootstrapTable.locales,{formatMultipleSort:function(){return"Multiple Sort"},formatAddLevel:function(){return"Add Level"},formatDeleteLevel:function(){return"Delete Level"},formatColumn:function(){return"Column"},formatOrder:function(){return"Order"},formatSortBy:function(){return"Sort by"},formatThenBy:function(){return"Then by"},formatSort:function(){return"Sort"},formatCancel:function(){return"Cancel"},formatDuplicateAlertTitle:function(){return"Duplicate(s) detected!"},formatDuplicateAlertDescription:function(){return"Please remove or change any duplicate column."},formatSortOrders:function(){return{asc:"Ascending",desc:"Descending"}}});i.extend(i.fn.bootstrapTable.defaults,i.fn.bootstrapTable.locales);var f=i.fn.bootstrapTable.Constructor,j=f.prototype.initToolbar;f.prototype.initToolbar=function(){this.showToolbar=this.showToolbar||this.options.showMultiSort;var c=this,l="sortModal_"+this.$el.attr("id"),a="#"+l;this.$sortModal=i(a);this.sortModalSelector=l;j.apply(this,Array.prototype.slice.apply(arguments));if(c.options.sidePagination==="server"&&!g&&c.options.sortPriority!==null){var e=c.options.queryParams;c.options.queryParams=function(k){k.multiSort=c.options.sortPriority;return e(k)}}if(this.options.showMultiSort){var b=this.$toolbar.find(">.btn-group").first(),d=this.$toolbar.find("div.multi-sort");if(!d.length&&this.options.showMultiSortButton){d='  <button class="multi-sort btn btn-default'+(this.options.iconSize===undefined?"":" btn-"+this.options.iconSize)+'" type="button" data-toggle="modal" data-target="'+a+'" title="'+this.options.formatMultipleSort()+'">';d+='     <i class="'+this.options.iconsPrefix+" "+this.options.icons.sort+'"></i>';d+="</button>";b.append(d);h(c)}this.$el.on("sort.bs.table",function(){g=true});this.$el.on("multiple-sort.bs.table",function(){g=false});this.$el.on("load-success.bs.table",function(){if(!g&&c.options.sortPriority!==null&&typeof c.options.sortPriority==="object"&&c.options.sidePagination!=="server"){c.onMultipleSort()}});this.$el.on("column-switch.bs.table",function(p,k){for(var o=0;o<c.options.sortPriority.length;o++){if(c.options.sortPriority[o].sortName===k){c.options.sortPriority.splice(o,1)}}c.assignSortableArrows();c.$sortModal.remove();h(c)});this.$el.on("reset-view.bs.table",function(){if(!g&&c.options.sortPriority!==null&&typeof c.options.sortPriority==="object"){c.assignSortableArrows()}})}};f.prototype.multipleSort=function(){var a=this;if(!g&&a.options.sortPriority!==null&&typeof a.options.sortPriority==="object"&&a.options.sidePagination!=="server"){a.onMultipleSort()}};f.prototype.onMultipleSort=function(){var b=this;var c=function(e,d){return e>d?1:e<d?-1:0};var a=function(e,r){var w=[],d=[];for(var v=0;v<b.options.sortPriority.length;v++){var s=b.options.sortPriority[v].sortOrder==="desc"?-1:1,u=e[b.options.sortPriority[v].sortName],t=r[b.options.sortPriority[v].sortName];if(u===undefined||u===null){u=""}if(t===undefined||t===null){t=""}if(i.isNumeric(u)&&i.isNumeric(t)){u=parseFloat(u);t=parseFloat(t)}if(typeof u!=="string"){u=u.toString()}w.push(s*c(u,t));d.push(s*c(t,u))}return c(w,d)};this.data.sort(function(d,e){return a(d,e)});this.initBody();this.assignSortableArrows();this.trigger("multiple-sort")};f.prototype.addLevel=function(d,c){var a=d===0?this.options.formatSortBy():this.options.formatThenBy();this.$sortModal.find("tbody").append(i("<tr>").append(i("<td>").text(a)).append(i("<td>").append(i('<select class="form-control multi-sort-name">'))).append(i("<td>").append(i('<select class="form-control multi-sort-order">'))));var b=this.$sortModal.find(".multi-sort-name").last(),e=this.$sortModal.find(".multi-sort-order").last();i.each(this.columns,function(n,m){if(m.sortable===false||m.visible===false){return true}b.append('<option value="'+m.field+'">'+m.title+"</option>")});i.each(this.options.formatSortOrders(),function(m,n){e.append('<option value="'+m+'">'+n+"</option>")});if(c!==undefined){b.find('option[value="'+c.sortName+'"]').attr("selected",true);e.find('option[value="'+c.sortOrder+'"]').attr("selected",true)}};f.prototype.assignSortableArrows=function(){var c=this,b=c.$header.find("th");for(var d=0;d<b.length;d++){for(var a=0;a<c.options.sortPriority.length;a++){if(i(b[d]).data("field")===c.options.sortPriority[a].sortName){i(b[d]).find(".sortable").removeClass("desc asc").addClass(c.options.sortPriority[a].sortOrder)}}}};f.prototype.setButtonStates=function(){var b=this.$sortModal.find(".multi-sort-name:first option").length,a=this.$sortModal.find("tbody tr").length;if(a==b){this.$sortModal.find("#add").attr("disabled","disabled")}if(a>1){this.$sortModal.find("#delete").removeAttr("disabled")}if(a<b){this.$sortModal.find("#add").removeAttr("disabled")}if(a==1){this.$sortModal.find("#delete").attr("disabled","disabled")}}})(jQuery);