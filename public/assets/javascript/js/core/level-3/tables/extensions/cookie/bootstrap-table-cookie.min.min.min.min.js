(function(P){var O={sortOrder:"bs.table.sortOrder",sortName:"bs.table.sortName",pageNumber:"bs.table.pageNumber",pageList:"bs.table.pageList",columns:"bs.table.columns",searchText:"bs.table.searchText",filterControl:"bs.table.filterControl"};var Q=function(b){var a=b.$header;if(b.options.height){a=b.$tableHeader}return a};var N=function(b){var a="select, input";if(b.options.height){a="table select, table input"}return a};var D=function(){return !!(navigator.cookieEnabled)};var J=function(b,d){var c=-1;for(var a=0;a<d.length;a++){if(b.toLowerCase()===d[a].toLowerCase()){c=a;break}}return c};var E=function(c,a,b){if((!c.options.cookie)||(!D())||(c.options.cookieIdTable==="")){return}if(J(a,c.options.cookiesEnabled)===-1){return}a=c.options.cookieIdTable+"."+a;switch(c.options.cookieStorage){case"cookieStorage":document.cookie=[a,"=",b,"; expires="+x(c.options.cookieExpire),c.options.cookiePath?"; path="+c.options.cookiePath:"",c.options.cookieDomain?"; domain="+c.options.cookieDomain:"",c.options.cookieSecure?"; secure":""].join("");case"localStorage":localStorage.setItem(a,b);break;case"sessionStorage":sessionStorage.setItem(a,b);break;default:return false}return true};var B=function(c,b,a){if(!a){return null}if(J(a,c.options.cookiesEnabled)===-1){return null}a=b+"."+a;switch(c.options.cookieStorage){case"cookieStorage":var e="; "+document.cookie;var d=e.split("; "+a+"=");return d.length===2?d.pop().split(";").shift():null;case"localStorage":return localStorage.getItem(a);case"sessionStorage":return sessionStorage.getItem(a);default:return null}};var R=function(b,c,a){a=c+"."+a;switch(b.options.cookieStorage){case"cookieStorage":document.cookie=[encodeURIComponent(a),"=","; expires=Thu, 01 Jan 1970 00:00:00 GMT",b.options.cookiePath?"; path="+b.options.cookiePath:"",b.options.cookieDomain?"; domain="+b.options.cookieDomain:"",].join("");break;case"localStorage":localStorage.removeItem(a);break;case"sessionStorage":sessionStorage.removeItem(a);break}return true};var x=function(c){var b=c.replace(/[0-9]*/,"");c=c.replace(/[A-Za-z]{1,2}/,"");switch(b.toLowerCase()){case"s":c=+c;break;case"mi":c=c*60;break;case"h":c=c*60*60;break;case"d":c=c*24*60*60;break;case"m":c=c*30*24*60*60;break;case"y":c=c*365*24*60*60;break;default:c=undefined;break}if(!c){return""}var a=new Date();a.setTime(a.getTime()+c*1000);return a.toGMTString()};var S=function(a){setTimeout(function(){var f=JSON.parse(B(a,a.options.cookieIdTable,O.filterControl));if(!a.options.filterControlValuesLoaded&&f){var d={},c=Q(a),b=N(a),e=function(g,h){P(h).each(function(i,j){if(j.text!==""){P(g).val(j.text);d[j.field]=j.text}})};c.find(b).each(function(){var g=P(this).closest("[data-field]").data("field"),h=P.grep(f,function(i){return i.field===g});e(this,h)});a.initColumnSearch(d);a.options.filterControlValuesLoaded=true;a.initServer()}},250)};P.extend(P.fn.bootstrapTable.defaults,{cookie:false,cookieExpire:"2h",cookiePath:null,cookieDomain:null,cookieSecure:null,cookieIdTable:"",cookiesEnabled:["bs.table.sortOrder","bs.table.sortName","bs.table.pageNumber","bs.table.pageList","bs.table.columns","bs.table.searchText","bs.table.filterControl"],cookieStorage:"cookieStorage",filterControls:[],filterControlValuesLoaded:false});P.fn.bootstrapTable.methods.push("getCookies");P.fn.bootstrapTable.methods.push("deleteCookie");P.extend(P.fn.bootstrapTable.utils,{setCookie:E,getCookie:B});var H=P.fn.bootstrapTable.Constructor,K=H.prototype.init,L=H.prototype.initTable,M=H.prototype.initServer,F=H.prototype.onSort,A=H.prototype.onPageNumber,z=H.prototype.onPageListChange,y=H.prototype.onPagePre,T=H.prototype.onPageNext,C=H.prototype.toggleColumn,G=H.prototype.selectPage,I=H.prototype.onSearch;H.prototype.init=function(){this.options.filterControls=[];this.options.filterControlValuesLoaded=false;this.options.cookiesEnabled=typeof this.options.cookiesEnabled==="string"?this.options.cookiesEnabled.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.cookiesEnabled;if(this.options.filterControl){var a=this;this.$el.on("column-search.bs.table",function(d,f,e){var c=true;for(var b=0;b<a.options.filterControls.length;b++){if(a.options.filterControls[b].field===f){a.options.filterControls[b].text=e;c=false;break}}if(c){a.options.filterControls.push({field:f,text:e})}E(a,O.filterControl,JSON.stringify(a.options.filterControls))}).on("post-body.bs.table",S(a))}K.apply(this,Array.prototype.slice.apply(arguments))};H.prototype.initServer=function(){var a=this;if(a.options.cookie&&a.options.filterControl&&!a.options.filterControlValuesLoaded){var b=JSON.parse(B(a,a.options.cookieIdTable,O.filterControl));if(b){return}}M.apply(this,Array.prototype.slice.apply(arguments))};H.prototype.initTable=function(){L.apply(this,Array.prototype.slice.apply(arguments));this.initCookie()};H.prototype.initCookie=function(){if(!this.options.cookie){return}if((this.options.cookieIdTable==="")||(this.options.cookieExpire==="")||(!D())){console.error("Configuration error. Please review the cookieIdTable, cookieExpire properties, if those properties are ok, then this browser does not support the cookies");this.options.cookie=false;return}var b=B(this,this.options.cookieIdTable,O.sortOrder),f=B(this,this.options.cookieIdTable,O.sortName),d=B(this,this.options.cookieIdTable,O.pageNumber),c=B(this,this.options.cookieIdTable,O.pageList),a=JSON.parse(B(this,this.options.cookieIdTable,O.columns)),e=B(this,this.options.cookieIdTable,O.searchText);this.options.sortOrder=b?b:this.options.sortOrder;this.options.sortName=f?f:this.options.sortName;this.options.pageNumber=d?+d:this.options.pageNumber;this.options.pageSize=c?c===this.options.formatAllRows()?c:+c:this.options.pageSize;this.options.searchText=e?e:"";if(a){P.each(this.columns,function(h,g){g.visible=P.inArray(g.field,a)!==-1})}};H.prototype.onSort=function(){F.apply(this,Array.prototype.slice.apply(arguments));E(this,O.sortOrder,this.options.sortOrder);E(this,O.sortName,this.options.sortName)};H.prototype.onPageNumber=function(){A.apply(this,Array.prototype.slice.apply(arguments));E(this,O.pageNumber,this.options.pageNumber);return false};H.prototype.onPageListChange=function(){z.apply(this,Array.prototype.slice.apply(arguments));E(this,O.pageList,this.options.pageSize);E(this,O.pageNumber,this.options.pageNumber);return false};H.prototype.onPagePre=function(){y.apply(this,Array.prototype.slice.apply(arguments));E(this,O.pageNumber,this.options.pageNumber);return false};H.prototype.onPageNext=function(){T.apply(this,Array.prototype.slice.apply(arguments));E(this,O.pageNumber,this.options.pageNumber);return false};H.prototype.toggleColumn=function(){C.apply(this,Array.prototype.slice.apply(arguments));var a=[];P.each(this.columns,function(b,c){if(c.visible){a.push(c.field)}});E(this,O.columns,JSON.stringify(a))};H.prototype.selectPage=function(a){G.apply(this,Array.prototype.slice.apply(arguments));E(this,O.pageNumber,a)};H.prototype.onSearch=function(){var a=Array.prototype.slice.apply(arguments);I.apply(this,a);if(P(a[0].currentTarget).parent().hasClass("search")){E(this,O.searchText,this.searchText)}E(this,O.pageNumber,this.options.pageNumber)};H.prototype.getCookies=function(){var a=this;var b={};P.each(O,function(d,c){b[d]=B(a,a.options.cookieIdTable,c);if(d==="columns"){b[d]=JSON.parse(b[d])}});return b};H.prototype.deleteCookie=function(a){if((a==="")||(!D())){return}R(this,this.options.cookieIdTable,O[a])}})(jQuery);