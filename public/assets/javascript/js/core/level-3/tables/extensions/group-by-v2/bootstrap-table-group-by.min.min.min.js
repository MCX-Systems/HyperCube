!function(c){var b,e;var f=function(k){var m=arguments,l=true,j=1;k=k.replace(/%s/g,function(){var n=m[j++];if(typeof n==="undefined"){l=false;return""}return n});return l?k:""};var h=function(k,j){var l={};k.forEach(function(m){var n=j(m);l[n]=l[n]||[];l[n].push(m)});return l};c.extend(c.fn.bootstrapTable.defaults,{groupBy:false,groupByField:""});var a=c.fn.bootstrapTable.Constructor,g=a.prototype.initSort,i=a.prototype.initBody,d=a.prototype.updateSelected;a.prototype.initSort=function(){g.apply(this,Array.prototype.slice.apply(arguments));var k=this;e=[];if((this.options.groupBy)&&(this.options.groupByField!=="")){if((this.options.sortName!=this.options.groupByField)){this.data.sort(function(m,n){return m[k.options.groupByField].localeCompare(n[k.options.groupByField])})}var k=this;var l=h(k.data,function(m){return[m[k.options.groupByField]]});var j=0;c.each(l,function(n,m){e.push({id:j,name:n});m.forEach(function(o){if(!o._data){o._data={}}o._data["parent-index"]=j});j++})}};a.prototype.initBody=function(){b=true;i.apply(this,Array.prototype.slice.apply(arguments));if((this.options.groupBy)&&(this.options.groupByField!=="")){var k=this,j=false,l=0;this.columns.forEach(function(m){if(m.checkbox){j=true}else{if(m.visible){l+=1}}});if(this.options.detailView&&!this.options.cardView){l+=1}e.forEach(function(m){var n=[];n.push(f('<tr class="info groupBy expanded" data-group-index="%s">',m.id));if(k.options.detailView&&!k.options.cardView){n.push('<td class="detail"></td>')}if(j){n.push('<td class="bs-checkbox">','<input name="btSelectGroup" type="checkbox" />',"</td>")}n.push("<td",f(' colspan="%s"',l),">",m.name,"</td>");n.push("</tr>");k.$body.find("tr[data-parent-index="+m.id+"]:first").before(c(n.join("")))});this.$selectGroup=[];this.$body.find('[name="btSelectGroup"]').each(function(){var m=c(this);k.$selectGroup.push({group:m,item:k.$selectItem.filter(function(){return(c(this).closest("tr").data("parent-index")===m.closest("tr").data("group-index"))})})});this.$container.off("click",".groupBy").on("click",".groupBy",function(){c(this).toggleClass("expanded");k.$body.find("tr[data-parent-index="+c(this).closest("tr").data("group-index")+"]").toggleClass("hidden")});this.$container.off("click",'[name="btSelectGroup"]').on("click",'[name="btSelectGroup"]',function(n){n.stopImmediatePropagation();var o=c(this);var m=o.prop("checked");k[m?"checkGroup":"uncheckGroup"](c(this).closest("tr").data("group-index"))})}b=false;this.updateSelected()};a.prototype.updateSelected=function(){if(!b){d.apply(this,Array.prototype.slice.apply(arguments));if((this.options.groupBy)&&(this.options.groupByField!=="")){this.$selectGroup.forEach(function(k){var j=k.item.filter(":enabled").length===k.item.filter(":enabled").filter(":checked").length;k.group.prop("checked",j)})}}};a.prototype.getGroupSelections=function(j){var k=this;return c.grep(this.data,function(l){return(l[k.header.stateField]&&(l._data["parent-index"]===j))})};a.prototype.checkGroup=function(j){this.checkGroup_(j,true)};a.prototype.uncheckGroup=function(j){this.checkGroup_(j,false)};a.prototype.checkGroup_=function(l,j){var k;var m=function(){return(c(this).closest("tr").data("parent-index")===l)};if(!j){k=this.getGroupSelections(l)}this.$selectItem.filter(m).prop("checked",j);this.updateRows();this.updateSelected();if(j){k=this.getGroupSelections(l)}this.trigger(j?"check-all":"uncheck-all",k)}}(jQuery);