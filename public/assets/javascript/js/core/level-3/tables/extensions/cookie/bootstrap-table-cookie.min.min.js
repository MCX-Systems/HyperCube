(function(P){var O={sortOrder:"bs.table.sortOrder",sortName:"bs.table.sortName",pageNumber:"bs.table.pageNumber",pageList:"bs.table.pageList",columns:"bs.table.columns",searchText:"bs.table.searchText",filterControl:"bs.table.filterControl"};var Q=function(a){var b=a.$header;if(a.options.height){b=a.$tableHeader}return b};var N=function(a){var b="select, input";if(a.options.height){b="table select, table input"}return b};var G=function(){return !!(navigator.cookieEnabled)};var z=function(b,a){var d=-1;for(var c=0;c<a.length;c++){if(b.toLowerCase()===a[c].toLowerCase()){d=c;break}}return d};var H=function(a,b,c){if((!a.options.cookie)||(!G())||(a.options.cookieIdTable==="")){return}if(z(b,a.options.cookiesEnabled)===-1){return}b=a.options.cookieIdTable+"."+b;switch(a.options.cookieStorage){case"cookieStorage":document.cookie=[b,"=",c,"; expires="+A(a.options.cookieExpire),a.options.cookiePath?"; path="+a.options.cookiePath:"",a.options.cookieDomain?"; domain="+a.options.cookieDomain:"",a.options.cookieSecure?"; secure":""].join("");case"localStorage":localStorage.setItem(b,c);break;case"sessionStorage":sessionStorage.setItem(b,c);break;default:return false}return true};var E=function(e,b,d){if(!d){return null}if(z(d,e.options.cookiesEnabled)===-1){return null}d=b+"."+d;switch(e.options.cookieStorage){case"cookieStorage":var c="; "+document.cookie;var a=c.split("; "+d+"=");return a.length===2?a.pop().split(";").shift():null;case"localStorage":return localStorage.getItem(d);case"sessionStorage":return sessionStorage.getItem(d);default:return null}};var R=function(c,a,b){b=a+"."+b;switch(c.options.cookieStorage){case"cookieStorage":document.cookie=[encodeURIComponent(b),"=","; expires=Thu, 01 Jan 1970 00:00:00 GMT",c.options.cookiePath?"; path="+c.options.cookiePath:"",c.options.cookieDomain?"; domain="+c.options.cookieDomain:"",].join("");break;case"localStorage":localStorage.removeItem(b);break;case"sessionStorage":sessionStorage.removeItem(b);break}return true};var A=function(a){var c=a.replace(/[0-9]*/,"");a=a.replace(/[A-Za-z]{1,2}/,"");switch(c.toLowerCase()){case"s":a=+a;break;case"mi":a=a*60;break;case"h":a=a*60*60;break;case"d":a=a*24*60*60;break;case"m":a=a*30*24*60*60;break;case"y":a=a*365*24*60*60;break;default:a=undefined;break}if(!a){return""}var b=new Date();b.setTime(b.getTime()+a*1000);return b.toGMTString()};var S=function(a){setTimeout(function(){var d=JSON.parse(E(a,a.options.cookieIdTable,O.filterControl));if(!a.options.filterControlValuesLoaded&&d){var f={},c=Q(a),e=N(a),b=function(g,h){P(h).each(function(i,j){if(j.text!==""){P(g).val(j.text);f[j.field]=j.text}})};c.find(e).each(function(){var g=P(this).closest("[data-field]").data("field"),h=P.grep(d,function(i){return i.field===g});b(this,h)});a.initColumnSearch(f);a.options.filterControlValuesLoaded=true;a.initServer()}},250)};P.extend(P.fn.bootstrapTable.defaults,{cookie:false,cookieExpire:"2h",cookiePath:null,cookieDomain:null,cookieSecure:null,cookieIdTable:"",cookiesEnabled:["bs.table.sortOrder","bs.table.sortName","bs.table.pageNumber","bs.table.pageList","bs.table.columns","bs.table.searchText","bs.table.filterControl"],cookieStorage:"cookieStorage",filterControls:[],filterControlValuesLoaded:false});P.fn.bootstrapTable.methods.push("getCookies");P.fn.bootstrapTable.methods.push("deleteCookie");P.extend(P.fn.bootstrapTable.utils,{setCookie:H,getCookie:E});var J=P.fn.bootstrapTable.Constructor,K=J.prototype.init,L=J.prototype.initTable,M=J.prototype.initServer,x=J.prototype.onSort,D=J.prototype.onPageNumber,C=J.prototype.onPageListChange,B=J.prototype.onPagePre,T=J.prototype.onPageNext,F=J.prototype.toggleColumn,I=J.prototype.selectPage,y=J.prototype.onSearch;J.prototype.init=function(){this.options.filterControls=[];this.options.filterControlValuesLoaded=false;this.options.cookiesEnabled=typeof this.options.cookiesEnabled==="string"?this.options.cookiesEnabled.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.cookiesEnabled;if(this.options.filterControl){var a=this;this.$el.on("column-search.bs.table",function(f,b,d){var c=true;for(var e=0;e<a.options.filterControls.length;e++){if(a.options.filterControls[e].field===b){a.options.filterControls[e].text=d;c=false;break}}if(c){a.options.filterControls.push({field:b,text:d})}H(a,O.filterControl,JSON.stringify(a.options.filterControls))}).on("post-body.bs.table",S(a))}K.apply(this,Array.prototype.slice.apply(arguments))};J.prototype.initServer=function(){var b=this;if(b.options.cookie&&b.options.filterControl&&!b.options.filterControlValuesLoaded){var a=JSON.parse(E(b,b.options.cookieIdTable,O.filterControl));if(a){return}}M.apply(this,Array.prototype.slice.apply(arguments))};J.prototype.initTable=function(){L.apply(this,Array.prototype.slice.apply(arguments));this.initCookie()};J.prototype.initCookie=function(){if(!this.options.cookie){return}if((this.options.cookieIdTable==="")||(this.options.cookieExpire==="")||(!G())){console.error("Configuration error. Please review the cookieIdTable, cookieExpire properties, if those properties are ok, then this browser does not support the cookies");this.options.cookie=false;return}var b=E(this,this.options.cookieIdTable,O.sortOrder),d=E(this,this.options.cookieIdTable,O.sortName),f=E(this,this.options.cookieIdTable,O.pageNumber),c=E(this,this.options.cookieIdTable,O.pageList),e=JSON.parse(E(this,this.options.cookieIdTable,O.columns)),a=E(this,this.options.cookieIdTable,O.searchText);this.options.sortOrder=b?b:this.options.sortOrder;this.options.sortName=d?d:this.options.sortName;this.options.pageNumber=f?+f:this.options.pageNumber;this.options.pageSize=c?c===this.options.formatAllRows()?c:+c:this.options.pageSize;this.options.searchText=a?a:"";if(e){P.each(this.columns,function(h,g){g.visible=P.inArray(g.field,e)!==-1})}};J.prototype.onSort=function(){x.apply(this,Array.prototype.slice.apply(arguments));H(this,O.sortOrder,this.options.sortOrder);H(this,O.sortName,this.options.sortName)};J.prototype.onPageNumber=function(){D.apply(this,Array.prototype.slice.apply(arguments));H(this,O.pageNumber,this.options.pageNumber);return false};J.prototype.onPageListChange=function(){C.apply(this,Array.prototype.slice.apply(arguments));H(this,O.pageList,this.options.pageSize);H(this,O.pageNumber,this.options.pageNumber);return false};J.prototype.onPagePre=function(){B.apply(this,Array.prototype.slice.apply(arguments));H(this,O.pageNumber,this.options.pageNumber);return false};J.prototype.onPageNext=function(){T.apply(this,Array.prototype.slice.apply(arguments));H(this,O.pageNumber,this.options.pageNumber);return false};J.prototype.toggleColumn=function(){F.apply(this,Array.prototype.slice.apply(arguments));var a=[];P.each(this.columns,function(c,b){if(b.visible){a.push(b.field)}});H(this,O.columns,JSON.stringify(a))};J.prototype.selectPage=function(a){I.apply(this,Array.prototype.slice.apply(arguments));H(this,O.pageNumber,a)};J.prototype.onSearch=function(){var a=Array.prototype.slice.apply(arguments);y.apply(this,a);if(P(a[0].currentTarget).parent().hasClass("search")){H(this,O.searchText,this.searchText)}H(this,O.pageNumber,this.options.pageNumber)};J.prototype.getCookies=function(){var b=this;var a={};P.each(O,function(d,c){a[d]=E(b,b.options.cookieIdTable,c);if(d==="columns"){a[d]=JSON.parse(a[d])}});return a};J.prototype.deleteCookie=function(a){if((a==="")||(!G())){return}R(this,this.options.cookieIdTable,O[a])}})(jQuery);