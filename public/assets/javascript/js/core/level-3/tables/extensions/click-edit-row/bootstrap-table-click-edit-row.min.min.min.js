(function(c){c.extend(c.fn.bootstrapTable.defaults,{clickEdit:false});function f(h,j){var i=c("<option />");if(j){c(j).each(function(l,k){i.clone().text(k.idxNum+" "+k.name).val(k.idxNum).appendTo(h)})}else{console.log("Please setup options first!!")}}function a(m,h){var i=[],o=m,j='<button type="button" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button>',p='<button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>';var l=function(){i=[];h.find("td").find('input[type="text"]').each(function(t,s){i.push(c(s).eq(0).val())});h.find("select").each(function(t,s){i.push(c("#"+s.id+" option:selected").val())});c("#table").bootstrapTable("updateRow",{index:o.$data.thId,row:{noOld:i[0],area:h.find("select").eq(0).children(":selected").text(),town:h.find("select").eq(1).children(":selected").text(),address:i[1]}});c("#tooling").remove();o.editing=true;return false};var n=function(){c("#table").bootstrapTable("updateRow",{index:o.$data.thId,row:{},});c("#tooling").remove();o.editing=true;return false};if(o.editing){var k=0;o.editing=false;o.columns.forEach(function(v,u){if(!v.editable){return}switch(v.editable){case"input":var x=c('<div class="editable-input col-md-12 col-sm-12 col-xs-12" style="position: relative;"/>');i.push(h.find("td").eq(v.fieldIndex).text());x.append(c('<input type="text" class="form-control input-sm"/>'));x.append(c('<span class="clear"><i class="fa fa-times-circle-o" aria-hidden="true"></i></span>'));h.find("td").eq(v.fieldIndex).text("").append(x);break;case"select":var w=c('<select id="'+v.field+'">'),t=c.selectArray[v.field];h.find("td").eq(v.fieldIndex).text("").append(w);f(c("#"+v.field),t);break;case"textarea":break;default:console.log(v.fieldIndex+" "+v.editable)}},m);for(var r=0,q=i.length;r<q;r++){h.find('input[type="text"]').eq(r).val(i[r])}h.find("td").last().append('<div id="tooling" class="editable-buttons"/>');c(".clear").on("click",function(){c(this).parent().find("input").val("")});c(j).on("click",l).appendTo("#tooling");c(p).on("click",n).appendTo("#tooling")}}function d(k,i){var h=c(k).find("a").attr("href").match(/\d+/g)[0];var j={treeId:h,oldTreeSerialNo:i[0],adminDivision:i[2],adminUnit:i[3],treeAddr:i[1]};store("data/update",j)}var e=c.fn.bootstrapTable.Constructor,b=e.prototype.initTable,g=e.prototype.initBody;e.prototype.initTable=function(){var h=this;this.$data={};b.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.clickEdit){}};e.prototype.initBody=function(){var i=this;g.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.clickEdit){return}var h=this.$tableBody.find("table");i.editing=true;h.on("click-row.bs.table",function(l,m,j,k){if(k==="no"){return}this.$data.thId=j.data().index;this.$data.itemid=j.data().uniqueid;this.$data.divi=parseInt(m.area);this.$data.town=parseInt(m.town);a(this,j)}.bind(this))}})(jQuery);