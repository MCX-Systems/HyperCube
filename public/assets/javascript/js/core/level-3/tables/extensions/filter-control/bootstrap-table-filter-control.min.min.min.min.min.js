(function(z){var f=z.fn.bootstrapTable.utils.sprintf,g=z.fn.bootstrapTable.utils.objectKeys;var n=function(D){return D.get(D.length-1).options};var A=function(F,G){var D=n(F);for(var E=0;E<D.length;E++){if(D[E].value!==""){if(!G.hasOwnProperty(D[E].value)){F.find(f("option[value='%s']",D[E].value)).hide()}else{F.find(f("option[value='%s']",D[E].value)).show()}}}};var d=function(F,E,D){E=z.trim(E);F=z(F.get(F.length-1));if(!r(F,E)){F.append(z("<option></option>").attr("value",E).text(z("<div />").html(D).text()))}};var v=function(E){E=z(E.get(E.length-1));var D=E.find("option:gt(0)");D.sort(function(G,F){G=z(G).text().toLowerCase();F=z(F).text().toLowerCase();if(z.isNumeric(G)&&z.isNumeric(F)){G=parseFloat(G);F=parseFloat(F)}return G>F?1:G<F?-1:0});E.find("option:gt(0)").remove();E.append(D)};var r=function(G,F){var D=n(G);for(var E=0;E<D.length;E++){if(D[E].value===F.toString()){return true}}return false};var q=function(D){D.$tableHeader.css("height","77px")};var y=function(D){var E=D.$header;if(D.options.height){E=D.$tableHeader}return E};var B=function(D){var E="select, input";if(D.options.height){E="table select, table input"}return E};var a=function(F){if(z.fn.bootstrapTable.utils.isIEBrowser()){if(z(F).is("input[type=text]")){var G=0;if("selectionStart" in F){G=F.selectionStart}else{if("selection" in document){F.focus();var D=document.selection.createRange();var E=document.selection.createRange().text.length;D.moveStart("character",-F.value.length);G=D.text.length-E}}return G}else{return -1}}else{return -1}};var t=function(D){z(D).val(D.value)};var j=function(E){var D=y(E),F=B(E);E.options.valuesFilterControl=[];D.find(F).each(function(){E.options.valuesFilterControl.push({field:z(this).closest("[data-field]").data("field"),value:z(this).val(),position:a(z(this).get(0))})})};var s=function(D){var E=null,H=[],G=y(D),F=B(D);if(D.options.valuesFilterControl.length>0){G.find(F).each(function(I,J){E=z(this).closest("[data-field]").data("field");H=z.grep(D.options.valuesFilterControl,function(K){return K.field===E});if(H.length>0){z(this).val(H[0].value);t(z(this).get(0),H[0].position)}})}};var h=function p(){var E=[],D=document.cookie.match(/(?:bs.table.)(\w*)/g);if(D){z.each(D,function(G,F){if(/./.test(F)){F=F.split(".").pop()}if(z.inArray(F,E)===-1){E.push(F)}});return E}};var l=function(E){var F=E.data,D=E.pageTo<E.options.data.length?E.options.data.length:E.pageTo,J=function(K){return K.filterControl&&K.filterControl.toLowerCase()==="select"&&K.searchable},H=function(K){return K.filterData===undefined||K.filterData.toLowerCase()==="column"},I=function(K){return K&&K.length>0};var G=E.options.pagination?(E.options.sidePagination==="server"?E.pageTo:E.options.totalRows):E.pageTo;z.each(E.header.fields,function(M,R){var L=E.columns[E.fieldsColumnsIndex[R]],P=z(".bootstrap-table-filter-control-"+i(L.field));if(J(L)&&H(L)&&I(P)){if(P.get(P.length-1).options.length===0){d(P,"","")}var Q={};for(var O=0;O<G;O++){var K=F[O][R],N=z.fn.bootstrapTable.utils.calculateObjectValue(E.header,E.header.formatters[M],[K,F[O],O],K);Q[N]=K}for(var S in Q){d(P,Q[S],S)}v(P);if(E.options.hideUnusedSelectOptions){A(P,Q)}}})};var i=function(D){return String(D).replace(/(:|\.|\[|\]|,)/g,"\\$1")};var m=function(E,G){var F=false,H,D;z.each(E.columns,function(M,N){H="hidden";D=[];if(!N.visible){return}if(!N.filterControl){D.push('<div class="no-filter-control"></div>')}else{D.push('<div class="filter-control">');var P=N.filterControl.toLowerCase();if(N.searchable&&E.options.filterTemplate[P]){F=true;H="visible";D.push(E.options.filterTemplate[P](E,N.field,H,N.filterControlPlaceholder?N.filterControlPlaceholder:"","filter-control-"+M))}}z.each(G.children().children(),function(Q,R){R=z(R);if(R.data("field")===N.field){R.find(".fht-cell").append(D.join(""));return false}});if(N.filterData!==undefined&&N.filterData.toLowerCase()!=="column"){var J=k(x,N.filterData.substring(0,N.filterData.indexOf(":")));var I,O;if(J!==null){I=N.filterData.substring(N.filterData.indexOf(":")+1,N.filterData.length);O=z(".bootstrap-table-filter-control-"+i(N.field));d(O,"","");J(I,O)}else{throw new SyntaxError('Error. You should use any of these allowed filter data methods: var, json, url. Use like this: var: {key: "value"}')}var K,L;switch(J){case"url":z.ajax({url:I,dataType:"json",success:function(R){for(var Q in R){d(O,Q,R[Q])}v(O)}});break;case"var":K=window[I];for(L in K){d(O,L,K[L])}v(O);break;case"jso":K=JSON.parse(I);for(L in K){d(O,L,K[L])}v(O);break}}});if(F){G.off("keyup","input").on("keyup","input",function(I){if(E.options.searchOnEnterKey&&I.keyCode!==13){return}if(z.inArray(I.keyCode,[37,38,39,40])>-1){return}clearTimeout(I.currentTarget.timeoutId||0);I.currentTarget.timeoutId=setTimeout(function(){E.onColumnSearch(I)},E.options.searchTimeOut)});G.off("change","select").on("change","select",function(I){if(E.options.searchOnEnterKey&&I.keyCode!==13){return}if(z.inArray(I.keyCode,[37,38,39,40])>-1){return}clearTimeout(I.currentTarget.timeoutId||0);I.currentTarget.timeoutId=setTimeout(function(){E.onColumnSearch(I)},E.options.searchTimeOut)});G.off("mouseup","input").on("mouseup","input",function(J){var K=z(this),I=K.val();if(I===""){return}setTimeout(function(){var L=K.val();if(L===""){clearTimeout(J.currentTarget.timeoutId||0);J.currentTarget.timeoutId=setTimeout(function(){E.onColumnSearch(J)},E.options.searchTimeOut)}},1)});if(G.find(".date-filter-control").length>0){z.each(E.columns,function(I,J){if(J.filterControl!==undefined&&J.filterControl.toLowerCase()==="datepicker"){G.find(".date-filter-control.bootstrap-table-filter-control-"+J.field).datepicker(J.filterDatepickerOptions).on("changeDate",function(K){z(f("#%s",K.currentTarget.id)).val(K.currentTarget.value);z(K.currentTarget).keyup()})}})}}else{G.find(".filterControl").hide()}};var C=function(D){D=D===undefined?"left":D.toLowerCase();switch(D){case"left":return"ltr";case"right":return"rtl";case"auto":return"auto";default:return"ltr"}};var x={"var":function(D,G){var E=window[D];for(var F in E){d(G,F,E[F])}v(G)},url:function(D,E){z.ajax({url:D,dataType:"json",success:function(G){for(var F in G){d(E,F,G[F])}v(E)}})},json:function(D,G){var E=JSON.parse(D);for(var F in E){d(G,F,E[F])}v(G)}};var k=function(G,D){var F=Object.keys(G);for(var E=0;E<F.length;E++){if(F[E]===D){return G[D]}}return null};z.extend(z.fn.bootstrapTable.defaults,{filterControl:false,onColumnSearch:function(D,E){return false},filterShowClear:false,alignmentSelectControlOptions:undefined,filterTemplate:{input:function(E,F,D,G){return f('<input type="text" class="form-control bootstrap-table-filter-control-%s" style="width: 100%; visibility: %s" placeholder="%s">',F,D,G)},select:function(F,D,E){return f('<select class="form-control bootstrap-table-filter-control-%s" style="width: 100%; visibility: %s" dir="%s"></select>',D,E,C(F.options.alignmentSelectControlOptions))},datepicker:function(F,D,E){return f('<input type="text" class="form-control date-filter-control bootstrap-table-filter-control-%s" style="width: 100%; visibility: %s">',D,E)}},disableControlWhenSearch:false,searchOnEnterKey:false,valuesFilterControl:[]});z.extend(z.fn.bootstrapTable.columnDefaults,{filterControl:undefined,filterData:undefined,filterDatepickerOptions:undefined,filterStrictSearch:false,filterStartsWithSearch:false,filterControlPlaceholder:""});z.extend(z.fn.bootstrapTable.Constructor.EVENTS,{"column-search.bs.table":"onColumnSearch"});z.extend(z.fn.bootstrapTable.defaults.icons,{clear:"glyphicon-trash icon-clear"});z.extend(z.fn.bootstrapTable.locales,{formatClearFilters:function(){return"Clear Filters"}});z.extend(z.fn.bootstrapTable.defaults,z.fn.bootstrapTable.locales);z.fn.bootstrapTable.methods.push("triggerSearch");var e=z.fn.bootstrapTable.Constructor,c=e.prototype.init,w=e.prototype.initToolbar,b=e.prototype.initHeader,o=e.prototype.initBody,u=e.prototype.initSearch;e.prototype.init=function(){if(this.options.filterControl){var D=this;if(!Object.keys){g()}this.options.valuesFilterControl=[];this.$el.on("reset-view.bs.table",function(){if(!D.options.height){return}if(D.$tableHeader.find("select").length>0||D.$tableHeader.find("input").length>0){return}m(D,D.$tableHeader)}).on("post-header.bs.table",function(){s(D)}).on("post-body.bs.table",function(){if(D.options.height){q(D)}}).on("column-switch.bs.table",function(){s(D)}).on("load-success.bs.table",function(){D.EnableControls(true)}).on("load-error.bs.table",function(){D.EnableControls(true)})}c.apply(this,Array.prototype.slice.apply(arguments))};e.prototype.initToolbar=function(){this.showToolbar=this.showToolbar||this.options.filterControl&&this.options.filterShowClear;w.apply(this,Array.prototype.slice.apply(arguments));if(this.options.filterControl&&this.options.filterShowClear){var D=this.$toolbar.find(">.btn-group"),E=D.find(".filter-show-clear");if(!E.length){E=z([f('<button class="btn btn-%s filter-show-clear" ',this.options.buttonsClass),f('type="button" title="%s">',this.options.formatClearFilters()),f('<i class="%s %s"></i> ',this.options.iconsPrefix,this.options.icons.clear),"</button>"].join("")).appendTo(D);E.off("click").on("click",z.proxy(this.clearFilterControl,this))}}};e.prototype.initHeader=function(){b.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.filterControl){return}m(this,this.$header)};e.prototype.initBody=function(){o.apply(this,Array.prototype.slice.apply(arguments));l(this)};e.prototype.initSearch=function(){u.apply(this,Array.prototype.slice.apply(arguments));if(this.options.sidePagination==="server"){return}var E=this;var D=z.isEmptyObject(E.filterColumnsPartial)?null:E.filterColumnsPartial;E.data=D?z.grep(E.data,function(J,I){for(var H in D){var G=E.columns[E.fieldsColumnsIndex[H]];var F=D[H].toLowerCase();var K=J[H];if(G&&G.searchFormatter){K=z.fn.bootstrapTable.utils.calculateObjectValue(E.header,E.header.formatters[z.inArray(H,E.header.fields)],[K,J,I],K)}if(z.inArray(H,E.header.fields)!==-1){if(typeof K==="string"||typeof K==="number"){if(G.filterStrictSearch){if(K.toString().toLowerCase()===F.toString().toLowerCase()){return true}}else{if(G.filterStartsWithSearch){if((K+"").toLowerCase().indexOf(F)===0){return true}}else{if((K+"").toLowerCase().indexOf(F)!==-1){return true}}}}}}return false}):E.data};e.prototype.initColumnSearch=function(D){j(this);if(D){this.filterColumnsPartial=D;this.updatePagination();for(var E in D){this.trigger("column-search",E,D[E])}}};e.prototype.onColumnSearch=function(F){if(z.inArray(F.keyCode,[37,38,39,40])>-1){return}j(this);var D=z.trim(z(F.currentTarget).val());var E=z(F.currentTarget).closest("[data-field]").data("field");if(z.isEmptyObject(this.filterColumnsPartial)){this.filterColumnsPartial={}}if(D){this.filterColumnsPartial[E]=D}else{delete this.filterColumnsPartial[E]}this.searchText+="randomText";this.options.pageNumber=1;this.EnableControls(false);this.onSearch(F);this.trigger("column-search",E,D)};e.prototype.clearFilterControl=function(){if(this.options.filterControl&&this.options.filterShowClear){var D=this,K=h(),G=y(D),J=G.closest("table"),H=G.find(B(D)),I=D.$toolbar.find(".search input"),E=0;z.each(D.options.valuesFilterControl,function(L,M){M.value=""});s(D);if(H.length>0){this.filterColumnsPartial={};z(H[0]).trigger(H[0].tagName==="INPUT"?"keyup":"change")}else{return}if(I.length>0){D.resetSearch()}if(D.options.sortName!==J.data("sortName")||D.options.sortOrder!==J.data("sortOrder")){var F=G.find(f('[data-field="%s"]',z(H[0]).closest("table").data("sortName")));if(F.length>0){D.onSort(J.data("sortName"),J.data("sortName"));z(F).find(".sortable").trigger("click")}}clearTimeout(E);E=setTimeout(function(){if(K&&K.length>0){z.each(K,function(L,M){if(D.deleteCookie!==undefined){D.deleteCookie(M)}})}},D.options.searchTimeOut)}};e.prototype.triggerSearch=function(){var E=y(this),D=B(this);E.find(D).each(function(){var F=z(this);if(F.is("select")){F.change()}else{F.keyup()}})};e.prototype.EnableControls=function(E){if((this.options.disableControlWhenSearch)&&(this.options.sidePagination==="server")){var D=y(this),F=B(this);if(!E){D.find(F).prop("disabled","disabled")}else{D.find(F).removeProp("disabled")}}}})(jQuery);