!function(d){var g=false;var h=d.fn.bootstrapTable.utils.sprintf;var b=function(n,l,j,p){if(!d("#avdSearchModal_"+p.options.idTable).hasClass("modal")){var o=h('<div id="avdSearchModal%s"  class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">',"_"+p.options.idTable);o+='<div class="modal-dialog modal-xs">';o+=' <div class="modal-content">';o+='  <div class="modal-header">';o+='   <button type="button" class="close" data-dismiss="modal" aria-hidden="true" >&times;</button>';o+=h('   <h4 class="modal-title">%s</h4>',l);o+="  </div>";o+='  <div class="modal-body modal-body-custom">';o+=h('   <div class="container-fluid" id="avdSearchModalContent%s" style="padding-right: 0px;padding-left: 0px;" >',"_"+p.options.idTable);o+="   </div>";o+="  </div>";o+="  </div>";o+=" </div>";o+="</div>";d("body").append(d(o));var m=e(n,j,p),k=0;d("#avdSearchModalContent_"+p.options.idTable).append(m.join(""));d("#"+p.options.idForm).off("keyup blur","input").on("keyup blur","input",function(q){clearTimeout(k);k=setTimeout(function(){p.onColumnAdvancedSearch(q)},p.options.searchTimeOut)});d("#btnCloseAvd_"+p.options.idTable).click(function(){d("#avdSearchModal_"+p.options.idTable).modal("hide")});d("#avdSearchModal_"+p.options.idTable).modal()}else{d("#avdSearchModal_"+p.options.idTable).modal()}};var e=function(m,k,n){var j=[];j.push(h('<form class="form-horizontal" id="%s" action="%s" >',n.options.idForm,n.options.actionForm));for(var l in m){var o=m[l];if(!o.checkbox&&o.visible&&o.searchable){j.push('<div class="form-group">');j.push(h('<label class="col-sm-4 control-label">%s</label>',o.title));j.push('<div class="col-sm-6">');j.push(h('<input type="text" class="form-control input-md" name="%s" placeholder="%s" id="%s">',o.field,o.title,o.field));j.push("</div>");j.push("</div>")}}j.push('<div class="form-group">');j.push('<div class="col-sm-offset-9 col-sm-3">');j.push(h('<button type="button" id="btnCloseAvd%s" class="btn btn-default" >%s</button>',"_"+n.options.idTable,k));j.push("</div>");j.push("</div>");j.push("</form>");return j};d.extend(d.fn.bootstrapTable.defaults,{advancedSearch:false,idForm:"advancedSearch",actionForm:"",idTable:undefined,onColumnAdvancedSearch:function(j,k){return false}});d.extend(d.fn.bootstrapTable.defaults.icons,{advancedSearchIcon:"glyphicon-chevron-down"});d.extend(d.fn.bootstrapTable.Constructor.EVENTS,{"column-advanced-search.bs.table":"onColumnAdvancedSearch"});d.extend(d.fn.bootstrapTable.locales,{formatAdvancedSearch:function(){return"Advanced search"},formatAdvancedCloseButton:function(){return"Close"}});d.extend(d.fn.bootstrapTable.defaults,d.fn.bootstrapTable.locales);var c=d.fn.bootstrapTable.Constructor,i=c.prototype.initToolbar,f=c.prototype.load,a=c.prototype.initSearch;c.prototype.initToolbar=function(){i.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.search){return}if(!this.options.advancedSearch){return}if(!this.options.idTable){return}var k=this,j=[];j.push(h('<div class="columns columns-%s btn-group pull-%s" role="group">',this.options.buttonsAlign,this.options.buttonsAlign));j.push(h('<button class="btn btn-default%s" type="button" name="advancedSearch" aria-label="advanced search" title="%s">',k.options.iconSize===undefined?"":" btn-"+k.options.iconSize,k.options.formatAdvancedSearch()));j.push(h('<i class="%s %s"></i>',k.options.iconsPrefix,k.options.icons.advancedSearchIcon));j.push("</button></div>");k.$toolbar.prepend(j.join(""));k.$toolbar.find('button[name="advancedSearch"]').off("click").on("click",function(){b(k.columns,k.options.formatAdvancedSearch(),k.options.formatAdvancedCloseButton(),k)})};c.prototype.load=function(k){f.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.advancedSearch){return}if(typeof this.options.idTable==="undefined"){}else{if(!g){var j=parseInt(d(".bootstrap-table").height());j+=10;d("#"+this.options.idTable).bootstrapTable("resetView",{height:j});g=true}}};c.prototype.initSearch=function(){a.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.advancedSearch){return}var k=this;var j=d.isEmptyObject(this.filterColumnsPartial)?null:this.filterColumnsPartial;this.data=j?d.grep(this.data,function(p,o){for(var n in j){var m=j[n].toLowerCase();var l=p[n];l=d.fn.bootstrapTable.utils.calculateObjectValue(k.header,k.header.formatters[d.inArray(n,k.header.fields)],[l,p,o],l);if(!(d.inArray(n,k.header.fields)!==-1&&(typeof l==="string"||typeof l==="number")&&(l+"").toLowerCase().indexOf(m)!==-1)){return false}}return true}):this.data};c.prototype.onColumnAdvancedSearch=function(l){var j=d.trim(d(l.currentTarget).val());var k=d(l.currentTarget)[0].id;if(d.isEmptyObject(this.filterColumnsPartial)){this.filterColumnsPartial={}}if(j){this.filterColumnsPartial[k]=j}else{delete this.filterColumnsPartial[k]}this.options.pageNumber=1;this.onSearch(l);this.updatePagination();this.trigger("column-advanced-search",k,j)}}(jQuery);