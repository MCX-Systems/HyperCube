(function(e){var f={sortOrder:"bs.table.sortOrder",sortName:"bs.table.sortName",pageNumber:"bs.table.pageNumber",pageList:"bs.table.pageList",columns:"bs.table.columns",searchText:"bs.table.searchText",filterControl:"bs.table.filterControl"};var d=function(y){var x=y.$header;if(y.options.height){x=y.$tableHeader}return x};var g=function(y){var x="select, input";if(y.options.height){x="table select, table input"}return x};var q=function(){return !!(navigator.cookieEnabled)};var k=function(x,y){var z=-1;for(var A=0;A<y.length;A++){if(x.toLowerCase()===y[A].toLowerCase()){z=A;break}}return z};var p=function(y,x,z){if((!y.options.cookie)||(!q())||(y.options.cookieIdTable==="")){return}if(k(x,y.options.cookiesEnabled)===-1){return}x=y.options.cookieIdTable+"."+x;switch(y.options.cookieStorage){case"cookieStorage":document.cookie=[x,"=",z,"; expires="+w(y.options.cookieExpire),y.options.cookiePath?"; path="+y.options.cookiePath:"",y.options.cookieDomain?"; domain="+y.options.cookieDomain:"",y.options.cookieSecure?"; secure":""].join("");case"localStorage":localStorage.setItem(x,z);break;case"sessionStorage":sessionStorage.setItem(x,z);break;default:return false}return true};var s=function(z,x,A){if(!A){return null}if(k(A,z.options.cookiesEnabled)===-1){return null}A=x+"."+A;switch(z.options.cookieStorage){case"cookieStorage":var B="; "+document.cookie;var y=B.split("; "+A+"=");return y.length===2?y.pop().split(";").shift():null;case"localStorage":return localStorage.getItem(A);case"sessionStorage":return sessionStorage.getItem(A);default:return null}};var c=function(z,y,x){x=y+"."+x;switch(z.options.cookieStorage){case"cookieStorage":document.cookie=[encodeURIComponent(x),"=","; expires=Thu, 01 Jan 1970 00:00:00 GMT",z.options.cookiePath?"; path="+z.options.cookiePath:"",z.options.cookieDomain?"; domain="+z.options.cookieDomain:"",].join("");break;case"localStorage":localStorage.removeItem(x);break;case"sessionStorage":sessionStorage.removeItem(x);break}return true};var w=function(y){var z=y.replace(/[0-9]*/,"");y=y.replace(/[A-Za-z]{1,2}/,"");switch(z.toLowerCase()){case"s":y=+y;break;case"mi":y=y*60;break;case"h":y=y*60*60;break;case"d":y=y*24*60*60;break;case"m":y=y*30*24*60*60;break;case"y":y=y*365*24*60*60;break;default:y=undefined;break}if(!y){return""}var x=new Date();x.setTime(x.getTime()+y*1000);return x.toGMTString()};var b=function(x){setTimeout(function(){var B=JSON.parse(s(x,x.options.cookieIdTable,f.filterControl));if(!x.options.filterControlValuesLoaded&&B){var z={},C=d(x),A=g(x),y=function(E,D){e(D).each(function(G,F){if(F.text!==""){e(E).val(F.text);z[F.field]=F.text}})};C.find(A).each(function(){var E=e(this).closest("[data-field]").data("field"),D=e.grep(B,function(F){return F.field===E});y(this,D)});x.initColumnSearch(z);x.options.filterControlValuesLoaded=true;x.initServer()}},250)};e.extend(e.fn.bootstrapTable.defaults,{cookie:false,cookieExpire:"2h",cookiePath:null,cookieDomain:null,cookieSecure:null,cookieIdTable:"",cookiesEnabled:["bs.table.sortOrder","bs.table.sortName","bs.table.pageNumber","bs.table.pageList","bs.table.columns","bs.table.searchText","bs.table.filterControl"],cookieStorage:"cookieStorage",filterControls:[],filterControlValuesLoaded:false});e.fn.bootstrapTable.methods.push("getCookies");e.fn.bootstrapTable.methods.push("deleteCookie");e.extend(e.fn.bootstrapTable.utils,{setCookie:p,getCookie:s});var m=e.fn.bootstrapTable.Constructor,j=m.prototype.init,i=m.prototype.initTable,h=m.prototype.initServer,o=m.prototype.onSort,t=m.prototype.onPageNumber,u=m.prototype.onPageListChange,v=m.prototype.onPagePre,a=m.prototype.onPageNext,r=m.prototype.toggleColumn,n=m.prototype.selectPage,l=m.prototype.onSearch;m.prototype.init=function(){this.options.filterControls=[];this.options.filterControlValuesLoaded=false;this.options.cookiesEnabled=typeof this.options.cookiesEnabled==="string"?this.options.cookiesEnabled.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.cookiesEnabled;if(this.options.filterControl){var x=this;this.$el.on("column-search.bs.table",function(z,y,B){var C=true;for(var A=0;A<x.options.filterControls.length;A++){if(x.options.filterControls[A].field===y){x.options.filterControls[A].text=B;C=false;break}}if(C){x.options.filterControls.push({field:y,text:B})}p(x,f.filterControl,JSON.stringify(x.options.filterControls))}).on("post-body.bs.table",b(x))}j.apply(this,Array.prototype.slice.apply(arguments))};m.prototype.initServer=function(){var x=this;if(x.options.cookie&&x.options.filterControl&&!x.options.filterControlValuesLoaded){var y=JSON.parse(s(x,x.options.cookieIdTable,f.filterControl));if(y){return}}h.apply(this,Array.prototype.slice.apply(arguments))};m.prototype.initTable=function(){i.apply(this,Array.prototype.slice.apply(arguments));this.initCookie()};m.prototype.initCookie=function(){if(!this.options.cookie){return}if((this.options.cookieIdTable==="")||(this.options.cookieExpire==="")||(!q())){console.error("Configuration error. Please review the cookieIdTable, cookieExpire properties, if those properties are ok, then this browser does not support the cookies");this.options.cookie=false;return}var x=s(this,this.options.cookieIdTable,f.sortOrder),B=s(this,this.options.cookieIdTable,f.sortName),z=s(this,this.options.cookieIdTable,f.pageNumber),C=s(this,this.options.cookieIdTable,f.pageList),A=JSON.parse(s(this,this.options.cookieIdTable,f.columns)),y=s(this,this.options.cookieIdTable,f.searchText);this.options.sortOrder=x?x:this.options.sortOrder;this.options.sortName=B?B:this.options.sortName;this.options.pageNumber=z?+z:this.options.pageNumber;this.options.pageSize=C?C===this.options.formatAllRows()?C:+C:this.options.pageSize;this.options.searchText=y?y:"";if(A){e.each(this.columns,function(D,E){E.visible=e.inArray(E.field,A)!==-1})}};m.prototype.onSort=function(){o.apply(this,Array.prototype.slice.apply(arguments));p(this,f.sortOrder,this.options.sortOrder);p(this,f.sortName,this.options.sortName)};m.prototype.onPageNumber=function(){t.apply(this,Array.prototype.slice.apply(arguments));p(this,f.pageNumber,this.options.pageNumber);return false};m.prototype.onPageListChange=function(){u.apply(this,Array.prototype.slice.apply(arguments));p(this,f.pageList,this.options.pageSize);p(this,f.pageNumber,this.options.pageNumber);return false};m.prototype.onPagePre=function(){v.apply(this,Array.prototype.slice.apply(arguments));p(this,f.pageNumber,this.options.pageNumber);return false};m.prototype.onPageNext=function(){a.apply(this,Array.prototype.slice.apply(arguments));p(this,f.pageNumber,this.options.pageNumber);return false};m.prototype.toggleColumn=function(){r.apply(this,Array.prototype.slice.apply(arguments));var x=[];e.each(this.columns,function(z,y){if(y.visible){x.push(y.field)}});p(this,f.columns,JSON.stringify(x))};m.prototype.selectPage=function(x){n.apply(this,Array.prototype.slice.apply(arguments));p(this,f.pageNumber,x)};m.prototype.onSearch=function(){var x=Array.prototype.slice.apply(arguments);l.apply(this,x);if(e(x[0].currentTarget).parent().hasClass("search")){p(this,f.searchText,this.searchText)}p(this,f.pageNumber,this.options.pageNumber)};m.prototype.getCookies=function(){var x=this;var y={};e.each(f,function(z,A){y[z]=s(x,x.options.cookieIdTable,A);if(z==="columns"){y[z]=JSON.parse(y[z])}});return y};m.prototype.deleteCookie=function(x){if((x==="")||(!q())){return}c(this,this.options.cookieIdTable,f[x])}})(jQuery);