(function(e){var f={sortOrder:"bs.table.sortOrder",sortName:"bs.table.sortName",pageNumber:"bs.table.pageNumber",pageList:"bs.table.pageList",columns:"bs.table.columns",searchText:"bs.table.searchText",filterControl:"bs.table.filterControl"};var d=function(x){var y=x.$header;if(x.options.height){y=x.$tableHeader}return y};var g=function(x){var y="select, input";if(x.options.height){y="table select, table input"}return y};var t=function(){return !!(navigator.cookieEnabled)};var m=function(x,z){var A=-1;for(var y=0;y<z.length;y++){if(x.toLowerCase()===z[y].toLowerCase()){A=y;break}}return A};var s=function(z,y,x){if((!z.options.cookie)||(!t())||(z.options.cookieIdTable==="")){return}if(m(y,z.options.cookiesEnabled)===-1){return}y=z.options.cookieIdTable+"."+y;switch(z.options.cookieStorage){case"cookieStorage":document.cookie=[y,"=",x,"; expires="+o(z.options.cookieExpire),z.options.cookiePath?"; path="+z.options.cookiePath:"",z.options.cookieDomain?"; domain="+z.options.cookieDomain:"",z.options.cookieSecure?"; secure":""].join("");case"localStorage":localStorage.setItem(y,x);break;case"sessionStorage":sessionStorage.setItem(y,x);break;default:return false}return true};var v=function(B,x,y){if(!y){return null}if(m(y,B.options.cookiesEnabled)===-1){return null}y=x+"."+y;switch(B.options.cookieStorage){case"cookieStorage":var z="; "+document.cookie;var A=z.split("; "+y+"=");return A.length===2?A.pop().split(";").shift():null;case"localStorage":return localStorage.getItem(y);case"sessionStorage":return sessionStorage.getItem(y);default:return null}};var c=function(x,z,y){y=z+"."+y;switch(x.options.cookieStorage){case"cookieStorage":document.cookie=[encodeURIComponent(y),"=","; expires=Thu, 01 Jan 1970 00:00:00 GMT",x.options.cookiePath?"; path="+x.options.cookiePath:"",x.options.cookieDomain?"; domain="+x.options.cookieDomain:"",].join("");break;case"localStorage":localStorage.removeItem(y);break;case"sessionStorage":sessionStorage.removeItem(y);break}return true};var o=function(z){var x=z.replace(/[0-9]*/,"");z=z.replace(/[A-Za-z]{1,2}/,"");switch(x.toLowerCase()){case"s":z=+z;break;case"mi":z=z*60;break;case"h":z=z*60*60;break;case"d":z=z*24*60*60;break;case"m":z=z*30*24*60*60;break;case"y":z=z*365*24*60*60;break;default:z=undefined;break}if(!z){return""}var y=new Date();y.setTime(y.getTime()+z*1000);return y.toGMTString()};var b=function(x){setTimeout(function(){var z=JSON.parse(v(x,x.options.cookieIdTable,f.filterControl));if(!x.options.filterControlValuesLoaded&&z){var B={},C=d(x),y=g(x),A=function(E,D){e(D).each(function(G,F){if(F.text!==""){e(E).val(F.text);B[F.field]=F.text}})};C.find(y).each(function(){var E=e(this).closest("[data-field]").data("field"),D=e.grep(z,function(F){return F.field===E});A(this,D)});x.initColumnSearch(B);x.options.filterControlValuesLoaded=true;x.initServer()}},250)};e.extend(e.fn.bootstrapTable.defaults,{cookie:false,cookieExpire:"2h",cookiePath:null,cookieDomain:null,cookieSecure:null,cookieIdTable:"",cookiesEnabled:["bs.table.sortOrder","bs.table.sortName","bs.table.pageNumber","bs.table.pageList","bs.table.columns","bs.table.searchText","bs.table.filterControl"],cookieStorage:"cookieStorage",filterControls:[],filterControlValuesLoaded:false});e.fn.bootstrapTable.methods.push("getCookies");e.fn.bootstrapTable.methods.push("deleteCookie");e.extend(e.fn.bootstrapTable.utils,{setCookie:s,getCookie:v});var p=e.fn.bootstrapTable.Constructor,k=p.prototype.init,i=p.prototype.initTable,h=p.prototype.initServer,r=p.prototype.onSort,w=p.prototype.onPageNumber,j=p.prototype.onPageListChange,l=p.prototype.onPagePre,a=p.prototype.onPageNext,u=p.prototype.toggleColumn,q=p.prototype.selectPage,n=p.prototype.onSearch;p.prototype.init=function(){this.options.filterControls=[];this.options.filterControlValuesLoaded=false;this.options.cookiesEnabled=typeof this.options.cookiesEnabled==="string"?this.options.cookiesEnabled.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.cookiesEnabled;if(this.options.filterControl){var x=this;this.$el.on("column-search.bs.table",function(B,z,A){var C=true;for(var y=0;y<x.options.filterControls.length;y++){if(x.options.filterControls[y].field===z){x.options.filterControls[y].text=A;C=false;break}}if(C){x.options.filterControls.push({field:z,text:A})}s(x,f.filterControl,JSON.stringify(x.options.filterControls))}).on("post-body.bs.table",b(x))}k.apply(this,Array.prototype.slice.apply(arguments))};p.prototype.initServer=function(){var y=this;if(y.options.cookie&&y.options.filterControl&&!y.options.filterControlValuesLoaded){var x=JSON.parse(v(y,y.options.cookieIdTable,f.filterControl));if(x){return}}h.apply(this,Array.prototype.slice.apply(arguments))};p.prototype.initTable=function(){i.apply(this,Array.prototype.slice.apply(arguments));this.initCookie()};p.prototype.initCookie=function(){if(!this.options.cookie){return}if((this.options.cookieIdTable==="")||(this.options.cookieExpire==="")||(!t())){console.error("Configuration error. Please review the cookieIdTable, cookieExpire properties, if those properties are ok, then this browser does not support the cookies");this.options.cookie=false;return}var x=v(this,this.options.cookieIdTable,f.sortOrder),z=v(this,this.options.cookieIdTable,f.sortName),B=v(this,this.options.cookieIdTable,f.pageNumber),C=v(this,this.options.cookieIdTable,f.pageList),y=JSON.parse(v(this,this.options.cookieIdTable,f.columns)),A=v(this,this.options.cookieIdTable,f.searchText);this.options.sortOrder=x?x:this.options.sortOrder;this.options.sortName=z?z:this.options.sortName;this.options.pageNumber=B?+B:this.options.pageNumber;this.options.pageSize=C?C===this.options.formatAllRows()?C:+C:this.options.pageSize;this.options.searchText=A?A:"";if(y){e.each(this.columns,function(D,E){E.visible=e.inArray(E.field,y)!==-1})}};p.prototype.onSort=function(){r.apply(this,Array.prototype.slice.apply(arguments));s(this,f.sortOrder,this.options.sortOrder);s(this,f.sortName,this.options.sortName)};p.prototype.onPageNumber=function(){w.apply(this,Array.prototype.slice.apply(arguments));s(this,f.pageNumber,this.options.pageNumber);return false};p.prototype.onPageListChange=function(){j.apply(this,Array.prototype.slice.apply(arguments));s(this,f.pageList,this.options.pageSize);s(this,f.pageNumber,this.options.pageNumber);return false};p.prototype.onPagePre=function(){l.apply(this,Array.prototype.slice.apply(arguments));s(this,f.pageNumber,this.options.pageNumber);return false};p.prototype.onPageNext=function(){a.apply(this,Array.prototype.slice.apply(arguments));s(this,f.pageNumber,this.options.pageNumber);return false};p.prototype.toggleColumn=function(){u.apply(this,Array.prototype.slice.apply(arguments));var x=[];e.each(this.columns,function(y,z){if(z.visible){x.push(z.field)}});s(this,f.columns,JSON.stringify(x))};p.prototype.selectPage=function(x){q.apply(this,Array.prototype.slice.apply(arguments));s(this,f.pageNumber,x)};p.prototype.onSearch=function(){var x=Array.prototype.slice.apply(arguments);n.apply(this,x);if(e(x[0].currentTarget).parent().hasClass("search")){s(this,f.searchText,this.searchText)}s(this,f.pageNumber,this.options.pageNumber)};p.prototype.getCookies=function(){var y=this;var x={};e.each(f,function(z,A){x[z]=v(y,y.options.cookieIdTable,A);if(z==="columns"){x[z]=JSON.parse(x[z])}});return x};p.prototype.deleteCookie=function(x){if((x==="")||(!t())){return}c(this,this.options.cookieIdTable,f[x])}})(jQuery);