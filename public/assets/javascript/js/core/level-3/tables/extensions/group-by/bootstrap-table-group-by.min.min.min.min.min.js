!function(o){var m,b="data-tt-id",d="data-tt-parent-id",j={},a=undefined;var k=function(t,u){var r=t.$body.find("tr").not("[data-tt-parent-id]");for(var s=0;s<r.length;s++){if(s===u){return o(r[s]).attr("data-tt-id")}}return undefined};var h=function(t,r){var s={};o.each(r,function(u,v){if(!v.IsParent){for(var w in v){if(!isNaN(parseFloat(v[w]))){if(t.columns[t.fieldsColumnsIndex[w]].groupBySumGroup){if(s[w]===undefined){s[w]=0}s[w]+=+v[w]}}}}});return s};var q=function(s,r){m.apply([s,r]);j[b.toString()]=r;if(!s.IsParent){j[d.toString()]=a===undefined?r:a}else{a=r;delete j[d.toString()]}return j};var g=function(){Object.keys=function(r){if(r!==Object(r)){throw new TypeError("Object.keys called on a non-object")}var s=[],t;for(t in r){if(Object.prototype.hasOwnProperty.call(r,t)){s.push(t)}}return s}};var i=function(u,t){var r=[];for(var s=0;s<u.options.groupByField.length;s++){r.push(t[u.options.groupByField[s]])}return r};var c=function(u,v,s){var r={};for(var t=0;t<u.options.groupByField.length;t++){r[u.options.groupByField[t].toString()]=v[s][0][u.options.groupByField[t]]}r.IsParent=true;return r};var p=function(r,t){var s={};o.each(r,function(u,w){var v=JSON.stringify(t(w));s[v]=s[v]||[];s[v].push(w)});return Object.keys(s).map(function(u){return s[u]})};var e=function(t,u){var s=[],w={};var v=p(u,function(x){return i(t,x)});for(var r=0;r<v.length;r++){v[r].unshift(c(t,v,r));if(t.options.groupBySumGroup){w=h(t,v[r]);if(!o.isEmptyObject(w)){v[r].push(w)}}}s=s.concat.apply(s,v);if(!t.options.loaded&&s.length>0){t.options.loaded=true;t.options.originalData=t.options.data;t.options.data=s}return s};o.extend(o.fn.bootstrapTable.defaults,{groupBy:false,groupByField:[],groupBySumGroup:false,groupByInitExpanded:undefined,loaded:false,originalData:undefined});o.fn.bootstrapTable.methods.push("collapseAll","expandAll","refreshGroupByField");o.extend(o.fn.bootstrapTable.COLUMN_DEFAULTS,{groupBySumGroup:false});var n=o.fn.bootstrapTable.Constructor,f=n.prototype.init,l=n.prototype.initData;n.prototype.init=function(){if(!this.options.sortName){if((this.options.groupBy)&&(this.options.groupByField.length>0)){var r=this;if(!Object.keys){o.fn.bootstrapTable.utils.objectKeys()}this.options.loaded=false;this.options.originalData=undefined;m=this.options.rowAttributes;this.options.rowAttributes=q;this.$el.off("post-body.bs.table").on("post-body.bs.table",function(){r.$el.treetable({expandable:true,onNodeExpand:function(){if(r.options.height){r.resetHeader()}},onNodeCollapse:function(){if(r.options.height){r.resetHeader()}}},true);if(r.options.groupByInitExpanded!==undefined){if(typeof r.options.groupByInitExpanded==="number"){r.expandNode(r.options.groupByInitExpanded)}else{if(r.options.groupByInitExpanded.toLowerCase()==="all"){r.expandAll()}}}})}}f.apply(this,Array.prototype.slice.apply(arguments))};n.prototype.initData=function(s,r){if(!this.options.sortName){if((this.options.groupBy)&&(this.options.groupByField.length>0)){this.options.groupByField=typeof this.options.groupByField==="string"?this.options.groupByField.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.groupByField;s=e(this,s?s:this.options.data)}}l.apply(this,[s,r])};n.prototype.expandAll=function(){this.$el.treetable("expandAll")};n.prototype.collapseAll=function(){this.$el.treetable("collapseAll")};n.prototype.expandNode=function(r){r=k(this,r);if(r!==undefined){this.$el.treetable("expandNode",r)}};n.prototype.refreshGroupByField=function(r){if(!o.fn.bootstrapTable.utils.compareObjects(this.options.groupByField,r)){this.options.groupByField=r;this.load(this.options.originalData)}}}(jQuery);