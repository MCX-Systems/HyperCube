!function(d){var g=false;var h=d.fn.bootstrapTable.utils.sprintf;var b=function(p,n,l,k){if(!d("#avdSearchModal_"+k.options.idTable).hasClass("modal")){var j=h('<div id="avdSearchModal%s"  class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">',"_"+k.options.idTable);j+='<div class="modal-dialog modal-xs">';j+=' <div class="modal-content">';j+='  <div class="modal-header">';j+='   <button type="button" class="close" data-dismiss="modal" aria-hidden="true" >&times;</button>';j+=h('   <h4 class="modal-title">%s</h4>',n);j+="  </div>";j+='  <div class="modal-body modal-body-custom">';j+=h('   <div class="container-fluid" id="avdSearchModalContent%s" style="padding-right: 0px;padding-left: 0px;" >',"_"+k.options.idTable);j+="   </div>";j+="  </div>";j+="  </div>";j+=" </div>";j+="</div>";d("body").append(d(j));var o=e(p,l,k),m=0;d("#avdSearchModalContent_"+k.options.idTable).append(o.join(""));d("#"+k.options.idForm).off("keyup blur","input").on("keyup blur","input",function(q){clearTimeout(m);m=setTimeout(function(){k.onColumnAdvancedSearch(q)},k.options.searchTimeOut)});d("#btnCloseAvd_"+k.options.idTable).click(function(){d("#avdSearchModal_"+k.options.idTable).modal("hide")});d("#avdSearchModal_"+k.options.idTable).modal()}else{d("#avdSearchModal_"+k.options.idTable).modal()}};var e=function(o,m,j){var l=[];l.push(h('<form class="form-horizontal" id="%s" action="%s" >',j.options.idForm,j.options.actionForm));for(var n in o){var k=o[n];if(!k.checkbox&&k.visible&&k.searchable){l.push('<div class="form-group">');l.push(h('<label class="col-sm-4 control-label">%s</label>',k.title));l.push('<div class="col-sm-6">');l.push(h('<input type="text" class="form-control input-md" name="%s" placeholder="%s" id="%s">',k.field,k.title,k.field));l.push("</div>");l.push("</div>")}}l.push('<div class="form-group">');l.push('<div class="col-sm-offset-9 col-sm-3">');l.push(h('<button type="button" id="btnCloseAvd%s" class="btn btn-default" >%s</button>',"_"+j.options.idTable,m));l.push("</div>");l.push("</div>");l.push("</form>");return l};d.extend(d.fn.bootstrapTable.defaults,{advancedSearch:false,idForm:"advancedSearch",actionForm:"",idTable:undefined,onColumnAdvancedSearch:function(j,k){return false}});d.extend(d.fn.bootstrapTable.defaults.icons,{advancedSearchIcon:"glyphicon-chevron-down"});d.extend(d.fn.bootstrapTable.Constructor.EVENTS,{"column-advanced-search.bs.table":"onColumnAdvancedSearch"});d.extend(d.fn.bootstrapTable.locales,{formatAdvancedSearch:function(){return"Advanced search"},formatAdvancedCloseButton:function(){return"Close"}});d.extend(d.fn.bootstrapTable.defaults,d.fn.bootstrapTable.locales);var c=d.fn.bootstrapTable.Constructor,i=c.prototype.initToolbar,f=c.prototype.load,a=c.prototype.initSearch;c.prototype.initToolbar=function(){i.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.search){return}if(!this.options.advancedSearch){return}if(!this.options.idTable){return}var k=this,j=[];j.push(h('<div class="columns columns-%s btn-group pull-%s" role="group">',this.options.buttonsAlign,this.options.buttonsAlign));j.push(h('<button class="btn btn-default%s" type="button" name="advancedSearch" aria-label="advanced search" title="%s">',k.options.iconSize===undefined?"":" btn-"+k.options.iconSize,k.options.formatAdvancedSearch()));j.push(h('<i class="%s %s"></i>',k.options.iconsPrefix,k.options.icons.advancedSearchIcon));j.push("</button></div>");k.$toolbar.prepend(j.join(""));k.$toolbar.find('button[name="advancedSearch"]').off("click").on("click",function(){b(k.columns,k.options.formatAdvancedSearch(),k.options.formatAdvancedCloseButton(),k)})};c.prototype.load=function(k){f.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.advancedSearch){return}if(typeof this.options.idTable==="undefined"){}else{if(!g){var j=parseInt(d(".bootstrap-table").height());j+=10;d("#"+this.options.idTable).bootstrapTable("resetView",{height:j});g=true}}};c.prototype.initSearch=function(){a.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.advancedSearch){return}var k=this;var j=d.isEmptyObject(this.filterColumnsPartial)?null:this.filterColumnsPartial;this.data=j?d.grep(this.data,function(m,l){for(var p in j){var o=j[p].toLowerCase();var n=m[p];n=d.fn.bootstrapTable.utils.calculateObjectValue(k.header,k.header.formatters[d.inArray(p,k.header.fields)],[n,m,l],n);if(!(d.inArray(p,k.header.fields)!==-1&&(typeof n==="string"||typeof n==="number")&&(n+"").toLowerCase().indexOf(o)!==-1)){return false}}return true}):this.data};c.prototype.onColumnAdvancedSearch=function(j){var k=d.trim(d(j.currentTarget).val());var l=d(j.currentTarget)[0].id;if(d.isEmptyObject(this.filterColumnsPartial)){this.filterColumnsPartial={}}if(k){this.filterColumnsPartial[l]=k}else{delete this.filterColumnsPartial[l]}this.options.pageNumber=1;this.onSearch(j);this.updatePagination();this.trigger("column-advanced-search",l,k)}}(jQuery);