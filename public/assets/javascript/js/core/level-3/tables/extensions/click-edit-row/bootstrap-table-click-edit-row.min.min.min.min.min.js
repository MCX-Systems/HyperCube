(function(g){g.extend(g.fn.bootstrapTable.defaults,{clickEdit:false});function c(j,i){var h=g("<option />");if(i){g(i).each(function(l,k){h.clone().text(k.idxNum+" "+k.name).val(k.idxNum).appendTo(j)})}else{console.log("Please setup options first!!")}}function e(i,o){var p=[],k=i,q='<button type="button" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button>',l='<button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>';var h=function(){p=[];o.find("td").find('input[type="text"]').each(function(t,s){p.push(g(s).eq(0).val())});o.find("select").each(function(t,s){p.push(g("#"+s.id+" option:selected").val())});g("#table").bootstrapTable("updateRow",{index:k.$data.thId,row:{noOld:p[0],area:o.find("select").eq(0).children(":selected").text(),town:o.find("select").eq(1).children(":selected").text(),address:p[1]}});g("#tooling").remove();k.editing=true;return false};var j=function(){g("#table").bootstrapTable("updateRow",{index:k.$data.thId,row:{},});g("#tooling").remove();k.editing=true;return false};if(k.editing){var r=0;k.editing=false;k.columns.forEach(function(t,s){if(!t.editable){return}switch(t.editable){case"input":var v=g('<div class="editable-input col-md-12 col-sm-12 col-xs-12" style="position: relative;"/>');p.push(o.find("td").eq(t.fieldIndex).text());v.append(g('<input type="text" class="form-control input-sm"/>'));v.append(g('<span class="clear"><i class="fa fa-times-circle-o" aria-hidden="true"></i></span>'));o.find("td").eq(t.fieldIndex).text("").append(v);break;case"select":var u=g('<select id="'+t.field+'">'),w=g.selectArray[t.field];o.find("td").eq(t.fieldIndex).text("").append(u);c(g("#"+t.field),w);break;case"textarea":break;default:console.log(t.fieldIndex+" "+t.editable)}},i);for(var n=0,m=p.length;n<m;n++){o.find('input[type="text"]').eq(n).val(p[n])}o.find("td").last().append('<div id="tooling" class="editable-buttons"/>');g(".clear").on("click",function(){g(this).parent().find("input").val("")});g(q).on("click",h).appendTo("#tooling");g(l).on("click",j).appendTo("#tooling")}}function a(i,k){var j=g(i).find("a").attr("href").match(/\d+/g)[0];var h={treeId:j,oldTreeSerialNo:k[0],adminDivision:k[2],adminUnit:k[3],treeAddr:k[1]};store("data/update",h)}var b=g.fn.bootstrapTable.Constructor,f=b.prototype.initTable,d=b.prototype.initBody;b.prototype.initTable=function(){var h=this;this.$data={};f.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.clickEdit){}};b.prototype.initBody=function(){var i=this;d.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.clickEdit){return}var h=this.$tableBody.find("table");i.editing=true;h.on("click-row.bs.table",function(l,m,j,k){if(k==="no"){return}this.$data.thId=j.data().index;this.$data.itemid=j.data().uniqueid;this.$data.divi=parseInt(m.area);this.$data.town=parseInt(m.town);e(this,j)}.bind(this))}})(jQuery);