(function(n){n.extend(n.fn.bootstrapTable.defaults,{clickEdit:false});function k(c,a){var b=n("<option />");if(a){n(a).each(function(d,e){b.clone().text(e.idxNum+" "+e.name).val(e.idxNum).appendTo(c)})}else{console.log("Please setup options first!!")}}function i(f,v){var u=[],d=f,t='<button type="button" class="btn btn-primary btn-sm editable-submit"><i class="glyphicon glyphicon-ok"></i></button>',c='<button type="button" class="btn btn-default btn-sm editable-cancel"><i class="glyphicon glyphicon-remove"></i></button>';var g=function(){u=[];v.find("td").find('input[type="text"]').each(function(o,p){u.push(n(p).eq(0).val())});v.find("select").each(function(o,p){u.push(n("#"+p.id+" option:selected").val())});n("#table").bootstrapTable("updateRow",{index:d.$data.thId,row:{noOld:u[0],area:v.find("select").eq(0).children(":selected").text(),town:v.find("select").eq(1).children(":selected").text(),address:u[1]}});n("#tooling").remove();d.editing=true;return false};var e=function(){n("#table").bootstrapTable("updateRow",{index:d.$data.thId,row:{},});n("#tooling").remove();d.editing=true;return false};if(d.editing){var s=0;d.editing=false;d.columns.forEach(function(q,r){if(!q.editable){return}switch(q.editable){case"input":var o=n('<div class="editable-input col-md-12 col-sm-12 col-xs-12" style="position: relative;"/>');u.push(v.find("td").eq(q.fieldIndex).text());o.append(n('<input type="text" class="form-control input-sm"/>'));o.append(n('<span class="clear"><i class="fa fa-times-circle-o" aria-hidden="true"></i></span>'));v.find("td").eq(q.fieldIndex).text("").append(o);break;case"select":var p=n('<select id="'+q.field+'">'),y=n.selectArray[q.field];v.find("td").eq(q.fieldIndex).text("").append(p);k(n("#"+q.field),y);break;case"textarea":break;default:console.log(q.fieldIndex+" "+q.editable)}},f);for(var a=0,b=u.length;a<b;a++){v.find('input[type="text"]').eq(a).val(u[a])}v.find("td").last().append('<div id="tooling" class="editable-buttons"/>');n(".clear").on("click",function(){n(this).parent().find("input").val("")});n(t).on("click",g).appendTo("#tooling");n(c).on("click",e).appendTo("#tooling")}}function m(a,c){var d=n(a).find("a").attr("href").match(/\d+/g)[0];var b={treeId:d,oldTreeSerialNo:c[0],adminDivision:c[2],adminUnit:c[3],treeAddr:c[1]};store("data/update",b)}var l=n.fn.bootstrapTable.Constructor,h=l.prototype.initTable,j=l.prototype.initBody;l.prototype.initTable=function(){var a=this;this.$data={};h.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.clickEdit){}};l.prototype.initBody=function(){var a=this;j.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.clickEdit){return}var b=this.$tableBody.find("table");a.editing=true;b.on("click-row.bs.table",function(d,c,f,e){if(e==="no"){return}this.$data.thId=f.data().index;this.$data.itemid=f.data().uniqueid;this.$data.divi=parseInt(c.area);this.$data.town=parseInt(c.town);i(this,f)}.bind(this))}})(jQuery);