!function(o){var l=false;var k=o.fn.bootstrapTable.utils.sprintf;var q=function(e,g,b,c){if(!o("#avdSearchModal_"+c.options.idTable).hasClass("modal")){var d=k('<div id="avdSearchModal%s"  class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">',"_"+c.options.idTable);d+='<div class="modal-dialog modal-xs">';d+=' <div class="modal-content">';d+='  <div class="modal-header">';d+='   <button type="button" class="close" data-dismiss="modal" aria-hidden="true" >&times;</button>';d+=k('   <h4 class="modal-title">%s</h4>',g);d+="  </div>";d+='  <div class="modal-body modal-body-custom">';d+=k('   <div class="container-fluid" id="avdSearchModalContent%s" style="padding-right: 0px;padding-left: 0px;" >',"_"+c.options.idTable);d+="   </div>";d+="  </div>";d+="  </div>";d+=" </div>";d+="</div>";o("body").append(o(d));var f=n(e,b,c),a=0;o("#avdSearchModalContent_"+c.options.idTable).append(f.join(""));o("#"+c.options.idForm).off("keyup blur","input").on("keyup blur","input",function(h){clearTimeout(a);a=setTimeout(function(){c.onColumnAdvancedSearch(h)},c.options.searchTimeOut)});o("#btnCloseAvd_"+c.options.idTable).click(function(){o("#avdSearchModal_"+c.options.idTable).modal("hide")});o("#avdSearchModal_"+c.options.idTable).modal()}else{o("#avdSearchModal_"+c.options.idTable).modal()}};var n=function(e,a,d){var b=[];b.push(k('<form class="form-horizontal" id="%s" action="%s" >',d.options.idForm,d.options.actionForm));for(var f in e){var c=e[f];if(!c.checkbox&&c.visible&&c.searchable){b.push('<div class="form-group">');b.push(k('<label class="col-sm-4 control-label">%s</label>',c.title));b.push('<div class="col-sm-6">');b.push(k('<input type="text" class="form-control input-md" name="%s" placeholder="%s" id="%s">',c.field,c.title,c.field));b.push("</div>");b.push("</div>")}}b.push('<div class="form-group">');b.push('<div class="col-sm-offset-9 col-sm-3">');b.push(k('<button type="button" id="btnCloseAvd%s" class="btn btn-default" >%s</button>',"_"+d.options.idTable,a));b.push("</div>");b.push("</div>");b.push("</form>");return b};o.extend(o.fn.bootstrapTable.defaults,{advancedSearch:false,idForm:"advancedSearch",actionForm:"",idTable:undefined,onColumnAdvancedSearch:function(b,a){return false}});o.extend(o.fn.bootstrapTable.defaults.icons,{advancedSearchIcon:"glyphicon-chevron-down"});o.extend(o.fn.bootstrapTable.Constructor.EVENTS,{"column-advanced-search.bs.table":"onColumnAdvancedSearch"});o.extend(o.fn.bootstrapTable.locales,{formatAdvancedSearch:function(){return"Advanced search"},formatAdvancedCloseButton:function(){return"Close"}});o.extend(o.fn.bootstrapTable.defaults,o.fn.bootstrapTable.locales);var p=o.fn.bootstrapTable.Constructor,j=p.prototype.initToolbar,m=p.prototype.load,r=p.prototype.initSearch;p.prototype.initToolbar=function(){j.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.search){return}if(!this.options.advancedSearch){return}if(!this.options.idTable){return}var a=this,b=[];b.push(k('<div class="columns columns-%s btn-group pull-%s" role="group">',this.options.buttonsAlign,this.options.buttonsAlign));b.push(k('<button class="btn btn-default%s" type="button" name="advancedSearch" aria-label="advanced search" title="%s">',a.options.iconSize===undefined?"":" btn-"+a.options.iconSize,a.options.formatAdvancedSearch()));b.push(k('<i class="%s %s"></i>',a.options.iconsPrefix,a.options.icons.advancedSearchIcon));b.push("</button></div>");a.$toolbar.prepend(b.join(""));a.$toolbar.find('button[name="advancedSearch"]').off("click").on("click",function(){q(a.columns,a.options.formatAdvancedSearch(),a.options.formatAdvancedCloseButton(),a)})};p.prototype.load=function(a){m.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.advancedSearch){return}if(typeof this.options.idTable==="undefined"){}else{if(!l){var b=parseInt(o(".bootstrap-table").height());b+=10;o("#"+this.options.idTable).bootstrapTable("resetView",{height:b});l=true}}};p.prototype.initSearch=function(){r.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.advancedSearch){return}var a=this;var b=o.isEmptyObject(this.filterColumnsPartial)?null:this.filterColumnsPartial;this.data=b?o.grep(this.data,function(c,d){for(var e in b){var f=b[e].toLowerCase();var g=c[e];g=o.fn.bootstrapTable.utils.calculateObjectValue(a.header,a.header.formatters[o.inArray(e,a.header.fields)],[g,c,d],g);if(!(o.inArray(e,a.header.fields)!==-1&&(typeof g==="string"||typeof g==="number")&&(g+"").toLowerCase().indexOf(f)!==-1)){return false}}return true}):this.data};p.prototype.onColumnAdvancedSearch=function(c){var b=o.trim(o(c.currentTarget).val());var a=o(c.currentTarget)[0].id;if(o.isEmptyObject(this.filterColumnsPartial)){this.filterColumnsPartial={}}if(b){this.filterColumnsPartial[a]=b}else{delete this.filterColumnsPartial[a]}this.options.pageNumber=1;this.onSearch(c);this.updatePagination();this.trigger("column-advanced-search",a,b)}}(jQuery);