!function(c){var b,e;var f=function(m){var k=arguments,j=true,l=1;m=m.replace(/%s/g,function(){var n=k[l++];if(typeof n==="undefined"){j=false;return""}return n});return j?m:""};var h=function(j,l){var k={};j.forEach(function(n){var m=l(n);k[m]=k[m]||[];k[m].push(n)});return k};c.extend(c.fn.bootstrapTable.defaults,{groupBy:false,groupByField:""});var a=c.fn.bootstrapTable.Constructor,g=a.prototype.initSort,i=a.prototype.initBody,d=a.prototype.updateSelected;a.prototype.initSort=function(){g.apply(this,Array.prototype.slice.apply(arguments));var j=this;e=[];if((this.options.groupBy)&&(this.options.groupByField!=="")){if((this.options.sortName!=this.options.groupByField)){this.data.sort(function(n,m){return n[j.options.groupByField].localeCompare(m[j.options.groupByField])})}var j=this;var k=h(j.data,function(m){return[m[j.options.groupByField]]});var l=0;c.each(k,function(m,n){e.push({id:l,name:m});n.forEach(function(o){if(!o._data){o._data={}}o._data["parent-index"]=l});l++})}};a.prototype.initBody=function(){b=true;i.apply(this,Array.prototype.slice.apply(arguments));if((this.options.groupBy)&&(this.options.groupByField!=="")){var j=this,l=false,k=0;this.columns.forEach(function(m){if(m.checkbox){l=true}else{if(m.visible){k+=1}}});if(this.options.detailView&&!this.options.cardView){k+=1}e.forEach(function(n){var m=[];m.push(f('<tr class="info groupBy expanded" data-group-index="%s">',n.id));if(j.options.detailView&&!j.options.cardView){m.push('<td class="detail"></td>')}if(l){m.push('<td class="bs-checkbox">','<input name="btSelectGroup" type="checkbox" />',"</td>")}m.push("<td",f(' colspan="%s"',k),">",n.name,"</td>");m.push("</tr>");j.$body.find("tr[data-parent-index="+n.id+"]:first").before(c(m.join("")))});this.$selectGroup=[];this.$body.find('[name="btSelectGroup"]').each(function(){var m=c(this);j.$selectGroup.push({group:m,item:j.$selectItem.filter(function(){return(c(this).closest("tr").data("parent-index")===m.closest("tr").data("group-index"))})})});this.$container.off("click",".groupBy").on("click",".groupBy",function(){c(this).toggleClass("expanded");j.$body.find("tr[data-parent-index="+c(this).closest("tr").data("group-index")+"]").toggleClass("hidden")});this.$container.off("click",'[name="btSelectGroup"]').on("click",'[name="btSelectGroup"]',function(m){m.stopImmediatePropagation();var n=c(this);var o=n.prop("checked");j[o?"checkGroup":"uncheckGroup"](c(this).closest("tr").data("group-index"))})}b=false;this.updateSelected()};a.prototype.updateSelected=function(){if(!b){d.apply(this,Array.prototype.slice.apply(arguments));if((this.options.groupBy)&&(this.options.groupByField!=="")){this.$selectGroup.forEach(function(k){var j=k.item.filter(":enabled").length===k.item.filter(":enabled").filter(":checked").length;k.group.prop("checked",j)})}}};a.prototype.getGroupSelections=function(j){var k=this;return c.grep(this.data,function(l){return(l[k.header.stateField]&&(l._data["parent-index"]===j))})};a.prototype.checkGroup=function(j){this.checkGroup_(j,true)};a.prototype.uncheckGroup=function(j){this.checkGroup_(j,false)};a.prototype.checkGroup_=function(j,l){var m;var k=function(){return(c(this).closest("tr").data("parent-index")===j)};if(!l){m=this.getGroupSelections(j)}this.$selectItem.filter(k).prop("checked",l);this.updateRows();this.updateSelected();if(l){m=this.getGroupSelections(j)}this.trigger(l?"check-all":"uncheck-all",m)}}(jQuery);