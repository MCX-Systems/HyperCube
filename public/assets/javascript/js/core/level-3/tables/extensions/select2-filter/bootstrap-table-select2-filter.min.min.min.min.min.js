!function(a){function b(j){var k=j.$header;return j.options.height&&(k=j.$tableHeader),k}function c(j){if(!a.isEmptyObject(j.filterColumnsPartial)){var k=b(j);a.each(j.columns,function(m,n){var l=j.filterColumnsPartial[n.field];if(n.filter){if(n.filter.setFilterValue){var o=k.find("[data-field="+n.field+"] .filter");n.filter.setFilterValue(o,n.field,l)}else{var p=k.find("[data-filter-field="+n.field+"]");switch(n.filter.type){case"input":p.val(l);case"select":p.val(l).trigger("change")}}}})}}function d(n,o){var k,m,j=!1,l=0;a.each(n.columns,function(q,r){if(k="hidden",m=null,r.visible){if(r.filter){var s=r.filter["class"]?" "+r.filter["class"]:"";if(m=a('<div style="margin: 0px 2px 2px 2px;" class="filter'+s+'">'),r.searchable&&(j=!0,k="visible"),r.filter.template){m.append(r.filter.template(n,r,k))}else{var t=a(n.options.filterTemplate[r.filter.type.toLowerCase()](n,r,k));switch(r.filter.type){case"input":var p=!0;t.off("compositionstart").on("compositionstart",function(){p=!1}),t.off("compositionend").on("compositionend",function(u){p=!0;var v=a(this);clearTimeout(l),l=setTimeout(function(){n.onColumnSearch(u,r.field,v.val())},n.options.searchTimeOut)}),t.off("keyup").on("keyup",function(u){if(p){var v=a(this);clearTimeout(l),l=setTimeout(function(){n.onColumnSearch(u,r.field,v.val())},n.options.searchTimeOut)}}),t.off("mouseup").on("mouseup",function(v){var x=a(this),u=x.val();""!==u&&setTimeout(function(){var w=x.val();""===w&&(clearTimeout(l),l=setTimeout(function(){n.onColumnSearch(v,r.field,w)},n.options.searchTimeOut))},1)});break;case"select":t.on("select2:select",function(u){n.onColumnSearch(u,r.field,a(this).val())}),t.on("select2:unselecting",function(u){var v=a(this);u.preventDefault(),v.val(null).trigger("change"),n.searchText=void 0,n.onColumnSearch(u,r.field,v.val())})}m.append(t)}}else{m=a('<div class="no-filter"></div>')}a.each(o.children().children(),function(v,u){return u=a(u),u.data("field")===r.field?(u.find(".fht-cell").append(m),!1):void 0})}}),j||o.find(".filter").hide()}function e(j){var k=b(j);a.each(j.columns,function(l,m){if(m.filter&&"select"===m.filter.type){var n=k.find('select[data-filter-field="'+m.field+'"]');if(n.length>0&&!n.data().select2){var o={placeholder:"",allowClear:!0,data:m.filter.data,dropdownParent:j.$el.closest(".bootstrap-table")};n.select2(o)}}})}a.extend(a.fn.bootstrapTable.defaults,{filter:!1,filterValues:{},filterTemplate:{input:function(j,k,l){return'<input type="text" class="form-control" data-filter-field="'+k.field+'" style="width: 100%; visibility:'+l+'">'},select:function(j,k,l){return'<select data-filter-field="'+k.field+'" style="width: 100%; visibility:'+l+'"></select>'}},onColumnSearch:function(){return !1}}),a.extend(a.fn.bootstrapTable.COLUMN_DEFAULTS,{filter:void 0}),a.extend(a.fn.bootstrapTable.Constructor.EVENTS,{"column-search.bs.table":"onColumnSearch"});var f=a.fn.bootstrapTable.Constructor,g=f.prototype.init,h=f.prototype.initHeader,i=f.prototype.initSearch;f.prototype.init=function(){if(this.options.filter){var j=this;j.options.filterTemplate&&(j.options.filterTemplate=a.extend({},a.fn.bootstrapTable.defaults.filterTemplate,j.options.filterTemplate)),a.isEmptyObject(j.options.filterValues)||(j.filterColumnsPartial=j.options.filterValues,j.options.filterValues={}),this.$el.on("reset-view.bs.table",function(){j.options.height&&(j.$tableHeader.find("select").length>0||j.$tableHeader.find("input").length>0||d(j,j.$tableHeader))}).on("post-header.bs.table",function(){var k=0;e(j),clearTimeout(k),k=setTimeout(function(){c(j)},j.options.searchTimeOut-1000)}).on("column-switch.bs.table",function(){c(j)})}g.apply(this,Array.prototype.slice.apply(arguments))},f.prototype.initHeader=function(){h.apply(this,Array.prototype.slice.apply(arguments)),this.options.filter&&d(this,this.$header)},f.prototype.initSearch=function(){var j=this,k=j.filterColumnsPartial;"client"===j.options.sidePagination&&(this.data=a.grep(this.data,function(q,l){for(var m in k){var n=j.columns[j.fieldsColumnsIndex[m]],o=k[m].toLowerCase(),p=q[m];if(p=a.fn.bootstrapTable.utils.calculateObjectValue(j.header,j.header.formatters[a.inArray(m,j.header.fields)],[p,q,l],p),n.filterStrictSearch){if(-1===a.inArray(m,j.header.fields)||"string"!=typeof p&&"number"!=typeof p||p.toString().toLowerCase()!==o.toString().toLowerCase()){return !1}}else{if(-1===a.inArray(m,j.header.fields)||"string"!=typeof p&&"number"!=typeof p||-1===(p+"").toLowerCase().indexOf(o)){return !1}}}return !0})),i.apply(this,Array.prototype.slice.apply(arguments))},f.prototype.onColumnSearch=function(l,j,k){a.isEmptyObject(this.filterColumnsPartial)&&(this.filterColumnsPartial={}),k?this.filterColumnsPartial[j]=k:delete this.filterColumnsPartial[j],this.options.pageNumber=1,this.onSearch(l),this.trigger("column-search",j,k)},f.prototype.setSelect2Data=function(l,j){var k=this,m=b(k),n=m.find('select[data-filter-field="'+l+'"]');n.empty(),n.select2({data:j,placeholder:"",allowClear:!0,dropdownParent:k.$el.closest(".bootstrap-table")}),a.each(this.columns,function(o,p){return p.field===l?(p.filter.data=j,!1):void 0})},f.prototype.setFilterValues=function(j){this.filterColumnsPartial=j},a.fn.bootstrapTable.methods.push("setSelect2Data"),a.fn.bootstrapTable.methods.push("setFilterValues")}(jQuery);