!function(F){var G,r="data-tt-id",B="data-tt-parent-id",H={},D=undefined;var v=function(d,c){var b=d.$body.find("tr").not("[data-tt-parent-id]");for(var a=0;a<b.length;a++){if(a===c){return F(b[a]).attr("data-tt-id")}}return undefined};var x=function(c,b){var a={};F.each(b,function(f,e){if(!e.IsParent){for(var d in e){if(!isNaN(parseFloat(e[d]))){if(c.columns[c.fieldsColumnsIndex[d]].groupBySumGroup){if(a[d]===undefined){a[d]=0}a[d]+=+e[d]}}}}});return a};var E=function(a,b){G.apply([a,b]);H[r.toString()]=b;if(!a.IsParent){H[B.toString()]=D===undefined?b:D}else{D=b;delete H[B.toString()]}return H};var y=function(){Object.keys=function(b){if(b!==Object(b)){throw new TypeError("Object.keys called on a non-object")}var a=[],c;for(c in b){if(Object.prototype.hasOwnProperty.call(b,c)){a.push(c)}}return a}};var w=function(c,d){var b=[];for(var a=0;a<c.options.groupByField.length;a++){b.push(d[c.options.groupByField[a]])}return b};var C=function(d,c,a){var b={};for(var e=0;e<d.options.groupByField.length;e++){b[d.options.groupByField[e].toString()]=c[a][0][d.options.groupByField[e]]}b.IsParent=true;return b};var s=function(b,c){var a={};F.each(b,function(f,d){var e=JSON.stringify(c(d));a[e]=a[e]||[];a[e].push(d)});return Object.keys(a).map(function(d){return a[d]})};var A=function(f,e){var a=[],c={};var d=s(e,function(g){return w(f,g)});for(var b=0;b<d.length;b++){d[b].unshift(C(f,d,b));if(f.options.groupBySumGroup){c=x(f,d[b]);if(!F.isEmptyObject(c)){d[b].push(c)}}}a=a.concat.apply(a,d);if(!f.options.loaded&&a.length>0){f.options.loaded=true;f.options.originalData=f.options.data;f.options.data=a}return a};F.extend(F.fn.bootstrapTable.defaults,{groupBy:false,groupByField:[],groupBySumGroup:false,groupByInitExpanded:undefined,loaded:false,originalData:undefined});F.fn.bootstrapTable.methods.push("collapseAll","expandAll","refreshGroupByField");F.extend(F.fn.bootstrapTable.COLUMN_DEFAULTS,{groupBySumGroup:false});var t=F.fn.bootstrapTable.Constructor,z=t.prototype.init,u=t.prototype.initData;t.prototype.init=function(){if(!this.options.sortName){if((this.options.groupBy)&&(this.options.groupByField.length>0)){var a=this;if(!Object.keys){F.fn.bootstrapTable.utils.objectKeys()}this.options.loaded=false;this.options.originalData=undefined;G=this.options.rowAttributes;this.options.rowAttributes=E;this.$el.off("post-body.bs.table").on("post-body.bs.table",function(){a.$el.treetable({expandable:true,onNodeExpand:function(){if(a.options.height){a.resetHeader()}},onNodeCollapse:function(){if(a.options.height){a.resetHeader()}}},true);if(a.options.groupByInitExpanded!==undefined){if(typeof a.options.groupByInitExpanded==="number"){a.expandNode(a.options.groupByInitExpanded)}else{if(a.options.groupByInitExpanded.toLowerCase()==="all"){a.expandAll()}}}})}}z.apply(this,Array.prototype.slice.apply(arguments))};t.prototype.initData=function(a,b){if(!this.options.sortName){if((this.options.groupBy)&&(this.options.groupByField.length>0)){this.options.groupByField=typeof this.options.groupByField==="string"?this.options.groupByField.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.groupByField;a=A(this,a?a:this.options.data)}}u.apply(this,[a,b])};t.prototype.expandAll=function(){this.$el.treetable("expandAll")};t.prototype.collapseAll=function(){this.$el.treetable("collapseAll")};t.prototype.expandNode=function(a){a=v(this,a);if(a!==undefined){this.$el.treetable("expandNode",a)}};t.prototype.refreshGroupByField=function(a){if(!F.fn.bootstrapTable.utils.compareObjects(this.options.groupByField,a)){this.options.groupByField=a;this.load(this.options.originalData)}}}(jQuery);