!function(a){function b(j){var k=j.$header;return j.options.height&&(k=j.$tableHeader),k}function c(j){if(!a.isEmptyObject(j.filterColumnsPartial)){var k=b(j);a.each(j.columns,function(o,p){var n=j.filterColumnsPartial[p.field];if(p.filter){if(p.filter.setFilterValue){var l=k.find("[data-field="+p.field+"] .filter");p.filter.setFilterValue(l,p.field,n)}else{var m=k.find("[data-filter-field="+p.field+"]");switch(p.filter.type){case"input":m.val(n);case"select":m.val(n).trigger("change")}}}})}}function d(j,k){var m,o,l=!1,n=0;a.each(j.columns,function(q,r){if(m="hidden",o=null,r.visible){if(r.filter){var s=r.filter["class"]?" "+r.filter["class"]:"";if(o=a('<div style="margin: 0px 2px 2px 2px;" class="filter'+s+'">'),r.searchable&&(l=!0,m="visible"),r.filter.template){o.append(r.filter.template(j,r,m))}else{var t=a(j.options.filterTemplate[r.filter.type.toLowerCase()](j,r,m));switch(r.filter.type){case"input":var p=!0;t.off("compositionstart").on("compositionstart",function(){p=!1}),t.off("compositionend").on("compositionend",function(u){p=!0;var w=a(this);clearTimeout(n),n=setTimeout(function(){j.onColumnSearch(u,r.field,w.val())},j.options.searchTimeOut)}),t.off("keyup").on("keyup",function(u){if(p){var w=a(this);clearTimeout(n),n=setTimeout(function(){j.onColumnSearch(u,r.field,w.val())},j.options.searchTimeOut)}}),t.off("mouseup").on("mouseup",function(u){var x=a(this),y=x.val();""!==y&&setTimeout(function(){var v=x.val();""===v&&(clearTimeout(n),n=setTimeout(function(){j.onColumnSearch(u,r.field,v)},j.options.searchTimeOut))},1)});break;case"select":t.on("select2:select",function(u){j.onColumnSearch(u,r.field,a(this).val())}),t.on("select2:unselecting",function(u){var w=a(this);u.preventDefault(),w.val(null).trigger("change"),j.searchText=void 0,j.onColumnSearch(u,r.field,w.val())})}o.append(t)}}else{o=a('<div class="no-filter"></div>')}a.each(k.children().children(),function(w,u){return u=a(u),u.data("field")===r.field?(u.find(".fht-cell").append(o),!1):void 0})}}),l||k.find(".filter").hide()}function e(j){var k=b(j);a.each(j.columns,function(n,o){if(o.filter&&"select"===o.filter.type){var l=k.find('select[data-filter-field="'+o.field+'"]');if(l.length>0&&!l.data().select2){var m={placeholder:"",allowClear:!0,data:o.filter.data,dropdownParent:j.$el.closest(".bootstrap-table")};l.select2(m)}}})}a.extend(a.fn.bootstrapTable.defaults,{filter:!1,filterValues:{},filterTemplate:{input:function(k,l,j){return'<input type="text" class="form-control" data-filter-field="'+l.field+'" style="width: 100%; visibility:'+j+'">'},select:function(k,l,j){return'<select data-filter-field="'+l.field+'" style="width: 100%; visibility:'+j+'"></select>'}},onColumnSearch:function(){return !1}}),a.extend(a.fn.bootstrapTable.COLUMN_DEFAULTS,{filter:void 0}),a.extend(a.fn.bootstrapTable.Constructor.EVENTS,{"column-search.bs.table":"onColumnSearch"});var f=a.fn.bootstrapTable.Constructor,g=f.prototype.init,h=f.prototype.initHeader,i=f.prototype.initSearch;f.prototype.init=function(){if(this.options.filter){var j=this;j.options.filterTemplate&&(j.options.filterTemplate=a.extend({},a.fn.bootstrapTable.defaults.filterTemplate,j.options.filterTemplate)),a.isEmptyObject(j.options.filterValues)||(j.filterColumnsPartial=j.options.filterValues,j.options.filterValues={}),this.$el.on("reset-view.bs.table",function(){j.options.height&&(j.$tableHeader.find("select").length>0||j.$tableHeader.find("input").length>0||d(j,j.$tableHeader))}).on("post-header.bs.table",function(){var k=0;e(j),clearTimeout(k),k=setTimeout(function(){c(j)},j.options.searchTimeOut-1000)}).on("column-switch.bs.table",function(){c(j)})}g.apply(this,Array.prototype.slice.apply(arguments))},f.prototype.initHeader=function(){h.apply(this,Array.prototype.slice.apply(arguments)),this.options.filter&&d(this,this.$header)},f.prototype.initSearch=function(){var j=this,k=j.filterColumnsPartial;"client"===j.options.sidePagination&&(this.data=a.grep(this.data,function(m,n){for(var o in k){var p=j.columns[j.fieldsColumnsIndex[o]],q=k[o].toLowerCase(),l=m[o];if(l=a.fn.bootstrapTable.utils.calculateObjectValue(j.header,j.header.formatters[a.inArray(o,j.header.fields)],[l,m,n],l),p.filterStrictSearch){if(-1===a.inArray(o,j.header.fields)||"string"!=typeof l&&"number"!=typeof l||l.toString().toLowerCase()!==q.toString().toLowerCase()){return !1}}else{if(-1===a.inArray(o,j.header.fields)||"string"!=typeof l&&"number"!=typeof l||-1===(l+"").toLowerCase().indexOf(q)){return !1}}}return !0})),i.apply(this,Array.prototype.slice.apply(arguments))},f.prototype.onColumnSearch=function(j,k,l){a.isEmptyObject(this.filterColumnsPartial)&&(this.filterColumnsPartial={}),l?this.filterColumnsPartial[k]=l:delete this.filterColumnsPartial[k],this.options.pageNumber=1,this.onSearch(j),this.trigger("column-search",k,l)},f.prototype.setSelect2Data=function(n,l){var m=this,j=b(m),k=j.find('select[data-filter-field="'+n+'"]');k.empty(),k.select2({data:l,placeholder:"",allowClear:!0,dropdownParent:m.$el.closest(".bootstrap-table")}),a.each(this.columns,function(o,p){return p.field===n?(p.filter.data=l,!1):void 0})},f.prototype.setFilterValues=function(j){this.filterColumnsPartial=j},a.fn.bootstrapTable.methods.push("setSelect2Data"),a.fn.bootstrapTable.methods.push("setFilterValues")}(jQuery);