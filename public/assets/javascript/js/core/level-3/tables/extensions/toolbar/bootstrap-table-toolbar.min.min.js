!function(o){var l=false;var k=o.fn.bootstrapTable.utils.sprintf;var q=function(c,e,g,a){if(!o("#avdSearchModal_"+a.options.idTable).hasClass("modal")){var b=k('<div id="avdSearchModal%s"  class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">',"_"+a.options.idTable);b+='<div class="modal-dialog modal-xs">';b+=' <div class="modal-content">';b+='  <div class="modal-header">';b+='   <button type="button" class="close" data-dismiss="modal" aria-hidden="true" >&times;</button>';b+=k('   <h4 class="modal-title">%s</h4>',e);b+="  </div>";b+='  <div class="modal-body modal-body-custom">';b+=k('   <div class="container-fluid" id="avdSearchModalContent%s" style="padding-right: 0px;padding-left: 0px;" >',"_"+a.options.idTable);b+="   </div>";b+="  </div>";b+="  </div>";b+=" </div>";b+="</div>";o("body").append(o(b));var d=n(c,g,a),f=0;o("#avdSearchModalContent_"+a.options.idTable).append(d.join(""));o("#"+a.options.idForm).off("keyup blur","input").on("keyup blur","input",function(h){clearTimeout(f);f=setTimeout(function(){a.onColumnAdvancedSearch(h)},a.options.searchTimeOut)});o("#btnCloseAvd_"+a.options.idTable).click(function(){o("#avdSearchModal_"+a.options.idTable).modal("hide")});o("#avdSearchModal_"+a.options.idTable).modal()}else{o("#avdSearchModal_"+a.options.idTable).modal()}};var n=function(c,e,b){var f=[];f.push(k('<form class="form-horizontal" id="%s" action="%s" >',b.options.idForm,b.options.actionForm));for(var d in c){var a=c[d];if(!a.checkbox&&a.visible&&a.searchable){f.push('<div class="form-group">');f.push(k('<label class="col-sm-4 control-label">%s</label>',a.title));f.push('<div class="col-sm-6">');f.push(k('<input type="text" class="form-control input-md" name="%s" placeholder="%s" id="%s">',a.field,a.title,a.field));f.push("</div>");f.push("</div>")}}f.push('<div class="form-group">');f.push('<div class="col-sm-offset-9 col-sm-3">');f.push(k('<button type="button" id="btnCloseAvd%s" class="btn btn-default" >%s</button>',"_"+b.options.idTable,e));f.push("</div>");f.push("</div>");f.push("</form>");return f};o.extend(o.fn.bootstrapTable.defaults,{advancedSearch:false,idForm:"advancedSearch",actionForm:"",idTable:undefined,onColumnAdvancedSearch:function(b,a){return false}});o.extend(o.fn.bootstrapTable.defaults.icons,{advancedSearchIcon:"glyphicon-chevron-down"});o.extend(o.fn.bootstrapTable.Constructor.EVENTS,{"column-advanced-search.bs.table":"onColumnAdvancedSearch"});o.extend(o.fn.bootstrapTable.locales,{formatAdvancedSearch:function(){return"Advanced search"},formatAdvancedCloseButton:function(){return"Close"}});o.extend(o.fn.bootstrapTable.defaults,o.fn.bootstrapTable.locales);var p=o.fn.bootstrapTable.Constructor,j=p.prototype.initToolbar,m=p.prototype.load,r=p.prototype.initSearch;p.prototype.initToolbar=function(){j.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.search){return}if(!this.options.advancedSearch){return}if(!this.options.idTable){return}var a=this,b=[];b.push(k('<div class="columns columns-%s btn-group pull-%s" role="group">',this.options.buttonsAlign,this.options.buttonsAlign));b.push(k('<button class="btn btn-default%s" type="button" name="advancedSearch" aria-label="advanced search" title="%s">',a.options.iconSize===undefined?"":" btn-"+a.options.iconSize,a.options.formatAdvancedSearch()));b.push(k('<i class="%s %s"></i>',a.options.iconsPrefix,a.options.icons.advancedSearchIcon));b.push("</button></div>");a.$toolbar.prepend(b.join(""));a.$toolbar.find('button[name="advancedSearch"]').off("click").on("click",function(){q(a.columns,a.options.formatAdvancedSearch(),a.options.formatAdvancedCloseButton(),a)})};p.prototype.load=function(a){m.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.advancedSearch){return}if(typeof this.options.idTable==="undefined"){}else{if(!l){var b=parseInt(o(".bootstrap-table").height());b+=10;o("#"+this.options.idTable).bootstrapTable("resetView",{height:b});l=true}}};p.prototype.initSearch=function(){r.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.advancedSearch){return}var a=this;var b=o.isEmptyObject(this.filterColumnsPartial)?null:this.filterColumnsPartial;this.data=b?o.grep(this.data,function(f,g){for(var c in b){var d=b[c].toLowerCase();var e=f[c];e=o.fn.bootstrapTable.utils.calculateObjectValue(a.header,a.header.formatters[o.inArray(c,a.header.fields)],[e,f,g],e);if(!(o.inArray(c,a.header.fields)!==-1&&(typeof e==="string"||typeof e==="number")&&(e+"").toLowerCase().indexOf(d)!==-1)){return false}}return true}):this.data};p.prototype.onColumnAdvancedSearch=function(b){var a=o.trim(o(b.currentTarget).val());var c=o(b.currentTarget)[0].id;if(o.isEmptyObject(this.filterColumnsPartial)){this.filterColumnsPartial={}}if(a){this.filterColumnsPartial[c]=a}else{delete this.filterColumnsPartial[c]}this.options.pageNumber=1;this.onSearch(b);this.updatePagination();this.trigger("column-advanced-search",c,a)}}(jQuery);